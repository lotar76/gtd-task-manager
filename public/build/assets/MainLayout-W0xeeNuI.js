import{c as v,o,a as t,j as S,k as h,h as Z,l as V,g as r,m as W,n as D,p as H,u as z,r as _,q as T,s as N,b as j,d as O,x as L,F as I,y as U,f as s,t as M,i as q,e as c}from"./app-DjZzWwoi.js";import{u as $}from"./workspace-BLzY3GDa.js";import{r as F,a as G,b as R,c as E}from"./InboxIcon-CavWFSQq.js";function J(f,n){return o(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})])}function K(f,n){return o(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function C(f,n){return o(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const u={__name:"NavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"}},setup(f){const n=f,k=S(),a=$(),p={inbox:E,lightning:R,calendar:K,clock:G,archive:F,folder:C,"calendar-days":J,target:C},x=h(()=>p[n.icon]||C),i=h(()=>{var g;const m=(g=a.currentWorkspace)==null?void 0:g.id;return n.to.replace(":id",m||"1")}),w=h(()=>k.path===i.value);return(m,g)=>{const y=Z("router-link");return o(),V(y,{to:i.value,class:H(["flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",w.value?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"])},{default:r(()=>[(o(),V(W(x.value),{class:"w-5 h-5"})),t("span",null,[D(m.$slots,"default")])]),_:3},8,["to","class"])}}},P={class:"min-h-screen bg-gray-50"},Q={class:"lg:hidden bg-white border-b border-gray-200 sticky top-0 z-30"},X={class:"flex items-center justify-between px-4 py-3"},Y={class:"flex h-screen"},ee={class:"flex flex-col h-full"},te={class:"p-4 border-b border-gray-200"},oe=["value"],se={class:"flex-1 overflow-y-auto p-4"},re={class:"space-y-1"},ne={class:"mt-6 pt-6 border-t border-gray-200"},ae={class:"space-y-1"},ie={class:"hidden lg:block p-4 border-t border-gray-200"},le={class:"flex items-center justify-between"},de={class:"flex items-center space-x-3"},ce={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},ue={class:"text-sm"},ve={class:"font-medium text-gray-900"},pe={class:"flex-1 overflow-auto"},ge={__name:"MainLayout",setup(f){const n=q(),k=z(),a=$(),p=_(!1),x=_(!1),i=_(null),w=h(()=>k.user),m=h(()=>a.workspaces),g=h(()=>{var e;return(((e=w.value)==null?void 0:e.name)||"").split(" ").map(b=>b[0]).join("").toUpperCase().slice(0,2)}),y=()=>{const l=m.value.find(e=>e.id===i.value);l&&(a.setCurrentWorkspace(l),n.push(`/workspaces/${l.id}/inbox`))},B=async()=>{await k.logout(),n.push("/login")};return T(async()=>{await a.fetchWorkspaces(),a.currentWorkspace&&(i.value=a.currentWorkspace.id)}),N(()=>a.currentWorkspace,l=>{l&&(i.value=l.id)}),(l,e)=>{var A;const b=Z("router-view");return o(),v("div",P,[t("header",Q,[t("div",X,[t("button",{onClick:e[0]||(e[0]=d=>p.value=!p.value),class:"text-gray-600"},[...e[4]||(e[4]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e[6]||(e[6]=t("h1",{class:"text-lg font-semibold text-gray-900"},"GTD TODO",-1)),t("button",{onClick:e[1]||(e[1]=d=>x.value=!x.value),class:"text-gray-600"},[...e[5]||(e[5]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])])])]),t("div",Y,[t("aside",{class:H(["fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out",p.value?"translate-x-0":"-translate-x-full lg:translate-x-0"])},[t("div",ee,[e[17]||(e[17]=t("div",{class:"hidden lg:flex items-center justify-between p-6 border-b border-gray-200"},[t("h1",{class:"text-xl font-bold text-gray-900"},"GTD TODO")],-1)),t("div",te,[m.value.length?O((o(),v("select",{key:0,"onUpdate:modelValue":e[2]||(e[2]=d=>i.value=d),onChange:y,class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500"},[(o(!0),v(I,null,U(m.value,d=>(o(),v("option",{key:d.id,value:d.id},M(d.name),9,oe))),128))],544)),[[L,i.value]]):j("",!0)]),t("nav",se,[t("div",re,[s(u,{to:"/workspaces/:id/inbox",icon:"inbox"},{default:r(()=>[...e[7]||(e[7]=[c(" Входящие ",-1)])]),_:1}),s(u,{to:"/workspaces/:id/next-actions",icon:"lightning"},{default:r(()=>[...e[8]||(e[8]=[c(" Следующие действия ",-1)])]),_:1}),s(u,{to:"/workspaces/:id/today",icon:"calendar"},{default:r(()=>[...e[9]||(e[9]=[c(" Сегодня ",-1)])]),_:1}),s(u,{to:"/workspaces/:id/waiting",icon:"clock"},{default:r(()=>[...e[10]||(e[10]=[c(" Ожидание ",-1)])]),_:1}),s(u,{to:"/workspaces/:id/someday",icon:"archive"},{default:r(()=>[...e[11]||(e[11]=[c(" Когда-нибудь ",-1)])]),_:1})]),t("div",ne,[e[15]||(e[15]=t("h3",{class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3"}," Организация ",-1)),t("div",ae,[s(u,{to:"/workspaces/:id/projects",icon:"folder"},{default:r(()=>[...e[12]||(e[12]=[c(" Проекты ",-1)])]),_:1}),s(u,{to:"/workspaces/:id/goals",icon:"target"},{default:r(()=>[...e[13]||(e[13]=[c(" Цели ",-1)])]),_:1}),s(u,{to:"/workspaces/:id/calendar",icon:"calendar-days"},{default:r(()=>[...e[14]||(e[14]=[c(" Календарь ",-1)])]),_:1})])])]),t("div",ie,[t("div",le,[t("div",de,[t("div",ce,M(g.value),1),t("div",ue,[t("div",ve,M((A=w.value)==null?void 0:A.name),1)])]),t("button",{onClick:B,class:"text-gray-400 hover:text-gray-600"},[...e[16]||(e[16]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1)])])])])])],2),p.value?(o(),v("div",{key:0,onClick:e[3]||(e[3]=d=>p.value=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})):j("",!0),t("main",pe,[s(b)])])])}}};export{ge as default};
