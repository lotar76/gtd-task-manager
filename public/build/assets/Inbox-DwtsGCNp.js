import{u as V,_ as U}from"./TaskList-DOwioYR-.js";import{r as d,s as $,q as S,z,l as w,o as r,f as B,g as D,c as p,b as T,a as e,w as M,t as v,d as k,v as _,m as j,F as L,y as O,x as I,T as N,A as q,p as E}from"./app-DjZzWwoi.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as F,a as H,b as G,c as J}from"./InboxIcon-CavWFSQq.js";import"./workspace-BLzY3GDa.js";const K={class:"flex min-h-screen items-center justify-center p-4"},P={class:"flex items-center justify-between p-6 border-b border-gray-200"},Q={class:"text-xl font-semibold text-gray-900"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W={class:"relative"},X={class:"flex items-center space-x-2"},Y={key:0,class:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-lg shadow-lg"},Z=["onClick"],ee={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},te={class:"flex justify-end space-x-3 pt-4"},se=["disabled"],le={__name:"TaskModal",props:{show:{type:Boolean,default:!1},task:{type:Object,default:null},serverError:{type:String,default:""}},emits:["close","submit"],setup(x,{emit:u}){const m=x,b=u,l=d({title:"",description:"",status:"inbox",priority:"medium",due_date:""}),i=d(!1),n=d(""),a=d(!1),f={inbox:{label:"Ð’Ñ…Ð¾Ð´ÑÑ‰Ð¸Ðµ",icon:J},next_action:{label:"Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ",icon:G},waiting:{label:"ÐžÐ¶Ð¸Ð´Ð°Ð½Ð¸Ðµ",icon:H},someday:{label:"ÐšÐ¾Ð³Ð´Ð°-Ð½Ð¸Ð±ÑƒÐ´ÑŒ",icon:F}},C=o=>{l.value.status=o,a.value=!1};$(()=>m.task,o=>{o?l.value={title:o.title||"",description:o.description||"",status:o.status||"inbox",priority:o.priority||"medium",due_date:o.due_date||""}:l.value={title:"",description:"",status:"inbox",priority:"medium",due_date:""},n.value="",a.value=!1},{immediate:!0}),$(()=>m.serverError,o=>{n.value=o,o&&(i.value=!1)}),$(()=>m.show,o=>{o||(a.value=!1,i.value=!1,n.value="")});const h=()=>{n.value="",i.value=!0,b("submit",l.value)},y=o=>{a.value&&!o.target.closest(".relative")&&(a.value=!1)};return S(()=>{document.addEventListener("click",y)}),z(()=>{document.removeEventListener("click",y)}),(o,t)=>(r(),w(q,{to:"body"},[B(N,{name:"modal"},{default:D(()=>[x.show?(r(),p("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[8]||(t[8]=M(s=>o.$emit("close"),["self"]))},[t[17]||(t[17]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",K,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-auto",onClick:t[7]||(t[7]=M(()=>{},["stop"]))},[e("div",P,[e("h3",Q,v(x.task?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ":"ÐÐ¾Ð²Ð°Ñ Ð·Ð°Ð´Ð°Ñ‡Ð°"),1),e("button",{onClick:t[0]||(t[0]=s=>o.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...t[9]||(t[9]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:M(h,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[10]||(t[10]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"}," ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ * ",-1)),k(e("input",{id:"title","onUpdate:modelValue":t[1]||(t[1]=s=>l.value.title=s),type:"text",required:"",class:"input",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸"},null,512),[[_,l.value.title]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ",-1)),k(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=s=>l.value.description=s),rows:"3",class:"input",placeholder:"Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ"},null,512),[[_,l.value.description]])]),e("div",R,[e("div",null,[t[13]||(t[13]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"}," Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ",-1)),e("div",W,[e("button",{type:"button",onClick:t[3]||(t[3]=s=>a.value=!a.value),class:"input w-full flex items-center justify-between"},[e("span",X,[(r(),w(j(f[l.value.status].icon),{class:"w-5 h-5 text-gray-500"})),e("span",null,v(f[l.value.status].label),1)]),t[12]||(t[12]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),a.value?(r(),p("div",Y,[(r(),p(L,null,O(f,(s,c)=>e("button",{key:c,type:"button",onClick:g=>C(c),class:E(["w-full flex items-center space-x-2 px-3 py-2 text-sm hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg transition-colors",l.value.status===c?"bg-primary-50 text-primary-700":"text-gray-700"])},[(r(),w(j(s.icon),{class:"w-5 h-5"})),e("span",null,v(s.label),1)],10,Z)),64))])):T("",!0)])]),e("div",null,[t[15]||(t[15]=e("label",{for:"priority",class:"block text-sm font-medium text-gray-700 mb-2"}," ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ ",-1)),k(e("select",{id:"priority","onUpdate:modelValue":t[4]||(t[4]=s=>l.value.priority=s),class:"input"},[...t[14]||(t[14]=[e("option",{value:"low"},"ÐÐ¸Ð·ÐºÐ¸Ð¹",-1),e("option",{value:"medium"},"Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹",-1),e("option",{value:"high"},"Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹",-1),e("option",{value:"urgent"},"Ð¡Ñ€Ð¾Ñ‡Ð½Ñ‹Ð¹",-1)])],512),[[I,l.value.priority]])])]),e("div",null,[t[16]||(t[16]=e("label",{for:"due_date",class:"block text-sm font-medium text-gray-700 mb-2"}," Ð¡Ñ€Ð¾Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ ",-1)),k(e("input",{id:"due_date","onUpdate:modelValue":t[5]||(t[5]=s=>l.value.due_date=s),type:"date",class:"input"},null,512),[[_,l.value.due_date]])]),n.value?(r(),p("div",ee,v(n.value),1)):T("",!0),e("div",te,[e("button",{type:"button",onClick:t[6]||(t[6]=s=>o.$emit("close")),class:"btn btn-secondary"}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),e("button",{type:"submit",disabled:i.value,class:"btn btn-primary"},v(i.value?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"),9,se)])],32)])])])):T("",!0)]),_:1})]))}},oe=A(le,[["__scopeId","data-v-47831a53"]]),ae={class:"p-4 lg:p-8"},ne={class:"max-w-4xl mx-auto"},ie={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6"},re={class:"flex items-center space-x-3 mt-4 lg:mt-0"},de={key:0,class:"text-center py-12"},be={__name:"Inbox",setup(x){const u=V(),m=d([]),b=d(!1),l=d(!1),i=d(!1),n=d(""),a=async()=>{b.value=!0;try{await u.fetchInbox(l.value),m.value=u.tasks}finally{b.value=!1}},f=()=>{l.value=!l.value,a()},C=t=>{console.log("Task clicked:",t)},h=async t=>{try{t.status==="completed"?await u.updateTask(t.id,{status:"inbox"}):await u.completeTask(t.id),a()}catch(s){console.error("Error toggling task:",s)}},y=async t=>{var s,c;n.value="";try{await u.createTask(t),i.value=!1,await a()}catch(g){console.error("Error creating task:",g),n.value=((c=(s=g.response)==null?void 0:s.data)==null?void 0:c.message)||g.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸"}},o=()=>{i.value=!1,n.value=""};return S(()=>{a()}),(t,s)=>(r(),p("div",ae,[e("div",ne,[e("div",ie,[s[2]||(s[2]=e("div",null,[e("h1",{class:"text-2xl lg:text-3xl font-bold text-gray-900"},"ðŸ“¥ Ð’Ñ…Ð¾Ð´ÑÑ‰Ð¸Ðµ"),e("p",{class:"text-sm text-gray-600 mt-1"},"ÐÐµÐ¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‰Ð¸Ðµ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ñ")],-1)),e("div",re,[e("button",{onClick:f,class:E(["btn",l.value?"btn-primary":"btn-secondary"])},v(l.value?"ÐœÐ¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸":"Ð’ÑÐµ Ð·Ð°Ð´Ð°Ñ‡Ð¸"),3),e("button",{onClick:s[0]||(s[0]=c=>i.value=!0),class:"btn btn-primary"},[...s[1]||(s[1]=[e("svg",{class:"w-5 h-5 lg:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden lg:inline"},"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ",-1)])])])]),b.value?(r(),p("div",de,[...s[3]||(s[3]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(r(),w(U,{key:1,tasks:m.value,onTaskClick:C,onToggleComplete:h},null,8,["tasks"])),B(oe,{show:i.value,"server-error":n.value,onClose:o,onSubmit:y},null,8,["show","server-error"])])]))}};export{be as default};
