import{c as a,a as r,o as n,r as D,k as v,s as Ce,x as De,b as c,f as H,p as g,z as B,t as d,F as b,y as h,D as I,w as k,e as Se}from"./index-CM0cfn01.js";import{u as $e,T as je,a as se}from"./TaskModal-BX9O0CeU.js";import{g as ae,c as ne,d as x}from"./ru-B7JyRvIu.js";import{_ as Oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as He}from"./PlusIcon-CvUAPBkj.js";import"./workspace-CklmZmV4.js";import"./projects-Djv7RB1g.js";function Be(S,w){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function Ne(S,w){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}var ie={exports:{}};(function(S,w){(function(u,m){S.exports=m()})(ne,function(){return function(u,m){m.prototype.isSameOrAfter=function(f,_){return this.isSame(f,_)||this.isAfter(f,_)}}})})(ie);var Ee=ie.exports;const Ae=ae(Ee);var de={exports:{}};(function(S,w){(function(u,m){S.exports=m()})(ne,function(){return function(u,m){m.prototype.isSameOrBefore=function(f,_){return this.isSame(f,_)||this.isBefore(f,_)}}})})(de);var ze=de.exports;const Le=ae(ze),Pe={class:"p-2 sm:p-4 lg:p-8"},Fe={class:"max-w-7xl mx-auto"},Ie={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4 lg:mb-6"},Ve={class:"flex items-center space-x-1 sm:space-x-2 mt-3 lg:mt-0 overflow-x-auto pb-2 lg:pb-0"},We={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-3 sm:p-4 mb-4 lg:mb-6"},Ge={class:"flex items-center justify-between"},Ue={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white text-center px-2"},qe={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Je={class:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700"},Ke={class:"grid grid-cols-7"},Qe=["onClick"],Xe={class:"flex flex-col h-full"},Ze={class:"flex justify-between items-start mb-1"},Re={key:0,class:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-semibold bg-primary-600 text-white rounded-full"},et={key:0,class:"flex-1 flex items-center justify-center"},tt=["onClick"],rt={key:0,class:"hidden lg:block absolute left-1/2 -translate-x-1/2 bottom-full mb-2 z-50 pointer-events-none opacity-0 group-hover/day:opacity-100 transition-opacity duration-150"},ot={class:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg shadow-lg px-3 py-2 whitespace-nowrap max-w-[250px]"},st={key:0,class:"text-gray-400 text-[10px] pt-1"},at={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},nt={class:"hidden lg:block overflow-x-auto"},it={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},dt={class:"font-semibold"},lt={class:"text-xs mt-1"},ut={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},ct={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},mt={class:"text-xs text-gray-500 dark:text-gray-400"},gt={class:"relative"},yt={class:"absolute inset-0"},pt=["onClick"],bt={class:"flex items-start gap-1"},ht=["onClick"],xt={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vt={class:"flex-1 min-w-0"},_t={class:"font-medium truncate"},ft={key:0,class:"text-[10px] opacity-75 mt-0.5"},kt={key:0},wt={key:1},Mt={key:2},Yt={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},Tt={class:"space-y-1 min-w-0"},Ct=["onClick"],Dt={class:"flex items-center gap-1"},St=["onClick"],$t={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},jt={class:"font-medium truncate block"},Ot={class:"lg:hidden overflow-x-auto"},Ht={class:"flex min-w-max"},Bt={class:"mb-3 sticky top-0 bg-inherit pb-2 border-b border-gray-200 dark:border-gray-700"},Nt={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},Et={class:"space-y-2"},At=["onClick"],zt={class:"flex items-start gap-2"},Lt=["onClick"],Pt={key:0,class:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ft={class:"flex-1 min-w-0"},It={class:"font-medium text-sm mb-1"},Vt={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-1 ml-6"},Wt={key:0},Gt={key:1},Ut={key:2},qt={key:0,class:"text-xs text-gray-400 dark:text-gray-500 text-center py-4"},Jt={key:2,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Kt={class:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700"},Qt={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white"},Xt={class:"hidden lg:block overflow-x-auto"},Zt={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},Rt={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},er={class:"text-xs text-gray-500 dark:text-gray-400"},tr={class:"relative"},rr={class:"relative"},or={class:"absolute inset-0"},sr=["onClick"],ar={class:"flex items-start gap-2"},nr=["onClick"],ir={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},dr={class:"flex-1 min-w-0"},lr={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},ur={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},cr={class:"flex flex-wrap items-center gap-2 mt-2"},mr={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},gr={key:0},yr={key:1},pr={key:2},br={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},hr={class:"p-3"},xr={class:"space-y-2"},vr=["onClick"],_r={class:"flex items-start gap-2"},fr=["onClick"],kr={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wr={class:"flex-1 min-w-0"},Mr={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},Yr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},Tr={class:"flex flex-wrap items-center gap-2 mt-2"},Cr={class:"lg:hidden p-3 sm:p-4"},Dr={class:"space-y-2 sm:space-y-3"},Sr=["onClick"],$r={class:"flex items-start gap-3"},jr=["onClick"],Or={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Hr={class:"flex-1 min-w-0"},Br={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},Nr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},Er={class:"flex flex-wrap items-center gap-2 mt-2"},Ar={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},zr={key:0},Lr={key:1},Pr={key:2},Fr={key:0,class:"text-center py-8 sm:py-12 text-gray-500 dark:text-gray-400 text-sm sm:text-base"},Ir={__name:"Calendar",setup(S){x.extend(Ae),x.extend(Le),x.locale("ru");const w=$e(),u=D(x());v(()=>w.loading);const m=D("month"),f=D(!1),_=D(null),z=D(""),L=D(""),V=D(x()),Q=v(()=>{if(m.value==="month")return{start:u.value.startOf("month").subtract(7,"days").format("YYYY-MM-DD"),end:u.value.endOf("month").add(7,"days").format("YYYY-MM-DD")};if(m.value==="week"){const o=u.value.startOf("week");return{start:o.format("YYYY-MM-DD"),end:o.add(6,"day").format("YYYY-MM-DD")}}else{const o=u.value.format("YYYY-MM-DD");return{start:o,end:o}}}),T=v(()=>w.calendarTasks(Q.value.start,Q.value.end)),W=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],le=v(()=>u.value.format("MMMM")),ue=v(()=>u.value.format("YYYY"));v(()=>{if(m.value!=="month"||T.value.length===0)return 0;const o=u.value.startOf("month"),t=u.value.endOf("month");return T.value.filter(i=>{if(!i.due_date||i.status==="completed")return!1;const s=x(i.due_date);return s.isValid()?s.isSameOrAfter(o,"day")&&s.isSameOrBefore(t,"day"):!1}).length});const ce=v(()=>{if(m.value==="month")return`${le.value} ${ue.value}`;if(m.value==="week"){const o=u.value.startOf("week"),t=o.add(6,"day");return o.month()===t.month()?`${o.format("D")} - ${t.format("D MMMM YYYY")}`:`${o.format("D MMM")} - ${t.format("D MMM YYYY")}`}else return u.value.format("D MMMM YYYY")}),N=v(()=>{const o=u.value.startOf("week"),t=[];for(let e=0;e<7;e++){const i=o.add(e,"day"),s=i.format("YYYY-MM-DD"),l=T.value.filter(p=>p.due_date&&x(p.due_date).format("YYYY-MM-DD")===s&&p.status!=="completed");t.push({day:i.date(),monthName:i.format("MMM"),date:s,isToday:i.isSame(x(),"day"),tasks:l})}return t}),P=v(()=>{const o=u.value.format("YYYY-MM-DD");return T.value.filter(t=>t.due_date&&x(t.due_date).format("YYYY-MM-DD")===o&&t.status!=="completed")}),X=v(()=>P.value.filter(o=>o.estimated_time||o.end_time)),me=v(()=>P.value.filter(o=>!o.estimated_time&&!o.end_time)),Z=o=>{if(!o||o.length===0)return Array.from({length:24},(s,l)=>l);let t=23,e=0;o.forEach(s=>{const l=s.estimated_time||s.end_time,p=s.end_time||s.estimated_time;if(l){const M=y(l),[Y]=M.split(":").map(Number);t=Math.min(t,Y),e=Math.max(e,Y)}if(p){const M=y(p),[Y]=M.split(":").map(Number);t=Math.min(t,Y),e=Math.max(e,Y)}}),t=Math.max(0,Math.floor(t)-1),e=Math.min(23,Math.ceil(e)+1);const i=[];for(let s=t;s<=e;s++)i.push(s);return i.length>0?i:Array.from({length:24},(s,l)=>l)},E=v(()=>Z(X.value)),A=v(()=>{const o=N.value.flatMap(t=>ee(t.date));return Z(o)}),ge=v(()=>{const o=[],t=u.value.startOf("month"),e=u.value.endOf("month"),i=t.day()===0?6:t.day()-1;for(let l=i-1;l>=0;l--){const p=t.subtract(l+1,"day");o.push(G(p,!1))}for(let l=0;l<e.date();l++){const p=t.add(l,"day");o.push(G(p,!0))}const s=42-o.length;for(let l=0;l<s;l++){const p=e.add(l+1,"day");o.push(G(p,!1))}return o}),G=(o,t)=>{const e=o.format("YYYY-MM-DD"),i=T.value.filter(s=>s.due_date&&x(s.due_date).format("YYYY-MM-DD")===e&&s.status!=="completed");return{day:o.date(),date:e,currentMonth:t,isToday:o.isSame(x(),"day"),taskCount:i.length,tasks:i}},ye=()=>{m.value==="month"?u.value=u.value.subtract(1,"month"):m.value==="week"?u.value=u.value.subtract(1,"week"):u.value=u.value.subtract(1,"day")},pe=()=>{m.value==="month"?u.value=u.value.add(1,"month"):m.value==="week"?u.value=u.value.add(1,"week"):u.value=u.value.add(1,"day")},y=o=>o?/^\d{2}:\d{2}$/.test(o)?o:o.substring(0,5):"",R=o=>`${o.toString().padStart(2,"0")}:00`,ee=o=>T.value.filter(t=>t.due_date&&x(t.due_date).format("YYYY-MM-DD")===o&&t.status!=="completed"&&(t.estimated_time||t.end_time)),be=o=>T.value.filter(t=>t.due_date&&x(t.due_date).format("YYYY-MM-DD")===o&&t.status!=="completed"&&!t.estimated_time&&!t.end_time),F=(o=null)=>{if(!o||o.length===0)return null;const t=V.value,e=t.hour(),i=t.minute(),s=o[0],l=o[o.length-1];if(e<s||e>l)return null;const p=64,M=e*60+i,Y=s*60,C=(M-Y)/60*p;return Math.max(0,C)},te=(o,t=null)=>{if(!o.estimated_time&&!o.end_time)return{display:"none"};const e=o.estimated_time||o.end_time,i=o.end_time||o.estimated_time;if(!e||!i)return{display:"none"};const s=y(e),l=y(i),[p,M]=s.split(":").map(Number),[Y,C]=l.split(":").map(Number),ke=t&&t.length>0?t[0]:0,oe=64,J=p*60+M,we=ke*60,Me=(J-we)/60*oe;let K=Y*60+C;K<J&&(K+=24*60);const Ye=(K-J)/60*oe,Te=Math.max(Ye,40);return{top:`${Math.max(0,Me)}px`,height:`${Te}px`}},re=o=>{if(!o.estimated_time||!o.end_time)return 0;const t=y(o.estimated_time),e=y(o.end_time);if(!t||!e)return 0;const[i,s]=t.split(":").map(Number),[l,p]=e.split(":").map(Number),M=i*60+s;let C=l*60+p-M;return C<0&&(C+=24*60),C/60},$=o=>{if(o.status==="completed")return"bg-gray-100 dark:bg-gray-700";const t=re(o);return t===0||t<1?"bg-gradient-to-l from-white via-green-50 to-green-100 dark:from-gray-800 dark:via-green-900/20 dark:to-green-900/40":t>=1&&t<2?"bg-gradient-to-l from-white via-orange-50 to-orange-100 dark:from-gray-800 dark:via-orange-900/20 dark:to-orange-900/40":t>=2?"bg-gradient-to-l from-white via-red-50 to-red-100 dark:from-gray-800 dark:via-red-900/20 dark:to-red-900/40":"bg-white dark:bg-gray-800"},he=o=>{const t=[];if(o.isToday&&t.push("ring-2 ring-inset ring-primary-500"),!o.currentMonth)return t.push("bg-gray-50/50 dark:bg-gray-900/30"),t.join(" ");if(o.taskCount===0)return t.push("hover:bg-gray-50 dark:hover:bg-gray-700/50"),t.join(" ");let e=0;return o.tasks.forEach(i=>{const s=re(i);s>e&&(e=s)}),e>=2?t.push("bg-red-50/70 dark:bg-red-900/15 hover:bg-red-100/80 dark:hover:bg-red-900/25"):e>=1?t.push("bg-orange-50/70 dark:bg-orange-900/15 hover:bg-orange-100/80 dark:hover:bg-orange-900/25"):t.push("bg-green-50/70 dark:bg-green-900/15 hover:bg-green-100/80 dark:hover:bg-green-900/25"),t.join(" ")},U=o=>({high:"Высокий",medium:"Средний",low:"Низкий",urgent:"Срочный"})[o]||o,j=o=>{_.value=o,L.value="",f.value=!0},xe=o=>{_.value=null,L.value=o,f.value=!0},ve=o=>{u.value=x(o),m.value="day"},_e=async o=>{var t,e,i,s;z.value="";try{_.value?await w.updateTask(_.value.id,o):await w.createTask(o),f.value=!1,_.value=null}catch(l){console.error("Error saving task:",l);let p="Ошибка при сохранении задачи";(e=(t=l.response)==null?void 0:t.data)!=null&&e.errors?p=Object.values(l.response.data.errors).flat().join(", "):(s=(i=l.response)==null?void 0:i.data)!=null&&s.message&&(p=l.response.data.message),z.value=p}},fe=()=>{f.value=!1,_.value=null,L.value="",z.value=""},O=async o=>{try{o.status==="completed"?await w.updateTask(o.id,{status:"next_action"}):await w.completeTask(o.id)}catch(t){console.error("Error toggling task:",t)}};let q=null;return Ce(()=>{V.value=x(),q=setInterval(()=>{V.value=x()},6e4)}),De(()=>{q&&clearInterval(q)}),(o,t)=>(n(),a("div",Pe,[r("div",Fe,[r("div",Ie,[t[3]||(t[3]=r("div",null,[r("h1",{class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Календарь")],-1)),r("div",Ve,[r("button",{onClick:t[0]||(t[0]=e=>m.value="day"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="day"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," День ",2),r("button",{onClick:t[1]||(t[1]=e=>m.value="week"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="week"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Неделя ",2),r("button",{onClick:t[2]||(t[2]=e=>m.value="month"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="month"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Месяц ",2)])]),r("div",We,[r("div",Ge,[r("button",{onClick:ye,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[H(B(Be),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})]),r("h2",Ue,d(ce.value),1),r("button",{onClick:pe,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[H(B(Ne),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})])])]),m.value==="month"?(n(),a("div",qe,[r("div",Je,[(n(),a(b,null,h(W,e=>r("div",{key:e,class:"text-center py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0"},d(e),1)),64))]),r("div",Ke,[(n(!0),a(b,null,h(ge.value,(e,i)=>(n(),a("div",{key:i,onClick:s=>ve(e.date),class:g(["group/day relative min-h-[60px] sm:min-h-[80px] lg:min-h-[100px] border-b border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-1 sm:p-2 cursor-pointer touch-manipulation transition-colors",he(e)])},[r("div",Xe,[r("div",Ze,[r("span",{class:g(["text-xs sm:text-sm font-medium",{"text-gray-400 dark:text-gray-600":!e.currentMonth,"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-gray-100":e.currentMonth&&!e.isToday}])},d(e.day),3),e.taskCount>0?(n(),a("span",Re,d(e.taskCount),1)):c("",!0)]),e.taskCount===0&&e.currentMonth?(n(),a("div",et,[r("button",{onClick:k(s=>xe(e.date),["stop"]),class:"w-6 h-6 flex items-center justify-center rounded-full text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[H(B(He),{class:"w-4 h-4"})],8,tt)])):c("",!0)]),e.taskCount>0?(n(),a("div",rt,[r("div",ot,[(n(!0),a(b,null,h(e.tasks.slice(0,8),s=>(n(),a("div",{key:s.id,class:"truncate py-0.5"},d(s.title),1))),128)),e.tasks.length>8?(n(),a("div",st," +"+d(e.tasks.length-8)+" ещё ",1)):c("",!0),t[4]||(t[4]=r("div",{class:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900 dark:border-t-gray-700"},null,-1))])])):c("",!0)],10,Qe))),128))])])):c("",!0),m.value==="week"?(n(),a("div",at,[r("div",nt,[r("div",it,[t[5]||(t[5]=r("div",{class:"border-r border-gray-200 dark:border-gray-700"},null,-1)),(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["text-center py-3 text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[r("div",dt,d(W[i]),1),r("div",lt,d(e.day)+" "+d(e.monthName),1)],2))),128))]),r("div",ut,[r("div",ct,[(n(!0),a(b,null,h(A.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[r("span",mt,d(R(e)),1)]))),128))]),(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 relative",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[r("div",gt,[(n(!0),a(b,null,h(A.value,s=>(n(),a("div",{key:s,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),e.isToday&&F(A.value)?(n(),a("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:I({top:F(A.value)+"px"})},[...t[6]||(t[6]=[r("div",{class:"flex items-center"},[r("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),r("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):c("",!0),r("div",yt,[(n(!0),a(b,null,h(ee(e.date),s=>(n(),a("div",{key:s.id,onClick:k(l=>j(s),["stop"]),class:g(["absolute left-1 right-1 rounded cursor-pointer p-1.5 text-xs touch-manipulation border-l-2 shadow-sm z-10",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":$(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]]),style:I(te(s,A.value))},[r("div",bt,[r("button",{onClick:k(l=>O(s),["stop"]),class:g(["flex-shrink-0 w-3.5 h-3.5 mt-0.5 rounded border flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",xt,[...t[7]||(t[7]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,ht),r("div",vt,[r("div",_t,d(s.title),1),s.estimated_time||s.end_time?(n(),a("div",ft,[s.estimated_time&&s.end_time?(n(),a("span",kt,d(y(s.estimated_time))+" - "+d(y(s.end_time)),1)):s.end_time?(n(),a("span",wt," до "+d(y(s.end_time)),1)):s.estimated_time?(n(),a("span",Mt,d(y(s.estimated_time)),1)):c("",!0)])):c("",!0)])])],14,pt))),128))])])],2))),128))]),r("div",Yt,[t[9]||(t[9]=r("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-2"},[r("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Без времени")],-1)),(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-2",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[r("div",Tt,[(n(!0),a(b,null,h(be(e.date),s=>(n(),a("div",{key:s.id,onClick:k(l=>j(s),["stop"]),class:g(["p-1.5 rounded cursor-pointer text-xs touch-manipulation border-l-2 w-full max-w-full overflow-hidden",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":$(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[r("div",Dt,[r("button",{onClick:k(l=>O(s),["stop"]),class:g(["flex-shrink-0 w-3.5 h-3.5 rounded border flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",$t,[...t[8]||(t[8]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,St),r("div",jt,d(s.title),1)])],10,Ct))),128))])],2))),128))])]),r("div",Ot,[r("div",Ht,[(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["w-[280px] min-w-[280px] border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-3",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[r("div",Bt,[r("div",Nt,d(W[i]),1),r("span",{class:g(["text-base font-semibold",{"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-white":!e.isToday}])},d(e.day)+" "+d(e.monthName),3)]),r("div",Et,[(n(!0),a(b,null,h(e.tasks,s=>(n(),a("div",{key:s.id,onClick:l=>j(s),class:g(["p-3 rounded-lg cursor-pointer touch-manipulation border-l-4",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":$(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[r("div",zt,[r("button",{onClick:k(l=>O(s),["stop"]),class:g(["flex-shrink-0 w-4 h-4 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",Pt,[...t[10]||(t[10]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,Lt),r("div",Ft,[r("div",It,d(s.title),1)])]),s.estimated_time||s.end_time?(n(),a("div",Vt,[t[11]||(t[11]=Se(" ⏱ ",-1)),s.estimated_time&&s.end_time?(n(),a("span",Wt,d(y(s.estimated_time))+" - "+d(y(s.end_time)),1)):s.estimated_time?(n(),a("span",Gt,d(y(s.estimated_time)),1)):s.end_time?(n(),a("span",Ut," до "+d(y(s.end_time)),1)):c("",!0)])):c("",!0)],10,At))),128)),e.tasks.length===0?(n(),a("div",qt," Нет задач ")):c("",!0)])],2))),128))])])])):c("",!0),m.value==="day"?(n(),a("div",Jt,[r("div",Kt,[r("h3",Qt,d(u.value.format("D MMMM YYYY")),1)]),r("div",Xt,[r("div",Zt,[r("div",Rt,[(n(!0),a(b,null,h(E.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[r("span",er,d(R(e)),1)]))),128))]),r("div",tr,[r("div",rr,[(n(!0),a(b,null,h(E.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),u.value.isSame(B(x)(),"day")&&F(E.value)?(n(),a("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:I({top:F(E.value)+"px"})},[...t[12]||(t[12]=[r("div",{class:"flex items-center"},[r("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),r("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):c("",!0),r("div",or,[(n(!0),a(b,null,h(X.value,e=>(n(),a("div",{key:e.id,onClick:k(i=>j(e),["stop"]),class:g(["absolute left-2 right-2 rounded-lg cursor-pointer p-2 sm:p-3 border-l-4 shadow-sm z-10 touch-manipulation",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":$(e)+" border-primary-500"]]),style:I(te(e,E.value))},[r("div",ar,[r("button",{onClick:k(i=>O(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",ir,[...t[13]||(t[13]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,nr),r("div",dr,[r("div",lr,d(e.title),1),e.description?(n(),a("div",ur,d(e.description),1)):c("",!0),r("div",cr,[e.estimated_time||e.end_time?(n(),a("span",mr,[H(B(se),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(n(),a("span",gr,d(y(e.estimated_time))+" - "+d(y(e.end_time)),1)):e.estimated_time?(n(),a("span",yr,d(y(e.estimated_time)),1)):e.end_time?(n(),a("span",pr," до "+d(y(e.end_time)),1)):c("",!0)])):c("",!0),r("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(U(e.priority)),3)])])])],14,sr))),128))])])])]),r("div",br,[t[15]||(t[15]=r("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-3"},[r("span",{class:"text-xs text-gray-500 dark:text-gray-400 font-medium"},"Без времени")],-1)),r("div",hr,[r("div",xr,[(n(!0),a(b,null,h(me.value,e=>(n(),a("div",{key:e.id,onClick:k(i=>j(e),["stop"]),class:g(["p-3 rounded-lg cursor-pointer border-l-4 touch-manipulation",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":$(e)+" border-primary-500"]])},[r("div",_r,[r("button",{onClick:k(i=>O(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",kr,[...t[14]||(t[14]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,fr),r("div",wr,[r("div",Mr,d(e.title),1),e.description?(n(),a("div",Yr,d(e.description),1)):c("",!0),r("div",Tr,[r("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(U(e.priority)),3)])])])],10,vr))),128))])])])]),r("div",Cr,[r("div",Dr,[(n(!0),a(b,null,h(P.value,e=>(n(),a("div",{key:e.id,onClick:i=>j(e),class:g(["p-3 sm:p-4 rounded-lg cursor-pointer border-l-4 touch-manipulation active:scale-[0.98] transition-transform",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":$(e)+" border-primary-500"]])},[r("div",$r,[r("button",{onClick:k(i=>O(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",Or,[...t[16]||(t[16]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,jr),r("div",Hr,[r("div",Br,d(e.title),1),e.description?(n(),a("div",Nr,d(e.description),1)):c("",!0),r("div",Er,[e.estimated_time||e.end_time?(n(),a("span",Ar,[H(B(se),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(n(),a("span",zr,d(y(e.estimated_time))+" - "+d(y(e.end_time)),1)):e.estimated_time?(n(),a("span",Lr,d(y(e.estimated_time)),1)):e.end_time?(n(),a("span",Pr," до "+d(y(e.end_time)),1)):c("",!0)])):c("",!0),r("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(U(e.priority)),3)])])])],10,Sr))),128)),P.value.length===0?(n(),a("div",Fr," Нет задач на этот день ")):c("",!0)])])])):c("",!0),H(je,{show:f.value,task:_.value,"server-error":z.value,"default-date":L.value,onClose:fe,onSubmit:_e},null,8,["show","task","server-error","default-date"])])]))}},Zr=Oe(Ir,[["__scopeId","data-v-06ec570f"]]);export{Zr as default};
