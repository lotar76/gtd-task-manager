import{c as a,a as r,o as n,r as C,k as v,s as $e,x as Se,b as c,f as S,p as g,z as E,t as d,F as b,y as h,D as I,w as _,e as je}from"./index-Gx0RcN7_.js";import{u as Oe,T as He,b as ae}from"./TaskModal-Dz0XQxp1.js";import{g as ne,c as ie,d as x,T as Be}from"./TaskView-g910r_0z.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Ne}from"./PlusIcon-BgsUrbug.js";import"./workspace-B6_fDG2E.js";import"./projects-jx7ehzYK.js";function Ae(j,k){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function ze(j,k){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}var de={exports:{}};(function(j,k){(function(u,m){j.exports=m()})(ie,function(){return function(u,m){m.prototype.isSameOrAfter=function(f,w){return this.isSame(f,w)||this.isAfter(f,w)}}})})(de);var Le=de.exports;const Pe=ne(Le);var le={exports:{}};(function(j,k){(function(u,m){j.exports=m()})(ie,function(){return function(u,m){m.prototype.isSameOrBefore=function(f,w){return this.isSame(f,w)||this.isBefore(f,w)}}})})(le);var Ve=le.exports;const Fe=ne(Ve),Ie={class:"p-2 sm:p-4 lg:p-8"},We={class:"max-w-7xl mx-auto"},Ge={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4 lg:mb-6"},Ue={class:"flex items-center space-x-1 sm:space-x-2 mt-3 lg:mt-0 overflow-x-auto pb-2 lg:pb-0"},qe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-3 sm:p-4 mb-4 lg:mb-6"},Je={class:"flex items-center justify-between"},Ke={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white text-center px-2"},Qe={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Xe={class:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700"},Ze={class:"grid grid-cols-7"},Re=["onClick"],et={class:"flex flex-col h-full"},tt={class:"flex justify-between items-start mb-1"},rt={key:0,class:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-semibold bg-primary-600 text-white rounded-full"},ot={key:0,class:"flex-1 flex items-center justify-center"},st=["onClick"],at={key:0,class:"hidden lg:block absolute left-1/2 -translate-x-1/2 bottom-full mb-2 z-50 pointer-events-none opacity-0 group-hover/day:opacity-100 transition-opacity duration-150"},nt={class:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg shadow-lg px-3 py-2 whitespace-nowrap max-w-[250px]"},it={key:0,class:"text-gray-400 text-[10px] pt-1"},dt={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},lt={class:"hidden lg:block overflow-x-auto"},ut={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},ct={class:"font-semibold"},mt={class:"text-xs mt-1"},gt={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},yt={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},pt={class:"text-xs text-gray-500 dark:text-gray-400"},bt={class:"relative"},ht={class:"absolute inset-0"},xt=["onClick"],vt={class:"flex items-start gap-1"},ft=["onClick"],_t={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},kt={class:"flex-1 min-w-0"},wt={class:"font-medium truncate"},Mt={key:0,class:"text-[10px] opacity-75 mt-0.5"},Yt={key:0},Tt={key:1},Ct={key:2},Dt={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},$t={class:"space-y-1 min-w-0"},St=["onClick"],jt={class:"flex items-center gap-1"},Ot=["onClick"],Ht={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Bt={class:"font-medium truncate block"},Et={class:"lg:hidden overflow-x-auto"},Nt={class:"flex min-w-max"},At={class:"mb-3 sticky top-0 bg-inherit pb-2 border-b border-gray-200 dark:border-gray-700"},zt={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},Lt={class:"space-y-2"},Pt=["onClick"],Vt={class:"flex items-start gap-2"},Ft=["onClick"],It={key:0,class:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wt={class:"flex-1 min-w-0"},Gt={class:"font-medium text-sm mb-1"},Ut={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-1 ml-6"},qt={key:0},Jt={key:1},Kt={key:2},Qt={key:0,class:"text-xs text-gray-400 dark:text-gray-500 text-center py-4"},Xt={key:2,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Zt={class:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700"},Rt={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white"},er={class:"hidden lg:block overflow-x-auto"},tr={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},rr={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},or={class:"text-xs text-gray-500 dark:text-gray-400"},sr={class:"relative"},ar={class:"relative"},nr={class:"absolute inset-0"},ir=["onClick"],dr={class:"flex items-start gap-2"},lr=["onClick"],ur={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},cr={class:"flex-1 min-w-0"},mr={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},gr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},yr={class:"flex flex-wrap items-center gap-2 mt-2"},pr={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},br={key:0},hr={key:1},xr={key:2},vr={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},fr={class:"p-3"},_r={class:"space-y-2"},kr=["onClick"],wr={class:"flex items-start gap-2"},Mr=["onClick"],Yr={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Tr={class:"flex-1 min-w-0"},Cr={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},Dr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},$r={class:"flex flex-wrap items-center gap-2 mt-2"},Sr={class:"lg:hidden p-3 sm:p-4"},jr={class:"space-y-2 sm:space-y-3"},Or=["onClick"],Hr={class:"flex items-start gap-3"},Br=["onClick"],Er={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Nr={class:"flex-1 min-w-0"},Ar={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},zr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},Lr={class:"flex flex-wrap items-center gap-2 mt-2"},Pr={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},Vr={key:0},Fr={key:1},Ir={key:2},Wr={key:0,class:"text-center py-8 sm:py-12 text-gray-500 dark:text-gray-400 text-sm sm:text-base"},Gr={__name:"Calendar",setup(j){x.extend(Pe),x.extend(Fe),x.locale("ru");const k=Oe(),u=C(x());v(()=>k.loading);const m=C("month"),f=C(!1),w=C(!1),T=C(null),L=C(""),P=C(""),W=C(x()),X=v(()=>{if(m.value==="month")return{start:u.value.startOf("month").subtract(7,"days").format("YYYY-MM-DD"),end:u.value.endOf("month").add(7,"days").format("YYYY-MM-DD")};if(m.value==="week"){const o=u.value.startOf("week");return{start:o.format("YYYY-MM-DD"),end:o.add(6,"day").format("YYYY-MM-DD")}}else{const o=u.value.format("YYYY-MM-DD");return{start:o,end:o}}}),D=v(()=>k.calendarTasks(X.value.start,X.value.end)),G=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],ue=v(()=>u.value.format("MMMM")),ce=v(()=>u.value.format("YYYY"));v(()=>{if(m.value!=="month"||D.value.length===0)return 0;const o=u.value.startOf("month"),t=u.value.endOf("month");return D.value.filter(i=>{if(!i.due_date||i.status==="completed")return!1;const s=x(i.due_date);return s.isValid()?s.isSameOrAfter(o,"day")&&s.isSameOrBefore(t,"day"):!1}).length});const me=v(()=>{if(m.value==="month")return`${ue.value} ${ce.value}`;if(m.value==="week"){const o=u.value.startOf("week"),t=o.add(6,"day");return o.month()===t.month()?`${o.format("D")} - ${t.format("D MMMM YYYY")}`:`${o.format("D MMM")} - ${t.format("D MMM YYYY")}`}else return u.value.format("D MMMM YYYY")}),N=v(()=>{const o=u.value.startOf("week"),t=[];for(let e=0;e<7;e++){const i=o.add(e,"day"),s=i.format("YYYY-MM-DD"),l=D.value.filter(p=>p.due_date&&x(p.due_date).format("YYYY-MM-DD")===s&&p.status!=="completed");t.push({day:i.date(),monthName:i.format("MMM"),date:s,isToday:i.isSame(x(),"day"),tasks:l})}return t}),V=v(()=>{const o=u.value.format("YYYY-MM-DD");return D.value.filter(t=>t.due_date&&x(t.due_date).format("YYYY-MM-DD")===o&&t.status!=="completed")}),Z=v(()=>V.value.filter(o=>o.estimated_time||o.end_time)),ge=v(()=>V.value.filter(o=>!o.estimated_time&&!o.end_time)),R=o=>{if(!o||o.length===0)return Array.from({length:24},(s,l)=>l);let t=23,e=0;o.forEach(s=>{const l=s.estimated_time||s.end_time,p=s.end_time||s.estimated_time;if(l){const M=y(l),[Y]=M.split(":").map(Number);t=Math.min(t,Y),e=Math.max(e,Y)}if(p){const M=y(p),[Y]=M.split(":").map(Number);t=Math.min(t,Y),e=Math.max(e,Y)}}),t=Math.max(0,Math.floor(t)-1),e=Math.min(23,Math.ceil(e)+1);const i=[];for(let s=t;s<=e;s++)i.push(s);return i.length>0?i:Array.from({length:24},(s,l)=>l)},A=v(()=>R(Z.value)),z=v(()=>{const o=N.value.flatMap(t=>te(t.date));return R(o)}),ye=v(()=>{const o=[],t=u.value.startOf("month"),e=u.value.endOf("month"),i=t.day()===0?6:t.day()-1;for(let l=i-1;l>=0;l--){const p=t.subtract(l+1,"day");o.push(U(p,!1))}for(let l=0;l<e.date();l++){const p=t.add(l,"day");o.push(U(p,!0))}const s=42-o.length;for(let l=0;l<s;l++){const p=e.add(l+1,"day");o.push(U(p,!1))}return o}),U=(o,t)=>{const e=o.format("YYYY-MM-DD"),i=D.value.filter(s=>s.due_date&&x(s.due_date).format("YYYY-MM-DD")===e&&s.status!=="completed");return{day:o.date(),date:e,currentMonth:t,isToday:o.isSame(x(),"day"),taskCount:i.length,tasks:i}},pe=()=>{m.value==="month"?u.value=u.value.subtract(1,"month"):m.value==="week"?u.value=u.value.subtract(1,"week"):u.value=u.value.subtract(1,"day")},be=()=>{m.value==="month"?u.value=u.value.add(1,"month"):m.value==="week"?u.value=u.value.add(1,"week"):u.value=u.value.add(1,"day")},y=o=>o?/^\d{2}:\d{2}$/.test(o)?o:o.substring(0,5):"",ee=o=>`${o.toString().padStart(2,"0")}:00`,te=o=>D.value.filter(t=>t.due_date&&x(t.due_date).format("YYYY-MM-DD")===o&&t.status!=="completed"&&(t.estimated_time||t.end_time)),he=o=>D.value.filter(t=>t.due_date&&x(t.due_date).format("YYYY-MM-DD")===o&&t.status!=="completed"&&!t.estimated_time&&!t.end_time),F=(o=null)=>{if(!o||o.length===0)return null;const t=W.value,e=t.hour(),i=t.minute(),s=o[0],l=o[o.length-1];if(e<s||e>l)return null;const p=64,M=e*60+i,Y=s*60,$=(M-Y)/60*p;return Math.max(0,$)},re=(o,t=null)=>{if(!o.estimated_time&&!o.end_time)return{display:"none"};const e=o.estimated_time||o.end_time,i=o.end_time||o.estimated_time;if(!e||!i)return{display:"none"};const s=y(e),l=y(i),[p,M]=s.split(":").map(Number),[Y,$]=l.split(":").map(Number),Me=t&&t.length>0?t[0]:0,se=64,K=p*60+M,Ye=Me*60,Te=(K-Ye)/60*se;let Q=Y*60+$;Q<K&&(Q+=24*60);const Ce=(Q-K)/60*se,De=Math.max(Ce,40);return{top:`${Math.max(0,Te)}px`,height:`${De}px`}},oe=o=>{if(!o.estimated_time||!o.end_time)return 0;const t=y(o.estimated_time),e=y(o.end_time);if(!t||!e)return 0;const[i,s]=t.split(":").map(Number),[l,p]=e.split(":").map(Number),M=i*60+s;let $=l*60+p-M;return $<0&&($+=24*60),$/60},O=o=>{if(o.status==="completed")return"bg-gray-100 dark:bg-gray-700";const t=oe(o);return t===0||t<1?"bg-gradient-to-l from-white via-green-50 to-green-100 dark:from-gray-800 dark:via-green-900/20 dark:to-green-900/40":t>=1&&t<2?"bg-gradient-to-l from-white via-orange-50 to-orange-100 dark:from-gray-800 dark:via-orange-900/20 dark:to-orange-900/40":t>=2?"bg-gradient-to-l from-white via-red-50 to-red-100 dark:from-gray-800 dark:via-red-900/20 dark:to-red-900/40":"bg-white dark:bg-gray-800"},xe=o=>{const t=[];if(o.isToday&&t.push("ring-2 ring-inset ring-primary-500"),!o.currentMonth)return t.push("bg-gray-50/50 dark:bg-gray-900/30"),t.join(" ");if(o.taskCount===0)return t.push("hover:bg-gray-50 dark:hover:bg-gray-700/50"),t.join(" ");let e=0;return o.tasks.forEach(i=>{const s=oe(i);s>e&&(e=s)}),e>=2?t.push("bg-red-50/70 dark:bg-red-900/15 hover:bg-red-100/80 dark:hover:bg-red-900/25"):e>=1?t.push("bg-orange-50/70 dark:bg-orange-900/15 hover:bg-orange-100/80 dark:hover:bg-orange-900/25"):t.push("bg-green-50/70 dark:bg-green-900/15 hover:bg-green-100/80 dark:hover:bg-green-900/25"),t.join(" ")},q=o=>({high:"Высокий",medium:"Средний",low:"Низкий",urgent:"Срочный"})[o]||o,H=o=>{T.value=o,P.value="",w.value=!0},ve=()=>{w.value=!1,f.value=!0},fe=o=>{T.value=null,P.value=o,f.value=!0},_e=o=>{u.value=x(o),m.value="day"},ke=async o=>{var t,e,i,s;L.value="";try{T.value?await k.updateTask(T.value.id,o):await k.createTask(o),f.value=!1,T.value=null}catch(l){console.error("Error saving task:",l);let p="Ошибка при сохранении задачи";(e=(t=l.response)==null?void 0:t.data)!=null&&e.errors?p=Object.values(l.response.data.errors).flat().join(", "):(s=(i=l.response)==null?void 0:i.data)!=null&&s.message&&(p=l.response.data.message),L.value=p}},we=()=>{f.value=!1,T.value=null,P.value="",L.value=""},B=async o=>{try{o.status==="completed"?await k.updateTask(o.id,{status:"next_action"}):await k.completeTask(o.id)}catch(t){console.error("Error toggling task:",t)}};let J=null;return $e(()=>{W.value=x(),J=setInterval(()=>{W.value=x()},6e4)}),Se(()=>{J&&clearInterval(J)}),(o,t)=>(n(),a("div",Ie,[r("div",We,[r("div",Ge,[t[4]||(t[4]=r("div",null,[r("h1",{class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Календарь")],-1)),r("div",Ue,[r("button",{onClick:t[0]||(t[0]=e=>m.value="day"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="day"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," День ",2),r("button",{onClick:t[1]||(t[1]=e=>m.value="week"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="week"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Неделя ",2),r("button",{onClick:t[2]||(t[2]=e=>m.value="month"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="month"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Месяц ",2)])]),r("div",qe,[r("div",Je,[r("button",{onClick:pe,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[S(E(Ae),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})]),r("h2",Ke,d(me.value),1),r("button",{onClick:be,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[S(E(ze),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})])])]),m.value==="month"?(n(),a("div",Qe,[r("div",Xe,[(n(),a(b,null,h(G,e=>r("div",{key:e,class:"text-center py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0"},d(e),1)),64))]),r("div",Ze,[(n(!0),a(b,null,h(ye.value,(e,i)=>(n(),a("div",{key:i,onClick:s=>_e(e.date),class:g(["group/day relative min-h-[60px] sm:min-h-[80px] lg:min-h-[100px] border-b border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-1 sm:p-2 cursor-pointer touch-manipulation transition-colors",xe(e)])},[r("div",et,[r("div",tt,[r("span",{class:g(["text-xs sm:text-sm font-medium",{"text-gray-400 dark:text-gray-600":!e.currentMonth,"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-gray-100":e.currentMonth&&!e.isToday}])},d(e.day),3),e.taskCount>0?(n(),a("span",rt,d(e.taskCount),1)):c("",!0)]),e.taskCount===0&&e.currentMonth?(n(),a("div",ot,[r("button",{onClick:_(s=>fe(e.date),["stop"]),class:"w-6 h-6 flex items-center justify-center rounded-full text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[S(E(Ne),{class:"w-4 h-4"})],8,st)])):c("",!0)]),e.taskCount>0?(n(),a("div",at,[r("div",nt,[(n(!0),a(b,null,h(e.tasks.slice(0,8),s=>(n(),a("div",{key:s.id,class:"truncate py-0.5"},d(s.title),1))),128)),e.tasks.length>8?(n(),a("div",it," +"+d(e.tasks.length-8)+" ещё ",1)):c("",!0),t[5]||(t[5]=r("div",{class:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900 dark:border-t-gray-700"},null,-1))])])):c("",!0)],10,Re))),128))])])):c("",!0),m.value==="week"?(n(),a("div",dt,[r("div",lt,[r("div",ut,[t[6]||(t[6]=r("div",{class:"border-r border-gray-200 dark:border-gray-700"},null,-1)),(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["text-center py-3 text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[r("div",ct,d(G[i]),1),r("div",mt,d(e.day)+" "+d(e.monthName),1)],2))),128))]),r("div",gt,[r("div",yt,[(n(!0),a(b,null,h(z.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[r("span",pt,d(ee(e)),1)]))),128))]),(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 relative",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[r("div",bt,[(n(!0),a(b,null,h(z.value,s=>(n(),a("div",{key:s,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),e.isToday&&F(z.value)?(n(),a("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:I({top:F(z.value)+"px"})},[...t[7]||(t[7]=[r("div",{class:"flex items-center"},[r("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),r("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):c("",!0),r("div",ht,[(n(!0),a(b,null,h(te(e.date),s=>(n(),a("div",{key:s.id,onClick:_(l=>H(s),["stop"]),class:g(["absolute left-1 right-1 rounded cursor-pointer p-1.5 text-xs touch-manipulation border-l-2 shadow-sm z-10",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":O(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]]),style:I(re(s,z.value))},[r("div",vt,[r("button",{onClick:_(l=>B(s),["stop"]),class:g(["flex-shrink-0 w-3.5 h-3.5 mt-0.5 rounded border flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",_t,[...t[8]||(t[8]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,ft),r("div",kt,[r("div",wt,d(s.title),1),s.estimated_time||s.end_time?(n(),a("div",Mt,[s.estimated_time&&s.end_time?(n(),a("span",Yt,d(y(s.estimated_time))+" - "+d(y(s.end_time)),1)):s.end_time?(n(),a("span",Tt," до "+d(y(s.end_time)),1)):s.estimated_time?(n(),a("span",Ct,d(y(s.estimated_time)),1)):c("",!0)])):c("",!0)])])],14,xt))),128))])])],2))),128))]),r("div",Dt,[t[10]||(t[10]=r("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-2"},[r("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Без времени")],-1)),(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-2",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[r("div",$t,[(n(!0),a(b,null,h(he(e.date),s=>(n(),a("div",{key:s.id,onClick:_(l=>H(s),["stop"]),class:g(["p-1.5 rounded cursor-pointer text-xs touch-manipulation border-l-2 w-full max-w-full overflow-hidden",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":O(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[r("div",jt,[r("button",{onClick:_(l=>B(s),["stop"]),class:g(["flex-shrink-0 w-3.5 h-3.5 rounded border flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",Ht,[...t[9]||(t[9]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,Ot),r("div",Bt,d(s.title),1)])],10,St))),128))])],2))),128))])]),r("div",Et,[r("div",Nt,[(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["w-[280px] min-w-[280px] border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-3",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[r("div",At,[r("div",zt,d(G[i]),1),r("span",{class:g(["text-base font-semibold",{"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-white":!e.isToday}])},d(e.day)+" "+d(e.monthName),3)]),r("div",Lt,[(n(!0),a(b,null,h(e.tasks,s=>(n(),a("div",{key:s.id,onClick:l=>H(s),class:g(["p-3 rounded-lg cursor-pointer touch-manipulation border-l-4",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":O(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[r("div",Vt,[r("button",{onClick:_(l=>B(s),["stop"]),class:g(["flex-shrink-0 w-4 h-4 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",It,[...t[11]||(t[11]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,Ft),r("div",Wt,[r("div",Gt,d(s.title),1)])]),s.estimated_time||s.end_time?(n(),a("div",Ut,[t[12]||(t[12]=je(" ⏱ ",-1)),s.estimated_time&&s.end_time?(n(),a("span",qt,d(y(s.estimated_time))+" - "+d(y(s.end_time)),1)):s.estimated_time?(n(),a("span",Jt,d(y(s.estimated_time)),1)):s.end_time?(n(),a("span",Kt," до "+d(y(s.end_time)),1)):c("",!0)])):c("",!0)],10,Pt))),128)),e.tasks.length===0?(n(),a("div",Qt," Нет задач ")):c("",!0)])],2))),128))])])])):c("",!0),m.value==="day"?(n(),a("div",Xt,[r("div",Zt,[r("h3",Rt,d(u.value.format("D MMMM YYYY")),1)]),r("div",er,[r("div",tr,[r("div",rr,[(n(!0),a(b,null,h(A.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[r("span",or,d(ee(e)),1)]))),128))]),r("div",sr,[r("div",ar,[(n(!0),a(b,null,h(A.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),u.value.isSame(E(x)(),"day")&&F(A.value)?(n(),a("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:I({top:F(A.value)+"px"})},[...t[13]||(t[13]=[r("div",{class:"flex items-center"},[r("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),r("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):c("",!0),r("div",nr,[(n(!0),a(b,null,h(Z.value,e=>(n(),a("div",{key:e.id,onClick:_(i=>H(e),["stop"]),class:g(["absolute left-2 right-2 rounded-lg cursor-pointer p-2 sm:p-3 border-l-4 shadow-sm z-10 touch-manipulation",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":O(e)+" border-primary-500"]]),style:I(re(e,A.value))},[r("div",dr,[r("button",{onClick:_(i=>B(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",ur,[...t[14]||(t[14]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,lr),r("div",cr,[r("div",mr,d(e.title),1),e.description?(n(),a("div",gr,d(e.description),1)):c("",!0),r("div",yr,[e.estimated_time||e.end_time?(n(),a("span",pr,[S(E(ae),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(n(),a("span",br,d(y(e.estimated_time))+" - "+d(y(e.end_time)),1)):e.estimated_time?(n(),a("span",hr,d(y(e.estimated_time)),1)):e.end_time?(n(),a("span",xr," до "+d(y(e.end_time)),1)):c("",!0)])):c("",!0),r("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(q(e.priority)),3)])])])],14,ir))),128))])])])]),r("div",vr,[t[16]||(t[16]=r("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-3"},[r("span",{class:"text-xs text-gray-500 dark:text-gray-400 font-medium"},"Без времени")],-1)),r("div",fr,[r("div",_r,[(n(!0),a(b,null,h(ge.value,e=>(n(),a("div",{key:e.id,onClick:_(i=>H(e),["stop"]),class:g(["p-3 rounded-lg cursor-pointer border-l-4 touch-manipulation",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":O(e)+" border-primary-500"]])},[r("div",wr,[r("button",{onClick:_(i=>B(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",Yr,[...t[15]||(t[15]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,Mr),r("div",Tr,[r("div",Cr,d(e.title),1),e.description?(n(),a("div",Dr,d(e.description),1)):c("",!0),r("div",$r,[r("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(q(e.priority)),3)])])])],10,kr))),128))])])])]),r("div",Sr,[r("div",jr,[(n(!0),a(b,null,h(V.value,e=>(n(),a("div",{key:e.id,onClick:i=>H(e),class:g(["p-3 sm:p-4 rounded-lg cursor-pointer border-l-4 touch-manipulation active:scale-[0.98] transition-transform",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":O(e)+" border-primary-500"]])},[r("div",Hr,[r("button",{onClick:_(i=>B(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",Er,[...t[17]||(t[17]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,Br),r("div",Nr,[r("div",Ar,d(e.title),1),e.description?(n(),a("div",zr,d(e.description),1)):c("",!0),r("div",Lr,[e.estimated_time||e.end_time?(n(),a("span",Pr,[S(E(ae),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(n(),a("span",Vr,d(y(e.estimated_time))+" - "+d(y(e.end_time)),1)):e.estimated_time?(n(),a("span",Fr,d(y(e.estimated_time)),1)):e.end_time?(n(),a("span",Ir," до "+d(y(e.end_time)),1)):c("",!0)])):c("",!0),r("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(q(e.priority)),3)])])])],10,Or))),128)),V.value.length===0?(n(),a("div",Wr," Нет задач на этот день ")):c("",!0)])])])):c("",!0),S(Be,{show:w.value,task:T.value,onClose:t[3]||(t[3]=e=>{w.value=!1,T.value=null}),onEnterEdit:ve},null,8,["show","task"]),S(He,{show:f.value,task:T.value,"server-error":L.value,"default-date":P.value,onClose:we,onSubmit:ke},null,8,["show","task","server-error","default-date"])])]))}},to=Ee(Gr,[["__scopeId","data-v-0f0e1ec9"]]);export{to as default};
