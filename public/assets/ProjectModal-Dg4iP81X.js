import{k as C,s as F,x as S,r as f,A as p,l as $,o as a,f as j,g as U,c as i,b,a as t,w as y,t as c,d,C as h,F as E,y as L,v as m,T,B as N}from"./index-Gx0RcN7_.js";import{u as q}from"./workspace-B6_fDG2E.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"flex min-h-screen items-center justify-center p-4"},W={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},_={class:"text-xl font-semibold text-gray-900 dark:text-white"},z={key:0},K=["value"],O={class:"flex items-center space-x-3"},G={key:1,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},H={class:"flex justify-end space-x-3 pt-4"},I=["disabled"],J={__name:"ProjectModal",props:{show:{type:Boolean,default:!1},project:{type:Object,default:null},serverError:{type:String,default:""}},emits:["close","submit"],setup(v,{emit:M}){const u=v,x=M,g=q(),w=C(()=>g.workspaces),k=C(()=>g.currentWorkspace),B=o=>{o.key==="Escape"&&u.show&&x("close")};F(()=>document.addEventListener("keydown",B)),S(()=>document.removeEventListener("keydown",B));const l=f({workspace_id:null,name:"",description:"",color:"#3B82F6"}),n=f(!1),r=f("");p(()=>u.project,o=>{var e,s;o?l.value={workspace_id:o.workspace_id||((e=k.value)==null?void 0:e.id),name:o.name||"",description:o.description||"",color:o.color||"#3B82F6"}:l.value={workspace_id:(s=k.value)==null?void 0:s.id,name:"",description:"",color:"#3B82F6"},r.value=""},{immediate:!0}),p(()=>{var o;return(o=k.value)==null?void 0:o.id},o=>{!l.value.name&&o&&(l.value.workspace_id=o)}),p(()=>u.show,o=>{o||(n.value=!1,r.value="")}),p(()=>u.serverError,o=>{r.value=o,o&&(n.value=!1)});const V=()=>{r.value="",n.value=!0,x("submit",l.value)};return(o,e)=>(a(),$(N,{to:"body"},[j(T,{name:"modal"},{default:U(()=>[v.show?(a(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:e[8]||(e[8]=y(s=>o.$emit("close"),["self"]))},[e[14]||(e[14]=t("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),t("div",D,[t("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-auto",onClick:e[7]||(e[7]=y(()=>{},["stop"]))},[t("div",W,[t("h3",_,c(v.project?"Редактировать проект":"Новый проект"),1),t("button",{onClick:e[0]||(e[0]=s=>o.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...e[9]||(e[9]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:y(V,["prevent"]),class:"p-6 space-y-4"},[w.value.length>1?(a(),i("div",z,[e[10]||(e[10]=t("label",{for:"workspace_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Рабочее пространство * ",-1)),d(t("select",{id:"workspace_id","onUpdate:modelValue":e[1]||(e[1]=s=>l.value.workspace_id=s),required:"",class:"input"},[(a(!0),i(E,null,L(w.value,s=>(a(),i("option",{key:s.id,value:s.id},c(s.name),9,K))),128))],512),[[h,l.value.workspace_id]])])):b("",!0),t("div",null,[e[11]||(e[11]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Название проекта * ",-1)),d(t("input",{id:"name","onUpdate:modelValue":e[2]||(e[2]=s=>l.value.name=s),type:"text",required:"",class:"input",placeholder:"Введите название проекта"},null,512),[[m,l.value.name]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Описание ",-1)),d(t("textarea",{id:"description","onUpdate:modelValue":e[3]||(e[3]=s=>l.value.description=s),rows:"3",class:"input",placeholder:"Добавьте описание проекта"},null,512),[[m,l.value.description]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"color",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Цвет ",-1)),t("div",O,[d(t("input",{id:"color","onUpdate:modelValue":e[4]||(e[4]=s=>l.value.color=s),type:"color",class:"w-16 h-10 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"},null,512),[[m,l.value.color]]),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.color=s),type:"text",pattern:"^#[0-9A-Fa-f]{6}$",class:"input flex-1",placeholder:"#3B82F6"},null,512),[[m,l.value.color]])])]),r.value?(a(),i("div",G,c(r.value),1)):b("",!0),t("div",H,[t("button",{type:"button",onClick:e[6]||(e[6]=s=>o.$emit("close")),class:"btn btn-secondary"}," Отмена "),t("button",{type:"submit",disabled:n.value,class:"btn btn-primary"},c(n.value?"Сохранение...":"Сохранить"),9,I)])],32)])])])):b("",!0)]),_:1})]))}},Y=A(J,[["__scopeId","data-v-5e758c6c"]]);export{Y as P};
