import{c as d,o as r,a as e,j as me,k as z,h as re,l as G,g as E,b as j,m as ke,n as ye,p as N,t as $,r as g,f as M,w as V,q as Ne,s as fe,x as xe,d as F,v as se,y as Fe,T as te,F as ae,z as ne,A as ue,B as K,C as le,e as U,D as Ge,u as be,i as Ke,E as Je}from"./index-C08jv159.js";import{u as ie}from"./workspace-BpQsCEKO.js";import{r as he,a as we,b as $e,c as Me,d as Ce,u as Xe,e as Ye,T as et}from"./TaskModal-CJhei9Ul.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as tt}from"./ProjectModal-nY-iDTyB.js";function je(k,C){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})])}function ee(k,C){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const ot={class:"flex items-center space-x-3"},ge={__name:"NavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null}},setup(k){const C=k,y=me(),w=ie(),u={inbox:Ce,lightning:Me,calendar:$e,clock:we,archive:he,folder:ee,"calendar-days":je,target:ee},p=z(()=>u[C.icon]||ee),c=z(()=>{var t;const a=(t=w.currentWorkspace)==null?void 0:t.id;return C.to.replace(":id",a||"1")}),h=z(()=>y.path===c.value);return(a,t)=>{const m=re("router-link");return r(),G(m,{to:c.value,class:N(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",h.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:E(()=>[e("div",ot,[(r(),G(ke(p.value),{class:"w-5 h-5"})),e("span",null,[ye(a.$slots,"default")])]),k.count!==null&&k.count>0?(r(),d("span",{key:0,class:N(["px-2 py-0.5 text-xs font-semibold rounded-full",h.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},$(k.count),3)):j("",!0)]),_:3},8,["to","class"])}}},st={class:"flex items-center space-x-3"},Y={__name:"DroppableNavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null},dropStatus:{type:String,default:null}},emits:["task-dropped"],setup(k,{emit:C}){const y=k,w=C,u=me(),p=ie(),c=g(!1),h={inbox:Ce,lightning:Me,calendar:$e,clock:we,archive:he,folder:ee,"calendar-days":je,target:ee},a=z(()=>h[y.icon]||ee),t=z(()=>{var A;const _=(A=p.currentWorkspace)==null?void 0:A.id;return y.to.replace(":id",_||"1")}),m=z(()=>u.path===t.value),S=_=>{_.preventDefault(),c.value=!0,_.dataTransfer.dropEffect="move"},R=()=>{c.value=!1},Q=_=>{_.preventDefault(),c.value=!1;try{const A=JSON.parse(_.dataTransfer.getData("application/json"));y.dropStatus&&A&&w("task-dropped",{taskId:A.id,newStatus:y.dropStatus})}catch(A){console.error("Error handling drop:",A)}};return(_,A)=>{const v=re("router-link");return r(),d("div",{onDrop:Q,onDragover:V(S,["prevent"]),onDragleave:R,class:N(["rounded-lg transition-all",c.value?"bg-primary-100 dark:bg-primary-900/40 ring-2 ring-primary-500":""])},[M(v,{to:t.value,class:N(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",m.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:E(()=>[e("div",st,[(r(),G(ke(a.value),{class:"w-5 h-5"})),e("span",null,[ye(_.$slots,"default")])]),k.count!==null&&k.count>0?(r(),d("span",{key:0,class:N(["px-2 py-0.5 text-xs font-semibold rounded-full",m.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},$(k.count),3)):j("",!0)]),_:3},8,["to","class"])],34)}}},rt={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20"},at={class:"flex items-center justify-between px-4 lg:px-8 py-3"},nt={class:"flex-1 max-w-2xl"},lt={class:"relative"},it={class:"flex items-center space-x-2 lg:space-x-4 ml-4"},dt={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 z-50"},ut={class:"relative"},ct={key:0,class:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"},vt={key:0,class:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 max-h-96 overflow-y-auto"},pt={key:0,class:"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400"},gt={key:1},mt={class:"text-sm text-gray-900 dark:text-gray-100"},kt={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},yt=["title"],ft={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xt={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},bt={class:"hidden lg:block relative"},ht={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},wt={class:"hidden lg:block text-left"},$t={class:"text-sm font-medium text-gray-900 dark:text-white"},Mt={class:"text-xs text-gray-500 dark:text-gray-400"},Ct={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2"},jt={__name:"Toolbar",props:{user:{type:Object,default:null}},emits:["quick-add","quick-add-task","quick-add-project","quick-add-goal","search","logout","profile","settings","toggle-sidebar"],setup(k,{emit:C}){const y=Ne(),w=k,u=C,p=g(""),c=g(!1),h=g(!1),a=g(!1),t=g(0),m=g([]),S=g(null),R=z(()=>{var n;return(((n=w.user)==null?void 0:n.name)||"").split(" ").map(H=>H[0]).join("").toUpperCase().slice(0,2)}),Q=()=>{a.value=!a.value},_=()=>{a.value=!1,u("quick-add-task")},A=()=>{a.value=!1,u("quick-add-project")},v=()=>{a.value=!1,u("quick-add-goal")},s=P=>{S.value&&!S.value.contains(P.target)&&(a.value=!1)};fe(()=>{document.addEventListener("click",s)}),xe(()=>{document.removeEventListener("click",s)});const x=()=>{p.value.trim()&&u("search",p.value)},O=()=>{x()},W=()=>{h.value=!1,u("logout")},Z=()=>{h.value=!1,u("profile")},q=()=>{h.value=!1,u("settings")},I={mounted(P,n){P.clickOutsideEvent=H=>{P===H.target||P.contains(H.target)||n.value()},document.addEventListener("click",P.clickOutsideEvent)},unmounted(P){document.removeEventListener("click",P.clickOutsideEvent)}};return(P,n)=>{var H,J;return r(),d("header",rt,[e("div",at,[e("button",{onClick:n[0]||(n[0]=L=>P.$emit("toggle-sidebar")),class:"lg:hidden p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors mr-2"},[...n[5]||(n[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e("div",nt,[e("div",lt,[n[6]||(n[6]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),F(e("input",{"onUpdate:modelValue":n[1]||(n[1]=L=>p.value=L),type:"text",placeholder:"Поиск задач...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onInput:x,onKeydown:Fe(O,["enter"])},null,544),[[se,p.value]])])]),e("div",it,[e("div",{class:"relative",ref_key:"quickAddMenuContainer",ref:S},[e("button",{onClick:V(Q,["stop"]),class:"inline-flex items-center px-3 lg:px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary-500 transition-colors"},[...n[7]||(n[7]=[e("svg",{class:"w-5 h-5 lg:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden lg:inline"},"Создать",-1)])]),M(te,{name:"dropdown"},{default:E(()=>[a.value?(r(),d("div",dt,[e("button",{onClick:_,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[8]||(n[8]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",null,"Задачу")],-1)])]),e("button",{onClick:A,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[9]||(n[9]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),e("span",null,"Проект")],-1)])]),e("button",{onClick:v,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[10]||(n[10]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),e("span",null,"Цель")],-1)])])])):j("",!0)]),_:1})],512),e("div",ut,[e("button",{onClick:n[2]||(n[2]=V(L=>c.value=!c.value,["stop"])),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors relative"},[n[11]||(n[11]=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),t.value>0?(r(),d("span",ct)):j("",!0)]),c.value?F((r(),d("div",vt,[n[12]||(n[12]=e("div",{class:"px-4 py-2 border-b border-gray-200 dark:border-gray-600"},[e("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Уведомления")],-1)),m.value.length===0?(r(),d("div",pt," Нет новых уведомлений ")):(r(),d("div",gt,[(r(!0),d(ae,null,ne(m.value,L=>(r(),d("button",{key:L.id,class:"w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-left"},[e("p",mt,$(L.message),1),e("p",kt,$(L.time),1)]))),128))]))])),[[I,()=>c.value=!1]]):j("",!0)]),e("button",{onClick:n[3]||(n[3]=L=>ue(y).toggleTheme()),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:ue(y).isDark?"Светлая тема":"Тёмная тема"},[ue(y).isDark?(r(),d("svg",ft,[...n[13]||(n[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(r(),d("svg",xt,[...n[14]||(n[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))],8,yt),e("div",bt,[e("button",{onClick:n[4]||(n[4]=V(L=>h.value=!h.value,["stop"])),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[e("div",ht,$(R.value),1),e("div",wt,[e("div",$t,$((H=k.user)==null?void 0:H.name),1),e("div",Mt,$((J=k.user)==null?void 0:J.email),1)]),n[15]||(n[15]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),h.value?F((r(),d("div",Ct,[e("button",{onClick:Z,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[16]||(n[16]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),e("span",null,"Профиль")],-1)])]),e("button",{onClick:q,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[17]||(n[17]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),e("span",null,"Настройки")],-1)])]),n[19]||(n[19]=e("div",{class:"border-t border-gray-200 dark:border-gray-600 my-2"},null,-1)),e("button",{onClick:W,class:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},[...n[18]||(n[18]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})]),e("span",null,"Выйти")],-1)])])])),[[I,()=>h.value=!1]]):j("",!0)])])])])}}},_t=oe(jt,[["__scopeId","data-v-8c1d50ec"]]),St={class:"flex min-h-screen items-center justify-center p-4"},At={class:"flex items-center justify-between p-6 border-b border-gray-200"},Tt={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},Bt={class:"flex justify-end space-x-3 pt-4"},Wt=["disabled"],Dt={__name:"WorkspaceModal",props:{show:{type:Boolean,default:!1}},emits:["close","submit"],setup(k,{emit:C}){const y=k,w=C,u=g({name:"",description:""}),p=g(!1),c=g("");K(()=>y.show,a=>{a||(u.value={name:"",description:""},p.value=!1,c.value="")});const h=()=>{c.value="",p.value=!0,w("submit",u.value)};return(a,t)=>(r(),G(le,{to:"body"},[M(te,{name:"modal"},{default:E(()=>[k.show?(r(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=V(m=>a.$emit("close"),["self"]))},[t[10]||(t[10]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",St,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=V(()=>{},["stop"]))},[e("div",At,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Новое рабочее пространство ",-1)),e("button",{onClick:t[0]||(t[0]=m=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:V(h,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Название * ",-1)),F(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=m=>u.value.name=m),type:"text",required:"",class:"input",placeholder:"Например: Команда разработки"},null,512),[[se,u.value.name]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Описание ",-1)),F(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=m=>u.value.description=m),rows:"3",class:"input",placeholder:"Краткое описание рабочего пространства"},null,512),[[se,u.value.description]])]),c.value?(r(),d("div",Tt,$(c.value),1)):j("",!0),e("div",Bt,[e("button",{type:"button",onClick:t[3]||(t[3]=m=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:p.value,class:"btn btn-primary"},$(p.value?"Создание...":"Создать"),9,Wt)])],32)])])])):j("",!0)]),_:1})]))}},Et=oe(Dt,[["__scopeId","data-v-d4f5ba25"]]),Vt={class:"flex min-h-screen items-center justify-center p-4"},Pt={class:"flex items-center justify-between p-6 border-b border-gray-200"},zt={class:"text-sm text-gray-600 mb-4"},Ht={class:"font-medium"},Lt={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},Ot={class:"flex justify-end space-x-3 pt-4"},It=["disabled"],Rt={__name:"AddMemberModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(k,{emit:C}){const y=k,w=C,u=g({email:"",role:"member"}),p=g(!1),c=g("");K(()=>y.show,a=>{a||(u.value={email:"",role:"member"},p.value=!1,c.value="")});const h=()=>{var a;c.value="",p.value=!0,w("submit",{...u.value,workspace_id:(a=y.workspace)==null?void 0:a.id})};return(a,t)=>(r(),G(le,{to:"body"},[M(te,{name:"modal"},{default:E(()=>{var m;return[k.show?(r(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=V(S=>a.$emit("close"),["self"]))},[t[12]||(t[12]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Vt,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=V(()=>{},["stop"]))},[e("div",Pt,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Добавить пользователя ",-1)),e("button",{onClick:t[0]||(t[0]=S=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:V(h,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[e("p",zt,[t[8]||(t[8]=U(" Workspace: ",-1)),e("span",Ht,$((m=k.workspace)==null?void 0:m.name),1)])]),e("div",null,[t[9]||(t[9]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email пользователя * ",-1)),F(e("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=S=>u.value.email=S),type:"email",required:"",class:"input",placeholder:"user@example.com"},null,512),[[se,u.value.email]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"role",class:"block text-sm font-medium text-gray-700 mb-2"}," Роль ",-1)),F(e("select",{id:"role","onUpdate:modelValue":t[2]||(t[2]=S=>u.value.role=S),class:"input"},[...t[10]||(t[10]=[e("option",{value:"viewer"},"Просмотр",-1),e("option",{value:"member"},"Участник",-1),e("option",{value:"admin"},"Администратор",-1)])],512),[[Ge,u.value.role]])]),c.value?(r(),d("div",Lt,$(c.value),1)):j("",!0),e("div",Ot,[e("button",{type:"button",onClick:t[3]||(t[3]=S=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:p.value,class:"btn btn-primary"},$(p.value?"Добавление...":"Добавить"),9,It)])],32)])])])):j("",!0)]}),_:1})]))}},qt=oe(Rt,[["__scopeId","data-v-4f9b8513"]]),Qt={class:"flex min-h-screen items-center justify-center p-4"},Zt={class:"flex items-center justify-between p-6 border-b border-gray-200"},Ut={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},Nt={class:"flex justify-end space-x-3 pt-4"},Ft=["disabled"],Gt={__name:"RenameWorkspaceModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(k,{emit:C}){const y=k,w=C,u=g({name:""}),p=g(!1),c=g("");K(()=>y.workspace,a=>{a&&(u.value.name=a.name)},{immediate:!0}),K(()=>y.show,a=>{a||(p.value=!1,c.value="")});const h=()=>{c.value="",p.value=!0,w("submit",u.value.name)};return(a,t)=>(r(),G(le,{to:"body"},[M(te,{name:"modal"},{default:E(()=>[k.show?(r(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[4]||(t[4]=V(m=>a.$emit("close"),["self"]))},[t[8]||(t[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Qt,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[3]||(t[3]=V(()=>{},["stop"]))},[e("div",Zt,[t[6]||(t[6]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Переименовать workspace ",-1)),e("button",{onClick:t[0]||(t[0]=m=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...t[5]||(t[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:V(h,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[7]||(t[7]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Новое название * ",-1)),F(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=m=>u.value.name=m),type:"text",required:"",class:"input",placeholder:"Название workspace"},null,512),[[se,u.value.name]])]),c.value?(r(),d("div",Ut,$(c.value),1)):j("",!0),e("div",Nt,[e("button",{type:"button",onClick:t[2]||(t[2]=m=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:p.value,class:"btn btn-primary"},$(p.value?"Сохранение...":"Сохранить"),9,Ft)])],32)])])])):j("",!0)]),_:1})]))}},Kt=oe(Gt,[["__scopeId","data-v-27a57082"]]),Jt={class:"flex min-h-screen items-center justify-center p-4"},Xt={class:"flex items-center justify-between p-6 border-b border-gray-200"},Yt={class:"p-6"},eo={key:0,class:"text-center py-8"},to={key:1,class:"text-center py-8 text-gray-500"},oo={key:2,class:"space-y-3"},so={class:"flex items-center space-x-3"},ro={class:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},ao={class:"font-medium text-gray-900"},no={class:"text-sm text-gray-500"},lo={class:"flex items-center space-x-3"},io=["onClick","disabled"],uo={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},co={key:1,class:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-red-600"},vo={key:0,class:"px-6 pb-4"},po={class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},go={class:"flex justify-end p-6 border-t border-gray-200"},mo={__name:"MembersModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","member-removed"],setup(k,{emit:C}){const y=k,w=C,u=ie(),p=be(),c=g([]),h=g(!1),a=g(""),t=g(null),m=v=>v?v.split(" ").map(s=>s[0]).join("").toUpperCase().substring(0,2):"?",S=v=>({owner:"Владелец",admin:"Администратор",member:"Участник",viewer:"Наблюдатель"})[v]||v,R=v=>({owner:"bg-purple-100 text-purple-700",admin:"bg-blue-100 text-blue-700",member:"bg-green-100 text-green-700",viewer:"bg-gray-100 text-gray-700"})[v]||"bg-gray-100 text-gray-700",Q=v=>{var W,Z,q,I,P,n,H;const s=(W=p.user)==null?void 0:W.id,x=((Z=y.workspace)==null?void 0:Z.owner_id)===s,O=((n=(P=(I=(q=y.workspace)==null?void 0:q.members)==null?void 0:I.find(J=>J.id===s))==null?void 0:P.pivot)==null?void 0:n.role)==="admin";return((H=y.workspace)==null?void 0:H.owner_id)===v.id||v.id===s?!1:x||O},_=async()=>{var v;if((v=y.workspace)!=null&&v.id){h.value=!0,a.value="";try{const s=await u.fetchMembers(y.workspace.id);c.value=s.members||s||[]}catch(s){console.error("Error loading members:",s),a.value="Ошибка при загрузке участников"}finally{h.value=!1}}},A=async v=>{var s,x;if(confirm(`Вы уверены, что хотите удалить ${v.name} из workspace?`)){t.value=v.id,a.value="";try{await u.removeMember(y.workspace.id,v.id),await _(),w("member-removed",v)}catch(O){console.error("Error removing member:",O),a.value=((x=(s=O.response)==null?void 0:s.data)==null?void 0:x.message)||"Ошибка при удалении участника"}finally{t.value=null}}};return K(()=>y.show,v=>{v?_():(c.value=[],a.value="",t.value=null)}),K(()=>{var v;return(v=y.workspace)==null?void 0:v.id},()=>{y.show&&_()}),(v,s)=>(r(),G(le,{to:"body"},[M(te,{name:"modal"},{default:E(()=>[k.show?(r(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:s[3]||(s[3]=V(x=>v.$emit("close"),["self"]))},[s[8]||(s[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Jt,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-auto",onClick:s[2]||(s[2]=V(()=>{},["stop"]))},[e("div",Xt,[s[5]||(s[5]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Участники workspace ",-1)),e("button",{onClick:s[0]||(s[0]=x=>v.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...s[4]||(s[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Yt,[h.value?(r(),d("div",eo,[...s[6]||(s[6]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):c.value.length===0?(r(),d("div",to," Нет участников ")):(r(),d("div",oo,[(r(!0),d(ae,null,ne(c.value,x=>{var O,W,Z,q;return r(),d("div",{key:x.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[e("div",so,[e("div",ro,$(m(x.name)),1),e("div",null,[e("div",ao,$(x.name),1),e("div",no,$(x.email),1)])]),e("div",lo,[e("span",{class:N(["px-3 py-1 text-xs font-medium rounded-full",R(((O=x.pivot)==null?void 0:O.role)||(((W=k.workspace)==null?void 0:W.owner_id)===x.id?"owner":"member"))])},$(S(((Z=x.pivot)==null?void 0:Z.role)||(((q=k.workspace)==null?void 0:q.owner_id)===x.id?"owner":"member"))),3),Q(x)?(r(),d("button",{key:0,onClick:I=>A(x),class:"text-red-600 hover:text-red-700 p-2 rounded transition-colors",disabled:t.value===x.id,title:"Удалить из workspace"},[t.value!==x.id?(r(),d("svg",uo,[...s[7]||(s[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])])):(r(),d("div",co))],8,io)):j("",!0)])])}),128))]))]),a.value?(r(),d("div",vo,[e("div",po,$(a.value),1)])):j("",!0),e("div",go,[e("button",{onClick:s[1]||(s[1]=x=>v.$emit("close")),class:"btn btn-secondary"}," Закрыть ")])])])])):j("",!0)]),_:1})]))}},ko=oe(mo,[["__scopeId","data-v-7d4c4aab"]]),yo={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},fo={class:"flex h-screen"},xo={class:"flex flex-col h-full"},bo={class:"p-4 border-b border-gray-200 dark:border-gray-700"},ho={class:"flex items-center justify-between mb-3"},wo={class:"space-y-1"},$o={class:"flex-1 flex items-center px-3 py-2 text-sm cursor-pointer"},Mo=["checked","onChange"],Co=["onClick"],jo={key:0,class:"absolute right-0 mt-1 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-1 z-50"},_o=["onClick"],So=["onClick"],Ao=["onClick"],To={class:"flex-1 overflow-y-auto p-4"},Bo={class:"space-y-1"},Wo={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 space-y-1"},Do={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Eo={class:"space-y-1 max-h-64 overflow-y-auto"},Vo={class:"text-sm text-gray-700 dark:text-gray-300 truncate"},Po={key:0,class:"text-xs text-gray-500"},zo=["onClick"],Ho={key:0,class:"px-3 py-2 text-sm text-gray-500 text-center"},Lo={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Oo={class:"space-y-1"},Io={class:"hidden lg:block p-4 border-t border-gray-200 dark:border-gray-700"},Ro={class:"flex items-center justify-between"},qo={class:"flex items-center space-x-3"},Qo={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},Zo={class:"text-sm"},Uo={class:"font-medium text-gray-900 dark:text-white"},No={class:"text-xs text-gray-500 dark:text-gray-400"},Fo={class:"flex-1 flex flex-col overflow-hidden"},Go={class:"flex-1 overflow-auto"},Ko={__name:"MainLayout",setup(k){const C=Ke(),y=be(),w=ie(),u=Xe(),p=Ye(),c=g(!1);g(!1);const h=g(!1),a=g(!1),t=g(""),m=g(null),S=g(!1),R=g(!1),Q=g(!1),_=g(!1),A=g(null),v=g(""),s=g(null),x=z(()=>y.user),O=z(()=>w.workspaces),W=z(()=>u.counts),Z=z(()=>w.currentWorkspace),q=z(()=>p.activeProjects),I=z(()=>w.selectedWorkspaces.map(l=>l.id)),P=z(()=>{if(I.value.length===0)return 0;const l=W.value.scheduled||0,o=W.value.today||0,f=W.value.tomorrow||0;return l+o+f}),n=z(()=>{var o;return(((o=x.value)==null?void 0:o.name)||"").split(" ").map(f=>f[0]).join("").toUpperCase().slice(0,2)}),H=l=>{var B;w.toggleSelectedWorkspace(l);const f=C.currentRoute.value.path.split("/"),b=f[f.length-1],D=["inbox","next-actions","today","waiting","someday","calendar","projects","goals"].includes(b)?b:"inbox",i=((B=w.currentWorkspace)==null?void 0:B.id)||l.id;C.push(`/workspaces/${i}/${D}`)},J=async l=>{try{const o=await w.createWorkspace(l);h.value=!1,await H(o)}catch(o){console.error("Ошибка создания workspace:",o)}},L=async()=>{await y.logout(),C.push("/login")},_e=()=>{a.value=!0},ce=()=>{A.value=null,_.value=!0},Se=async l=>{var o,f;v.value="";try{A.value?await p.updateProject(A.value.id,l):await p.createProject(l),_.value=!1,A.value=null,await p.fetchProjects()}catch(b){console.error("Error saving project:",b),v.value=((f=(o=b.response)==null?void 0:o.data)==null?void 0:f.message)||b.message||"Ошибка при сохранении проекта"}},Ae=()=>{_.value=!1,A.value=null,v.value=""},Te=async l=>{var o,f;if(confirm(`Архивировать проект "${l.name}"?`))try{await p.archiveProject(l.id),await p.fetchProjects()}catch(b){console.error("Error archiving project:",b),alert("Ошибка при архивировании проекта: "+(((f=(o=b.response)==null?void 0:o.data)==null?void 0:f.message)||b.message))}},Be=()=>{console.log("Quick add goal")},We=async l=>{var o,f;t.value="";try{await u.createTask(l),a.value=!1}catch(b){console.error("Error creating task:",b),t.value=((f=(o=b.response)==null?void 0:o.data)==null?void 0:f.message)||b.message||"Ошибка при создании задачи"}},De=()=>{a.value=!1,t.value=""},X=async({taskId:l,newStatus:o})=>{var f,b;try{const T={status:o};if(o==="today")T.due_date=new Date().toISOString().split("T")[0];else if(o==="tomorrow"){const D=new Date;D.setDate(D.getDate()+1),T.due_date=D.toISOString().split("T")[0]}await u.updateTask(l,T)}catch(T){console.error("Error updating task status:",T),alert(((b=(f=T.response)==null?void 0:f.data)==null?void 0:b.message)||"Ошибка при обновлении задачи")}},Ee=l=>{console.log("Search:",l)},Ve=()=>{C.push("/settings")},Pe=()=>{C.push("/settings")},de=l=>{var b,T,D;const o=(b=x.value)==null?void 0:b.id;if(!o)return!1;if(l.owner_id===o)return!0;const f=(T=l.members)==null?void 0:T.find(i=>i.id===o);return((D=f==null?void 0:f.pivot)==null?void 0:D.role)==="admin"},ze=l=>{m.value=m.value===l?null:l},He=l=>{s.value=l,R.value=!0,m.value=null},Le=l=>{s.value=l,Q.value=!0,m.value=null},Oe=l=>{s.value=l,S.value=!0,m.value=null},Ie=()=>{S.value=!1,s.value=null},Re=()=>{Q.value=!1,s.value=null},qe=async()=>{await w.fetchWorkspaces()},Qe=()=>{R.value=!1,s.value=null},Ze=async l=>{var o,f,b,T,D;try{console.log("Sending member data:",l),await w.addMember(l.workspace_id,{email:l.email,role:l.role}),S.value=!1,s.value=null,alert("Пользователь успешно добавлен в workspace")}catch(i){console.error("Error adding member:",i),console.error("Error response:",(o=i.response)==null?void 0:o.data);let B="Ошибка при добавлении пользователя";(b=(f=i.response)==null?void 0:f.data)!=null&&b.errors?B=Object.values(i.response.data.errors).flat().join(", "):(D=(T=i.response)==null?void 0:T.data)!=null&&D.message&&(B=i.response.data.message),alert(B)}},Ue=async l=>{var o,f,b,T,D;try{console.log("Renaming workspace:",s.value.id,"to:",l),await w.updateWorkspace(s.value.id,{name:l}),await w.fetchWorkspaces(),R.value=!1,s.value=null,alert("Workspace успешно переименован")}catch(i){console.error("Error renaming workspace:",i),console.error("Error response:",(o=i.response)==null?void 0:o.data);let B="Ошибка при переименовании";(b=(f=i.response)==null?void 0:f.data)!=null&&b.errors?B=Object.values(i.response.data.errors).flat().join(", "):(D=(T=i.response)==null?void 0:T.data)!=null&&D.message&&(B=i.response.data.message),alert(B)}};fe(async()=>{await w.fetchWorkspaces(),await u.fetchAllTasks(),await p.fetchProjects(),u.startSync(),document.addEventListener("click",ve)}),K(()=>{var l;return(l=w.currentWorkspace)==null?void 0:l.id},l=>{l&&p.fetchProjects()}),xe(()=>{u.stopSync(),document.removeEventListener("click",ve)});const ve=()=>{m.value=null};return(l,o)=>{var T,D;const f=re("router-link"),b=re("router-view");return r(),d("div",yo,[e("div",fo,[e("aside",{class:N(["fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",c.value?"translate-x-0":"-translate-x-full lg:translate-x-0"])},[e("div",xo,[o[22]||(o[22]=e("div",{class:"hidden lg:flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},[e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"},"GTD TODO")],-1)),e("div",bo,[e("div",ho,[o[7]||(o[7]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Рабочие пространства ",-1)),e("button",{onClick:o[0]||(o[0]=i=>h.value=!0),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Создать workspace"},[...o[6]||(o[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",wo,[(r(!0),d(ae,null,ne(O.value,i=>(r(),d("div",{key:i.id,class:N(["flex items-center rounded-lg transition-colors",I.value.includes(i.id)?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[e("label",$o,[e("input",{type:"checkbox",checked:I.value.includes(i.id),onChange:B=>H(i),class:"mr-3 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"},null,40,Mo),e("span",{class:N(["truncate",I.value.includes(i.id)?"text-primary-700 dark:text-primary-400 font-medium":"text-gray-700 dark:text-gray-300"])},$(i.name),3)]),e("div",{class:"relative",onClick:o[2]||(o[2]=V(()=>{},["stop"]))},[e("button",{onClick:B=>ze(i.id),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors"},[...o[8]||(o[8]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})],-1)])],8,Co),M(te,{name:"dropdown"},{default:E(()=>[m.value===i.id?(r(),d("div",jo,[e("button",{onClick:B=>Le(i),class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"}," Участники ",8,_o),de(i)?(r(),d("button",{key:0,onClick:B=>He(i),class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"}," Переименовать ",8,So)):j("",!0),de(i)?(r(),d("button",{key:1,onClick:B=>Oe(i),class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"}," Добавить пользователя ",8,Ao)):j("",!0),de(i)?j("",!0):(r(),d("button",{key:2,onClick:o[1]||(o[1]=B=>m.value=null),class:"w-full px-4 py-2 text-left text-sm text-gray-500 italic",disabled:""}," Нет доступных действий "))])):j("",!0)]),_:2},1024)])],2))),128))])]),e("nav",To,[e("div",Bo,[M(Y,{to:"/workspaces/:id/inbox",icon:"inbox",count:W.value.inbox,"drop-status":"inbox",onTaskDropped:X},{default:E(()=>[...o[9]||(o[9]=[U(" Входящие ",-1)])]),_:1},8,["count"])]),e("div",Wo,[M(Y,{to:"/workspaces/:id/today",icon:"calendar",count:W.value.today,"drop-status":"today",onTaskDropped:X},{default:E(()=>[...o[10]||(o[10]=[U(" Сегодня ",-1)])]),_:1},8,["count"]),M(Y,{to:"/workspaces/:id/next-actions",icon:"lightning",count:W.value.next_actions,"drop-status":"next_action",onTaskDropped:X},{default:E(()=>[...o[11]||(o[11]=[U(" Следующие ",-1)])]),_:1},8,["count"]),M(Y,{to:"/workspaces/:id/tomorrow",icon:"calendar-days",count:W.value.tomorrow,"drop-status":"tomorrow",onTaskDropped:X},{default:E(()=>[...o[12]||(o[12]=[U(" Завтра ",-1)])]),_:1},8,["count"]),M(ge,{to:"/workspaces/:id/calendar",icon:"calendar-days",count:P.value},{default:E(()=>[...o[13]||(o[13]=[U(" Календарь ",-1)])]),_:1},8,["count"]),M(Y,{to:"/workspaces/:id/someday",icon:"archive",count:W.value.someday,"drop-status":"someday",onTaskDropped:X},{default:E(()=>[...o[14]||(o[14]=[U(" Когда-нибудь ",-1)])]),_:1},8,["count"]),M(Y,{to:"/workspaces/:id/waiting",icon:"clock",count:W.value.waiting,"drop-status":"waiting",onTaskDropped:X},{default:E(()=>[...o[15]||(o[15]=[U(" Ожидание ",-1)])]),_:1},8,["count"])]),e("div",Do,[e("div",{class:"flex items-center justify-between px-3 mb-3"},[o[17]||(o[17]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Проекты ",-1)),e("button",{onClick:ce,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Создать проект"},[...o[16]||(o[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",Eo,[(r(!0),d(ae,null,ne(q.value,i=>{var B;return r(),d("div",{key:i.id,class:"flex items-center justify-between group px-3 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[M(f,{to:`/workspaces/${(B=Z.value)==null?void 0:B.id}/projects/${i.id}`,class:"flex items-center space-x-2 flex-1 min-w-0"},{default:E(()=>[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:Je({backgroundColor:i.color||"#3B82F6"})},null,4),e("span",Vo,$(i.name),1),i.tasks_count>0?(r(),d("span",Po," ("+$(i.tasks_count)+") ",1)):j("",!0)]),_:2},1032,["to"]),e("button",{onClick:V(pe=>Te(i),["stop"]),class:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 transition-opacity",title:"Архивировать"},[...o[18]||(o[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)])],8,zo)])}),128)),q.value.length===0?(r(),d("div",Ho," Нет проектов ")):j("",!0)])]),e("div",Lo,[o[20]||(o[20]=e("h3",{class:"px-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3"}," Организация ",-1)),e("div",Oo,[M(ge,{to:"/workspaces/:id/goals",icon:"target"},{default:E(()=>[...o[19]||(o[19]=[U(" Цели ",-1)])]),_:1})])])]),e("div",Io,[e("div",Ro,[e("div",qo,[e("div",Qo,$(n.value),1),e("div",Zo,[e("div",Uo,$((T=x.value)==null?void 0:T.name),1),e("div",No,$((D=x.value)==null?void 0:D.email),1)])]),e("button",{onClick:L,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...o[21]||(o[21]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1)])])])])])],2),c.value?(r(),d("div",{key:0,onClick:o[3]||(o[3]=i=>c.value=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})):j("",!0),e("main",Fo,[M(_t,{user:x.value,onQuickAddTask:_e,onQuickAddProject:ce,onQuickAddGoal:Be,onSearch:Ee,onLogout:L,onProfile:Ve,onSettings:Pe,onToggleSidebar:o[4]||(o[4]=i=>c.value=!c.value)},null,8,["user"]),e("div",Go,[M(b)])])]),M(Et,{show:h.value,onClose:o[5]||(o[5]=i=>h.value=!1),onSubmit:J},null,8,["show"]),M(et,{show:a.value,"server-error":t.value,onClose:De,onSubmit:We},null,8,["show","server-error"]),M(qt,{show:S.value,workspace:s.value,onClose:Ie,onSubmit:Ze},null,8,["show","workspace"]),M(Kt,{show:R.value,workspace:s.value,onClose:Qe,onSubmit:Ue},null,8,["show","workspace"]),M(ko,{show:Q.value,workspace:s.value,onClose:Re,onMemberRemoved:qe},null,8,["show","workspace"]),M(tt,{show:_.value,project:A.value,"server-error":v.value,onClose:Ae,onSubmit:Se},null,8,["show","project","server-error"])])}}},os=oe(Ko,[["__scopeId","data-v-0bd4e3a6"]]);export{os as default};
