import{u as B,r as M,T as S}from"./TaskModal-CZ2jx3Sp.js";import{T as j}from"./TaskList-DIfTejfs.js";import{T as N}from"./TaskView-BO5_1HtG.js";import{r as F}from"./PlusIcon-BG8NeRxN.js";import{k as f,r as u,c,a,f as m,F as $,l as A,y as T,e as L,o as n}from"./index-foeisxHv.js";import"./workspace-BPEeWFJ1.js";import"./projects-ZcoRqfy_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"p-4 lg:p-8"},q={class:"max-w-4xl mx-auto"},z={key:0,class:"text-center py-12"},G={key:1,class:"text-center py-12"},H={class:"max-w-md mx-auto"},I={class:"w-16 h-16 mx-auto mb-4 rounded-full bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center"},D={__name:"Tomorrow",setup(J){const o=B(),p=f(()=>o.tomorrowTasks),w=f(()=>o.loading),r=u(!1),i=u(!1),t=u(null),d=u(""),h=s=>{t.value=s,i.value=!0},y=()=>{t.value=null,r.value=!0},b=()=>{i.value=!1,r.value=!0},C=async s=>{try{await o.completeTask(s.id)}catch(e){console.error("Error completing task:",e)}},E=async s=>{try{s.status==="completed"?await o.updateTask(s.id,{status:"tomorrow"}):await o.completeTask(s.id)}catch(e){console.error("Error toggling task:",e)}},_=async s=>{var e,k,g,x;d.value="";try{t.value?await o.updateTask(t.value.id,s):await o.createTask(s),r.value=!1,t.value=null}catch(l){console.error("Error saving task:",l);let v="Ошибка при сохранении задачи";(k=(e=l.response)==null?void 0:e.data)!=null&&k.errors?v=Object.values(l.response.data.errors).flat().join(", "):(x=(g=l.response)==null?void 0:g.data)!=null&&x.message&&(v=l.response.data.message),d.value=v}},V=()=>{r.value=!1,t.value=null,d.value=""};return(s,e)=>(n(),c("div",O,[a("div",q,[e[5]||(e[5]=a("div",{class:"mb-6"},[a("h1",{class:"text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Завтра")],-1)),w.value?(n(),c("div",z,[...e[1]||(e[1]=[a("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(n(),c($,{key:1},[p.value.length>0?(n(),A(j,{key:0,tasks:p.value,onTaskClick:h,onToggleComplete:E},null,8,["tasks"])):(n(),c("div",G,[a("div",H,[a("div",I,[m(T(M),{class:"w-8 h-8 text-indigo-500"})]),e[3]||(e[3]=a("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"На завтра ничего не запланировано",-1)),e[4]||(e[4]=a("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-6 leading-relaxed"}," Планируйте завтрашний день заранее. Вечерний обзор задач на завтра — одна из самых продуктивных привычек. Утром вы сразу будете знать, с чего начать. ",-1)),a("button",{onClick:y,class:"inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors"},[m(T(F),{class:"w-5 h-5 mr-1.5"}),e[2]||(e[2]=L(" Запланировать на завтра ",-1))])])]))],64)),m(N,{show:i.value,task:t.value,onClose:e[0]||(e[0]=k=>{i.value=!1,t.value=null}),onEnterEdit:b,onCompleteTask:C},null,8,["show","task"]),m(S,{show:r.value,task:t.value,"server-error":d.value,onClose:V,onSubmit:_},null,8,["show","task","server-error"])])]))}};export{D as default};
