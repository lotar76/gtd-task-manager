import{c as a,a as t,o as n,r as D,k as v,s as Te,x as Ce,b as m,f as H,p as g,A as B,t as d,F as h,z as x,E as I,w as k,e as De}from"./index-BQ_tbw2b.js";import{u as Se,T as $e,a as oe}from"./TaskModal-BjCRJFUI.js";import{g as se,c as ae,d as b}from"./ru-D_ksFwAV.js";import{_ as je}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Oe}from"./PlusIcon-CcfnCing.js";import"./workspace-B_3xu80o.js";function He(S,w){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function Be(S,w){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}var ne={exports:{}};(function(S,w){(function(u,c){S.exports=c()})(ae,function(){return function(u,c){c.prototype.isSameOrAfter=function(f,_){return this.isSame(f,_)||this.isAfter(f,_)}}})})(ne);var Ne=ne.exports;const Ae=se(Ne);var ie={exports:{}};(function(S,w){(function(u,c){S.exports=c()})(ae,function(){return function(u,c){c.prototype.isSameOrBefore=function(f,_){return this.isSame(f,_)||this.isBefore(f,_)}}})})(ie);var Ee=ie.exports;const Le=se(Ee),ze={class:"p-2 sm:p-4 lg:p-8"},Pe={class:"max-w-7xl mx-auto"},Fe={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4 lg:mb-6"},Ie={class:"flex items-center space-x-1 sm:space-x-2 mt-3 lg:mt-0 overflow-x-auto pb-2 lg:pb-0"},Ve={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-3 sm:p-4 mb-4 lg:mb-6"},We={class:"flex items-center justify-between"},Ge={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white text-center px-2"},Ue={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},qe={class:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700"},Je={class:"grid grid-cols-7"},Ke=["onClick"],Qe={class:"flex flex-col h-full"},Xe={class:"flex justify-between items-start mb-1"},Ze={key:0,class:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-semibold bg-primary-600 text-white rounded-full"},Re={key:0,class:"flex-1 flex items-center justify-center"},et=["onClick"],tt={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},rt={class:"hidden lg:block overflow-x-auto"},ot={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},st={class:"font-semibold"},at={class:"text-xs mt-1"},nt={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},it={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},dt={class:"text-xs text-gray-500 dark:text-gray-400"},lt={class:"relative"},ut={class:"absolute inset-0"},ct=["onClick"],mt={class:"flex items-start gap-1"},gt=["onClick"],yt={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pt={class:"flex-1 min-w-0"},bt={class:"font-medium truncate"},ht={key:0,class:"text-[10px] opacity-75 mt-0.5"},xt={key:0},vt={key:1},_t={key:2},ft={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},kt={class:"space-y-1 min-w-0"},wt=["onClick"],Mt={class:"flex items-center gap-1"},Yt=["onClick"],Tt={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ct={class:"font-medium truncate block"},Dt={class:"lg:hidden overflow-x-auto"},St={class:"flex min-w-max"},$t={class:"mb-3 sticky top-0 bg-inherit pb-2 border-b border-gray-200 dark:border-gray-700"},jt={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},Ot={class:"space-y-2"},Ht=["onClick"],Bt={class:"flex items-start gap-2"},Nt=["onClick"],At={key:0,class:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Et={class:"flex-1 min-w-0"},Lt={class:"font-medium text-sm mb-1"},zt={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-1 ml-6"},Pt={key:0},Ft={key:1},It={key:2},Vt={key:0,class:"text-xs text-gray-400 dark:text-gray-500 text-center py-4"},Wt={key:2,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Gt={class:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700"},Ut={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white"},qt={class:"hidden lg:block overflow-x-auto"},Jt={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},Kt={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},Qt={class:"text-xs text-gray-500 dark:text-gray-400"},Xt={class:"relative"},Zt={class:"relative"},Rt={class:"absolute inset-0"},er=["onClick"],tr={class:"flex items-start gap-2"},rr=["onClick"],or={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},sr={class:"flex-1 min-w-0"},ar={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},nr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},ir={class:"flex flex-wrap items-center gap-2 mt-2"},dr={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},lr={key:0},ur={key:1},cr={key:2},mr={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},gr={class:"p-3"},yr={class:"space-y-2"},pr=["onClick"],br={class:"flex items-start gap-2"},hr=["onClick"],xr={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vr={class:"flex-1 min-w-0"},_r={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},fr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},kr={class:"flex flex-wrap items-center gap-2 mt-2"},wr={class:"lg:hidden p-3 sm:p-4"},Mr={class:"space-y-2 sm:space-y-3"},Yr=["onClick"],Tr={class:"flex items-start gap-3"},Cr=["onClick"],Dr={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Sr={class:"flex-1 min-w-0"},$r={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},jr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},Or={class:"flex flex-wrap items-center gap-2 mt-2"},Hr={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},Br={key:0},Nr={key:1},Ar={key:2},Er={key:0,class:"text-center py-8 sm:py-12 text-gray-500 dark:text-gray-400 text-sm sm:text-base"},Lr={__name:"Calendar",setup(S){b.extend(Ae),b.extend(Le),b.locale("ru");const w=Se(),u=D(b());v(()=>w.loading);const c=D("month"),f=D(!1),_=D(null),L=D(""),z=D(""),V=D(b()),Q=v(()=>{if(c.value==="month")return{start:u.value.startOf("month").subtract(7,"days").format("YYYY-MM-DD"),end:u.value.endOf("month").add(7,"days").format("YYYY-MM-DD")};if(c.value==="week"){const o=u.value.startOf("week");return{start:o.format("YYYY-MM-DD"),end:o.add(6,"day").format("YYYY-MM-DD")}}else{const o=u.value.format("YYYY-MM-DD");return{start:o,end:o}}}),T=v(()=>w.calendarTasks(Q.value.start,Q.value.end)),W=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],de=v(()=>u.value.format("MMMM")),le=v(()=>u.value.format("YYYY"));v(()=>{if(c.value!=="month"||T.value.length===0)return 0;const o=u.value.startOf("month"),r=u.value.endOf("month");return T.value.filter(i=>{if(!i.due_date||i.status==="completed")return!1;const s=b(i.due_date);return s.isValid()?s.isSameOrAfter(o,"day")&&s.isSameOrBefore(r,"day"):!1}).length});const ue=v(()=>{if(c.value==="month")return`${de.value} ${le.value}`;if(c.value==="week"){const o=u.value.startOf("week"),r=o.add(6,"day");return o.month()===r.month()?`${o.format("D")} - ${r.format("D MMMM YYYY")}`:`${o.format("D MMM")} - ${r.format("D MMM YYYY")}`}else return u.value.format("D MMMM YYYY")}),N=v(()=>{const o=u.value.startOf("week"),r=[];for(let e=0;e<7;e++){const i=o.add(e,"day"),s=i.format("YYYY-MM-DD"),l=T.value.filter(p=>p.due_date&&b(p.due_date).format("YYYY-MM-DD")===s&&p.status!=="completed");r.push({day:i.date(),monthName:i.format("MMM"),date:s,isToday:i.isSame(b(),"day"),tasks:l})}return r}),P=v(()=>{const o=u.value.format("YYYY-MM-DD");return T.value.filter(r=>r.due_date&&b(r.due_date).format("YYYY-MM-DD")===o&&r.status!=="completed")}),X=v(()=>P.value.filter(o=>o.estimated_time||o.end_time)),ce=v(()=>P.value.filter(o=>!o.estimated_time&&!o.end_time)),Z=o=>{if(!o||o.length===0)return Array.from({length:24},(s,l)=>l);let r=23,e=0;o.forEach(s=>{const l=s.estimated_time||s.end_time,p=s.end_time||s.estimated_time;if(l){const M=y(l),[Y]=M.split(":").map(Number);r=Math.min(r,Y),e=Math.max(e,Y)}if(p){const M=y(p),[Y]=M.split(":").map(Number);r=Math.min(r,Y),e=Math.max(e,Y)}}),r=Math.max(0,Math.floor(r)-1),e=Math.min(23,Math.ceil(e)+1);const i=[];for(let s=r;s<=e;s++)i.push(s);return i.length>0?i:Array.from({length:24},(s,l)=>l)},A=v(()=>Z(X.value)),E=v(()=>{const o=N.value.flatMap(r=>ee(r.date));return Z(o)}),me=v(()=>{const o=[],r=u.value.startOf("month"),e=u.value.endOf("month"),i=r.day()===0?6:r.day()-1;for(let l=i-1;l>=0;l--){const p=r.subtract(l+1,"day");o.push(G(p,!1))}for(let l=0;l<e.date();l++){const p=r.add(l,"day");o.push(G(p,!0))}const s=42-o.length;for(let l=0;l<s;l++){const p=e.add(l+1,"day");o.push(G(p,!1))}return o}),G=(o,r)=>{const e=o.format("YYYY-MM-DD"),i=T.value.filter(s=>s.due_date&&b(s.due_date).format("YYYY-MM-DD")===e&&s.status!=="completed");return{day:o.date(),date:e,currentMonth:r,isToday:o.isSame(b(),"day"),taskCount:i.length,tasks:i}},ge=()=>{c.value==="month"?u.value=u.value.subtract(1,"month"):c.value==="week"?u.value=u.value.subtract(1,"week"):u.value=u.value.subtract(1,"day")},ye=()=>{c.value==="month"?u.value=u.value.add(1,"month"):c.value==="week"?u.value=u.value.add(1,"week"):u.value=u.value.add(1,"day")},y=o=>o?/^\d{2}:\d{2}$/.test(o)?o:o.substring(0,5):"",R=o=>`${o.toString().padStart(2,"0")}:00`,ee=o=>T.value.filter(r=>r.due_date&&b(r.due_date).format("YYYY-MM-DD")===o&&r.status!=="completed"&&(r.estimated_time||r.end_time)),pe=o=>T.value.filter(r=>r.due_date&&b(r.due_date).format("YYYY-MM-DD")===o&&r.status!=="completed"&&!r.estimated_time&&!r.end_time),F=(o=null)=>{if(!o||o.length===0)return null;const r=V.value,e=r.hour(),i=r.minute(),s=o[0],l=o[o.length-1];if(e<s||e>l)return null;const p=64,M=e*60+i,Y=s*60,C=(M-Y)/60*p;return Math.max(0,C)},te=(o,r=null)=>{if(!o.estimated_time&&!o.end_time)return{display:"none"};const e=o.estimated_time||o.end_time,i=o.end_time||o.estimated_time;if(!e||!i)return{display:"none"};const s=y(e),l=y(i),[p,M]=s.split(":").map(Number),[Y,C]=l.split(":").map(Number),fe=r&&r.length>0?r[0]:0,re=64,J=p*60+M,ke=fe*60,we=(J-ke)/60*re;let K=Y*60+C;K<J&&(K+=24*60);const Me=(K-J)/60*re,Ye=Math.max(Me,40);return{top:`${Math.max(0,we)}px`,height:`${Ye}px`}},be=o=>{if(!o.estimated_time||!o.end_time)return 0;const r=y(o.estimated_time),e=y(o.end_time);if(!r||!e)return 0;const[i,s]=r.split(":").map(Number),[l,p]=e.split(":").map(Number),M=i*60+s;let C=l*60+p-M;return C<0&&(C+=24*60),C/60},$=o=>{if(o.status==="completed")return"bg-gray-100 dark:bg-gray-700";const r=be(o);return r===0||r<1?"bg-gradient-to-l from-white via-green-50 to-green-100 dark:from-gray-800 dark:via-green-900/20 dark:to-green-900/40":r>=1&&r<2?"bg-gradient-to-l from-white via-orange-50 to-orange-100 dark:from-gray-800 dark:via-orange-900/20 dark:to-orange-900/40":r>=2?"bg-gradient-to-l from-white via-red-50 to-red-100 dark:from-gray-800 dark:via-red-900/20 dark:to-red-900/40":"bg-white dark:bg-gray-800"},U=o=>({high:"Высокий",medium:"Средний",low:"Низкий",urgent:"Срочный"})[o]||o,j=o=>{_.value=o,z.value="",f.value=!0},he=o=>{_.value=null,z.value=o,f.value=!0},xe=o=>{u.value=b(o),c.value="day"},ve=async o=>{var r,e,i,s;L.value="";try{_.value?await w.updateTask(_.value.id,o):await w.createTask(o),f.value=!1,_.value=null}catch(l){console.error("Error saving task:",l);let p="Ошибка при сохранении задачи";(e=(r=l.response)==null?void 0:r.data)!=null&&e.errors?p=Object.values(l.response.data.errors).flat().join(", "):(s=(i=l.response)==null?void 0:i.data)!=null&&s.message&&(p=l.response.data.message),L.value=p}},_e=()=>{f.value=!1,_.value=null,z.value="",L.value=""},O=async o=>{try{o.status==="completed"?await w.updateTask(o.id,{status:"next_action"}):await w.completeTask(o.id)}catch(r){console.error("Error toggling task:",r)}};let q=null;return Te(()=>{V.value=b(),q=setInterval(()=>{V.value=b()},6e4)}),Ce(()=>{q&&clearInterval(q)}),(o,r)=>(n(),a("div",ze,[t("div",Pe,[t("div",Fe,[r[3]||(r[3]=t("div",null,[t("h1",{class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Календарь")],-1)),t("div",Ie,[t("button",{onClick:r[0]||(r[0]=e=>c.value="day"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",c.value==="day"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," День ",2),t("button",{onClick:r[1]||(r[1]=e=>c.value="week"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",c.value==="week"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Неделя ",2),t("button",{onClick:r[2]||(r[2]=e=>c.value="month"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",c.value==="month"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Месяц ",2)])]),t("div",Ve,[t("div",We,[t("button",{onClick:ge,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[H(B(He),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})]),t("h2",Ge,d(ue.value),1),t("button",{onClick:ye,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[H(B(Be),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})])])]),c.value==="month"?(n(),a("div",Ue,[t("div",qe,[(n(),a(h,null,x(W,e=>t("div",{key:e,class:"text-center py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0"},d(e),1)),64))]),t("div",Je,[(n(!0),a(h,null,x(me.value,(e,i)=>(n(),a("div",{key:i,onClick:s=>xe(e.date),class:g(["min-h-[60px] sm:min-h-[80px] lg:min-h-[100px] border-b border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-1 sm:p-2 cursor-pointer touch-manipulation hover:bg-gray-50 dark:hover:bg-gray-700 active:bg-gray-100 dark:active:bg-gray-600 transition-colors",{"bg-gray-50 dark:bg-gray-900":!e.currentMonth,"bg-primary-50 dark:bg-primary-900/30 hover:bg-primary-100 dark:hover:bg-primary-900/40":e.isToday}])},[t("div",Qe,[t("div",Xe,[t("span",{class:g(["text-xs sm:text-sm font-medium",{"text-gray-400 dark:text-gray-600":!e.currentMonth,"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-gray-100":e.currentMonth&&!e.isToday}])},d(e.day),3),e.taskCount>0?(n(),a("span",Ze,d(e.taskCount),1)):m("",!0)]),e.taskCount===0&&e.currentMonth?(n(),a("div",Re,[t("button",{onClick:k(s=>he(e.date),["stop"]),class:"w-6 h-6 flex items-center justify-center rounded-full text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[H(B(Oe),{class:"w-4 h-4"})],8,et)])):m("",!0)])],10,Ke))),128))])])):m("",!0),c.value==="week"?(n(),a("div",tt,[t("div",rt,[t("div",ot,[r[4]||(r[4]=t("div",{class:"border-r border-gray-200 dark:border-gray-700"},null,-1)),(n(!0),a(h,null,x(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["text-center py-3 text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[t("div",st,d(W[i]),1),t("div",at,d(e.day)+" "+d(e.monthName),1)],2))),128))]),t("div",nt,[t("div",it,[(n(!0),a(h,null,x(E.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[t("span",dt,d(R(e)),1)]))),128))]),(n(!0),a(h,null,x(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 relative",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[t("div",lt,[(n(!0),a(h,null,x(E.value,s=>(n(),a("div",{key:s,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),e.isToday&&F(E.value)?(n(),a("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:I({top:F(E.value)+"px"})},[...r[5]||(r[5]=[t("div",{class:"flex items-center"},[t("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),t("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):m("",!0),t("div",ut,[(n(!0),a(h,null,x(ee(e.date),s=>(n(),a("div",{key:s.id,onClick:k(l=>j(s),["stop"]),class:g(["absolute left-1 right-1 rounded cursor-pointer p-1.5 text-xs touch-manipulation border-l-2 shadow-sm z-10",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":$(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]]),style:I(te(s,E.value))},[t("div",mt,[t("button",{onClick:k(l=>O(s),["stop"]),class:g(["flex-shrink-0 w-3.5 h-3.5 mt-0.5 rounded border flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",yt,[...r[6]||(r[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):m("",!0)],10,gt),t("div",pt,[t("div",bt,d(s.title),1),s.estimated_time||s.end_time?(n(),a("div",ht,[s.estimated_time&&s.end_time?(n(),a("span",xt,d(y(s.estimated_time))+" - "+d(y(s.end_time)),1)):s.end_time?(n(),a("span",vt," до "+d(y(s.end_time)),1)):s.estimated_time?(n(),a("span",_t,d(y(s.estimated_time)),1)):m("",!0)])):m("",!0)])])],14,ct))),128))])])],2))),128))]),t("div",ft,[r[8]||(r[8]=t("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-2"},[t("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Без времени")],-1)),(n(!0),a(h,null,x(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-2",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[t("div",kt,[(n(!0),a(h,null,x(pe(e.date),s=>(n(),a("div",{key:s.id,onClick:k(l=>j(s),["stop"]),class:g(["p-1.5 rounded cursor-pointer text-xs touch-manipulation border-l-2 w-full max-w-full overflow-hidden",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":$(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[t("div",Mt,[t("button",{onClick:k(l=>O(s),["stop"]),class:g(["flex-shrink-0 w-3.5 h-3.5 rounded border flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",Tt,[...r[7]||(r[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):m("",!0)],10,Yt),t("div",Ct,d(s.title),1)])],10,wt))),128))])],2))),128))])]),t("div",Dt,[t("div",St,[(n(!0),a(h,null,x(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["w-[280px] min-w-[280px] border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-3",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[t("div",$t,[t("div",jt,d(W[i]),1),t("span",{class:g(["text-base font-semibold",{"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-white":!e.isToday}])},d(e.day)+" "+d(e.monthName),3)]),t("div",Ot,[(n(!0),a(h,null,x(e.tasks,s=>(n(),a("div",{key:s.id,onClick:l=>j(s),class:g(["p-3 rounded-lg cursor-pointer touch-manipulation border-l-4",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":$(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[t("div",Bt,[t("button",{onClick:k(l=>O(s),["stop"]),class:g(["flex-shrink-0 w-4 h-4 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",At,[...r[9]||(r[9]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):m("",!0)],10,Nt),t("div",Et,[t("div",Lt,d(s.title),1)])]),s.estimated_time||s.end_time?(n(),a("div",zt,[r[10]||(r[10]=De(" ⏱ ",-1)),s.estimated_time&&s.end_time?(n(),a("span",Pt,d(y(s.estimated_time))+" - "+d(y(s.end_time)),1)):s.estimated_time?(n(),a("span",Ft,d(y(s.estimated_time)),1)):s.end_time?(n(),a("span",It," до "+d(y(s.end_time)),1)):m("",!0)])):m("",!0)],10,Ht))),128)),e.tasks.length===0?(n(),a("div",Vt," Нет задач ")):m("",!0)])],2))),128))])])])):m("",!0),c.value==="day"?(n(),a("div",Wt,[t("div",Gt,[t("h3",Ut,d(u.value.format("D MMMM YYYY")),1)]),t("div",qt,[t("div",Jt,[t("div",Kt,[(n(!0),a(h,null,x(A.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[t("span",Qt,d(R(e)),1)]))),128))]),t("div",Xt,[t("div",Zt,[(n(!0),a(h,null,x(A.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),u.value.isSame(B(b)(),"day")&&F(A.value)?(n(),a("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:I({top:F(A.value)+"px"})},[...r[11]||(r[11]=[t("div",{class:"flex items-center"},[t("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),t("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):m("",!0),t("div",Rt,[(n(!0),a(h,null,x(X.value,e=>(n(),a("div",{key:e.id,onClick:k(i=>j(e),["stop"]),class:g(["absolute left-2 right-2 rounded-lg cursor-pointer p-2 sm:p-3 border-l-4 shadow-sm z-10 touch-manipulation",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":$(e)+" border-primary-500"]]),style:I(te(e,A.value))},[t("div",tr,[t("button",{onClick:k(i=>O(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",or,[...r[12]||(r[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):m("",!0)],10,rr),t("div",sr,[t("div",ar,d(e.title),1),e.description?(n(),a("div",nr,d(e.description),1)):m("",!0),t("div",ir,[e.estimated_time||e.end_time?(n(),a("span",dr,[H(B(oe),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(n(),a("span",lr,d(y(e.estimated_time))+" - "+d(y(e.end_time)),1)):e.estimated_time?(n(),a("span",ur,d(y(e.estimated_time)),1)):e.end_time?(n(),a("span",cr," до "+d(y(e.end_time)),1)):m("",!0)])):m("",!0),t("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(U(e.priority)),3)])])])],14,er))),128))])])])]),t("div",mr,[r[14]||(r[14]=t("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-3"},[t("span",{class:"text-xs text-gray-500 dark:text-gray-400 font-medium"},"Без времени")],-1)),t("div",gr,[t("div",yr,[(n(!0),a(h,null,x(ce.value,e=>(n(),a("div",{key:e.id,onClick:k(i=>j(e),["stop"]),class:g(["p-3 rounded-lg cursor-pointer border-l-4 touch-manipulation",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":$(e)+" border-primary-500"]])},[t("div",br,[t("button",{onClick:k(i=>O(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",xr,[...r[13]||(r[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):m("",!0)],10,hr),t("div",vr,[t("div",_r,d(e.title),1),e.description?(n(),a("div",fr,d(e.description),1)):m("",!0),t("div",kr,[t("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(U(e.priority)),3)])])])],10,pr))),128))])])])]),t("div",wr,[t("div",Mr,[(n(!0),a(h,null,x(P.value,e=>(n(),a("div",{key:e.id,onClick:i=>j(e),class:g(["p-3 sm:p-4 rounded-lg cursor-pointer border-l-4 touch-manipulation active:scale-[0.98] transition-transform",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":$(e)+" border-primary-500"]])},[t("div",Tr,[t("button",{onClick:k(i=>O(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",Dr,[...r[15]||(r[15]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):m("",!0)],10,Cr),t("div",Sr,[t("div",$r,d(e.title),1),e.description?(n(),a("div",jr,d(e.description),1)):m("",!0),t("div",Or,[e.estimated_time||e.end_time?(n(),a("span",Hr,[H(B(oe),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(n(),a("span",Br,d(y(e.estimated_time))+" - "+d(y(e.end_time)),1)):e.estimated_time?(n(),a("span",Nr,d(y(e.estimated_time)),1)):e.end_time?(n(),a("span",Ar," до "+d(y(e.end_time)),1)):m("",!0)])):m("",!0),t("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(U(e.priority)),3)])])])],10,Yr))),128)),P.value.length===0?(n(),a("div",Er," Нет задач на этот день ")):m("",!0)])])])):m("",!0),H($e,{show:f.value,task:_.value,"server-error":L.value,"default-date":z.value,onClose:_e,onSubmit:ve},null,8,["show","task","server-error","default-date"])])]))}},qr=je(Lr,[["__scopeId","data-v-562cd0e4"]]);export{qr as default};
