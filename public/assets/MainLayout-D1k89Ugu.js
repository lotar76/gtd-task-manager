import{c as n,o as r,a as e,j as ge,k as A,h as le,l as G,g as D,b as _,m as he,n as $e,p as Q,t as $,r as c,f as w,w as P,q as Ce,s as te,x as oe,T as K,d as Z,F as re,y as ae,z as pe,A as ee,v as ie,B as de,e as U,C as st,u as Me,i as rt,D as we}from"./index-CM0cfn01.js";import{u as ue}from"./workspace-CklmZmV4.js";import{r as je,a as _e,b as Se,c as Te,d as De,u as at,T as nt}from"./TaskModal-BX9O0CeU.js";import{u as lt}from"./projects-Djv7RB1g.js";import{r as it}from"./RectangleStackIcon-C1sog69S.js";import{r as Ee}from"./CalendarDaysIcon-DdUZBybl.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as dt}from"./ProjectModal-CiP0Gd6L.js";function ut(m,M){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Y(m,M){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const ct={class:"flex items-center space-x-3"},ve={__name:"NavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null}},setup(m){const M=m,g=ge(),S=ue(),y={inbox:De,lightning:Te,calendar:Se,clock:_e,archive:je,folder:Y,"calendar-days":Ee,target:Y,"rectangle-stack":it,cog:ut},i=A(()=>y[M.icon]||Y),u=A(()=>{var a;const f=(a=S.currentWorkspace)==null?void 0:a.id;return M.to.replace(":id",f||"1")}),k=A(()=>g.path===u.value);return(f,a)=>{const t=le("router-link");return r(),G(t,{to:u.value,class:Q(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",k.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:D(()=>[e("div",ct,[(r(),G(he(i.value),{class:"w-5 h-5"})),e("span",null,[$e(f.$slots,"default")])]),m.count!==null&&m.count>0?(r(),n("span",{key:0,class:Q(["px-2 py-0.5 text-xs font-semibold rounded-full",k.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},$(m.count),3)):_("",!0)]),_:3},8,["to","class"])}}},pt={class:"flex items-center space-x-3"},X={__name:"DroppableNavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null},dropStatus:{type:String,default:null}},emits:["task-dropped"],setup(m,{emit:M}){const g=m,S=M,y=ge(),i=ue(),u=c(!1),k={inbox:De,lightning:Te,calendar:Se,clock:_e,archive:je,folder:Y,"calendar-days":Ee,target:Y},f=A(()=>k[g.icon]||Y),a=A(()=>{var W;const L=(W=i.currentWorkspace)==null?void 0:W.id;return g.to.replace(":id",L||"1")}),t=A(()=>y.path===a.value),x=L=>{L.preventDefault(),u.value=!0,L.dataTransfer.dropEffect="move"},B=()=>{u.value=!1},R=L=>{L.preventDefault(),u.value=!1;try{const W=JSON.parse(L.dataTransfer.getData("application/json"));g.dropStatus&&W&&S("task-dropped",{taskId:W.id,newStatus:g.dropStatus})}catch(W){console.error("Error handling drop:",W)}};return(L,W)=>{const N=le("router-link");return r(),n("div",{onDrop:R,onDragover:P(x,["prevent"]),onDragleave:B,class:Q(["rounded-lg transition-all",u.value?"bg-primary-100 dark:bg-primary-900/40 ring-2 ring-primary-500":""])},[w(N,{to:a.value,class:Q(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",t.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:D(()=>[e("div",pt,[(r(),G(he(f.value),{class:"w-5 h-5"})),e("span",null,[$e(L.$slots,"default")])]),m.count!==null&&m.count>0?(r(),n("span",{key:0,class:Q(["px-2 py-0.5 text-xs font-semibold rounded-full",t.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},$(m.count),3)):_("",!0)]),_:3},8,["to","class"])],34)}}},Le="/assets/logo-D4KoLT79.jpg",Ae="/assets/logo-bg-CxxxX31b.png",vt={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20"},gt={class:"flex items-center justify-between px-4 lg:px-8 py-3"},kt={class:"lg:hidden flex items-center mr-3"},mt=["src"],yt={class:"flex items-center space-x-2 lg:space-x-4 ml-4"},xt={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 z-50"},ft={class:"relative"},bt={key:0,class:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"},wt={key:0,class:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 max-h-96 overflow-y-auto"},ht={key:0,class:"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400"},$t={key:1},Ct={class:"text-sm text-gray-900 dark:text-gray-100"},Mt={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},jt=["title"],_t={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},St={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Tt={class:"hidden lg:block relative"},Dt={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},Et={class:"hidden lg:block text-left"},Lt={class:"text-sm font-medium text-gray-900 dark:text-white"},At={class:"text-xs text-gray-500 dark:text-gray-400"},Bt={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2"},Wt={__name:"Toolbar",props:{user:{type:Object,default:null}},emits:["quick-add","quick-add-task","quick-add-project","quick-add-goal","search","logout","profile","settings","toggle-sidebar"],setup(m,{emit:M}){const g=Ce(),S=A(()=>g.isDark?Ae:Le),y=m,i=M;c("");const u=c(!1),k=c(!1),f=c(!1),a=c(0),t=c([]),x=c(null),B=A(()=>{var s;return(((s=y.user)==null?void 0:s.name)||"").split(" ").map(V=>V[0]).join("").toUpperCase().slice(0,2)}),R=()=>{f.value=!f.value},L=()=>{f.value=!1,i("quick-add-task")},W=()=>{f.value=!1,i("quick-add-project")},N=()=>{f.value=!1,i("quick-add-goal")},v=C=>{x.value&&!x.value.contains(C.target)&&(f.value=!1)},d=C=>{C.key==="Escape"&&(f.value=!1,u.value=!1,k.value=!1)};te(()=>{document.addEventListener("click",v),document.addEventListener("keydown",d)}),oe(()=>{document.removeEventListener("click",v),document.removeEventListener("keydown",d)});const b=()=>{k.value=!1,i("logout")},O=()=>{k.value=!1,i("profile")},q=()=>{k.value=!1,i("settings")},E={mounted(C,s){C.clickOutsideEvent=V=>{C===V.target||C.contains(V.target)||s.value()},document.addEventListener("click",C.clickOutsideEvent)},unmounted(C){document.removeEventListener("click",C.clickOutsideEvent)}};return(C,s)=>{var V,F;return r(),n("header",vt,[e("div",gt,[e("button",{onClick:s[0]||(s[0]=T=>C.$emit("toggle-sidebar")),class:"lg:hidden p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors mr-2"},[...s[4]||(s[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e("div",kt,[e("img",{src:S.value,alt:"GTD TODO",class:"h-8 w-8 object-contain"},null,8,mt)]),s[18]||(s[18]=e("div",{class:"flex-1"},null,-1)),e("div",yt,[e("div",{class:"relative",ref_key:"quickAddMenuContainer",ref:x},[e("button",{onClick:P(R,["stop"]),class:"inline-flex items-center px-3 lg:px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary-500 transition-colors"},[...s[5]||(s[5]=[e("svg",{class:"w-5 h-5 lg:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden lg:inline"},"Создать",-1)])]),w(K,{name:"dropdown"},{default:D(()=>[f.value?(r(),n("div",xt,[e("button",{onClick:L,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...s[6]||(s[6]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",null,"Задачу")],-1)])]),e("button",{onClick:W,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...s[7]||(s[7]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),e("span",null,"Проект")],-1)])]),e("button",{onClick:N,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...s[8]||(s[8]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),e("span",null,"Цель")],-1)])])])):_("",!0)]),_:1})],512),e("div",ft,[e("button",{onClick:s[1]||(s[1]=P(T=>u.value=!u.value,["stop"])),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors relative"},[s[9]||(s[9]=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),a.value>0?(r(),n("span",bt)):_("",!0)]),u.value?Z((r(),n("div",wt,[s[10]||(s[10]=e("div",{class:"px-4 py-2 border-b border-gray-200 dark:border-gray-600"},[e("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Уведомления")],-1)),t.value.length===0?(r(),n("div",ht," Нет новых уведомлений ")):(r(),n("div",$t,[(r(!0),n(re,null,ae(t.value,T=>(r(),n("button",{key:T.id,class:"w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-left"},[e("p",Ct,$(T.message),1),e("p",Mt,$(T.time),1)]))),128))]))])),[[E,()=>u.value=!1]]):_("",!0)]),e("button",{onClick:s[2]||(s[2]=T=>pe(g).toggleTheme()),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:pe(g).isDark?"Светлая тема":"Тёмная тема"},[pe(g).isDark?(r(),n("svg",_t,[...s[11]||(s[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(r(),n("svg",St,[...s[12]||(s[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))],8,jt),e("div",Tt,[e("button",{onClick:s[3]||(s[3]=P(T=>k.value=!k.value,["stop"])),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[e("div",Dt,$(B.value),1),e("div",Et,[e("div",Lt,$((V=m.user)==null?void 0:V.name),1),e("div",At,$((F=m.user)==null?void 0:F.email),1)]),s[13]||(s[13]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),k.value?Z((r(),n("div",Bt,[e("button",{onClick:O,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...s[14]||(s[14]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),e("span",null,"Профиль")],-1)])]),e("button",{onClick:q,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...s[15]||(s[15]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),e("span",null,"Настройки")],-1)])]),s[17]||(s[17]=e("div",{class:"border-t border-gray-200 dark:border-gray-600 my-2"},null,-1)),e("button",{onClick:b,class:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},[...s[16]||(s[16]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})]),e("span",null,"Выйти")],-1)])])])),[[E,()=>k.value=!1]]):_("",!0)])])])])}}},Ot=se(Wt,[["__scopeId","data-v-9432d8cd"]]),Pt={class:"flex min-h-screen items-center justify-center p-4"},zt={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},It={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Vt={class:"flex justify-end space-x-3 pt-4"},qt=["disabled"],Rt={__name:"WorkspaceModal",props:{show:{type:Boolean,default:!1}},emits:["close","submit"],setup(m,{emit:M}){const g=m,S=M,y=a=>{a.key==="Escape"&&g.show&&S("close")};te(()=>document.addEventListener("keydown",y)),oe(()=>document.removeEventListener("keydown",y));const i=c({name:"",description:""}),u=c(!1),k=c("");ee(()=>g.show,a=>{a||(i.value={name:"",description:""},u.value=!1,k.value="")});const f=()=>{k.value="",u.value=!0,S("submit",i.value)};return(a,t)=>(r(),G(de,{to:"body"},[w(K,{name:"modal"},{default:D(()=>[m.show?(r(),n("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=P(x=>a.$emit("close"),["self"]))},[t[10]||(t[10]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Pt,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=P(()=>{},["stop"]))},[e("div",zt,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Новое рабочее пространство ",-1)),e("button",{onClick:t[0]||(t[0]=x=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:P(f,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Название * ",-1)),Z(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=x=>i.value.name=x),type:"text",required:"",class:"input",placeholder:"Например: Команда разработки"},null,512),[[ie,i.value.name]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Описание ",-1)),Z(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=x=>i.value.description=x),rows:"3",class:"input",placeholder:"Краткое описание рабочего пространства"},null,512),[[ie,i.value.description]])]),k.value?(r(),n("div",It,$(k.value),1)):_("",!0),e("div",Vt,[e("button",{type:"button",onClick:t[3]||(t[3]=x=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:u.value,class:"btn btn-primary"},$(u.value?"Создание...":"Создать"),9,qt)])],32)])])])):_("",!0)]),_:1})]))}},Qt=se(Rt,[["__scopeId","data-v-68182ad4"]]),Ht={class:"flex min-h-screen items-center justify-center p-4"},Ut={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Nt={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},Ft={class:"font-medium"},Gt={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Kt={class:"flex justify-end space-x-3 pt-4"},Zt=["disabled"],Jt={__name:"AddMemberModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(m,{emit:M}){const g=m,S=M,y=a=>{a.key==="Escape"&&g.show&&S("close")};te(()=>document.addEventListener("keydown",y)),oe(()=>document.removeEventListener("keydown",y));const i=c({email:"",role:"member"}),u=c(!1),k=c("");ee(()=>g.show,a=>{a||(i.value={email:"",role:"member"},u.value=!1,k.value="")});const f=()=>{var a;k.value="",u.value=!0,S("submit",{...i.value,workspace_id:(a=g.workspace)==null?void 0:a.id})};return(a,t)=>(r(),G(de,{to:"body"},[w(K,{name:"modal"},{default:D(()=>{var x;return[m.show?(r(),n("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=P(B=>a.$emit("close"),["self"]))},[t[12]||(t[12]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Ht,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=P(()=>{},["stop"]))},[e("div",Ut,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Добавить пользователя ",-1)),e("button",{onClick:t[0]||(t[0]=B=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:P(f,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[e("p",Nt,[t[8]||(t[8]=U(" Workspace: ",-1)),e("span",Ft,$((x=m.workspace)==null?void 0:x.name),1)])]),e("div",null,[t[9]||(t[9]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Email пользователя * ",-1)),Z(e("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=B=>i.value.email=B),type:"email",required:"",class:"input",placeholder:"user@example.com"},null,512),[[ie,i.value.email]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"role",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Роль ",-1)),Z(e("select",{id:"role","onUpdate:modelValue":t[2]||(t[2]=B=>i.value.role=B),class:"input"},[...t[10]||(t[10]=[e("option",{value:"viewer"},"Просмотр",-1),e("option",{value:"member"},"Участник",-1),e("option",{value:"admin"},"Администратор",-1)])],512),[[st,i.value.role]])]),k.value?(r(),n("div",Gt,$(k.value),1)):_("",!0),e("div",Kt,[e("button",{type:"button",onClick:t[3]||(t[3]=B=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:u.value,class:"btn btn-primary"},$(u.value?"Добавление...":"Добавить"),9,Zt)])],32)])])])):_("",!0)]}),_:1})]))}},Xt=se(Jt,[["__scopeId","data-v-72cbffa0"]]),Yt={class:"flex min-h-screen items-center justify-center p-4"},eo={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},to={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},oo={class:"flex justify-end space-x-3 pt-4"},so=["disabled"],ro={__name:"RenameWorkspaceModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(m,{emit:M}){const g=m,S=M,y=a=>{a.key==="Escape"&&g.show&&S("close")};te(()=>document.addEventListener("keydown",y)),oe(()=>document.removeEventListener("keydown",y));const i=c({name:""}),u=c(!1),k=c("");ee(()=>g.workspace,a=>{a&&(i.value.name=a.name)},{immediate:!0}),ee(()=>g.show,a=>{a||(u.value=!1,k.value="")});const f=()=>{k.value="",u.value=!0,S("submit",i.value.name)};return(a,t)=>(r(),G(de,{to:"body"},[w(K,{name:"modal"},{default:D(()=>[m.show?(r(),n("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[4]||(t[4]=P(x=>a.$emit("close"),["self"]))},[t[8]||(t[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Yt,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[3]||(t[3]=P(()=>{},["stop"]))},[e("div",eo,[t[6]||(t[6]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Переименовать workspace ",-1)),e("button",{onClick:t[0]||(t[0]=x=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[5]||(t[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:P(f,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[7]||(t[7]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Новое название * ",-1)),Z(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=x=>i.value.name=x),type:"text",required:"",class:"input",placeholder:"Название workspace"},null,512),[[ie,i.value.name]])]),k.value?(r(),n("div",to,$(k.value),1)):_("",!0),e("div",oo,[e("button",{type:"button",onClick:t[2]||(t[2]=x=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:u.value,class:"btn btn-primary"},$(u.value?"Сохранение...":"Сохранить"),9,so)])],32)])])])):_("",!0)]),_:1})]))}},ao=se(ro,[["__scopeId","data-v-9efc4d3d"]]),no={class:"flex min-h-screen items-center justify-center p-4"},lo={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},io={class:"p-6"},uo={key:0,class:"text-center py-8"},co={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},po={key:2,class:"space-y-3"},vo={class:"flex items-center space-x-3"},go={class:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},ko={class:"font-medium text-gray-900 dark:text-white"},mo={class:"text-sm text-gray-500 dark:text-gray-400"},yo={class:"flex items-center space-x-3"},xo=["onClick","disabled"],fo={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},bo={key:1,class:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-red-600"},wo={key:0,class:"px-6 pb-4"},ho={class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},$o={class:"flex justify-end p-6 border-t border-gray-200 dark:border-gray-700"},Co={__name:"MembersModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","member-removed"],setup(m,{emit:M}){const g=m,S=M,y=v=>{v.key==="Escape"&&g.show&&S("close")};te(()=>document.addEventListener("keydown",y)),oe(()=>document.removeEventListener("keydown",y));const i=ue(),u=Me(),k=c([]),f=c(!1),a=c(""),t=c(null),x=v=>v?v.split(" ").map(d=>d[0]).join("").toUpperCase().substring(0,2):"?",B=v=>({owner:"Владелец",admin:"Администратор",member:"Участник",viewer:"Наблюдатель"})[v]||v,R=v=>({owner:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",admin:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",member:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",viewer:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"})[v]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400",L=v=>{var q,E,C,s,V,F,T;const d=(q=u.user)==null?void 0:q.id,b=((E=g.workspace)==null?void 0:E.owner_id)===d,O=((F=(V=(s=(C=g.workspace)==null?void 0:C.members)==null?void 0:s.find(ne=>ne.id===d))==null?void 0:V.pivot)==null?void 0:F.role)==="admin";return((T=g.workspace)==null?void 0:T.owner_id)===v.id||v.id===d?!1:b||O},W=async()=>{var v;if((v=g.workspace)!=null&&v.id){f.value=!0,a.value="";try{const d=await i.fetchMembers(g.workspace.id);k.value=d.members||d||[]}catch(d){console.error("Error loading members:",d),a.value="Ошибка при загрузке участников"}finally{f.value=!1}}},N=async v=>{var d,b;if(confirm(`Вы уверены, что хотите удалить ${v.name} из workspace?`)){t.value=v.id,a.value="";try{await i.removeMember(g.workspace.id,v.id),await W(),S("member-removed",v)}catch(O){console.error("Error removing member:",O),a.value=((b=(d=O.response)==null?void 0:d.data)==null?void 0:b.message)||"Ошибка при удалении участника"}finally{t.value=null}}};return ee(()=>g.show,v=>{v?W():(k.value=[],a.value="",t.value=null)}),ee(()=>{var v;return(v=g.workspace)==null?void 0:v.id},()=>{g.show&&W()}),(v,d)=>(r(),G(de,{to:"body"},[w(K,{name:"modal"},{default:D(()=>[m.show?(r(),n("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:d[3]||(d[3]=P(b=>v.$emit("close"),["self"]))},[d[8]||(d[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",no,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-auto",onClick:d[2]||(d[2]=P(()=>{},["stop"]))},[e("div",lo,[d[5]||(d[5]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Участники workspace ",-1)),e("button",{onClick:d[0]||(d[0]=b=>v.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...d[4]||(d[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",io,[f.value?(r(),n("div",uo,[...d[6]||(d[6]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):k.value.length===0?(r(),n("div",co," Нет участников ")):(r(),n("div",po,[(r(!0),n(re,null,ae(k.value,b=>{var O,q,E,C;return r(),n("div",{key:b.id,class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[e("div",vo,[e("div",go,$(x(b.name)),1),e("div",null,[e("div",ko,$(b.name),1),e("div",mo,$(b.email),1)])]),e("div",yo,[e("span",{class:Q(["px-3 py-1 text-xs font-medium rounded-full",R(((O=b.pivot)==null?void 0:O.role)||(((q=m.workspace)==null?void 0:q.owner_id)===b.id?"owner":"member"))])},$(B(((E=b.pivot)==null?void 0:E.role)||(((C=m.workspace)==null?void 0:C.owner_id)===b.id?"owner":"member"))),3),L(b)?(r(),n("button",{key:0,onClick:s=>N(b),class:"text-red-600 hover:text-red-700 p-2 rounded transition-colors",disabled:t.value===b.id,title:"Удалить из workspace"},[t.value!==b.id?(r(),n("svg",fo,[...d[7]||(d[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])])):(r(),n("div",bo))],8,xo)):_("",!0)])])}),128))]))]),a.value?(r(),n("div",wo,[e("div",ho,$(a.value),1)])):_("",!0),e("div",$o,[e("button",{onClick:d[1]||(d[1]=b=>v.$emit("close")),class:"btn btn-secondary"}," Закрыть ")])])])])):_("",!0)]),_:1})]))}},Mo=se(Co,[["__scopeId","data-v-e1a886d2"]]),jo={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},_o={key:0,class:"fixed inset-0 z-[100] bg-white dark:bg-gray-900 flex items-center justify-center"},So={class:"text-center"},To={class:"mb-6 flex justify-center"},Do=["src"],Eo={class:"text-sm text-gray-500 dark:text-gray-400 flex justify-center"},Lo={class:"flex h-screen"},Ao={class:"flex flex-col h-full"},Bo={class:"hidden lg:flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Wo={class:"flex items-center space-x-3"},Oo=["src"],Po={class:"p-4 border-b border-gray-200 dark:border-gray-700"},zo={class:"flex items-center justify-between mb-3"},Io={class:"space-y-1"},Vo=["onClick"],qo={class:"flex-1 overflow-y-auto p-4"},Ro={class:"space-y-1"},Qo={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 space-y-1"},Ho={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Uo={class:"space-y-1 max-h-64 overflow-y-auto"},No={class:"flex-1 min-w-0"},Fo={class:"flex items-center space-x-1"},Go={key:0,class:"text-xs text-gray-500 flex-shrink-0"},Ko={class:"text-xs text-gray-400 dark:text-gray-500 truncate"},Zo={key:0,class:"px-3 py-2 text-sm text-gray-500 text-center"},Jo={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Xo={class:"space-y-1"},Yo={key:1,class:"fixed bottom-5 right-5 z-30 lg:hidden flex flex-col gap-3 items-center"},es={class:"flex-1 flex flex-col overflow-hidden"},ts={class:"flex-1 overflow-auto"},os={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4"},ss={class:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-sm w-full p-6"},rs={class:"text-sm text-gray-500 dark:text-gray-400 mb-6"},as={__name:"MainLayout",setup(m){const M=rt(),g=ge(),S=Me(),y=ue(),i=at(),u=lt(),k=Ce(),f=A(()=>k.isDark?Ae:Le),a=c(!0),t=c("Загрузка...".split("")),x=c(!1);c(!1);const B=c(!1),R=c(!1),L=c(""),W=c(null),N=c(!1),v=c(!1),d=c(!1),b=c(!1),O=c(null),q=c(""),E=c(null),C=c(!1),s=c(null),V=A(()=>S.user),F=A(()=>y.workspaces),T=A(()=>i.counts);A(()=>y.currentWorkspace);const ne=A(()=>u.activeProjects),ce=A(()=>y.selectedWorkspaces.map(p=>p.id)),Be=A(()=>i.filteredTasks.length),We=A(()=>{if(ce.value.length===0)return 0;const p=T.value.scheduled||0,o=T.value.today||0,h=T.value.tomorrow||0;return p+o+h});A(()=>{var o;return(((o=V.value)==null?void 0:o.name)||"").split(" ").map(h=>h[0]).join("").toUpperCase().slice(0,2)});const ke=p=>{var H;y.toggleSelectedWorkspace(p);const h=M.currentRoute.value.path.split("/"),j=h[h.length-1],z=["inbox","next-actions","today","waiting","someday","calendar","projects","goals"].includes(j)?j:"inbox",I=((H=y.currentWorkspace)==null?void 0:H.id)||p.id;M.push(`/workspaces/${I}/${z}`)},Oe=async p=>{try{const o=await y.createWorkspace(p);B.value=!1,await ke(o)}catch(o){console.error("Ошибка создания workspace:",o)}},Pe=async()=>{await S.logout(),M.push("/login")},ze=()=>{R.value=!0},me=()=>{O.value=null,b.value=!0},Ie=async p=>{var o,h;q.value="";try{O.value?await u.updateProject(O.value.id,p):await u.createProject(p),b.value=!1,O.value=null,await u.fetchAllProjects({force:!0})}catch(j){console.error("Error saving project:",j),q.value=((h=(o=j.response)==null?void 0:o.data)==null?void 0:h.message)||j.message||"Ошибка при сохранении проекта"}},Ve=()=>{b.value=!1,O.value=null,q.value=""},qe=()=>{console.log("Quick add goal")},Re=async p=>{var o,h;L.value="";try{await i.createTask(p),R.value=!1}catch(j){console.error("Error creating task:",j),L.value=((h=(o=j.response)==null?void 0:o.data)==null?void 0:h.message)||j.message||"Ошибка при создании задачи"}},Qe=()=>{R.value=!1,L.value=""},J=async({taskId:p,newStatus:o})=>{var h,j;try{const l={status:o};if(o==="today")l.due_date=new Date().toISOString().split("T")[0];else if(o==="tomorrow"){const z=new Date;z.setDate(z.getDate()+1),l.due_date=z.toISOString().split("T")[0]}await i.updateTask(p,l)}catch(l){console.error("Error updating task status:",l),alert(((j=(h=l.response)==null?void 0:h.data)==null?void 0:j.message)||"Ошибка при обновлении задачи")}},He=p=>{console.log("Search:",p)},Ue=()=>{M.push("/settings")},Ne=()=>{M.push("/settings")},Fe=p=>{p.target.style.display="none"},Ge=async()=>{if(s.value){try{await y.deleteWorkspace(s.value.id)}catch(p){console.error("Error deleting workspace:",p)}C.value=!1,s.value=null}},ye=()=>{C.value=!1,s.value=null},Ke=()=>{N.value=!1,E.value=null},Ze=()=>{d.value=!1,E.value=null},Je=async()=>{await y.fetchWorkspaces()},Xe=()=>{v.value=!1,E.value=null},Ye=async p=>{var o,h,j,l,z;try{console.log("Sending member data:",p),await y.addMember(p.workspace_id,{email:p.email,role:p.role}),N.value=!1,E.value=null,alert("Пользователь успешно добавлен в workspace")}catch(I){console.error("Error adding member:",I),console.error("Error response:",(o=I.response)==null?void 0:o.data);let H="Ошибка при добавлении пользователя";(j=(h=I.response)==null?void 0:h.data)!=null&&j.errors?H=Object.values(I.response.data.errors).flat().join(", "):(z=(l=I.response)==null?void 0:l.data)!=null&&z.message&&(H=I.response.data.message),alert(H)}},et=async p=>{var o,h,j,l,z;try{console.log("Renaming workspace:",E.value.id,"to:",p),await y.updateWorkspace(E.value.id,{name:p}),await y.fetchWorkspaces(),v.value=!1,E.value=null,alert("Workspace успешно переименован")}catch(I){console.error("Error renaming workspace:",I),console.error("Error response:",(o=I.response)==null?void 0:o.data);let H="Ошибка при переименовании";(j=(h=I.response)==null?void 0:h.data)!=null&&j.errors?H=Object.values(I.response.data.errors).flat().join(", "):(z=(l=I.response)==null?void 0:l.data)!=null&&z.message&&(H=I.response.data.message),alert(H)}},xe=p=>{p.key==="Escape"&&(W.value=null)};te(async()=>{try{await y.fetchWorkspaces(),await Promise.all([i.fetchAllTasks(),u.fetchAllProjects()])}finally{a.value=!1}i.startSync(),u.startSync(),document.addEventListener("click",fe),document.addEventListener("keydown",xe)}),oe(()=>{i.stopSync(),u.stopSync(),document.removeEventListener("click",fe),document.removeEventListener("keydown",xe)});const fe=()=>{W.value=null},tt=p=>{const o=F.value.find(h=>h.id===p);return(o==null?void 0:o.name)||""},be=p=>g.path.includes(`/projects/${p}`);return(p,o)=>{const h=le("router-link"),j=le("router-view");return r(),n("div",jo,[w(K,{name:"fade"},{default:D(()=>[a.value?(r(),n("div",_o,[e("div",So,[e("div",To,[e("img",{src:f.value,alt:"GTD TODO",class:"w-48 h-48 object-contain",onError:Fe},null,40,Do)]),o[7]||(o[7]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"GTD TODO",-1)),e("p",Eo,[(r(!0),n(re,null,ae(t.value,(l,z)=>(r(),n("span",{key:z,style:we({animationDelay:`${z*.1}s`}),class:"loading-letter"},$(l),5))),128))])])])):_("",!0)]),_:1}),e("div",Lo,[e("aside",{class:Q(["fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",x.value?"translate-x-0":"-translate-x-full lg:translate-x-0"])},[e("div",Ao,[e("div",Bo,[e("div",Wo,[e("img",{src:f.value,alt:"GTD TODO",class:"h-10 w-10 object-contain"},null,8,Oo),o[8]||(o[8]=e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"},"GTD TODO",-1))])]),e("div",Po,[e("div",zo,[o[10]||(o[10]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Рабочие пространства ",-1)),e("button",{onClick:o[0]||(o[0]=l=>B.value=!0),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Создать workspace"},[...o[9]||(o[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",Io,[(r(!0),n(re,null,ae(F.value,l=>(r(),n("div",{key:l.id,class:Q(["group flex items-center rounded-lg transition-colors overflow-hidden",ce.value.includes(l.id)?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[e("button",{class:"flex-1 flex items-center px-3 py-2 text-sm cursor-pointer text-left",onClick:z=>ke(l)},[e("span",{class:Q(["truncate",ce.value.includes(l.id)?"text-primary-700 dark:text-primary-400 font-medium":"text-gray-500 dark:text-gray-400"])},$(l.name),3)],8,Vo),w(h,{to:`/workspaces/${l.id}/settings`,class:"flex-shrink-0 p-1.5 mr-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors opacity-0 group-hover:opacity-100",title:"Настройки",onClick:o[1]||(o[1]=P(()=>{},["stop"]))},{default:D(()=>[...o[11]||(o[11]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})],-1)])]),_:1},8,["to"])],2))),128))])]),e("nav",qo,[e("div",Ro,[w(X,{to:"/workspaces/:id/inbox",icon:"inbox",count:T.value.inbox,"drop-status":"inbox",onTaskDropped:J},{default:D(()=>[...o[12]||(o[12]=[U(" Входящие ",-1)])]),_:1},8,["count"])]),e("div",Qo,[w(X,{to:"/workspaces/:id/today",icon:"calendar",count:T.value.today,"drop-status":"today",onTaskDropped:J},{default:D(()=>[...o[13]||(o[13]=[U(" Сегодня ",-1)])]),_:1},8,["count"]),w(X,{to:"/workspaces/:id/next-actions",icon:"lightning",count:T.value.next_actions,"drop-status":"next_action",onTaskDropped:J},{default:D(()=>[...o[14]||(o[14]=[U(" Следующие ",-1)])]),_:1},8,["count"]),w(X,{to:"/workspaces/:id/tomorrow",icon:"calendar-days",count:T.value.tomorrow,"drop-status":"tomorrow",onTaskDropped:J},{default:D(()=>[...o[15]||(o[15]=[U(" Завтра ",-1)])]),_:1},8,["count"]),w(ve,{to:"/workspaces/:id/calendar",icon:"calendar-days",count:We.value},{default:D(()=>[...o[16]||(o[16]=[U(" Календарь ",-1)])]),_:1},8,["count"]),w(X,{to:"/workspaces/:id/someday",icon:"archive",count:T.value.someday,"drop-status":"someday",onTaskDropped:J},{default:D(()=>[...o[17]||(o[17]=[U(" Когда-нибудь ",-1)])]),_:1},8,["count"]),w(X,{to:"/workspaces/:id/waiting",icon:"clock",count:T.value.waiting,"drop-status":"waiting",onTaskDropped:J},{default:D(()=>[...o[18]||(o[18]=[U(" Ожидание ",-1)])]),_:1},8,["count"]),w(ve,{to:"/workspaces/:id/all",icon:"rectangle-stack",count:Be.value},{default:D(()=>[...o[19]||(o[19]=[U(" Все задачи ",-1)])]),_:1},8,["count"])]),e("div",Ho,[e("div",{class:"flex items-center justify-between px-3 mb-3"},[o[21]||(o[21]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Проекты ",-1)),e("button",{onClick:me,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Создать проект"},[...o[20]||(o[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",Uo,[(r(!0),n(re,null,ae(ne.value,l=>(r(),n("div",{key:l.id,class:Q(["flex items-center justify-between group px-3 py-2 rounded-lg transition-colors",be(l.id)?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[w(h,{to:`/workspaces/${l.workspace_id}/projects/${l.id}`,class:"flex items-center space-x-2 flex-1 min-w-0"},{default:D(()=>[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:we({backgroundColor:l.color||"#3B82F6"})},null,4),e("div",No,[e("div",Fo,[e("span",{class:Q(["text-sm truncate",be(l.id)?"text-primary-700 dark:text-primary-400 font-medium":"text-gray-700 dark:text-gray-300"])},$(l.name),3),l.tasks_count>0?(r(),n("span",Go," ("+$(l.tasks_count)+") ",1)):_("",!0)]),e("div",Ko,$(tt(l.workspace_id)),1)])]),_:2},1032,["to"])],2))),128)),ne.value.length===0?(r(),n("div",Zo," Нет проектов ")):_("",!0)])]),e("div",Jo,[o[23]||(o[23]=e("h3",{class:"px-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3"}," Организация ",-1)),e("div",Xo,[w(ve,{to:"/workspaces/:id/goals",icon:"target"},{default:D(()=>[...o[22]||(o[22]=[U(" Цели ",-1)])]),_:1})])])])])],2),x.value?(r(),n("div",{key:0,onClick:o[2]||(o[2]=l=>x.value=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})):_("",!0),x.value?_("",!0):(r(),n("div",Yo,[e("button",{onClick:o[3]||(o[3]=l=>R.value=!0),class:"w-10 h-10 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg flex items-center justify-center active:scale-95 transition-transform"},[...o[24]||(o[24]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1)])]),e("button",{onClick:o[4]||(o[4]=l=>x.value=!0),class:"w-12 h-12 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-lg flex items-center justify-center active:scale-95 transition-transform"},[...o[25]||(o[25]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])])),e("main",es,[w(Ot,{user:V.value,onQuickAddTask:ze,onQuickAddProject:me,onQuickAddGoal:qe,onSearch:He,onLogout:Pe,onProfile:Ue,onSettings:Ne,onToggleSidebar:o[5]||(o[5]=l=>x.value=!x.value)},null,8,["user"]),e("div",ts,[w(j)])])]),w(Qt,{show:B.value,onClose:o[6]||(o[6]=l=>B.value=!1),onSubmit:Oe},null,8,["show"]),w(nt,{show:R.value,"server-error":L.value,onClose:Qe,onSubmit:Re},null,8,["show","server-error"]),w(Xt,{show:N.value,workspace:E.value,onClose:Ke,onSubmit:Ye},null,8,["show","workspace"]),w(ao,{show:v.value,workspace:E.value,onClose:Xe,onSubmit:et},null,8,["show","workspace"]),w(Mo,{show:d.value,workspace:E.value,onClose:Ze,onMemberRemoved:Je},null,8,["show","workspace"]),w(dt,{show:b.value,project:O.value,"server-error":q.value,onClose:Ve,onSubmit:Ie},null,8,["show","project","server-error"]),w(K,{name:"modal"},{default:D(()=>{var l;return[C.value?(r(),n("div",os,[e("div",{class:"fixed inset-0 bg-black/50",onClick:ye}),e("div",ss,[o[26]||(o[26]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Удалить пространство?",-1)),e("p",rs," Пространство «"+$((l=s.value)==null?void 0:l.name)+"» будет удалено навсегда. Это действие нельзя отменить. ",1),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:ye,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"}," Отмена "),e("button",{onClick:Ge,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors"}," Удалить ")])])])):_("",!0)]}),_:1})])}}},gs=se(as,[["__scopeId","data-v-19b9be97"]]);export{gs as default};
