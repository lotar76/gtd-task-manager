import{G as v,r as p,E as o}from"./index-D5Pxl4fZ.js";const g=v("workspace",()=>{const s=p([]),t=p(null),c=p(!1);return{workspaces:s,currentWorkspace:t,loading:c,fetchWorkspaces:async()=>{c.value=!0;try{const e=await o.get("/v1/workspaces");s.value=e.data;const a=localStorage.getItem("currentWorkspaceId");if(a&&s.value.length>0){const r=s.value.find(n=>n.id===parseInt(a));r?t.value=r:t.value=s.value[0]}else s.value.length>0&&!t.value&&(t.value=s.value[0])}finally{c.value=!1}},fetchWorkspace:async e=>{c.value=!0;try{const a=await o.get(`/v1/workspaces/${e}`);return t.value=a.data,a.data}finally{c.value=!1}},createWorkspace:async e=>{const a=await o.post("/v1/workspaces",e);return s.value.push(a.data),a.data},updateWorkspace:async(e,a)=>{var u;const r=await o.put(`/v1/workspaces/${e}`,a),n=s.value.findIndex(l=>l.id===e);return n!==-1&&(s.value[n]=r.data),((u=t.value)==null?void 0:u.id)===e&&(t.value=r.data),r.data},addMember:async(e,a)=>(await o.post(`/v1/workspaces/${e}/members`,a)).data,removeMember:async(e,a)=>(await o.delete(`/v1/workspaces/${e}/members/${a}`)).data,fetchMembers:async e=>(await o.get(`/v1/workspaces/${e}/members`)).data,setCurrentWorkspace:e=>{t.value=e,localStorage.setItem("currentWorkspaceId",e.id)}}});export{g as u};
