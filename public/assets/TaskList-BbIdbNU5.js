import{r as N,c as o,o as n,b as i,F as S,y as z,p as y,a as s,w as L,t as m,e as E,C as V}from"./app-CggqkjMs.js";import{c as A,g as G,d as h}from"./ru-B7JyRvIu.js";var H={exports:{}};(function(v,$){(function(l,f){v.exports=f()})(A,function(){return function(l,f,d){l=l||{};var u=f.prototype,w={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function b(r,t,e,p){return u.fromToBase(r,t,e,p)}d.en.relativeTime=w,u.fromToBase=function(r,t,e,p,a){for(var M,_,C,D=e.$locale().relativeTime||w,j=l.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],F=j.length,x=0;x<F;x+=1){var c=j[x];c.d&&(M=p?d(r).diff(e,c.d,!0):e.diff(r,c.d,!0));var g=(l.rounding||Math.round)(Math.abs(M));if(C=M>0,g<=c.r||!c.r){g<=1&&x>0&&(c=j[x-1]);var T=D[c.l];a&&(g=a(""+g)),_=typeof T=="string"?T.replace("%d",g):T(g,t,c.l,C);break}}if(t)return _;var B=C?D.future:D.past;return typeof B=="function"?B(_):B.replace("%s",_)},u.to=function(r,t){return b(r,t,this,!0)},u.from=function(r,t){return b(r,t,this)};var k=function(r){return r.$u?d.utc():d()};u.toNow=function(r){return this.to(k(this),r)},u.fromNow=function(r){return this.from(k(this),r)}}})})(H);var J=H.exports;const O=G(J),q={class:"space-y-2"},I=["onDragstart","onClick"],K={class:"flex items-start space-x-3"},P=["onClick"],Q={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},R={class:"flex-1 min-w-0"},U={key:0,class:"text-sm text-gray-500 mt-1 truncate"},W={class:"flex flex-wrap items-center gap-2 mt-2"},X={key:0,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-indigo-100 text-indigo-700"},Y={key:3,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700"},Z={key:0,class:"text-center py-12"},re={__name:"TaskList",props:{tasks:{type:Array,default:()=>[]}},emits:["task-click","toggle-complete","task-drag-start","task-drag-end"],setup(v,{emit:$}){h.extend(O),h.locale("ru");const l=$,f=N(!1),d=N(null),u=(r,t)=>{f.value=!0,d.value=t,r.dataTransfer.effectAllowed="move",r.dataTransfer.setData("application/json",JSON.stringify(t)),l("task-drag-start",t)},w=()=>{f.value=!1,d.value=null,l("task-drag-end")},b=r=>{const t=h(r),e=h();return t.isSame(e,"day")?"Сегодня":t.isSame(e.add(1,"day"),"day")?"Завтра":t.isBefore(e)?t.fromNow():t.format("D MMM")},k=r=>{if(r.status==="completed")return"bg-gray-100 text-gray-600";const t=h(r.due_date),e=h();return t.isBefore(e,"day")?"bg-red-100 text-red-700":t.isSame(e,"day")?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600"};return(r,t)=>(n(),o("div",q,[(n(!0),o(S,null,z(v.tasks,e=>{var p;return n(),o("div",{key:e.id,draggable:"true",onDragstart:a=>u(a,e),onDragend:w,class:y(["bg-white border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow cursor-move",{"opacity-50":f.value&&((p=d.value)==null?void 0:p.id)===e.id}]),onClick:a=>r.$emit("task-click",e)},[s("div",K,[s("button",{onClick:L(a=>r.$emit("toggle-complete",e),["stop"]),class:y(["mt-1 flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-primary-600 border-primary-600":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),o("svg",Q,[...t[0]||(t[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):i("",!0)],10,P),s("div",R,[s("h3",{class:y(["text-sm font-medium",e.status==="completed"?"text-gray-400 line-through":"text-gray-900"])},m(e.title),3),e.description?(n(),o("p",U,m(e.description),1)):i("",!0),s("div",W,[e.workspace?(n(),o("span",X,[t[1]||(t[1]=s("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),E(" "+m(e.workspace.name),1)])):i("",!0),e.project?(n(),o("span",{key:1,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium",style:V({backgroundColor:e.project.color+"20",color:e.project.color})},m(e.project.name),5)):i("",!0),e.due_date?(n(),o("span",{key:2,class:y(["inline-flex items-center px-2 py-1 rounded text-xs font-medium",k(e)])},[t[2]||(t[2]=s("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),E(" "+m(b(e.due_date)),1)],2)):i("",!0),e.assignee?(n(),o("span",Y,m(e.assignee.name),1)):i("",!0),e.context?(n(),o("span",{key:4,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium",style:V({backgroundColor:e.context.color+"20",color:e.context.color})},m(e.context.name),5)):i("",!0),(n(!0),o(S,null,z(e.tags,a=>(n(),o("span",{key:a.id,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium",style:V({backgroundColor:a.color+"20",color:a.color})},m(a.name),5))),128))])]),e.priority!=="medium"?(n(),o("div",{key:0,class:y(["flex-shrink-0 w-2 h-2 rounded-full mt-2",{"bg-red-500":e.priority==="urgent","bg-orange-500":e.priority==="high","bg-blue-500":e.priority==="low"}])},null,2)):i("",!0)])],42,I)}),128)),v.tasks.length?i("",!0):(n(),o("div",Z,[...t[3]||(t[3]=[s("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),s("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Нет задач",-1),s("p",{class:"mt-1 text-sm text-gray-500"},"Создайте первую задачу чтобы начать",-1)])]))]))}};export{re as _};
