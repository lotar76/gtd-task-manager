import{u as _,T as y}from"./TaskModal-CJhei9Ul.js";import{_ as h}from"./TaskList-DsFPsP-2.js";import{k as d,r as c,c as m,a as r,l as x,f as w,o as i}from"./index-C08jv159.js";import"./workspace-BpQsCEKO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ru-B7JyRvIu.js";const b={class:"p-4 lg:p-8"},C={class:"max-w-4xl mx-auto"},S={key:0,class:"text-center py-12"},q={__name:"Someday",setup(B){const a=_(),k=d(()=>a.somedayTasks),v=d(()=>a.loading),l=c(!1),o=c(null),t=c(""),p=e=>{o.value=e,l.value=!0},f=async e=>{try{e.status==="completed"?await a.updateTask(e.id,{status:"someday"}):await a.completeTask(e.id)}catch(s){console.error("Error toggling task:",s)}},g=async e=>{var s,u;t.value="";try{o.value?await a.updateTask(o.value.id,e):await a.createTask(e),l.value=!1,o.value=null}catch(n){console.error("Error saving task:",n),t.value=((u=(s=n.response)==null?void 0:s.data)==null?void 0:u.message)||n.message||"Ошибка при сохранении задачи"}},T=()=>{l.value=!1,o.value=null,t.value=""};return(e,s)=>(i(),m("div",b,[r("div",C,[s[1]||(s[1]=r("div",{class:"mb-6"},[r("h1",{class:"text-xl lg:text-2xl font-semibold text-gray-900"},"Когда-нибудь")],-1)),v.value?(i(),m("div",S,[...s[0]||(s[0]=[r("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(i(),x(h,{key:1,tasks:k.value,onTaskClick:p,onToggleComplete:f},null,8,["tasks"])),w(y,{show:l.value,task:o.value,"server-error":t.value,onClose:T,onSubmit:g},null,8,["show","task","server-error"])])]))}};export{q as default};
