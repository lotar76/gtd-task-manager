import{c as i,o as r,a as e,j as me,k as T,h as le,l as K,g as S,b as L,m as Me,n as je,p as H,t as M,r as k,f as b,w as O,q as Se,s as te,x as oe,T as N,y as ge,d as Y,z as ee,v as ie,A as de,e as U,B as dt,u as _e,F as ae,C as ne,i as ct,D as Ce}from"./index-foeisxHv.js";import{u as ce}from"./workspace-BPEeWFJ1.js";import{r as De,a as Ee,b as Te,c as Le,d as Ae,e as Be,u as ut,T as vt}from"./TaskModal-CZ2jx3Sp.js";import{u as pt}from"./projects-ZcoRqfy_.js";import{r as gt}from"./RectangleStackIcon-DY-_HnRu.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as kt}from"./ProjectModal-DE-wApbi.js";function mt(f,j){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function X(f,j){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const ft={class:"flex items-center space-x-3"},ke={__name:"NavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null}},emits:["close-sidebar"],setup(f,{emit:j}){const v=f,_=j,y=me(),d=ce(),c=()=>{window.innerWidth<1024&&_("close-sidebar")},g={inbox:Be,lightning:Ae,calendar:Le,clock:Te,archive:Ee,folder:X,"calendar-days":De,target:X,"rectangle-stack":gt,cog:mt},A=T(()=>g[v.icon]||X),a=T(()=>{var m;const w=(m=d.currentWorkspace)==null?void 0:m.id;return v.to.replace(":id",w||"1")}),o=T(()=>y.path===a.value);return(w,m)=>{const z=le("router-link");return r(),K(z,{to:a.value,onClick:c,class:H(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",o.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:S(()=>[e("div",ft,[(r(),K(Me(A.value),{class:"w-5 h-5"})),e("span",null,[je(w.$slots,"default")])]),f.count!==null&&f.count>0?(r(),i("span",{key:0,class:H(["px-2 py-0.5 text-xs font-semibold rounded-full",o.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},M(f.count),3)):L("",!0)]),_:3},8,["to","class"])}}},yt={class:"flex items-center space-x-3"},J={__name:"DroppableNavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null},dropStatus:{type:String,default:null}},emits:["task-dropped","close-sidebar"],setup(f,{emit:j}){const v=f,_=j,y=me(),d=ce(),c=k(!1),g=()=>{window.innerWidth<1024&&_("close-sidebar")},A={inbox:Be,lightning:Ae,calendar:Le,clock:Te,archive:Ee,folder:X,"calendar-days":De,target:X},a=T(()=>A[v.icon]||X),o=T(()=>{var B;const D=(B=d.currentWorkspace)==null?void 0:B.id;return v.to.replace(":id",D||"1")}),w=T(()=>y.path===o.value),m=D=>{D.preventDefault(),c.value=!0,D.dataTransfer.dropEffect="move"},z=()=>{c.value=!1},q=D=>{D.preventDefault(),c.value=!1;try{const B=JSON.parse(D.dataTransfer.getData("application/json"));v.dropStatus&&B&&_("task-dropped",{taskId:B.id,newStatus:v.dropStatus})}catch(B){console.error("Error handling drop:",B)}};return(D,B)=>{const p=le("router-link");return r(),i("div",{onDrop:q,onDragover:O(m,["prevent"]),onDragleave:z,class:H(["rounded-lg transition-all",c.value?"bg-primary-100 dark:bg-primary-900/40 ring-2 ring-primary-500":""])},[b(p,{to:o.value,onClick:g,class:H(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",w.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:S(()=>[e("div",yt,[(r(),K(Me(a.value),{class:"w-5 h-5"})),e("span",null,[je(D.$slots,"default")])]),f.count!==null&&f.count>0?(r(),i("span",{key:0,class:H(["px-2 py-0.5 text-xs font-semibold rounded-full",w.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},M(f.count),3)):L("",!0)]),_:3},8,["to","class"])],34)}}},We="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%20width='300'%20height='300'%3e%3ccircle%20cx='150'%20cy='150'%20r='150'%20fill='%23E84848'/%3e%3ccircle%20cx='150'%20cy='150'%20r='115'%20fill='%23FFFFFF'/%3e%3ccircle%20cx='150'%20cy='150'%20r='90'%20fill='%23E84848'/%3e%3ccircle%20cx='150'%20cy='150'%20r='60'%20fill='%23FFFFFF'/%3e%3ccircle%20cx='150'%20cy='150'%20r='30'%20fill='%23E84848'/%3e%3c/svg%3e",Fe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%20width='300'%20height='300'%3e%3ccircle%20cx='150'%20cy='150'%20r='150'%20fill='%23E84848'/%3e%3ccircle%20cx='150'%20cy='150'%20r='115'%20fill='%23FFFFFF'/%3e%3ccircle%20cx='150'%20cy='150'%20r='90'%20fill='%23E84848'/%3e%3ccircle%20cx='150'%20cy='150'%20r='60'%20fill='%23FFFFFF'/%3e%3ccircle%20cx='150'%20cy='150'%20r='30'%20fill='%23E84848'/%3e%3c/svg%3e",xt={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20"},bt={class:"flex items-center justify-between px-4 lg:px-8 py-3"},wt={class:"lg:hidden flex items-center mr-3"},ht=["src"],$t={class:"lg:hidden text-sm font-medium text-gray-700 dark:text-gray-300"},Ct={class:"flex items-center space-x-2 lg:space-x-4 ml-4"},Mt={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 z-50"},jt=["title"],St={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},_t={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Dt={class:"relative"},Et={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},Tt={class:"hidden lg:block text-left"},Lt={class:"text-sm font-medium text-gray-900 dark:text-white"},At={class:"text-xs text-gray-500 dark:text-gray-400"},Bt={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2"},Wt={__name:"Toolbar",props:{user:{type:Object,default:null}},emits:["quick-add","quick-add-task","quick-add-project","quick-add-goal","search","logout","profile","settings"],setup(f,{emit:j}){const v=Se(),_=T(()=>v.isDark?Fe:We),y=f,d=j;k("");const c=k(!1),g=k(!1),A=k(null),a=T(()=>{var n;return(((n=y.user)==null?void 0:n.name)||"").split(" ").map(h=>h[0]).join("").toUpperCase().slice(0,2)}),o=T(()=>{const x=new Date,n=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],h=["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],V=n[x.getDay()],I=x.getDate(),G=h[x.getMonth()];return`${V}, ${I} ${G}`}),w=()=>{g.value=!g.value},m=()=>{g.value=!1,d("quick-add-task")},z=()=>{g.value=!1,d("quick-add-project")},q=()=>{g.value=!1,d("quick-add-goal")},D=x=>{A.value&&!A.value.contains(x.target)&&(g.value=!1)},B=x=>{x.key==="Escape"&&(g.value=!1,c.value=!1)};te(()=>{document.addEventListener("click",D),document.addEventListener("keydown",B)}),oe(()=>{document.removeEventListener("click",D),document.removeEventListener("keydown",B)});const p=()=>{c.value=!1,d("logout")},u=()=>{c.value=!1,d("profile")},C=()=>{c.value=!1,d("settings")},P={mounted(x,n){x.clickOutsideEvent=h=>{x===h.target||x.contains(h.target)||n.value()},document.addEventListener("click",x.clickOutsideEvent)},unmounted(x){document.removeEventListener("click",x.clickOutsideEvent)}};return(x,n)=>{var h,V;return r(),i("header",xt,[e("div",bt,[e("div",wt,[e("img",{src:_.value,alt:"GTD TODO",class:"h-8 w-8 object-contain"},null,8,ht)]),e("div",$t,M(o.value),1),n[13]||(n[13]=e("div",{class:"flex-1"},null,-1)),e("div",Ct,[e("div",{class:"relative hidden lg:block",ref_key:"quickAddMenuContainer",ref:A},[e("button",{onClick:O(w,["stop"]),class:"inline-flex items-center px-3 lg:px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary-500 transition-colors"},[...n[2]||(n[2]=[e("svg",{class:"w-5 h-5 lg:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden lg:inline"},"Создать",-1)])]),b(N,{name:"dropdown"},{default:S(()=>[g.value?(r(),i("div",Mt,[e("button",{onClick:m,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[3]||(n[3]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",null,"Задачу")],-1)])]),e("button",{onClick:z,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[4]||(n[4]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),e("span",null,"Проект")],-1)])]),e("button",{onClick:q,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[5]||(n[5]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),e("span",null,"Цель")],-1)])])])):L("",!0)]),_:1})],512),e("button",{onClick:n[0]||(n[0]=I=>ge(v).toggleTheme()),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:ge(v).isDark?"Светлая тема":"Тёмная тема"},[ge(v).isDark?(r(),i("svg",St,[...n[6]||(n[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(r(),i("svg",_t,[...n[7]||(n[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))],8,jt),e("div",Dt,[e("button",{onClick:n[1]||(n[1]=O(I=>c.value=!c.value,["stop"])),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[e("div",Et,M(a.value),1),e("div",Tt,[e("div",Lt,M((h=f.user)==null?void 0:h.name),1),e("div",At,M((V=f.user)==null?void 0:V.email),1)]),n[8]||(n[8]=e("svg",{class:"hidden lg:block w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),c.value?Y((r(),i("div",Bt,[e("button",{onClick:u,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[9]||(n[9]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),e("span",null,"Профиль")],-1)])]),e("button",{onClick:C,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[10]||(n[10]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),e("span",null,"Настройки")],-1)])]),n[12]||(n[12]=e("div",{class:"border-t border-gray-200 dark:border-gray-600 my-2"},null,-1)),e("button",{onClick:p,class:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},[...n[11]||(n[11]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})]),e("span",null,"Выйти")],-1)])])])),[[P,()=>c.value=!1]]):L("",!0)])])])])}}},Ft=se(Wt,[["__scopeId","data-v-6875b8f1"]]),Ot="/assets/logo-D4KoLT79.jpg",Pt="/assets/logo-bg-CxxxX31b.png",zt={class:"flex min-h-screen items-center justify-center p-4"},Vt={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},It={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},qt={class:"flex justify-end space-x-3 pt-4"},Rt=["disabled"],Ht={__name:"WorkspaceModal",props:{show:{type:Boolean,default:!1}},emits:["close","submit"],setup(f,{emit:j}){const v=f,_=j,y=a=>{a.key==="Escape"&&v.show&&_("close")};te(()=>document.addEventListener("keydown",y)),oe(()=>document.removeEventListener("keydown",y));const d=k({name:"",description:""}),c=k(!1),g=k("");ee(()=>v.show,a=>{a||(d.value={name:"",description:""},c.value=!1,g.value="")});const A=()=>{g.value="",c.value=!0,_("submit",d.value)};return(a,o)=>(r(),K(de,{to:"body"},[b(N,{name:"modal"},{default:S(()=>[f.show?(r(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:o[5]||(o[5]=O(w=>a.$emit("close"),["self"]))},[o[10]||(o[10]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",zt,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:o[4]||(o[4]=O(()=>{},["stop"]))},[e("div",Vt,[o[7]||(o[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Новое рабочее пространство ",-1)),e("button",{onClick:o[0]||(o[0]=w=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...o[6]||(o[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:O(A,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[o[8]||(o[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Название * ",-1)),Y(e("input",{id:"name","onUpdate:modelValue":o[1]||(o[1]=w=>d.value.name=w),type:"text",required:"",class:"input",placeholder:"Например: Команда разработки"},null,512),[[ie,d.value.name]])]),e("div",null,[o[9]||(o[9]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Описание ",-1)),Y(e("textarea",{id:"description","onUpdate:modelValue":o[2]||(o[2]=w=>d.value.description=w),rows:"3",class:"input",placeholder:"Краткое описание рабочего пространства"},null,512),[[ie,d.value.description]])]),g.value?(r(),i("div",It,M(g.value),1)):L("",!0),e("div",qt,[e("button",{type:"button",onClick:o[3]||(o[3]=w=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:c.value,class:"btn btn-primary"},M(c.value?"Создание...":"Создать"),9,Rt)])],32)])])])):L("",!0)]),_:1})]))}},Qt=se(Ht,[["__scopeId","data-v-68182ad4"]]),Ut={class:"flex min-h-screen items-center justify-center p-4"},Nt={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Gt={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},Kt={class:"font-medium"},Zt={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Jt={class:"flex justify-end space-x-3 pt-4"},Xt=["disabled"],Yt={__name:"AddMemberModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(f,{emit:j}){const v=f,_=j,y=a=>{a.key==="Escape"&&v.show&&_("close")};te(()=>document.addEventListener("keydown",y)),oe(()=>document.removeEventListener("keydown",y));const d=k({email:"",role:"member"}),c=k(!1),g=k("");ee(()=>v.show,a=>{a||(d.value={email:"",role:"member"},c.value=!1,g.value="")});const A=()=>{var a;g.value="",c.value=!0,_("submit",{...d.value,workspace_id:(a=v.workspace)==null?void 0:a.id})};return(a,o)=>(r(),K(de,{to:"body"},[b(N,{name:"modal"},{default:S(()=>{var w;return[f.show?(r(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:o[5]||(o[5]=O(m=>a.$emit("close"),["self"]))},[o[12]||(o[12]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Ut,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:o[4]||(o[4]=O(()=>{},["stop"]))},[e("div",Nt,[o[7]||(o[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Добавить пользователя ",-1)),e("button",{onClick:o[0]||(o[0]=m=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...o[6]||(o[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:O(A,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[e("p",Gt,[o[8]||(o[8]=U(" Workspace: ",-1)),e("span",Kt,M((w=f.workspace)==null?void 0:w.name),1)])]),e("div",null,[o[9]||(o[9]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Email пользователя * ",-1)),Y(e("input",{id:"email","onUpdate:modelValue":o[1]||(o[1]=m=>d.value.email=m),type:"email",required:"",class:"input",placeholder:"user@example.com"},null,512),[[ie,d.value.email]])]),e("div",null,[o[11]||(o[11]=e("label",{for:"role",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Роль ",-1)),Y(e("select",{id:"role","onUpdate:modelValue":o[2]||(o[2]=m=>d.value.role=m),class:"input"},[...o[10]||(o[10]=[e("option",{value:"viewer"},"Просмотр",-1),e("option",{value:"member"},"Участник",-1),e("option",{value:"admin"},"Администратор",-1)])],512),[[dt,d.value.role]])]),g.value?(r(),i("div",Zt,M(g.value),1)):L("",!0),e("div",Jt,[e("button",{type:"button",onClick:o[3]||(o[3]=m=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:c.value,class:"btn btn-primary"},M(c.value?"Добавление...":"Добавить"),9,Xt)])],32)])])])):L("",!0)]}),_:1})]))}},eo=se(Yt,[["__scopeId","data-v-72cbffa0"]]),to={class:"flex min-h-screen items-center justify-center p-4"},oo={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},so={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},ro={class:"flex justify-end space-x-3 pt-4"},ao=["disabled"],no={__name:"RenameWorkspaceModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(f,{emit:j}){const v=f,_=j,y=a=>{a.key==="Escape"&&v.show&&_("close")};te(()=>document.addEventListener("keydown",y)),oe(()=>document.removeEventListener("keydown",y));const d=k({name:""}),c=k(!1),g=k("");ee(()=>v.workspace,a=>{a&&(d.value.name=a.name)},{immediate:!0}),ee(()=>v.show,a=>{a||(c.value=!1,g.value="")});const A=()=>{g.value="",c.value=!0,_("submit",d.value.name)};return(a,o)=>(r(),K(de,{to:"body"},[b(N,{name:"modal"},{default:S(()=>[f.show?(r(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:o[4]||(o[4]=O(w=>a.$emit("close"),["self"]))},[o[8]||(o[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",to,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:o[3]||(o[3]=O(()=>{},["stop"]))},[e("div",oo,[o[6]||(o[6]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Переименовать workspace ",-1)),e("button",{onClick:o[0]||(o[0]=w=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...o[5]||(o[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:O(A,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[o[7]||(o[7]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Новое название * ",-1)),Y(e("input",{id:"name","onUpdate:modelValue":o[1]||(o[1]=w=>d.value.name=w),type:"text",required:"",class:"input",placeholder:"Название workspace"},null,512),[[ie,d.value.name]])]),g.value?(r(),i("div",so,M(g.value),1)):L("",!0),e("div",ro,[e("button",{type:"button",onClick:o[2]||(o[2]=w=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:c.value,class:"btn btn-primary"},M(c.value?"Сохранение...":"Сохранить"),9,ao)])],32)])])])):L("",!0)]),_:1})]))}},lo=se(no,[["__scopeId","data-v-9efc4d3d"]]),io={class:"flex min-h-screen items-center justify-center p-4"},co={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},uo={class:"p-6"},vo={key:0,class:"text-center py-8"},po={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},go={key:2,class:"space-y-3"},ko={class:"flex items-center space-x-3"},mo={class:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},fo={class:"font-medium text-gray-900 dark:text-white"},yo={class:"text-sm text-gray-500 dark:text-gray-400"},xo={class:"flex items-center space-x-3"},bo=["onClick","disabled"],wo={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ho={key:1,class:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-red-600"},$o={key:0,class:"px-6 pb-4"},Co={class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Mo={class:"flex justify-end p-6 border-t border-gray-200 dark:border-gray-700"},jo={__name:"MembersModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","member-removed"],setup(f,{emit:j}){const v=f,_=j,y=p=>{p.key==="Escape"&&v.show&&_("close")};te(()=>document.addEventListener("keydown",y)),oe(()=>document.removeEventListener("keydown",y));const d=ce(),c=_e(),g=k([]),A=k(!1),a=k(""),o=k(null),w=p=>p?p.split(" ").map(u=>u[0]).join("").toUpperCase().substring(0,2):"?",m=p=>({owner:"Владелец",admin:"Администратор",member:"Участник",viewer:"Наблюдатель"})[p]||p,z=p=>({owner:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",admin:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",member:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",viewer:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"})[p]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400",q=p=>{var x,n,h,V,I,G,re;const u=(x=c.user)==null?void 0:x.id,C=((n=v.workspace)==null?void 0:n.owner_id)===u,P=((G=(I=(V=(h=v.workspace)==null?void 0:h.members)==null?void 0:V.find(R=>R.id===u))==null?void 0:I.pivot)==null?void 0:G.role)==="admin";return((re=v.workspace)==null?void 0:re.owner_id)===p.id||p.id===u?!1:C||P},D=async()=>{var p;if((p=v.workspace)!=null&&p.id){A.value=!0,a.value="";try{const u=await d.fetchMembers(v.workspace.id);g.value=u.members||u||[]}catch(u){console.error("Error loading members:",u),a.value="Ошибка при загрузке участников"}finally{A.value=!1}}},B=async p=>{var u,C;if(confirm(`Вы уверены, что хотите удалить ${p.name} из workspace?`)){o.value=p.id,a.value="";try{await d.removeMember(v.workspace.id,p.id),await D(),_("member-removed",p)}catch(P){console.error("Error removing member:",P),a.value=((C=(u=P.response)==null?void 0:u.data)==null?void 0:C.message)||"Ошибка при удалении участника"}finally{o.value=null}}};return ee(()=>v.show,p=>{p?D():(g.value=[],a.value="",o.value=null)}),ee(()=>{var p;return(p=v.workspace)==null?void 0:p.id},()=>{v.show&&D()}),(p,u)=>(r(),K(de,{to:"body"},[b(N,{name:"modal"},{default:S(()=>[f.show?(r(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:u[3]||(u[3]=O(C=>p.$emit("close"),["self"]))},[u[8]||(u[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",io,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-auto",onClick:u[2]||(u[2]=O(()=>{},["stop"]))},[e("div",co,[u[5]||(u[5]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Участники workspace ",-1)),e("button",{onClick:u[0]||(u[0]=C=>p.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...u[4]||(u[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",uo,[A.value?(r(),i("div",vo,[...u[6]||(u[6]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):g.value.length===0?(r(),i("div",po," Нет участников ")):(r(),i("div",go,[(r(!0),i(ae,null,ne(g.value,C=>{var P,x,n,h;return r(),i("div",{key:C.id,class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[e("div",ko,[e("div",mo,M(w(C.name)),1),e("div",null,[e("div",fo,M(C.name),1),e("div",yo,M(C.email),1)])]),e("div",xo,[e("span",{class:H(["px-3 py-1 text-xs font-medium rounded-full",z(((P=C.pivot)==null?void 0:P.role)||(((x=f.workspace)==null?void 0:x.owner_id)===C.id?"owner":"member"))])},M(m(((n=C.pivot)==null?void 0:n.role)||(((h=f.workspace)==null?void 0:h.owner_id)===C.id?"owner":"member"))),3),q(C)?(r(),i("button",{key:0,onClick:V=>B(C),class:"text-red-600 hover:text-red-700 p-2 rounded transition-colors",disabled:o.value===C.id,title:"Удалить из workspace"},[o.value!==C.id?(r(),i("svg",wo,[...u[7]||(u[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])])):(r(),i("div",ho))],8,bo)):L("",!0)])])}),128))]))]),a.value?(r(),i("div",$o,[e("div",Co,M(a.value),1)])):L("",!0),e("div",Mo,[e("button",{onClick:u[1]||(u[1]=C=>p.$emit("close")),class:"btn btn-secondary"}," Закрыть ")])])])])):L("",!0)]),_:1})]))}},So=se(jo,[["__scopeId","data-v-e1a886d2"]]),_o={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},Do={key:0,class:"fixed inset-0 z-[100] bg-white dark:bg-gray-900 flex items-center justify-center"},Eo={class:"text-center"},To={class:"mb-6 flex justify-center"},Lo=["src"],Ao={class:"text-sm text-gray-500 dark:text-gray-400 flex justify-center"},Bo={class:"flex h-screen"},Wo={class:"flex flex-col h-full"},Fo={class:"hidden lg:flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Oo={class:"flex items-center space-x-3"},Po=["src"],zo={class:"p-4 border-b border-gray-200 dark:border-gray-700"},Vo={class:"flex items-center justify-between mb-3"},Io={class:"space-y-1"},qo=["onClick"],Ro={class:"flex-1 overflow-y-auto p-4"},Ho={class:"space-y-1"},Qo={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 space-y-1"},Uo={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},No={class:"space-y-1 max-h-64 overflow-y-auto"},Go={class:"flex-1 min-w-0"},Ko={class:"flex items-center space-x-1"},Zo={key:0,class:"text-xs text-gray-500 flex-shrink-0"},Jo={class:"text-xs text-gray-400 dark:text-gray-500 truncate"},Xo={key:0,class:"px-3 py-2 text-sm text-gray-500 text-center"},Yo={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},es={class:"space-y-1"},ts={key:1,class:"fixed bottom-5 right-5 z-30 lg:hidden flex flex-col gap-3 items-center"},os={class:"flex items-center gap-2"},ss={class:"flex-1 flex flex-col overflow-hidden"},rs={class:"flex-1 overflow-auto"},as={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4"},ns={class:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-sm w-full p-6"},ls={class:"text-sm text-gray-500 dark:text-gray-400 mb-6"},is={__name:"MainLayout",setup(f){const j=ct(),v=me(),_=_e(),y=ce(),d=ut(),c=pt(),g=Se(),A=T(()=>g.isDark?Pt:Ot),a=T(()=>g.isDark?Fe:We),o=k(!0),w=k("Загрузка...".split("")),m=k(!1);k(!1);const z=k(!1),q=k(!1),D=k(""),B=k(null),p=k(!1),u=k(!1),C=k(!1),P=k(!1),x=k(null),n=k(""),h=k(null),V=k(!1),I=k(null),G=T(()=>_.user),re=T(()=>y.workspaces),R=T(()=>d.counts),Oe=T(()=>y.currentWorkspace),fe=T(()=>c.activeProjects),ue=T(()=>y.selectedWorkspaces.map(l=>l.id)),Pe=T(()=>d.filteredTasks.length),ze=T(()=>{if(ue.value.length===0)return 0;const l=R.value.scheduled||0,t=R.value.today||0,$=R.value.tomorrow||0;return l+t+$});T(()=>{var t;return(((t=G.value)==null?void 0:t.name)||"").split(" ").map($=>$[0]).join("").toUpperCase().slice(0,2)});const ve=T(()=>v.path.includes("/calendar")),ye=l=>{var Q;y.toggleSelectedWorkspace(l);const $=j.currentRoute.value.path.split("/"),E=$[$.length-1],W=["inbox","next-actions","today","waiting","someday","calendar","projects","goals"].includes(E)?E:"inbox",F=((Q=y.currentWorkspace)==null?void 0:Q.id)||l.id;j.push(`/workspaces/${F}/${W}`)},pe=l=>{j.push({query:{view:l}})},Ve=()=>{var l;ve.value?pe("month"):j.push(`/workspaces/${((l=Oe.value)==null?void 0:l.id)||1}/calendar`)},Ie=async l=>{try{const t=await y.createWorkspace(l);z.value=!1,await ye(t)}catch(t){console.error("Ошибка создания workspace:",t)}},qe=async()=>{await _.logout(),j.push("/login")},Re=()=>{q.value=!0},xe=()=>{x.value=null,P.value=!0},He=async l=>{var t,$;n.value="";try{x.value?await c.updateProject(x.value.id,l):await c.createProject(l),P.value=!1,x.value=null,await c.fetchAllProjects({force:!0})}catch(E){console.error("Error saving project:",E),n.value=(($=(t=E.response)==null?void 0:t.data)==null?void 0:$.message)||E.message||"Ошибка при сохранении проекта"}},Qe=()=>{P.value=!1,x.value=null,n.value=""},Ue=()=>{console.log("Quick add goal")},Ne=async l=>{var t,$;D.value="";try{await d.createTask(l),q.value=!1}catch(E){console.error("Error creating task:",E),D.value=(($=(t=E.response)==null?void 0:t.data)==null?void 0:$.message)||E.message||"Ошибка при создании задачи"}},Ge=()=>{q.value=!1,D.value=""},Z=async({taskId:l,newStatus:t})=>{var $,E;try{const s={status:t};if(t==="today")s.due_date=new Date().toISOString().split("T")[0];else if(t==="tomorrow"){const W=new Date;W.setDate(W.getDate()+1),s.due_date=W.toISOString().split("T")[0]}await d.updateTask(l,s)}catch(s){console.error("Error updating task status:",s),alert(((E=($=s.response)==null?void 0:$.data)==null?void 0:E.message)||"Ошибка при обновлении задачи")}},Ke=()=>{window.innerWidth<1024&&(m.value=!1)},Ze=l=>{console.log("Search:",l)},Je=()=>{j.push("/settings")},Xe=()=>{j.push("/settings")},Ye=l=>{l.target.style.display="none"},et=async()=>{if(I.value){try{await y.deleteWorkspace(I.value.id)}catch(l){console.error("Error deleting workspace:",l)}V.value=!1,I.value=null}},be=()=>{V.value=!1,I.value=null},tt=()=>{p.value=!1,h.value=null},ot=()=>{C.value=!1,h.value=null},st=async()=>{await y.fetchWorkspaces()},rt=()=>{u.value=!1,h.value=null},at=async l=>{var t,$,E,s,W;try{console.log("Sending member data:",l),await y.addMember(l.workspace_id,{email:l.email,role:l.role}),p.value=!1,h.value=null,alert("Пользователь успешно добавлен в workspace")}catch(F){console.error("Error adding member:",F),console.error("Error response:",(t=F.response)==null?void 0:t.data);let Q="Ошибка при добавлении пользователя";(E=($=F.response)==null?void 0:$.data)!=null&&E.errors?Q=Object.values(F.response.data.errors).flat().join(", "):(W=(s=F.response)==null?void 0:s.data)!=null&&W.message&&(Q=F.response.data.message),alert(Q)}},nt=async l=>{var t,$,E,s,W;try{console.log("Renaming workspace:",h.value.id,"to:",l),await y.updateWorkspace(h.value.id,{name:l}),await y.fetchWorkspaces(),u.value=!1,h.value=null,alert("Workspace успешно переименован")}catch(F){console.error("Error renaming workspace:",F),console.error("Error response:",(t=F.response)==null?void 0:t.data);let Q="Ошибка при переименовании";(E=($=F.response)==null?void 0:$.data)!=null&&E.errors?Q=Object.values(F.response.data.errors).flat().join(", "):(W=(s=F.response)==null?void 0:s.data)!=null&&W.message&&(Q=F.response.data.message),alert(Q)}},we=l=>{l.key==="Escape"&&(B.value=null)};te(async()=>{try{await y.fetchWorkspaces(),await Promise.all([d.fetchAllTasks(),c.fetchAllProjects()])}finally{o.value=!1}d.startSync(),c.startSync(),document.addEventListener("click",he),document.addEventListener("keydown",we)}),oe(()=>{d.stopSync(),c.stopSync(),document.removeEventListener("click",he),document.removeEventListener("keydown",we)});const he=()=>{B.value=null},lt=l=>{const t=re.value.find($=>$.id===l);return(t==null?void 0:t.name)||""},$e=l=>v.path.includes(`/projects/${l}`);return(l,t)=>{const $=le("router-link"),E=le("router-view");return r(),i("div",_o,[b(N,{name:"fade"},{default:S(()=>[o.value?(r(),i("div",Do,[e("div",Eo,[e("div",To,[e("img",{src:A.value,alt:"GTD TODO",class:"w-48 h-48 object-contain",onError:Ye},null,40,Lo)]),t[18]||(t[18]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"GTD TODO",-1)),e("p",Ao,[(r(!0),i(ae,null,ne(w.value,(s,W)=>(r(),i("span",{key:W,style:Ce({animationDelay:`${W*.1}s`}),class:"loading-letter"},M(s),5))),128))])])])):L("",!0)]),_:1}),e("div",Bo,[e("aside",{class:H(["fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",m.value?"translate-x-0":"-translate-x-full lg:translate-x-0"])},[e("div",Wo,[e("div",Fo,[e("div",Oo,[e("img",{src:a.value,alt:"GTD TODO",class:"h-10 w-10 object-contain"},null,8,Po),t[19]||(t[19]=e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"},"GTD TODO",-1))])]),e("div",zo,[e("div",Vo,[t[21]||(t[21]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Ваши пространства ",-1)),e("button",{onClick:t[0]||(t[0]=s=>z.value=!0),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Создать workspace"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",Io,[(r(!0),i(ae,null,ne(re.value,s=>(r(),i("div",{key:s.id,class:H(["group flex items-center rounded-lg transition-colors overflow-hidden",ue.value.includes(s.id)?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[e("button",{class:"flex-1 flex items-center px-3 py-2 text-sm cursor-pointer text-left",onClick:W=>ye(s)},[e("span",{class:H(["truncate",ue.value.includes(s.id)?"text-primary-700 dark:text-primary-400 font-medium":"text-gray-500 dark:text-gray-400"])},M(s.name),3)],8,qo),b($,{to:`/workspaces/${s.id}/settings`,class:"flex-shrink-0 p-1.5 mr-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors opacity-0 group-hover:opacity-100",title:"Настройки",onClick:t[1]||(t[1]=O(()=>{},["stop"]))},{default:S(()=>[...t[22]||(t[22]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})],-1)])]),_:1},8,["to"])],2))),128))])]),e("nav",Ro,[e("div",Ho,[b(J,{to:"/workspaces/:id/inbox",icon:"inbox",count:R.value.inbox,"drop-status":"inbox",onTaskDropped:Z,onCloseSidebar:t[2]||(t[2]=s=>m.value=!1)},{default:S(()=>[...t[23]||(t[23]=[U(" Входящие ",-1)])]),_:1},8,["count"])]),e("div",Qo,[b(J,{to:"/workspaces/:id/today",icon:"calendar",count:R.value.today,"drop-status":"today",onTaskDropped:Z,onCloseSidebar:t[3]||(t[3]=s=>m.value=!1)},{default:S(()=>[...t[24]||(t[24]=[U(" Сегодня ",-1)])]),_:1},8,["count"]),b(J,{to:"/workspaces/:id/next-actions",icon:"lightning",count:R.value.next_actions,"drop-status":"next_action",onTaskDropped:Z,onCloseSidebar:t[4]||(t[4]=s=>m.value=!1)},{default:S(()=>[...t[25]||(t[25]=[U(" Следующие ",-1)])]),_:1},8,["count"]),b(J,{to:"/workspaces/:id/tomorrow",icon:"calendar-days",count:R.value.tomorrow,"drop-status":"tomorrow",onTaskDropped:Z,onCloseSidebar:t[5]||(t[5]=s=>m.value=!1)},{default:S(()=>[...t[26]||(t[26]=[U(" Завтра ",-1)])]),_:1},8,["count"]),b(ke,{to:"/workspaces/:id/calendar",icon:"calendar-days",count:ze.value,onCloseSidebar:t[6]||(t[6]=s=>m.value=!1)},{default:S(()=>[...t[27]||(t[27]=[U(" Календарь ",-1)])]),_:1},8,["count"]),b(J,{to:"/workspaces/:id/someday",icon:"archive",count:R.value.someday,"drop-status":"someday",onTaskDropped:Z,onCloseSidebar:t[7]||(t[7]=s=>m.value=!1)},{default:S(()=>[...t[28]||(t[28]=[U(" Когда-нибудь ",-1)])]),_:1},8,["count"]),b(J,{to:"/workspaces/:id/waiting",icon:"clock",count:R.value.waiting,"drop-status":"waiting",onTaskDropped:Z,onCloseSidebar:t[8]||(t[8]=s=>m.value=!1)},{default:S(()=>[...t[29]||(t[29]=[U(" Ожидание ",-1)])]),_:1},8,["count"]),b(ke,{to:"/workspaces/:id/all",icon:"rectangle-stack",count:Pe.value,onCloseSidebar:t[9]||(t[9]=s=>m.value=!1)},{default:S(()=>[...t[30]||(t[30]=[U(" Все задачи ",-1)])]),_:1},8,["count"])]),e("div",Uo,[e("div",{class:"flex items-center justify-between px-3 mb-3"},[t[32]||(t[32]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Проекты ",-1)),e("button",{onClick:xe,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Создать проект"},[...t[31]||(t[31]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",No,[(r(!0),i(ae,null,ne(fe.value,s=>(r(),i("div",{key:s.id,class:H(["flex items-center justify-between group px-3 py-2 rounded-lg transition-colors",$e(s.id)?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[b($,{to:`/workspaces/${s.workspace_id}/projects/${s.id}`,onClick:Ke,class:"flex items-center space-x-2 flex-1 min-w-0"},{default:S(()=>[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:Ce({backgroundColor:s.color||"#3B82F6"})},null,4),e("div",Go,[e("div",Ko,[e("span",{class:H(["text-sm truncate",$e(s.id)?"text-primary-700 dark:text-primary-400 font-medium":"text-gray-700 dark:text-gray-300"])},M(s.name),3),s.tasks_count>0?(r(),i("span",Zo," ("+M(s.tasks_count)+") ",1)):L("",!0)]),e("div",Jo,M(lt(s.workspace_id)),1)])]),_:2},1032,["to"])],2))),128)),fe.value.length===0?(r(),i("div",Xo," Нет проектов ")):L("",!0)])]),e("div",Yo,[t[34]||(t[34]=e("h3",{class:"px-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3"}," Организация ",-1)),e("div",es,[b(ke,{to:"/workspaces/:id/goals",icon:"target",onCloseSidebar:t[10]||(t[10]=s=>m.value=!1)},{default:S(()=>[...t[33]||(t[33]=[U(" Цели ",-1)])]),_:1})])])])])],2),m.value?(r(),i("div",{key:0,onClick:t[11]||(t[11]=s=>m.value=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})):L("",!0),m.value?L("",!0):(r(),i("div",ts,[e("button",{onClick:t[12]||(t[12]=s=>q.value=!0),class:"w-10 h-10 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg inline-flex items-center justify-center active:scale-95 transition-transform"},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1)])]),e("div",os,[b(N,{name:"slide-fade-day"},{default:S(()=>[ve.value?(r(),i("button",{key:0,onClick:t[13]||(t[13]=s=>pe("day")),class:"w-10 h-10 bg-purple-500 hover:bg-purple-600 text-white rounded-full shadow-lg inline-flex items-center justify-center active:scale-95 transition-all",title:"Сегодня"},[...t[36]||(t[36]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})],-1)])])):L("",!0)]),_:1}),b(N,{name:"slide-fade-week"},{default:S(()=>[ve.value?(r(),i("button",{key:0,onClick:t[14]||(t[14]=s=>pe("week")),class:"w-10 h-10 bg-purple-500 hover:bg-purple-600 text-white rounded-full shadow-lg inline-flex items-center justify-center active:scale-95 transition-all",title:"Неделя"},[...t[37]||(t[37]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])):L("",!0)]),_:1}),e("button",{onClick:Ve,class:"w-10 h-10 bg-purple-600 hover:bg-purple-700 text-white rounded-full shadow-lg inline-flex items-center justify-center active:scale-95 transition-transform"},[...t[38]||(t[38]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])]),e("button",{onClick:t[15]||(t[15]=s=>m.value=!0),class:"w-12 h-12 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-lg inline-flex items-center justify-center active:scale-95 transition-transform"},[...t[39]||(t[39]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])])),e("main",ss,[b(Ft,{user:G.value,onQuickAddTask:Re,onQuickAddProject:xe,onQuickAddGoal:Ue,onSearch:Ze,onLogout:qe,onProfile:Je,onSettings:Xe,onToggleSidebar:t[16]||(t[16]=s=>m.value=!m.value)},null,8,["user"]),e("div",rs,[b(E)])])]),b(Qt,{show:z.value,onClose:t[17]||(t[17]=s=>z.value=!1),onSubmit:Ie},null,8,["show"]),b(vt,{show:q.value,"server-error":D.value,onClose:Ge,onSubmit:Ne},null,8,["show","server-error"]),b(eo,{show:p.value,workspace:h.value,onClose:tt,onSubmit:at},null,8,["show","workspace"]),b(lo,{show:u.value,workspace:h.value,onClose:rt,onSubmit:nt},null,8,["show","workspace"]),b(So,{show:C.value,workspace:h.value,onClose:ot,onMemberRemoved:st},null,8,["show","workspace"]),b(kt,{show:P.value,project:x.value,"server-error":n.value,onClose:Qe,onSubmit:He},null,8,["show","project","server-error"]),b(N,{name:"modal"},{default:S(()=>{var s;return[V.value?(r(),i("div",as,[e("div",{class:"fixed inset-0 bg-black/50",onClick:be}),e("div",ns,[t[40]||(t[40]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Удалить пространство?",-1)),e("p",ls," Пространство «"+M((s=I.value)==null?void 0:s.name)+"» будет удалено навсегда. Это действие нельзя отменить. ",1),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:be,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"}," Отмена "),e("button",{onClick:et,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors"}," Удалить ")])])])):L("",!0)]}),_:1})])}}},ms=se(is,[["__scopeId","data-v-e220b67b"]]);export{ms as default};
