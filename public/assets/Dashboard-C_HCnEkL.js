import{E as ee,G as te,r as W,z as T,H as q,k as C,c as s,o as r,a as e,t as n,F as p,C as $,p as L,b as _,D as M,e as O,f as D,l as B,m as ae,s as re,y as S}from"./index-DARtzBY4.js";import{u as G}from"./workspace-CT6nSM7Z.js";import{d as j}from"./ru-B7JyRvIu.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe=ee("dashboard",()=>{const a=te({}),x=W(localStorage.getItem("dashboardPeriod")||"day"),i=G(),g=t=>{a[t]||(a[t]={lifeMirror:null,aiMessage:null,loading:!1,aiLoading:!1})},l=async t=>{if(t){g(t),a[t].loading=!0;try{const f=await q.get("/v1/dashboard/life-mirror",{params:{workspace_id:t,period:x.value}});a[t].lifeMirror=f.data}catch(f){console.error(`Failed to fetch life mirror for ws ${t}:`,f),a[t].lifeMirror=null}finally{a[t].loading=!1}}},u=async t=>{if(t){g(t),a[t].aiLoading=!0;try{const f=await q.get("/v1/dashboard/ai-message",{params:{workspace_id:t,period:x.value}});a[t].aiMessage=f.data}catch(f){console.error(`Failed to fetch AI message for ws ${t}:`,f),a[t].aiMessage=null}finally{a[t].aiLoading=!1}}},y=async t=>{await Promise.all([l(t),u(t)])},b=async()=>{const t=i.selectedWorkspaces;t.length&&await Promise.all(t.map(f=>y(f.id)))},o=t=>{x.value=t,localStorage.setItem("dashboardPeriod",t),b()};return T(()=>i.selectedWorkspaces.map(t=>t.id).join(","),()=>{b()}),{dataByWorkspace:a,selectedPeriod:x,fetchLifeMirror:l,fetchAiMessage:u,fetchForWorkspace:y,fetchAllWorkspaces:b,setPeriod:o}}),le={class:"mb-6"},de={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},ne={class:"text-sm text-gray-500 dark:text-gray-400 mt-0.5"},ie={class:"inline-flex rounded-xl bg-gray-100 dark:bg-gray-800 p-1",role:"group"},ce=["onClick"],ue={__name:"DashboardHeader",props:{period:{type:String,required:!0}},emits:["change-period"],setup(a){j.locale("ru");const x=a,i=[{value:"day",label:"День"},{value:"week",label:"Неделя"},{value:"month",label:"Месяц"},{value:"year",label:"Год"}],g=C(()=>{const l=j();switch(x.period){case"day":return l.format("D MMMM YYYY, dddd");case"week":{const u=l.startOf("week"),y=l.endOf("week");return`${u.format("D MMM")} — ${y.format("D MMM YYYY")}`}case"month":return l.format("MMMM YYYY");case"year":return l.format("YYYY год");default:return l.format("D MMMM YYYY")}});return(l,u)=>(r(),s("div",le,[e("div",de,[e("div",null,[u[0]||(u[0]=e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white"}," Зеркало жизни ",-1)),e("p",ne,n(g.value),1)]),e("div",ie,[(r(),s(p,null,$(i,y=>e("button",{key:y.value,onClick:b=>l.$emit("change-period",y.value),type:"button",class:L(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200",[a.period===y.value?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"]])},n(y.label),11,ce)),64))])])]))}},ge={key:0,class:"h-1 mb-2 relative overflow-hidden rounded-full"},xe=["viewBox"],ye=["d","stroke"],me={class:"relative overflow-hidden rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"},he={class:"p-4 sm:p-6"},be={class:"max-h-[40vh] overflow-y-auto sm:max-h-none sm:overflow-visible scrollbar-thin"},ke={key:0,class:"animate-pulse space-y-3"},fe={key:1},ve={class:"text-sm sm:text-base text-gray-900 dark:text-gray-100 leading-relaxed"},pe={key:0,class:"mt-2 sm:mt-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3 sm:p-4"},_e={class:"text-gray-700 dark:text-gray-300 text-xs sm:text-sm leading-relaxed"},$e={key:1,class:"mt-3 sm:mt-4 flex flex-wrap gap-1.5 sm:gap-2"},we={key:2,class:"mt-3 sm:mt-4 pt-3 border-t border-gray-200 dark:border-gray-700"},Me={class:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm italic"},Ce={class:"text-gray-400 dark:text-gray-500 not-italic ml-1"},Pe={key:2},F=200,Ye={__name:"AiHeroBanner",props:{message:{type:Object,default:null},loading:{type:Boolean,default:!1}},setup(a){const x=a,i={positive:"#10b981",concerned:"#6366f1",warning:"#f59e0b",serious:"#ef4444",reflective:"#8b5cf6"},g=C(()=>{var b;const y=((b=x.message)==null?void 0:b.mood)||"concerned";return i[y]||i.concerned}),l={positive:2,reflective:2.5,concerned:3,warning:3.5,serious:4.5},u=C(()=>{var w;const y=((w=x.message)==null?void 0:w.mood)||"concerned",b=l[y]||3,o=F,t=5,f=Math.floor(o/40);let k=`M 0 ${t}`;for(let P=0;P<f;P++){const d=P*40;k+=` L ${d+12} ${t}`,k+=` L ${d+16} ${t+b*.4}`,k+=` L ${d+20} ${t-b}`,k+=` L ${d+24} ${t+b*.7}`,k+=` L ${d+28} ${t}`,k+=` L ${d+40} ${t}`}return k});return(y,b)=>{var o;return r(),s("div",null,[a.message?(r(),s("div",ge,[(r(),s("svg",{class:"absolute inset-0 w-full h-full",preserveAspectRatio:"none",viewBox:`0 0 ${F} 10`},[e("path",{d:u.value,fill:"none",stroke:g.value,"stroke-width":"2","stroke-linecap":"round",class:"pulse-line",style:M({"--pulse-color":g.value})},null,12,ye)],8,xe))])):_("",!0),e("div",me,[e("div",he,[e("div",be,[a.loading?(r(),s("div",ke,[...b[0]||(b[0]=[e("div",{class:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-2/3"},null,-1),e("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"},null,-1),e("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-4/5"},null,-1)])])):a.message?(r(),s("div",fe,[e("p",ve,n(a.message.main_message),1),a.message.followup_message?(r(),s("div",pe,[e("p",_e,n(a.message.followup_message),1)])):_("",!0),(o=a.message.recommendations)!=null&&o.length?(r(),s("div",$e,[(r(!0),s(p,null,$(a.message.recommendations,(t,f)=>(r(),s("div",{key:f,class:"bg-gray-100 dark:bg-gray-700 rounded-lg px-2.5 py-1.5 sm:px-3 sm:py-2 text-xs sm:text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1.5 sm:gap-2"},[e("div",{class:"w-2 h-2 rounded-full flex-shrink-0",style:M({backgroundColor:t.sphere_color||"#9ca3af"})},null,4),e("span",null,n(t.action),1)]))),128))])):_("",!0),a.message.bible_verse?(r(),s("div",we,[e("p",Me,[O(" «"+n(a.message.bible_verse.text)+"» ",1),e("span",Ce,"— "+n(a.message.bible_verse.ref),1)])])):_("",!0)])):(r(),s("div",Pe,[...b[1]||(b[1]=[e("p",{class:"text-base font-medium text-gray-900 dark:text-white"},"Зеркало жизни",-1),e("p",{class:"text-gray-500 dark:text-gray-400 text-sm mt-1"},"Обзор баланса твоих жизненных сфер",-1)])]))])])])])}}},Le=se(Ye,[["__scopeId","data-v-033a7b32"]]),ze={class:"flex flex-col items-center"},Ae=["width","height","viewBox"],Be=["cx","cy","r"],Se=["cx","cy","r"],De=["x1","y1","x2","y2"],je=["d"],We=["d","fill"],Oe=["d","stroke"],Ve=["d","stroke"],He=["x","y","fill","text-anchor"],Ne=["cx","cy","r"],qe=["x","y"],Fe=["x","y"],A=40,R=.03,Re={__name:"BalanceWheel",props:{spheres:{type:Array,default:()=>[]},balanceIndex:{type:Number,default:0},size:{type:Number,default:280}},setup(a){const x=a,i=C(()=>x.size/2),g=C(()=>x.size/2-40),l=C(()=>g.value*.35),u=C(()=>x.spheres.length),y=C(()=>u.value>0?2*Math.PI/u.value:0),b=[25,50,75],o=h=>y.value*h-Math.PI/2+R/2,t=h=>y.value*(h+1)-Math.PI/2-R/2,f=h=>(o(h)+t(h))/2,k=(h,m)=>i.value+m*Math.cos(h),w=(h,m)=>i.value+m*Math.sin(h),P=C(()=>x.spheres.length?Math.max(...x.spheres.map(h=>h.total||0),1):1),d=(h,m,c)=>{if(u.value===0||c<=m)return"";const v=o(h),z=t(h),N=z-v>Math.PI?1:0;return[`M ${k(v,m)} ${w(v,m)}`,`L ${k(v,c)} ${w(v,c)}`,`A ${c} ${c} 0 ${N} 1 ${k(z,c)} ${w(z,c)}`,`L ${k(z,m)} ${w(z,m)}`,`A ${m} ${m} 0 ${N} 0 ${k(v,m)} ${w(v,m)}`,"Z"].join(" ")},Y=(h,m)=>{if(u.value===0)return"";const c=o(h),v=t(h),z=v-c>Math.PI?1:0;return`M ${k(c,m)} ${w(c,m)} A ${m} ${m} 0 ${z} 1 ${k(v,m)} ${w(v,m)}`},Z=h=>{if(!h.total||h.total===0)return l.value;const m=h.total/P.value;return l.value+(g.value-l.value)*Math.max(m,.1)},V=h=>{if(!h.done||h.done===0)return l.value;const m=h.done/P.value;return l.value+(g.value-l.value)*Math.max(m,.08)},J=h=>Y(h,g.value),K=(h,m)=>{const c=Z(m);return c<=l.value?"":d(h,l.value,c)},Q=(h,m)=>{const c=V(m);return c<=l.value?"":d(h,l.value,c)},U=(h,m)=>{const c=V(m);return c<=l.value?"":Y(h,c)},X=C(()=>u.value<=1?[]:x.spheres.map((h,m)=>{const c=y.value*m-Math.PI/2;return{x1:k(c,l.value),y1:w(c,l.value),x2:k(c,g.value),y2:w(c,g.value)}})),H=C(()=>x.spheres.map((h,m)=>{const c=g.value+18;return{x:k(f(m),c),y:w(f(m),c)}})),I=h=>{const m=f(h)*180/Math.PI;return m>-60&&m<60?"start":m>120||m<-120?"end":"middle"};return(h,m)=>(r(),s("div",ze,[(r(),s("svg",{width:a.size,height:a.size,viewBox:`${-A} ${-A} ${a.size+A*2} ${a.size+A*2}`},[(r(),s(p,null,$(b,c=>e("circle",{key:"grid-"+c,cx:i.value,cy:i.value,r:l.value+(g.value-l.value)*c/100,fill:"none",stroke:"currentColor",class:"text-gray-200 dark:text-gray-700","stroke-width":"0.5","stroke-dasharray":"3 3"},null,8,Be)),64)),e("circle",{cx:i.value,cy:i.value,r:g.value,fill:"none",stroke:"currentColor",class:"text-gray-300 dark:text-gray-600","stroke-width":"1.5"},null,8,Se),(r(!0),s(p,null,$(X.value,(c,v)=>(r(),s("line",{key:"div-"+v,x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,stroke:"currentColor",class:"text-gray-300 dark:text-gray-600","stroke-width":"1"},null,8,De))),128)),(r(!0),s(p,null,$(a.spheres,(c,v)=>(r(),s("path",{key:"total-"+v,d:K(v,c),fill:"currentColor",class:"text-gray-400 dark:text-gray-500","fill-opacity":"0.25"},null,8,je))),128)),(r(!0),s(p,null,$(a.spheres,(c,v)=>(r(),s("path",{key:"done-"+v,d:Q(v,c),fill:c.color||"#888","fill-opacity":"0.45",class:"transition-all duration-700 ease-out"},null,8,We))),128)),(r(!0),s(p,null,$(a.spheres,(c,v)=>(r(),s("path",{key:"edge-"+v,d:U(v,c),fill:"none",stroke:c.color||"#888","stroke-width":"2.5","stroke-linecap":"round",class:"transition-all duration-700 ease-out"},null,8,Oe))),128)),(r(!0),s(p,null,$(a.spheres,(c,v)=>(r(),s("path",{key:"arc-"+v,d:J(v),fill:"none",stroke:c.color||"#888","stroke-width":"3","stroke-opacity":"0.25","stroke-linecap":"round"},null,8,Ve))),128)),(r(!0),s(p,null,$(a.spheres,(c,v)=>(r(),s("text",{key:"label-"+v,x:H.value[v].x,y:H.value[v].y,fill:c.color||"#888","font-size":"11","font-weight":"600","text-anchor":I(v),"dominant-baseline":"central"},n(c.name||""),9,He))),128)),e("circle",{cx:i.value,cy:i.value,r:l.value,class:"fill-white dark:fill-gray-900 stroke-gray-300 dark:stroke-gray-600","stroke-width":"1"},null,8,Ne),e("text",{x:i.value,y:i.value-8,"text-anchor":"middle","dominant-baseline":"central","font-size":"28","font-weight":"bold",class:"fill-gray-900 dark:fill-white"},n(a.balanceIndex),9,qe),e("text",{x:i.value,y:i.value+14,"text-anchor":"middle","dominant-baseline":"central","font-size":"10",class:"fill-gray-400 dark:fill-gray-500"}," баланс ",8,Fe)],8,Ae))]))}},Ee={class:"flex items-center justify-between mb-2"},Te={class:"flex items-center gap-2"},Ge={class:"text-sm font-semibold text-gray-900 dark:text-white"},Ze={key:0,class:"text-xs px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"},Je={class:"flex items-center gap-3"},Ke={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden"},Qe={class:"text-xs font-medium text-gray-600 dark:text-gray-400 tabular-nums whitespace-nowrap"},Ue={__name:"SphereCard",props:{sphere:{type:Object,required:!0}},setup(a){const x=a,i=W(!1),g=C(()=>x.sphere.tasks_total?Math.round(x.sphere.tasks_done/x.sphere.tasks_total*100):0);return(l,u)=>(r(),s("div",{class:"rounded-xl border bg-white/80 dark:bg-gray-800/80 border-gray-200 dark:border-gray-700 p-4 transition-all duration-200 cursor-pointer group border-l-4",style:M({borderLeftColor:a.sphere.color,boxShadow:i.value?`0 0 20px ${a.sphere.color}30`:"none"}),onMouseenter:u[0]||(u[0]=y=>i.value=!0),onMouseleave:u[1]||(u[1]=y=>i.value=!1)},[e("div",Ee,[e("div",Te,[e("div",{class:"w-3 h-3 rounded-full",style:M({backgroundColor:a.sphere.color})},null,4),e("span",Ge,n(a.sphere.name),1)]),a.sphere.days_without_attention!==null&&a.sphere.days_without_attention>0?(r(),s("span",Ze,n(a.sphere.days_without_attention)+" дн. ",1)):_("",!0)]),e("div",Je,[e("div",Ke,[e("div",{class:"h-full rounded-full transition-all duration-500",style:M({width:g.value+"%",backgroundColor:a.sphere.color})},null,4)]),e("span",Qe,n(a.sphere.tasks_done)+"/"+n(a.sphere.tasks_total),1)])],36))}},Xe={class:"bg-white/80 dark:bg-gray-800/80 rounded-xl border border-dashed border-gray-300 dark:border-gray-600 p-4"},Ie={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2"},et={class:"min-w-0 flex-1"},tt={class:"text-xs font-medium text-gray-700 dark:text-gray-300 truncate"},at={class:"text-[10px] text-gray-400 dark:text-gray-500"},rt={__name:"MissingSpheres",props:{spheres:{type:Array,default:()=>[]}},setup(a){const x=i=>{const g=Math.abs(i)%100,l=g%10;return g>10&&g<20?"дней":l===1?"день":l>=2&&l<=4?"дня":"дней"};return(i,g)=>(r(),s("div",Xe,[g[0]||(g[0]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"}," Сферы без внимания ",-1)),e("div",Ie,[(r(!0),s(p,null,$(a.spheres,l=>(r(),s("div",{key:l.id,class:"flex items-center gap-2 rounded-lg border border-dashed p-3 transition-colors hover:bg-gray-50 dark:hover:bg-gray-700/50",style:M({borderColor:l.color+"40",backgroundColor:l.color+"08"})},[e("div",{class:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:M({backgroundColor:l.color})},null,4),e("div",et,[e("p",tt,n(l.name),1),e("p",at,n(l.days_without_attention!==null?`${l.days_without_attention} ${x(l.days_without_attention)} без внимания`:"Нет задач"),1)])],4))),128))])]))}},st={key:0,class:"space-y-6"},ot={class:"grid grid-cols-2 sm:grid-cols-4 gap-3"},lt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},dt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},nt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},it={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400 mt-1"},ct={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},ut={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},gt={class:"text-sm text-gray-400"},xt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},yt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},mt={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},ht={class:"space-y-3"},bt={class:"flex items-center justify-between mb-2"},kt={class:"text-sm font-medium text-gray-900 dark:text-white"},ft={class:"text-xs text-gray-500 dark:text-gray-400"},vt={key:0,class:"space-y-1"},pt={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},E={__name:"PeriodDayView",props:{data:{type:Object,default:null}},setup(a){return(x,i)=>{var g,l,u,y,b,o;return a.data?(r(),s("div",st,[e("div",ot,[e("div",lt,[i[0]||(i[0]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Всего задач",-1)),e("p",dt,n(((g=a.data.summary)==null?void 0:g.total_tasks)||0),1)]),e("div",nt,[i[1]||(i[1]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Выполнено",-1)),e("p",it,n(((l=a.data.summary)==null?void 0:l.completed)||0),1)]),e("div",ct,[i[2]||(i[2]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Активных сфер",-1)),e("p",ut,[O(n(((u=a.data.summary)==null?void 0:u.spheres_active)||0),1),e("span",gt,"/"+n(((y=a.data.summary)==null?void 0:y.spheres_total)||0),1)])]),e("div",xt,[i[3]||(i[3]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Выполнение",-1)),e("p",yt,n(((b=a.data.summary)==null?void 0:b.completion_rate)||0)+"%",1)])]),(o=a.data.spheres)!=null&&o.length?(r(),s("div",mt,[i[5]||(i[5]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Задачи по сферам",-1)),e("div",ht,[(r(!0),s(p,null,$(a.data.spheres,t=>{var f;return r(),s("div",{key:t.id,class:"border-l-3 rounded-lg p-3 bg-gray-50 dark:bg-gray-700/30",style:M({borderLeftColor:t.color,borderLeftWidth:"3px"})},[e("div",bt,[e("span",kt,n(t.name),1),e("span",ft,n(t.tasks_done)+"/"+n(t.tasks_total),1)]),(f=t.tasks)!=null&&f.length?(r(),s("div",vt,[(r(!0),s(p,null,$(t.tasks,k=>(r(),s("div",{key:k.id,class:"flex items-center gap-2 text-sm"},[e("div",{class:L(["w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0",k.completed_at?"bg-emerald-500 border-emerald-500":"border-gray-300 dark:border-gray-600"])},[k.completed_at?(r(),s("svg",pt,[...i[4]||(i[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):_("",!0)],2),e("span",{class:L(k.completed_at?"line-through text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300")},n(k.title),3)]))),128))])):_("",!0)],4)}),128))])])):_("",!0)])):_("",!0)}}},_t={key:0,class:"space-y-6"},$t={class:"grid grid-cols-2 sm:grid-cols-3 gap-3"},wt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Mt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},Ct={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Pt={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400 mt-1"},Yt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Lt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},zt={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},At={class:"flex items-end gap-1 h-32"},Bt={class:"w-full flex flex-col-reverse gap-px",style:{height:"100px"}},St=["title"],Dt={key:0,class:"w-full h-full flex items-center justify-center"},jt={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Wt={class:"space-y-2"},Ot={class:"w-20 text-xs text-gray-600 dark:text-gray-400 truncate"},Vt={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden"},Ht={class:"text-xs font-medium text-gray-500 dark:text-gray-400 tabular-nums w-12 text-right"},Nt={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},qt={class:"space-y-2"},Ft={class:"flex-1 min-w-0"},Rt={class:"flex items-center gap-2"},Et={class:"text-sm text-gray-900 dark:text-white truncate"},Tt={key:0,class:"text-[10px] text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 px-1.5 py-0.5 rounded"},Gt={class:"flex items-center gap-2"},Zt={class:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"},Jt={class:"text-xs text-gray-500 dark:text-gray-400 tabular-nums"},Kt={__name:"PeriodWeekView",props:{data:{type:Object,default:null}},setup(a){const x=a,i=C(()=>{var t;if(!((t=x.data)!=null&&t.daily_breakdown))return 1;let o=0;for(const f of x.data.daily_breakdown){const k=Object.values(f.by_sphere).reduce((w,P)=>w+P,0);k>o&&(o=k)}return Math.max(o,1)}),g=o=>Math.max(o/i.value*80,4),l=C(()=>{var t;const o={};if((t=x.data)!=null&&t.attention_distribution)for(const f of x.data.attention_distribution)o[f.sphere_id]=f;return o}),u=o=>{var t;return((t=l.value[o])==null?void 0:t.color)||"#888"},y=o=>{var t;return((t=l.value[o])==null?void 0:t.name)||""},b=o=>j().format("YYYY-MM-DD")===o;return(o,t)=>{var f,k,w,P;return a.data?(r(),s("div",_t,[e("div",$t,[e("div",wt,[t[0]||(t[0]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Всего задач",-1)),e("p",Mt,n(((f=a.data.summary)==null?void 0:f.total_tasks)||0),1)]),e("div",Ct,[t[1]||(t[1]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Выполнено",-1)),e("p",Pt,n(((k=a.data.summary)==null?void 0:k.completed)||0),1)]),e("div",Yt,[t[2]||(t[2]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Выполнение",-1)),e("p",Lt,n(((w=a.data.summary)==null?void 0:w.completion_rate)||0)+"%",1)])]),e("div",zt,[t[4]||(t[4]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Рентген недели",-1)),e("div",At,[(r(!0),s(p,null,$(a.data.daily_breakdown,d=>(r(),s("div",{key:d.date,class:"flex-1 flex flex-col items-center gap-1"},[e("div",Bt,[(r(!0),s(p,null,$(Object.keys(d.by_sphere),Y=>(r(),s("div",{key:Y,class:"w-full rounded-sm transition-all duration-300",style:M({height:g(d.by_sphere[Y])+"px",backgroundColor:u(parseInt(Y)),opacity:.8}),title:`${y(parseInt(Y))}: ${d.by_sphere[Y]}`},null,12,St))),128)),Object.keys(d.by_sphere).length?_("",!0):(r(),s("div",Dt,[...t[3]||(t[3]=[e("span",{class:"text-gray-300 dark:text-gray-600 text-xs"},"—",-1)])]))]),e("span",{class:L(["text-xs mt-1",b(d.date)?"font-bold text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400"])},n(d.day),3)]))),128))])]),e("div",jt,[t[5]||(t[5]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Распределение внимания",-1)),e("div",Wt,[(r(!0),s(p,null,$(a.data.attention_distribution,d=>(r(),s("div",{key:d.sphere_id,class:"flex items-center gap-3"},[e("div",Ot,n(d.name),1),e("div",Vt,[e("div",{class:"h-full rounded-full transition-all duration-500",style:M({width:d.percentage+"%",backgroundColor:d.color,opacity:d.percentage>0?1:.3})},null,4)]),e("span",Ht,n(d.percentage)+"% ",1)]))),128))])]),(P=a.data.projects)!=null&&P.length?(r(),s("div",Nt,[t[6]||(t[6]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Потоки",-1)),e("div",qt,[(r(!0),s(p,null,$(a.data.projects,d=>(r(),s("div",{key:d.id,class:L(["flex items-center gap-3 p-2 rounded-lg",d.is_stalled?"opacity-50":""])},[e("div",{class:"w-2 h-2 rounded-full flex-shrink-0",style:M({backgroundColor:d.sphere_color||d.color})},null,4),e("div",Ft,[e("div",Rt,[e("span",Et,n(d.name),1),d.is_stalled?(r(),s("span",Tt,"стоит")):_("",!0)])]),e("div",Gt,[e("div",Zt,[e("div",{class:"h-full rounded-full",style:M({width:(d.total>0?d.done/d.total*100:0)+"%",backgroundColor:d.sphere_color||d.color})},null,4)]),e("span",Jt,n(d.done)+"/"+n(d.total),1)])],2))),128))])])):_("",!0)])):_("",!0)}}},Qt={key:0,class:"space-y-6"},Ut={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Xt={class:"flex items-center gap-4 mb-2"},It={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden"},ea={class:"text-sm font-bold text-gray-900 dark:text-white tabular-nums"},ta={class:"text-xs text-gray-500 dark:text-gray-400"},aa={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},ra={class:"space-y-2"},sa={class:"w-20 text-xs text-gray-600 dark:text-gray-400 truncate"},oa={class:"text-xs text-gray-400 dark:text-gray-500 tabular-nums w-8 text-right"},la={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden relative"},da={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-amber-200 dark:border-amber-900/50 p-4"},na={class:"space-y-2"},ia={class:"text-sm text-gray-700 dark:text-gray-300 flex-1"},ca={class:"text-xs text-amber-600 dark:text-amber-400"},ua={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-rose-200 dark:border-rose-900/50 p-4"},ga={class:"space-y-3"},xa={class:"flex items-center justify-between mb-2"},ya={class:"flex items-center gap-2"},ma={class:"text-sm font-medium text-gray-900 dark:text-white"},ha={class:"text-xs text-gray-500 dark:text-gray-400"},ba={class:"flex items-center gap-3"},ka={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden relative"},fa=["title"],va={class:"text-xs text-rose-600 dark:text-rose-400 tabular-nums"},pa={class:"text-gray-400"},_a={__name:"PeriodMonthView",props:{data:{type:Object,default:null}},setup(a){const x=a,i=C(()=>{var l;return((l=x.data)==null?void 0:l.planned_vs_done)||{planned:0,done:0,days_passed:0,days_remaining:0,required_daily_pace:0,completion_rate:0}}),g=l=>l>2?"text-emerald-600 dark:text-emerald-400":l<-2?"text-rose-600 dark:text-rose-400":"text-gray-400 dark:text-gray-500";return(l,u)=>{var y,b;return a.data?(r(),s("div",Qt,[e("div",Ut,[u[0]||(u[0]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Нагрузка",-1)),e("div",Xt,[e("div",It,[e("div",{class:"h-full rounded-full bg-primary-500 transition-all duration-500",style:M({width:(i.value.completion_rate||0)+"%"})},null,4)]),e("span",ea,n(i.value.done)+"/"+n(i.value.planned),1)]),e("p",ta," Осталось "+n(i.value.planned-i.value.done)+" задач, ~"+n(i.value.required_daily_pace)+"/день чтобы успеть. Прошло "+n(i.value.days_passed)+" дн., осталось "+n(i.value.days_remaining)+" дн. ",1)]),e("div",aa,[u[1]||(u[1]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Было → Стало",-1)),e("div",ra,[(r(!0),s(p,null,$(a.data.sphere_trends,o=>(r(),s("div",{key:o.sphere_id,class:"flex items-center gap-3"},[e("div",sa,n(o.name),1),e("span",oa,n(o.prev_pct)+"%",1),e("div",la,[e("div",{class:"absolute top-0 h-full w-0.5 bg-gray-400 dark:bg-gray-500 z-10",style:M({left:o.prev_pct+"%"})},null,4),e("div",{class:"h-full rounded-full transition-all duration-500",style:M({width:o.current_pct+"%",backgroundColor:o.color})},null,4)]),e("span",{class:"text-xs font-medium tabular-nums w-8 text-right",style:M({color:o.color})},n(o.current_pct)+"% ",5),e("span",{class:L(["text-xs tabular-nums w-10 text-right",g(o.change)])},n(o.change>0?"+":"")+n(o.change)+"% ",3)]))),128))])]),(y=a.data.stalled_projects)!=null&&y.length?(r(),s("div",da,[u[2]||(u[2]=e("h3",{class:"text-sm font-semibold text-amber-600 dark:text-amber-400 mb-3"},"Застрявшие потоки",-1)),e("div",na,[(r(!0),s(p,null,$(a.data.stalled_projects,o=>(r(),s("div",{key:o.id,class:"flex items-center gap-3 p-2 rounded-lg bg-amber-50/50 dark:bg-amber-900/10"},[e("div",{class:"w-2 h-2 rounded-full",style:M({backgroundColor:o.sphere_color||"#F59E0B"})},null,4),e("span",ia,n(o.name),1),e("span",ca,n(o.days_since_activity)+" дн. без движения ",1)]))),128))])])):_("",!0),(b=a.data.goals_at_risk)!=null&&b.length?(r(),s("div",ua,[u[3]||(u[3]=e("h3",{class:"text-sm font-semibold text-rose-600 dark:text-rose-400 mb-3"},"Цели под угрозой",-1)),e("div",ga,[(r(!0),s(p,null,$(a.data.goals_at_risk,o=>(r(),s("div",{key:o.id,class:"p-3 rounded-lg bg-rose-50/50 dark:bg-rose-900/10"},[e("div",xa,[e("div",ya,[e("div",{class:"w-2 h-2 rounded-full",style:M({backgroundColor:o.sphere_color})},null,4),e("span",ma,n(o.name),1)]),e("span",ha,n(o.days_left)+" дн. до дедлайна",1)]),e("div",ba,[e("div",ka,[e("div",{class:"absolute top-0 h-full w-0.5 bg-rose-400 z-10",style:M({left:o.expected_progress+"%"}),title:"Ожидаемый: "+o.expected_progress+"%"},null,12,fa),e("div",{class:"h-full rounded-full bg-rose-500",style:M({width:o.progress+"%"})},null,4)]),e("span",va,[O(n(o.progress)+"% ",1),e("span",pa,"из "+n(o.expected_progress)+"%",1)])])]))),128))])])):_("",!0)])):_("",!0)}}},$a={key:0,class:"space-y-6"},wa={class:"grid grid-cols-2 sm:grid-cols-5 gap-3"},Ma={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Ca={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},Pa={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-emerald-200 dark:border-emerald-900/50"},Ya={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400 mt-1"},La={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-blue-200 dark:border-blue-900/50"},za={class:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1"},Aa={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-amber-200 dark:border-amber-900/50"},Ba={class:"text-2xl font-bold text-amber-600 dark:text-amber-400 mt-1"},Sa={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Da={class:"text-2xl font-bold text-gray-400 mt-1"},ja={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Wa={class:"flex items-end gap-2 h-32"},Oa={class:"text-xs font-bold text-gray-900 dark:text-white tabular-nums"},Va={class:"text-[10px] text-gray-500 dark:text-gray-400 truncate max-w-full"},Ha={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Na={class:"space-y-3"},qa={class:"flex-1 min-w-0"},Fa={class:"flex items-center gap-2 mb-1"},Ra={class:"text-sm text-gray-900 dark:text-white truncate"},Ea={class:"flex items-center gap-2"},Ta={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"},Ga={class:"text-xs text-gray-500 dark:text-gray-400 tabular-nums"},Za={key:0,class:"text-xs text-gray-400 tabular-nums whitespace-nowrap"},Ja={key:2,class:"bg-white dark:bg-gray-800 rounded-xl border border-emerald-200 dark:border-emerald-900/50 p-4"},Ka={class:"space-y-2"},Qa={class:"text-sm text-gray-900 dark:text-white flex-1"},Ua={class:"text-xs text-gray-400"},Xa={key:3,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Ia={class:"space-y-2"},er={class:"text-xs text-gray-600 dark:text-gray-400 w-20 truncate"},tr={class:"text-[10px] text-gray-400 dark:text-gray-500"},ar={__name:"PeriodYearView",props:{data:{type:Object,default:null}},setup(a){const x=a,i=C(()=>{var o;return((o=x.data)==null?void 0:o.goals_summary)||{total:0,achieved:0,on_track:0,behind:0,at_risk:0,stalled:0}}),g={ahead:"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400",on_track:"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400",behind:"bg-amber-100 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400",at_risk:"bg-rose-100 dark:bg-rose-900/20 text-rose-700 dark:text-rose-400",stalled:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"},l={ahead:"опережает",on_track:"по графику",behind:"отстаёт",at_risk:"под угрозой",stalled:"стоит"},u={growing:"↑",falling:"↓",stable:"→",stalled:"·"},y={growing:"растёт",falling:"падает",stable:"стабильно",stalled:"стоит"},b=o=>o==="growing"?"text-emerald-600 dark:text-emerald-400":o==="falling"?"text-rose-600 dark:text-rose-400":"text-gray-400 dark:text-gray-500";return(o,t)=>{var f,k,w,P;return a.data?(r(),s("div",$a,[e("div",wa,[e("div",Ma,[t[0]||(t[0]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Всего целей",-1)),e("p",Ca,n(i.value.total),1)]),e("div",Pa,[t[1]||(t[1]=e("p",{class:"text-xs text-emerald-600 dark:text-emerald-400"},"Достигнуто",-1)),e("p",Ya,n(i.value.achieved),1)]),e("div",La,[t[2]||(t[2]=e("p",{class:"text-xs text-blue-600 dark:text-blue-400"},"По графику",-1)),e("p",za,n(i.value.on_track),1)]),e("div",Aa,[t[3]||(t[3]=e("p",{class:"text-xs text-amber-600 dark:text-amber-400"},"Отстают",-1)),e("p",Ba,n(i.value.behind+i.value.at_risk),1)]),e("div",Sa,[t[4]||(t[4]=e("p",{class:"text-xs text-gray-400"},"Стоят",-1)),e("p",Da,n(i.value.stalled),1)])]),(f=a.data.monthly_balance_trend)!=null&&f.length?(r(),s("div",ja,[t[5]||(t[5]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Индекс баланса — тренд",-1)),e("div",Wa,[(r(!0),s(p,null,$(a.data.monthly_balance_trend,d=>(r(),s("div",{key:d.month_key,class:"flex-1 flex flex-col items-center gap-1"},[e("span",Oa,n(d.balance_index),1),e("div",{class:L(["w-full rounded-t transition-all duration-300",d.is_current?"bg-primary-500 shadow-lg shadow-primary-500/30":"bg-gray-300 dark:bg-gray-600"]),style:M({height:Math.max(d.balance_index,5)+"%"})},null,6),e("span",Va,n(d.month.split(" ")[0]),1)]))),128))])])):_("",!0),(k=a.data.active_goals)!=null&&k.length?(r(),s("div",Ha,[t[6]||(t[6]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Цели года",-1)),e("div",Na,[(r(!0),s(p,null,$(a.data.active_goals,d=>(r(),s("div",{key:d.id,class:L(["flex items-center gap-3 p-2 rounded-lg",d.status==="stalled"?"opacity-50":""])},[e("div",{class:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:M({backgroundColor:d.sphere_color})},null,4),e("div",qa,[e("div",Fa,[e("span",Ra,n(d.name),1),e("span",{class:L(["text-[10px] px-1.5 py-0.5 rounded-full",g[d.status]||g.on_track])},n(l[d.status]||d.status),3)]),e("div",Ea,[e("div",Ta,[e("div",{class:"h-full rounded-full transition-all duration-500",style:M({width:d.progress+"%",backgroundColor:d.sphere_color})},null,4)]),e("span",Ga,n(d.progress)+"%",1)])]),d.days_left?(r(),s("span",Za,n(d.days_left)+" дн. ",1)):_("",!0)],2))),128))])])):_("",!0),(w=a.data.achieved_goals)!=null&&w.length?(r(),s("div",Ja,[t[8]||(t[8]=e("h3",{class:"text-sm font-semibold text-emerald-600 dark:text-emerald-400 mb-3"},"Достигнутые цели",-1)),e("div",Ka,[(r(!0),s(p,null,$(a.data.achieved_goals,d=>(r(),s("div",{key:d.id,class:"flex items-center gap-3 p-2"},[t[7]||(t[7]=e("svg",{class:"w-5 h-5 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Qa,n(d.name),1),e("span",Ua,n(d.completed_at),1)]))),128))])])):_("",!0),(P=a.data.sphere_yearly_trends)!=null&&P.length?(r(),s("div",Xa,[t[9]||(t[9]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Тренды по сферам",-1)),e("div",Ia,[(r(!0),s(p,null,$(a.data.sphere_yearly_trends,d=>(r(),s("div",{key:d.sphere_id,class:"flex items-center gap-3"},[e("div",{class:"w-2 h-2 rounded-full",style:M({backgroundColor:d.color})},null,4),e("span",er,n(d.name),1),e("span",{class:L(["text-xs tabular-nums w-12",b(d.trend)])},n(u[d.trend]||"—")+" "+n(d.avg_attention)+"% ",3),e("span",tr,n(y[d.trend]||""),1)]))),128))])])):_("",!0)])):_("",!0)}}},rr={key:0,class:"flex items-center justify-center py-16"},sr={key:1,class:"text-center py-16"},or={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},lr={class:"lg:col-span-1 flex items-center justify-center"},dr={class:"lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3"},nr={__name:"WorkspaceDashboard",props:{workspaceId:{type:Number,required:!0},period:{type:String,required:!0},data:{type:Object,default:null}},setup(a){const x=a,i=C(()=>({day:E,week:Kt,month:_a,year:ar})[x.period]||E),g=C(()=>{var b;const l=(b=x.data)==null?void 0:b.lifeMirror;if(!l)return[];const u=(l.spheres||[]).map(o=>({name:o.name,total:o.tasks_total||0,done:o.tasks_done||0,color:o.color})),y=(l.missing_spheres||[]).map(o=>({name:o.name,total:0,done:0,color:o.color}));return[...u,...y]});return(l,u)=>{var y,b,o,t,f,k,w,P,d;return(y=a.data)!=null&&y.loading&&!((b=a.data)!=null&&b.lifeMirror)?(r(),s("div",rr,[...u[0]||(u[0]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-2 border-primary-600 border-t-transparent"},null,-1)])])):!((o=a.data)!=null&&o.loading)&&!((t=a.data)!=null&&t.lifeMirror)?(r(),s("div",sr,[...u[1]||(u[1]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},"Нет данных",-1),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Создайте сферы жизни и задачи для аналитики",-1)])])):(r(),s(p,{key:2},[D(Le,{message:a.data.aiMessage,loading:a.data.aiLoading,class:"mb-6"},null,8,["message","loading"]),e("div",or,[e("div",lr,[D(Re,{spheres:g.value,"balance-index":((f=a.data.lifeMirror)==null?void 0:f.balance_index)||0,size:280},null,8,["spheres","balance-index"])]),e("div",dr,[(r(!0),s(p,null,$((k=a.data.lifeMirror)==null?void 0:k.spheres,Y=>(r(),B(Ue,{key:Y.id,sphere:Y},null,8,["sphere"]))),128))])]),(P=(w=a.data.lifeMirror)==null?void 0:w.missing_spheres)!=null&&P.length?(r(),B(rt,{key:0,spheres:a.data.lifeMirror.missing_spheres,class:"mb-6"},null,8,["spheres"])):_("",!0),(r(),B(ae(i.value),{data:(d=a.data.lifeMirror)==null?void 0:d.period_data},null,8,["data"]))],64))}}},ir={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},cr={class:"max-w-4xl mx-auto px-4 sm:px-6 py-6"},ur={key:0,class:"text-center py-16"},gr={key:0,class:"mb-6"},xr={class:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide"},yr=["onClick"],mr={key:0,class:"text-base"},vr={__name:"Dashboard",setup(a){const x=oe(),i=G(),g=C(()=>i.selectedWorkspaces),l=W(null),u=C(()=>l.value&&x.dataByWorkspace[l.value]||null);return T(()=>g.value.map(y=>y.id),y=>{if(!y.length){l.value=null;return}(!l.value||!y.includes(l.value))&&(l.value=y[0])},{immediate:!0}),re(()=>{x.fetchAllWorkspaces()}),(y,b)=>(r(),s("div",ir,[e("div",cr,[D(ue,{period:S(x).selectedPeriod,onChangePeriod:S(x).setPeriod},null,8,["period","onChangePeriod"]),g.value.length?(r(),s(p,{key:1},[g.value.length>1?(r(),s("div",gr,[e("div",xr,[(r(!0),s(p,null,$(g.value,o=>(r(),s("button",{key:o.id,onClick:t=>l.value=o.id,class:L(["flex items-center gap-1.5 px-4 py-2 text-sm font-medium rounded-xl whitespace-nowrap transition-all duration-200",[l.value===o.id?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm ring-1 ring-gray-200 dark:ring-gray-700":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800/50"]])},[o.emoji?(r(),s("span",mr,n(o.emoji),1)):_("",!0),e("span",null,n(o.name),1)],10,yr))),128))])])):_("",!0),l.value?(r(),B(nr,{key:l.value,"workspace-id":l.value,period:S(x).selectedPeriod,data:u.value},null,8,["workspace-id","period","data"])):_("",!0)],64)):(r(),s("div",ur,[...b[0]||(b[0]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},"Нет данных",-1),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Выберите workspace для просмотра аналитики",-1)])]))])]))}};export{vr as default};
