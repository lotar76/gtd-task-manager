import{c as l,o as a,a as e,j as fe,k as P,h as le,l as Z,g as _,b as S,m as xe,n as be,p as F,t as M,r as v,f as h,w as L,q as Ke,s as oe,x as se,d as G,v as ne,y as Ge,T as J,F as ie,z as de,A as pe,B as X,C as ue,e as U,D as Ze,u as we,i as Je,E as Xe}from"./index-B_kffTtW.js";import{u as ce}from"./workspace-ME4Zs4jt.js";import{r as he,a as $e,b as Ce,c as Me,d as je,u as Ye,e as et,T as tt}from"./TaskModal-CMJLdT6G.js";import{r as rt}from"./RectangleStackIcon-DO8c57fW.js";import{r as Se}from"./CalendarDaysIcon-BRADqGET.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as ot}from"./ProjectModal-BWTXlXar.js";function st(m,j){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function re(m,j){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const at={class:"flex items-center space-x-3"},ve={__name:"NavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null}},setup(m){const j=m,g=fe(),y=ce(),f={inbox:je,lightning:Me,calendar:Ce,clock:$e,archive:he,folder:re,"calendar-days":Se,target:re,"rectangle-stack":rt,cog:st},d=P(()=>f[j.icon]||re),k=P(()=>{var s;const x=(s=y.currentWorkspace)==null?void 0:s.id;return j.to.replace(":id",x||"1")}),i=P(()=>g.path===k.value);return(x,s)=>{const t=le("router-link");return a(),Z(t,{to:k.value,class:F(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",i.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:_(()=>[e("div",at,[(a(),Z(xe(d.value),{class:"w-5 h-5"})),e("span",null,[be(x.$slots,"default")])]),m.count!==null&&m.count>0?(a(),l("span",{key:0,class:F(["px-2 py-0.5 text-xs font-semibold rounded-full",i.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},M(m.count),3)):S("",!0)]),_:3},8,["to","class"])}}},nt={class:"flex items-center space-x-3"},te={__name:"DroppableNavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null},dropStatus:{type:String,default:null}},emits:["task-dropped"],setup(m,{emit:j}){const g=m,y=j,f=fe(),d=ce(),k=v(!1),i={inbox:je,lightning:Me,calendar:Ce,clock:$e,archive:he,folder:re,"calendar-days":Se,target:re},x=P(()=>i[g.icon]||re),s=P(()=>{var E;const W=(E=d.currentWorkspace)==null?void 0:E.id;return g.to.replace(":id",W||"1")}),t=P(()=>f.path===s.value),$=W=>{W.preventDefault(),k.value=!0,W.dataTransfer.dropEffect="move"},D=()=>{k.value=!1},H=W=>{W.preventDefault(),k.value=!1;try{const E=JSON.parse(W.dataTransfer.getData("application/json"));g.dropStatus&&E&&y("task-dropped",{taskId:E.id,newStatus:g.dropStatus})}catch(E){console.error("Error handling drop:",E)}};return(W,E)=>{const I=le("router-link");return a(),l("div",{onDrop:H,onDragover:L($,["prevent"]),onDragleave:D,class:F(["rounded-lg transition-all",k.value?"bg-primary-100 dark:bg-primary-900/40 ring-2 ring-primary-500":""])},[h(I,{to:s.value,class:F(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",t.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:_(()=>[e("div",nt,[(a(),Z(xe(x.value),{class:"w-5 h-5"})),e("span",null,[be(W.$slots,"default")])]),m.count!==null&&m.count>0?(a(),l("span",{key:0,class:F(["px-2 py-0.5 text-xs font-semibold rounded-full",t.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},M(m.count),3)):S("",!0)]),_:3},8,["to","class"])],34)}}},lt={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20"},it={class:"flex items-center justify-between px-4 lg:px-8 py-3"},dt={class:"flex-1 max-w-2xl"},ut={class:"relative"},ct={class:"flex items-center space-x-2 lg:space-x-4 ml-4"},pt={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 z-50"},vt={class:"relative"},gt={key:0,class:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"},kt={key:0,class:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 max-h-96 overflow-y-auto"},mt={key:0,class:"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400"},yt={key:1},ft={class:"text-sm text-gray-900 dark:text-gray-100"},xt={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},bt=["title"],wt={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ht={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$t={class:"hidden lg:block relative"},Ct={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},Mt={class:"hidden lg:block text-left"},jt={class:"text-sm font-medium text-gray-900 dark:text-white"},St={class:"text-xs text-gray-500 dark:text-gray-400"},_t={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2"},Et={__name:"Toolbar",props:{user:{type:Object,default:null}},emits:["quick-add","quick-add-task","quick-add-project","quick-add-goal","search","logout","profile","settings","toggle-sidebar"],setup(m,{emit:j}){const g=Ke(),y=m,f=j,d=v(""),k=v(!1),i=v(!1),x=v(!1),s=v(0),t=v([]),$=v(null),D=P(()=>{var o;return(((o=y.user)==null?void 0:o.name)||"").split(" ").map(V=>V[0]).join("").toUpperCase().slice(0,2)}),H=()=>{x.value=!x.value},W=()=>{x.value=!1,f("quick-add-task")},E=()=>{x.value=!1,f("quick-add-project")},I=()=>{x.value=!1,f("quick-add-goal")},p=T=>{$.value&&!$.value.contains(T.target)&&(x.value=!1)},n=T=>{T.key==="Escape"&&(x.value=!1,k.value=!1,i.value=!1)};oe(()=>{document.addEventListener("click",p),document.addEventListener("keydown",n)}),se(()=>{document.removeEventListener("click",p),document.removeEventListener("keydown",n)});const b=()=>{d.value.trim()&&f("search",d.value)},z=()=>{b()},R=()=>{i.value=!1,f("logout")},N=()=>{i.value=!1,f("profile")},B=()=>{i.value=!1,f("settings")},K={mounted(T,o){T.clickOutsideEvent=V=>{T===V.target||T.contains(V.target)||o.value()},document.addEventListener("click",T.clickOutsideEvent)},unmounted(T){document.removeEventListener("click",T.clickOutsideEvent)}};return(T,o)=>{var V,Y;return a(),l("header",lt,[e("div",it,[e("button",{onClick:o[0]||(o[0]=q=>T.$emit("toggle-sidebar")),class:"lg:hidden p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors mr-2"},[...o[5]||(o[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e("div",dt,[e("div",ut,[o[6]||(o[6]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),G(e("input",{"onUpdate:modelValue":o[1]||(o[1]=q=>d.value=q),type:"text",placeholder:"Поиск задач...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onInput:b,onKeydown:Ge(z,["enter"])},null,544),[[ne,d.value]])])]),e("div",ct,[e("div",{class:"relative",ref_key:"quickAddMenuContainer",ref:$},[e("button",{onClick:L(H,["stop"]),class:"inline-flex items-center px-3 lg:px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary-500 transition-colors"},[...o[7]||(o[7]=[e("svg",{class:"w-5 h-5 lg:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden lg:inline"},"Создать",-1)])]),h(J,{name:"dropdown"},{default:_(()=>[x.value?(a(),l("div",pt,[e("button",{onClick:W,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...o[8]||(o[8]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",null,"Задачу")],-1)])]),e("button",{onClick:E,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...o[9]||(o[9]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),e("span",null,"Проект")],-1)])]),e("button",{onClick:I,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...o[10]||(o[10]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),e("span",null,"Цель")],-1)])])])):S("",!0)]),_:1})],512),e("div",vt,[e("button",{onClick:o[2]||(o[2]=L(q=>k.value=!k.value,["stop"])),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors relative"},[o[11]||(o[11]=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),s.value>0?(a(),l("span",gt)):S("",!0)]),k.value?G((a(),l("div",kt,[o[12]||(o[12]=e("div",{class:"px-4 py-2 border-b border-gray-200 dark:border-gray-600"},[e("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Уведомления")],-1)),t.value.length===0?(a(),l("div",mt," Нет новых уведомлений ")):(a(),l("div",yt,[(a(!0),l(ie,null,de(t.value,q=>(a(),l("button",{key:q.id,class:"w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-left"},[e("p",ft,M(q.message),1),e("p",xt,M(q.time),1)]))),128))]))])),[[K,()=>k.value=!1]]):S("",!0)]),e("button",{onClick:o[3]||(o[3]=q=>pe(g).toggleTheme()),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:pe(g).isDark?"Светлая тема":"Тёмная тема"},[pe(g).isDark?(a(),l("svg",wt,[...o[13]||(o[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(a(),l("svg",ht,[...o[14]||(o[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))],8,bt),e("div",$t,[e("button",{onClick:o[4]||(o[4]=L(q=>i.value=!i.value,["stop"])),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[e("div",Ct,M(D.value),1),e("div",Mt,[e("div",jt,M((V=m.user)==null?void 0:V.name),1),e("div",St,M((Y=m.user)==null?void 0:Y.email),1)]),o[15]||(o[15]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),i.value?G((a(),l("div",_t,[e("button",{onClick:N,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...o[16]||(o[16]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),e("span",null,"Профиль")],-1)])]),e("button",{onClick:B,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...o[17]||(o[17]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),e("span",null,"Настройки")],-1)])]),o[19]||(o[19]=e("div",{class:"border-t border-gray-200 dark:border-gray-600 my-2"},null,-1)),e("button",{onClick:R,class:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},[...o[18]||(o[18]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})]),e("span",null,"Выйти")],-1)])])])),[[K,()=>i.value=!1]]):S("",!0)])])])])}}},Tt=ae(Et,[["__scopeId","data-v-24f2ea9a"]]),Bt={class:"flex min-h-screen items-center justify-center p-4"},Lt={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Dt={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Wt={class:"flex justify-end space-x-3 pt-4"},At=["disabled"],Pt={__name:"WorkspaceModal",props:{show:{type:Boolean,default:!1}},emits:["close","submit"],setup(m,{emit:j}){const g=m,y=j,f=s=>{s.key==="Escape"&&g.show&&y("close")};oe(()=>document.addEventListener("keydown",f)),se(()=>document.removeEventListener("keydown",f));const d=v({name:"",description:""}),k=v(!1),i=v("");X(()=>g.show,s=>{s||(d.value={name:"",description:""},k.value=!1,i.value="")});const x=()=>{i.value="",k.value=!0,y("submit",d.value)};return(s,t)=>(a(),Z(ue,{to:"body"},[h(J,{name:"modal"},{default:_(()=>[m.show?(a(),l("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=L($=>s.$emit("close"),["self"]))},[t[10]||(t[10]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Bt,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=L(()=>{},["stop"]))},[e("div",Lt,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Новое рабочее пространство ",-1)),e("button",{onClick:t[0]||(t[0]=$=>s.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:L(x,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Название * ",-1)),G(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=$=>d.value.name=$),type:"text",required:"",class:"input",placeholder:"Например: Команда разработки"},null,512),[[ne,d.value.name]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Описание ",-1)),G(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=$=>d.value.description=$),rows:"3",class:"input",placeholder:"Краткое описание рабочего пространства"},null,512),[[ne,d.value.description]])]),i.value?(a(),l("div",Dt,M(i.value),1)):S("",!0),e("div",Wt,[e("button",{type:"button",onClick:t[3]||(t[3]=$=>s.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:k.value,class:"btn btn-primary"},M(k.value?"Создание...":"Создать"),9,At)])],32)])])])):S("",!0)]),_:1})]))}},zt=ae(Pt,[["__scopeId","data-v-68182ad4"]]),Ot={class:"flex min-h-screen items-center justify-center p-4"},It={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Vt={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},qt={class:"font-medium"},Rt={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Qt={class:"flex justify-end space-x-3 pt-4"},Ut=["disabled"],Ht={__name:"AddMemberModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(m,{emit:j}){const g=m,y=j,f=s=>{s.key==="Escape"&&g.show&&y("close")};oe(()=>document.addEventListener("keydown",f)),se(()=>document.removeEventListener("keydown",f));const d=v({email:"",role:"member"}),k=v(!1),i=v("");X(()=>g.show,s=>{s||(d.value={email:"",role:"member"},k.value=!1,i.value="")});const x=()=>{var s;i.value="",k.value=!0,y("submit",{...d.value,workspace_id:(s=g.workspace)==null?void 0:s.id})};return(s,t)=>(a(),Z(ue,{to:"body"},[h(J,{name:"modal"},{default:_(()=>{var $;return[m.show?(a(),l("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=L(D=>s.$emit("close"),["self"]))},[t[12]||(t[12]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Ot,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=L(()=>{},["stop"]))},[e("div",It,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Добавить пользователя ",-1)),e("button",{onClick:t[0]||(t[0]=D=>s.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:L(x,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[e("p",Vt,[t[8]||(t[8]=U(" Workspace: ",-1)),e("span",qt,M(($=m.workspace)==null?void 0:$.name),1)])]),e("div",null,[t[9]||(t[9]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Email пользователя * ",-1)),G(e("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=D=>d.value.email=D),type:"email",required:"",class:"input",placeholder:"user@example.com"},null,512),[[ne,d.value.email]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"role",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Роль ",-1)),G(e("select",{id:"role","onUpdate:modelValue":t[2]||(t[2]=D=>d.value.role=D),class:"input"},[...t[10]||(t[10]=[e("option",{value:"viewer"},"Просмотр",-1),e("option",{value:"member"},"Участник",-1),e("option",{value:"admin"},"Администратор",-1)])],512),[[Ze,d.value.role]])]),i.value?(a(),l("div",Rt,M(i.value),1)):S("",!0),e("div",Qt,[e("button",{type:"button",onClick:t[3]||(t[3]=D=>s.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:k.value,class:"btn btn-primary"},M(k.value?"Добавление...":"Добавить"),9,Ut)])],32)])])])):S("",!0)]}),_:1})]))}},Nt=ae(Ht,[["__scopeId","data-v-72cbffa0"]]),Ft={class:"flex min-h-screen items-center justify-center p-4"},Kt={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Gt={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Zt={class:"flex justify-end space-x-3 pt-4"},Jt=["disabled"],Xt={__name:"RenameWorkspaceModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(m,{emit:j}){const g=m,y=j,f=s=>{s.key==="Escape"&&g.show&&y("close")};oe(()=>document.addEventListener("keydown",f)),se(()=>document.removeEventListener("keydown",f));const d=v({name:""}),k=v(!1),i=v("");X(()=>g.workspace,s=>{s&&(d.value.name=s.name)},{immediate:!0}),X(()=>g.show,s=>{s||(k.value=!1,i.value="")});const x=()=>{i.value="",k.value=!0,y("submit",d.value.name)};return(s,t)=>(a(),Z(ue,{to:"body"},[h(J,{name:"modal"},{default:_(()=>[m.show?(a(),l("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[4]||(t[4]=L($=>s.$emit("close"),["self"]))},[t[8]||(t[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Ft,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[3]||(t[3]=L(()=>{},["stop"]))},[e("div",Kt,[t[6]||(t[6]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Переименовать workspace ",-1)),e("button",{onClick:t[0]||(t[0]=$=>s.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[5]||(t[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:L(x,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[7]||(t[7]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Новое название * ",-1)),G(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=$=>d.value.name=$),type:"text",required:"",class:"input",placeholder:"Название workspace"},null,512),[[ne,d.value.name]])]),i.value?(a(),l("div",Gt,M(i.value),1)):S("",!0),e("div",Zt,[e("button",{type:"button",onClick:t[2]||(t[2]=$=>s.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:k.value,class:"btn btn-primary"},M(k.value?"Сохранение...":"Сохранить"),9,Jt)])],32)])])])):S("",!0)]),_:1})]))}},Yt=ae(Xt,[["__scopeId","data-v-9efc4d3d"]]),er={class:"flex min-h-screen items-center justify-center p-4"},tr={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},rr={class:"p-6"},or={key:0,class:"text-center py-8"},sr={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ar={key:2,class:"space-y-3"},nr={class:"flex items-center space-x-3"},lr={class:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},ir={class:"font-medium text-gray-900 dark:text-white"},dr={class:"text-sm text-gray-500 dark:text-gray-400"},ur={class:"flex items-center space-x-3"},cr=["onClick","disabled"],pr={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vr={key:1,class:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-red-600"},gr={key:0,class:"px-6 pb-4"},kr={class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},mr={class:"flex justify-end p-6 border-t border-gray-200 dark:border-gray-700"},yr={__name:"MembersModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","member-removed"],setup(m,{emit:j}){const g=m,y=j,f=p=>{p.key==="Escape"&&g.show&&y("close")};oe(()=>document.addEventListener("keydown",f)),se(()=>document.removeEventListener("keydown",f));const d=ce(),k=we(),i=v([]),x=v(!1),s=v(""),t=v(null),$=p=>p?p.split(" ").map(n=>n[0]).join("").toUpperCase().substring(0,2):"?",D=p=>({owner:"Владелец",admin:"Администратор",member:"Участник",viewer:"Наблюдатель"})[p]||p,H=p=>({owner:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",admin:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",member:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",viewer:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"})[p]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400",W=p=>{var R,N,B,K,T,o,V;const n=(R=k.user)==null?void 0:R.id,b=((N=g.workspace)==null?void 0:N.owner_id)===n,z=((o=(T=(K=(B=g.workspace)==null?void 0:B.members)==null?void 0:K.find(Y=>Y.id===n))==null?void 0:T.pivot)==null?void 0:o.role)==="admin";return((V=g.workspace)==null?void 0:V.owner_id)===p.id||p.id===n?!1:b||z},E=async()=>{var p;if((p=g.workspace)!=null&&p.id){x.value=!0,s.value="";try{const n=await d.fetchMembers(g.workspace.id);i.value=n.members||n||[]}catch(n){console.error("Error loading members:",n),s.value="Ошибка при загрузке участников"}finally{x.value=!1}}},I=async p=>{var n,b;if(confirm(`Вы уверены, что хотите удалить ${p.name} из workspace?`)){t.value=p.id,s.value="";try{await d.removeMember(g.workspace.id,p.id),await E(),y("member-removed",p)}catch(z){console.error("Error removing member:",z),s.value=((b=(n=z.response)==null?void 0:n.data)==null?void 0:b.message)||"Ошибка при удалении участника"}finally{t.value=null}}};return X(()=>g.show,p=>{p?E():(i.value=[],s.value="",t.value=null)}),X(()=>{var p;return(p=g.workspace)==null?void 0:p.id},()=>{g.show&&E()}),(p,n)=>(a(),Z(ue,{to:"body"},[h(J,{name:"modal"},{default:_(()=>[m.show?(a(),l("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:n[3]||(n[3]=L(b=>p.$emit("close"),["self"]))},[n[8]||(n[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",er,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-auto",onClick:n[2]||(n[2]=L(()=>{},["stop"]))},[e("div",tr,[n[5]||(n[5]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Участники workspace ",-1)),e("button",{onClick:n[0]||(n[0]=b=>p.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...n[4]||(n[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",rr,[x.value?(a(),l("div",or,[...n[6]||(n[6]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):i.value.length===0?(a(),l("div",sr," Нет участников ")):(a(),l("div",ar,[(a(!0),l(ie,null,de(i.value,b=>{var z,R,N,B;return a(),l("div",{key:b.id,class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[e("div",nr,[e("div",lr,M($(b.name)),1),e("div",null,[e("div",ir,M(b.name),1),e("div",dr,M(b.email),1)])]),e("div",ur,[e("span",{class:F(["px-3 py-1 text-xs font-medium rounded-full",H(((z=b.pivot)==null?void 0:z.role)||(((R=m.workspace)==null?void 0:R.owner_id)===b.id?"owner":"member"))])},M(D(((N=b.pivot)==null?void 0:N.role)||(((B=m.workspace)==null?void 0:B.owner_id)===b.id?"owner":"member"))),3),W(b)?(a(),l("button",{key:0,onClick:K=>I(b),class:"text-red-600 hover:text-red-700 p-2 rounded transition-colors",disabled:t.value===b.id,title:"Удалить из workspace"},[t.value!==b.id?(a(),l("svg",pr,[...n[7]||(n[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])])):(a(),l("div",vr))],8,cr)):S("",!0)])])}),128))]))]),s.value?(a(),l("div",gr,[e("div",kr,M(s.value),1)])):S("",!0),e("div",mr,[e("button",{onClick:n[1]||(n[1]=b=>p.$emit("close")),class:"btn btn-secondary"}," Закрыть ")])])])])):S("",!0)]),_:1})]))}},fr=ae(yr,[["__scopeId","data-v-e1a886d2"]]),xr={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},br={key:0,class:"fixed inset-0 z-[100] bg-white dark:bg-gray-900 flex items-center justify-center"},wr={class:"flex h-screen"},hr={class:"flex flex-col h-full"},$r={class:"p-4 border-b border-gray-200 dark:border-gray-700"},Cr={class:"flex items-center justify-between mb-3"},Mr={class:"space-y-1"},jr={class:"flex-1 flex items-center px-3 py-2 text-sm cursor-pointer"},Sr=["checked","onChange"],_r={class:"flex-1 overflow-y-auto p-4"},Er={class:"space-y-1"},Tr={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 space-y-1"},Br={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Lr={class:"space-y-1 max-h-64 overflow-y-auto"},Dr={class:"text-sm text-gray-700 dark:text-gray-300 truncate"},Wr={key:0,class:"text-xs text-gray-500"},Ar=["onClick"],Pr={key:0,class:"px-3 py-2 text-sm text-gray-500 text-center"},zr={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Or={class:"space-y-1"},Ir={key:1,class:"fixed bottom-5 right-5 z-30 lg:hidden flex flex-col gap-3 items-center"},Vr={class:"flex-1 flex flex-col overflow-hidden"},qr={class:"flex-1 overflow-auto"},Rr={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4"},Qr={class:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-sm w-full p-6"},Ur={class:"text-sm text-gray-500 dark:text-gray-400 mb-6"},Hr={__name:"MainLayout",setup(m){const j=Je(),g=we(),y=ce(),f=Ye(),d=et(),k=v(!0),i=v(!1);v(!1);const x=v(!1),s=v(!1),t=v(""),$=v(null),D=v(!1),H=v(!1),W=v(!1),E=v(!1),I=v(null),p=v(""),n=v(null),b=v(!1),z=v(null),R=P(()=>g.user),N=P(()=>y.workspaces),B=P(()=>f.counts),K=P(()=>y.currentWorkspace),T=P(()=>d.activeProjects),o=P(()=>y.selectedWorkspaces.map(u=>u.id)),V=P(()=>f.filteredTasks.length),Y=P(()=>{if(o.value.length===0)return 0;const u=B.value.scheduled||0,r=B.value.today||0,w=B.value.tomorrow||0;return u+r+w});P(()=>{var r;return(((r=R.value)==null?void 0:r.name)||"").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)});const q=u=>{var Q;y.toggleSelectedWorkspace(u);const w=j.currentRoute.value.path.split("/"),C=w[w.length-1],O=["inbox","next-actions","today","waiting","someday","calendar","projects","goals"].includes(C)?C:"inbox",A=((Q=y.currentWorkspace)==null?void 0:Q.id)||u.id;j.push(`/workspaces/${A}/${O}`)},_e=async u=>{try{const r=await y.createWorkspace(u);x.value=!1,await q(r)}catch(r){console.error("Ошибка создания workspace:",r)}},Ee=async()=>{await g.logout(),j.push("/login")},Te=()=>{s.value=!0},ge=()=>{I.value=null,E.value=!0},Be=async u=>{var r,w;p.value="";try{I.value?await d.updateProject(I.value.id,u):await d.createProject(u),E.value=!1,I.value=null,await d.fetchProjects()}catch(C){console.error("Error saving project:",C),p.value=((w=(r=C.response)==null?void 0:r.data)==null?void 0:w.message)||C.message||"Ошибка при сохранении проекта"}},Le=()=>{E.value=!1,I.value=null,p.value=""},De=async u=>{var r,w;if(confirm(`Архивировать проект "${u.name}"?`))try{await d.archiveProject(u.id),await d.fetchProjects()}catch(C){console.error("Error archiving project:",C),alert("Ошибка при архивировании проекта: "+(((w=(r=C.response)==null?void 0:r.data)==null?void 0:w.message)||C.message))}},We=()=>{console.log("Quick add goal")},Ae=async u=>{var r,w;t.value="";try{await f.createTask(u),s.value=!1}catch(C){console.error("Error creating task:",C),t.value=((w=(r=C.response)==null?void 0:r.data)==null?void 0:w.message)||C.message||"Ошибка при создании задачи"}},Pe=()=>{s.value=!1,t.value=""},ee=async({taskId:u,newStatus:r})=>{var w,C;try{const c={status:r};if(r==="today")c.due_date=new Date().toISOString().split("T")[0];else if(r==="tomorrow"){const O=new Date;O.setDate(O.getDate()+1),c.due_date=O.toISOString().split("T")[0]}await f.updateTask(u,c)}catch(c){console.error("Error updating task status:",c),alert(((C=(w=c.response)==null?void 0:w.data)==null?void 0:C.message)||"Ошибка при обновлении задачи")}},ze=u=>{console.log("Search:",u)},Oe=()=>{j.push("/settings")},Ie=()=>{j.push("/settings")},Ve=async()=>{if(z.value){try{await y.deleteWorkspace(z.value.id)}catch(u){console.error("Error deleting workspace:",u)}b.value=!1,z.value=null}},ke=()=>{b.value=!1,z.value=null},qe=()=>{D.value=!1,n.value=null},Re=()=>{W.value=!1,n.value=null},Qe=async()=>{await y.fetchWorkspaces()},Ue=()=>{H.value=!1,n.value=null},He=async u=>{var r,w,C,c,O;try{console.log("Sending member data:",u),await y.addMember(u.workspace_id,{email:u.email,role:u.role}),D.value=!1,n.value=null,alert("Пользователь успешно добавлен в workspace")}catch(A){console.error("Error adding member:",A),console.error("Error response:",(r=A.response)==null?void 0:r.data);let Q="Ошибка при добавлении пользователя";(C=(w=A.response)==null?void 0:w.data)!=null&&C.errors?Q=Object.values(A.response.data.errors).flat().join(", "):(O=(c=A.response)==null?void 0:c.data)!=null&&O.message&&(Q=A.response.data.message),alert(Q)}},Ne=async u=>{var r,w,C,c,O;try{console.log("Renaming workspace:",n.value.id,"to:",u),await y.updateWorkspace(n.value.id,{name:u}),await y.fetchWorkspaces(),H.value=!1,n.value=null,alert("Workspace успешно переименован")}catch(A){console.error("Error renaming workspace:",A),console.error("Error response:",(r=A.response)==null?void 0:r.data);let Q="Ошибка при переименовании";(C=(w=A.response)==null?void 0:w.data)!=null&&C.errors?Q=Object.values(A.response.data.errors).flat().join(", "):(O=(c=A.response)==null?void 0:c.data)!=null&&O.message&&(Q=A.response.data.message),alert(Q)}},me=u=>{u.key==="Escape"&&($.value=null)};oe(async()=>{try{await y.fetchWorkspaces(),await Promise.all([f.fetchAllTasks(),d.fetchProjects()])}finally{k.value=!1}f.startSync(),document.addEventListener("click",ye),document.addEventListener("keydown",me)}),X(()=>{var u;return(u=y.currentWorkspace)==null?void 0:u.id},u=>{u&&d.fetchProjects()}),se(()=>{f.stopSync(),document.removeEventListener("click",ye),document.removeEventListener("keydown",me)});const ye=()=>{$.value=null};return(u,r)=>{const w=le("router-link"),C=le("router-view");return a(),l("div",xr,[h(J,{name:"fade"},{default:_(()=>[k.value?(a(),l("div",br,[...r[7]||(r[7]=[e("div",{class:"text-center"},[e("div",{class:"relative w-16 h-16 mx-auto mb-6"},[e("div",{class:"absolute inset-0 rounded-full border-4 border-gray-200 dark:border-gray-700"}),e("div",{class:"absolute inset-0 rounded-full border-4 border-transparent border-t-primary-600 animate-spin"})]),e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"GTD TODO"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Загрузка...")],-1)])])):S("",!0)]),_:1}),e("div",wr,[e("aside",{class:F(["fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",i.value?"translate-x-0":"-translate-x-full lg:translate-x-0"])},[e("div",hr,[r[24]||(r[24]=e("div",{class:"hidden lg:flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},[e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"},"GTD TODO")],-1)),e("div",$r,[e("div",Cr,[r[9]||(r[9]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Рабочие пространства ",-1)),e("button",{onClick:r[0]||(r[0]=c=>x.value=!0),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Создать workspace"},[...r[8]||(r[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",Mr,[(a(!0),l(ie,null,de(N.value,c=>(a(),l("div",{key:c.id,class:F(["group flex items-center rounded-lg transition-colors overflow-hidden",o.value.includes(c.id)?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[e("label",jr,[e("input",{type:"checkbox",checked:o.value.includes(c.id),onChange:O=>q(c),class:"mr-3 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"},null,40,Sr),e("span",{class:F(["truncate",o.value.includes(c.id)?"text-primary-700 dark:text-primary-400 font-medium":"text-gray-700 dark:text-gray-300"])},M(c.name),3)]),h(w,{to:`/workspaces/${c.id}/settings`,class:"flex-shrink-0 p-1.5 mr-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors opacity-0 group-hover:opacity-100",title:"Настройки",onClick:r[1]||(r[1]=L(()=>{},["stop"]))},{default:_(()=>[...r[10]||(r[10]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})],-1)])]),_:1},8,["to"])],2))),128))])]),e("nav",_r,[e("div",Er,[h(te,{to:"/workspaces/:id/inbox",icon:"inbox",count:B.value.inbox,"drop-status":"inbox",onTaskDropped:ee},{default:_(()=>[...r[11]||(r[11]=[U(" Входящие ",-1)])]),_:1},8,["count"])]),e("div",Tr,[h(te,{to:"/workspaces/:id/today",icon:"calendar",count:B.value.today,"drop-status":"today",onTaskDropped:ee},{default:_(()=>[...r[12]||(r[12]=[U(" Сегодня ",-1)])]),_:1},8,["count"]),h(te,{to:"/workspaces/:id/next-actions",icon:"lightning",count:B.value.next_actions,"drop-status":"next_action",onTaskDropped:ee},{default:_(()=>[...r[13]||(r[13]=[U(" Следующие ",-1)])]),_:1},8,["count"]),h(te,{to:"/workspaces/:id/tomorrow",icon:"calendar-days",count:B.value.tomorrow,"drop-status":"tomorrow",onTaskDropped:ee},{default:_(()=>[...r[14]||(r[14]=[U(" Завтра ",-1)])]),_:1},8,["count"]),h(ve,{to:"/workspaces/:id/calendar",icon:"calendar-days",count:Y.value},{default:_(()=>[...r[15]||(r[15]=[U(" Календарь ",-1)])]),_:1},8,["count"]),h(te,{to:"/workspaces/:id/someday",icon:"archive",count:B.value.someday,"drop-status":"someday",onTaskDropped:ee},{default:_(()=>[...r[16]||(r[16]=[U(" Когда-нибудь ",-1)])]),_:1},8,["count"]),h(te,{to:"/workspaces/:id/waiting",icon:"clock",count:B.value.waiting,"drop-status":"waiting",onTaskDropped:ee},{default:_(()=>[...r[17]||(r[17]=[U(" Ожидание ",-1)])]),_:1},8,["count"]),h(ve,{to:"/workspaces/:id/all",icon:"rectangle-stack",count:V.value},{default:_(()=>[...r[18]||(r[18]=[U(" Все задачи ",-1)])]),_:1},8,["count"])]),e("div",Br,[e("div",{class:"flex items-center justify-between px-3 mb-3"},[r[20]||(r[20]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Проекты ",-1)),e("button",{onClick:ge,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Создать проект"},[...r[19]||(r[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",Lr,[(a(!0),l(ie,null,de(T.value,c=>{var O;return a(),l("div",{key:c.id,class:"flex items-center justify-between group px-3 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[h(w,{to:`/workspaces/${(O=K.value)==null?void 0:O.id}/projects/${c.id}`,class:"flex items-center space-x-2 flex-1 min-w-0"},{default:_(()=>[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:Xe({backgroundColor:c.color||"#3B82F6"})},null,4),e("span",Dr,M(c.name),1),c.tasks_count>0?(a(),l("span",Wr," ("+M(c.tasks_count)+") ",1)):S("",!0)]),_:2},1032,["to"]),e("button",{onClick:L(A=>De(c),["stop"]),class:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 transition-opacity",title:"Архивировать"},[...r[21]||(r[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)])],8,Ar)])}),128)),T.value.length===0?(a(),l("div",Pr," Нет проектов ")):S("",!0)])]),e("div",zr,[r[23]||(r[23]=e("h3",{class:"px-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3"}," Организация ",-1)),e("div",Or,[h(ve,{to:"/workspaces/:id/goals",icon:"target"},{default:_(()=>[...r[22]||(r[22]=[U(" Цели ",-1)])]),_:1})])])])])],2),i.value?(a(),l("div",{key:0,onClick:r[2]||(r[2]=c=>i.value=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})):S("",!0),i.value?S("",!0):(a(),l("div",Ir,[e("button",{onClick:r[3]||(r[3]=c=>s.value=!0),class:"w-10 h-10 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg flex items-center justify-center active:scale-95 transition-transform"},[...r[25]||(r[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1)])]),e("button",{onClick:r[4]||(r[4]=c=>i.value=!0),class:"w-12 h-12 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-lg flex items-center justify-center active:scale-95 transition-transform"},[...r[26]||(r[26]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])])),e("main",Vr,[h(Tt,{user:R.value,onQuickAddTask:Te,onQuickAddProject:ge,onQuickAddGoal:We,onSearch:ze,onLogout:Ee,onProfile:Oe,onSettings:Ie,onToggleSidebar:r[5]||(r[5]=c=>i.value=!i.value)},null,8,["user"]),e("div",qr,[h(C)])])]),h(zt,{show:x.value,onClose:r[6]||(r[6]=c=>x.value=!1),onSubmit:_e},null,8,["show"]),h(tt,{show:s.value,"server-error":t.value,onClose:Pe,onSubmit:Ae},null,8,["show","server-error"]),h(Nt,{show:D.value,workspace:n.value,onClose:qe,onSubmit:He},null,8,["show","workspace"]),h(Yt,{show:H.value,workspace:n.value,onClose:Ue,onSubmit:Ne},null,8,["show","workspace"]),h(fr,{show:W.value,workspace:n.value,onClose:Re,onMemberRemoved:Qe},null,8,["show","workspace"]),h(ot,{show:E.value,project:I.value,"server-error":p.value,onClose:Le,onSubmit:Be},null,8,["show","project","server-error"]),h(J,{name:"modal"},{default:_(()=>{var c;return[b.value?(a(),l("div",Rr,[e("div",{class:"fixed inset-0 bg-black/50",onClick:ke}),e("div",Qr,[r[27]||(r[27]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Удалить пространство?",-1)),e("p",Ur," Пространство «"+M((c=z.value)==null?void 0:c.name)+"» будет удалено навсегда. Это действие нельзя отменить. ",1),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:ke,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"}," Отмена "),e("button",{onClick:Ve,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors"}," Удалить ")])])])):S("",!0)]}),_:1})])}}},Yr=ae(Hr,[["__scopeId","data-v-2f3caacd"]]);export{Yr as default};
