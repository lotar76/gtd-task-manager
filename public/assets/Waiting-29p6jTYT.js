import{u as _,T as h}from"./TaskModal-w44ccmoA.js";import{_ as w}from"./TaskList-D7MkbE3d.js";import{k as d,r as i,c as k,a as r,l as x,f as y,o as c}from"./index-ByTyfcmx.js";import"./workspace-9Libd6Fb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ru-B7JyRvIu.js";const b={class:"p-4 lg:p-8"},C={class:"max-w-4xl mx-auto"},B={key:0,class:"text-center py-12"},j={__name:"Waiting",setup(E){const s=_(),m=d(()=>s.waitingTasks),v=d(()=>s.loading),o=i(!1),t=i(null),l=i(""),p=e=>{t.value=e,o.value=!0},g=async e=>{try{e.status==="completed"?await s.updateTask(e.id,{status:"waiting"}):await s.completeTask(e.id)}catch(a){console.error("Error toggling task:",a)}},f=async e=>{var a,u;l.value="";try{t.value?await s.updateTask(t.value.id,e):await s.createTask(e),o.value=!1,t.value=null}catch(n){console.error("Error saving task:",n),l.value=((u=(a=n.response)==null?void 0:a.data)==null?void 0:u.message)||n.message||"Ошибка при сохранении задачи"}},T=()=>{o.value=!1,t.value=null,l.value=""};return(e,a)=>(c(),k("div",b,[r("div",C,[a[1]||(a[1]=r("div",{class:"mb-6"},[r("h1",{class:"text-xl lg:text-2xl font-semibold text-gray-900"},"Ожидание")],-1)),v.value?(c(),k("div",B,[...a[0]||(a[0]=[r("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(c(),x(w,{key:1,tasks:m.value,onTaskClick:p,onToggleComplete:g},null,8,["tasks"])),y(h,{show:o.value,task:t.value,"server-error":l.value,onClose:T,onSubmit:f},null,8,["show","task","server-error"])])]))}};export{j as default};
