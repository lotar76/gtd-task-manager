import{u as w,a as b,T as _}from"./TaskModal-CSXCzbJv.js";import{T as C}from"./TaskList-BajDOjDO.js";import{r as B}from"./PlusIcon-UQrK22CZ.js";import{k as g,r as u,c as i,a as t,f as c,F as E,l as S,y as p,e as M,o as r}from"./index-MzOD3XP9.js";import"./workspace-hJjFiezT.js";import"./projects-T51eDYB8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ru-B7JyRvIu.js";const N={class:"p-4 lg:p-8"},V={class:"max-w-4xl mx-auto"},F={key:0,class:"text-center py-12"},j={key:1,class:"text-center py-12"},A={class:"max-w-md mx-auto"},L={class:"w-16 h-16 mx-auto mb-4 rounded-full bg-orange-50 dark:bg-orange-900/30 flex items-center justify-center"},O={__name:"Waiting",setup(W){const o=w(),m=g(()=>o.waitingTasks),v=g(()=>o.loading),l=u(!1),a=u(null),n=u(""),x=s=>{a.value=s,l.value=!0},f=()=>{a.value=null,l.value=!0},y=async s=>{try{s.status==="completed"?await o.updateTask(s.id,{status:"waiting"}):await o.completeTask(s.id)}catch(e){console.error("Error toggling task:",e)}},T=async s=>{var e,k;n.value="";try{a.value?await o.updateTask(a.value.id,s):await o.createTask(s),l.value=!1,a.value=null}catch(d){console.error("Error saving task:",d),n.value=((k=(e=d.response)==null?void 0:e.data)==null?void 0:k.message)||d.message||"Ошибка при сохранении задачи"}},h=()=>{l.value=!1,a.value=null,n.value=""};return(s,e)=>(r(),i("div",N,[t("div",V,[e[4]||(e[4]=t("div",{class:"mb-6"},[t("h1",{class:"text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Ожидание")],-1)),v.value?(r(),i("div",F,[...e[0]||(e[0]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(r(),i(E,{key:1},[m.value.length>0?(r(),S(C,{key:0,tasks:m.value,onTaskClick:x,onToggleComplete:y},null,8,["tasks"])):(r(),i("div",j,[t("div",A,[t("div",L,[c(p(b),{class:"w-8 h-8 text-orange-500"})]),e[2]||(e[2]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Нет задач в ожидании",-1)),e[3]||(e[3]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-6 leading-relaxed"}," Список ожидания — это задачи, делегированные другим людям, или те, что зависят от внешних событий. Записывайте, от кого и чего вы ждёте. Регулярно проверяйте этот список, чтобы ничего не потерялось. ",-1)),t("button",{onClick:f,class:"inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors"},[c(p(B),{class:"w-5 h-5 mr-1.5"}),e[1]||(e[1]=M(" Добавить в ожидание ",-1))])])]))],64)),c(_,{show:l.value,task:a.value,"server-error":n.value,onClose:h,onSubmit:T},null,8,["show","task","server-error"])])]))}};export{O as default};
