import{E as ae,r as h,k as p,H as I,c,a as o,o as u,z as j,s as le,x as re,l as J,f as ne,g as ie,b as G,w as Q,t as w,d as _,K as de,v as L,p as te,m as oe,F as U,C as E,B as F,T as ue,A as ce,j as pe}from"./index-DARtzBY4.js";import{u as se}from"./workspace-CT6nSM7Z.js";import{u as ve}from"./projects-D094yu9W.js";import{u as me}from"./lifeSpheres-Cp-dWg_N.js";import{u as fe}from"./goals-BJQeUNzD.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";const qe=ae("tasks",()=>{const n=h([]),f=h(!1),m=h(!1),T=h(localStorage.getItem("taskViewMode")||"list"),k=se(),A=p(()=>k.selectedWorkspaces.map(l=>l.id)),v=p(()=>{const l=A.value;return l.length?n.value.filter(r=>l.includes(r.workspace_id)&&!r.completed_at):[]}),C=p(()=>v.value.filter(l=>l.status==="inbox")),M=p(()=>v.value.filter(l=>l.status==="next_action")),Z=p(()=>v.value.filter(l=>l.status==="today")),y=p(()=>v.value.filter(l=>l.status==="tomorrow")),W=p(()=>v.value.filter(l=>l.status==="waiting")),P=p(()=>v.value.filter(l=>l.status==="someday")),z=p(()=>v.value.filter(l=>l.status==="scheduled")),D=p(()=>{const l=A.value;return l.length?n.value.filter(r=>l.includes(r.workspace_id)&&r.completed_at).sort((r,t)=>new Date(t.completed_at||t.updated_at)-new Date(r.completed_at||r.updated_at)).slice(0,20):[]}),B=p(()=>({inbox:C.value.length,next_actions:M.value.length,today:Z.value.length,tomorrow:y.value.length,waiting:W.value.length,someday:P.value.length,scheduled:z.value.length})),a=(l,r)=>v.value.filter(t=>{if(!t.due_date)return!1;const e=t.due_date.substring(0,10);return e>=l&&e<=r}),S=async({force:l=!1}={})=>{var r;if(!(m.value&&!l)){f.value=!0;try{const t=await I.get("/v1/tasks");n.value=((r=t.data.data)==null?void 0:r.tasks)||t.data.tasks||t.data||[],m.value=!0}finally{f.value=!1}}},x=l=>{const r={...l};return r.estimated_time===""&&(r.estimated_time=null),r.due_date===""&&(r.due_date=null),r.description===""&&(r.description=null),(r.project_id===""||r.project_id===null)&&(r.project_id=null),r},g=async l=>{var s;const r=(l==null?void 0:l.workspace_id)||((s=k.currentWorkspace)==null?void 0:s.id);if(!r){console.error("Cannot create task: workspace_id not found");return}const t=x(l);t.workspace_id=r;const e=await I.post(`/v1/workspaces/${r}/tasks`,t),i=e.data.data||e.data;return n.value.unshift(i),i},H=async(l,r)=>{var ee;const t=n.value.find(q=>q.id===l),e=(r==null?void 0:r.workspace_id)||(t==null?void 0:t.workspace_id)||((ee=k.currentWorkspace)==null?void 0:ee.id);if(!e){console.error("Cannot update task: workspace_id not found");return}const i=x(r),s=await I.put(`/v1/workspaces/${e}/tasks/${l}`,i),d=s.data.data||s.data,b=n.value.findIndex(q=>q.id===l);return b!==-1&&(n.value[b]=d),d},O=async l=>{var s;const r=n.value.findIndex(d=>d.id===l);if(r===-1)return;const t=n.value[r],e=t.workspace_id||((s=k.currentWorkspace)==null?void 0:s.id);if(!e){console.error("Cannot complete task: workspace_id not found");return}const i={...t};n.value[r]={...t,completed_at:new Date().toISOString()};try{const d=await I.post(`/v1/workspaces/${e}/tasks/${l}/complete`),b=d.data.data||d.data;n.value[r]=b}catch(d){throw n.value[r]=i,d}},N=async l=>{var s;const r=n.value.findIndex(d=>d.id===l);if(r===-1)return;const t=n.value[r],e=t.workspace_id||((s=k.currentWorkspace)==null?void 0:s.id);if(!e){console.error("Cannot uncomplete task: workspace_id not found");return}const i={...t};n.value[r]={...t,completed_at:null};try{const d=await I.post(`/v1/workspaces/${e}/tasks/${l}/uncomplete`),b=d.data.data||d.data;n.value[r]=b}catch(d){throw n.value[r]=i,d}},V=async l=>{var e;const r=n.value.find(i=>i.id===l),t=(r==null?void 0:r.workspace_id)||((e=k.currentWorkspace)==null?void 0:e.id);if(!t){console.error("Cannot delete task: workspace_id not found");return}await I.delete(`/v1/workspaces/${t}/tasks/${l}`),n.value=n.value.filter(i=>i.id!==l)},R=l=>{T.value=l,localStorage.setItem("taskViewMode",l)};let $=null;return{allTasks:n,loading:f,loaded:m,filteredTasks:v,inboxTasks:C,nextActionTasks:M,todayTasks:Z,tomorrowTasks:y,waitingTasks:W,somedayTasks:P,scheduledTasks:z,archivedTasks:D,counts:B,calendarTasks:a,viewMode:T,fetchAllTasks:S,createTask:g,updateTask:H,completeTask:O,uncompleteTask:N,deleteTask:V,setViewMode:R,startSync:()=>{$=setInterval(()=>S({force:!0}),5*60*1e3)},stopSync:()=>{$&&clearInterval($)}}});function ge(n,f){return u(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function we(n,f){return u(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}function Je(n,f){return u(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})])}function X(n,f){return u(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function _e(n,f){return u(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function ye(n,f){return u(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"})])}const xe={class:"flex min-h-screen items-center justify-center p-4"},be={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},he={class:"text-xl font-semibold text-gray-900 dark:text-white"},Se={class:"flex items-center space-x-3 pb-4 border-b border-gray-200 dark:border-gray-700"},je={class:"flex items-center space-x-2 cursor-pointer"},Ce={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ve={class:"relative"},$e={class:"flex items-center space-x-2"},Ie={key:0,class:"absolute z-10 mt-1 w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg"},Te=["onClick"],Ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ze={key:0},De=["value"],Be=["value"],He={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Oe=["value"],Le=["value"],Ue={key:1,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Ee={class:"flex justify-end space-x-3 pt-4"},Fe=["disabled"],We={__name:"TaskModal",props:{show:{type:Boolean,default:!1},task:{type:Object,default:null},serverError:{type:String,default:""},defaultDate:{type:String,default:""}},emits:["close","submit"],setup(n,{emit:f}){const m=n,T=f,k=pe(),A=se(),v=ve(),C=me(),M=fe(),Z=p(()=>A.workspaces),y=p(()=>A.currentWorkspace),W=p(()=>{const t=a.value.workspace_id;return t?v.allProjects.filter(e=>e.workspace_id===t&&(e.status==="active"||!e.status)):[]}),P=p(()=>{const t=a.value.workspace_id;return t?C.allSpheres.filter(e=>e.workspace_id===t):[]}),z=p(()=>{const t=a.value.workspace_id;return t?M.allGoals.filter(e=>e.workspace_id===t&&(e.status==="active"||!e.status)):[]}),D=()=>{const t=k.path;return t.includes("/inbox")?"inbox":t.includes("/today")?"today":t.includes("/next-actions")?"next_action":t.includes("/tomorrow")?"tomorrow":t.includes("/waiting")?"waiting":t.includes("/someday")?"someday":"inbox"},B=()=>{const t=k.path;if(t.includes("/today"))return new Date().toISOString().split("T")[0];if(t.includes("/tomorrow")){const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}return""},a=h({title:"",description:"",status:"inbox",priority:"medium",due_date:"",estimated_time:"",end_time:"",workspace_id:null,project_id:null,goal_id:null,life_sphere_id:null,completed_at:null}),S=h(!1),x=h(""),g=h(!1),H=h(null),O={inbox:{label:"Входящие",icon:ye},next_action:{label:"Следующие",icon:we},today:{label:"Сегодня",icon:X},tomorrow:{label:"Завтра",icon:X},waiting:{label:"Ожидание",icon:_e},someday:{label:"Когда-нибудь",icon:ge},scheduled:{label:"Запланировано",icon:X}},N=t=>{if(a.value.status=t,g.value=!1,t==="today"){const e=new Date;a.value.due_date=e.toISOString().split("T")[0]}else if(t==="tomorrow"){const e=new Date;e.setDate(e.getDate()+1),a.value.due_date=e.toISOString().split("T")[0]}},V=p(()=>!!a.value.completed_at),R=t=>{t.target.checked?a.value.completed_at=new Date().toISOString():a.value.completed_at=null},$=t=>t?/^\d{4}-\d{2}-\d{2}$/.test(t)?t:t.split("T")[0]:"",K=t=>t?/^\d{2}:\d{2}$/.test(t)?t:t.substring(0,5):"";j(()=>m.task,(t,e)=>{var i,s,d;if(e&&!t){a.value={title:"",description:"",status:"inbox",priority:"medium",due_date:"",estimated_time:"",end_time:"",workspace_id:(i=y.value)==null?void 0:i.id,project_id:null,goal_id:null,life_sphere_id:null,completed_at:null},H.value=null,x.value="",g.value=!1;return}if(t)console.log("Task received:",t),console.log("Original due_date:",t.due_date),console.log("Formatted due_date:",$(t.due_date)),a.value={title:t.title||"",description:t.description||"",status:t.status||"inbox",priority:t.priority||"medium",due_date:$(t.due_date),estimated_time:K(t.estimated_time),end_time:K(t.end_time),workspace_id:t.workspace_id||((s=y.value)==null?void 0:s.id),project_id:t.project_id||null,goal_id:t.goal_id||null,life_sphere_id:t.life_sphere_id||null,completed_at:t.completed_at||null};else{const b=D();H.value=b,a.value={title:"",description:"",status:b,priority:"medium",due_date:B(),estimated_time:"",end_time:"",workspace_id:(d=y.value)==null?void 0:d.id,project_id:null,goal_id:null,life_sphere_id:null,completed_at:null}}x.value="",g.value=!1},{immediate:!0}),j(()=>m.serverError,t=>{x.value=t,t&&(S.value=!1)}),j(()=>m.show,t=>{var e,i,s;t?m.task?a.value.workspace_id||(a.value.workspace_id=(i=y.value)==null?void 0:i.id):(a.value.workspace_id=(e=y.value)==null?void 0:e.id,a.value.status=D(),a.value.due_date=m.defaultDate||B()):(a.value={title:"",description:"",status:"inbox",priority:"medium",due_date:"",estimated_time:"",end_time:"",workspace_id:(s=y.value)==null?void 0:s.id,project_id:null,goal_id:null,life_sphere_id:null,completed_at:null},H.value=null,g.value=!1,S.value=!1,x.value="")}),j(()=>m.show,t=>{t&&(v.loaded||v.fetchAllProjects(),C.loaded||C.fetchAll(),M.loaded||M.fetchAllGoals())}),j(()=>k.path,()=>{if(!m.task){a.value.status=D();const t=B();(t||k.path.includes("/today"))&&(a.value.due_date=t)}}),j(()=>{var t;return(t=y.value)==null?void 0:t.id},t=>{!m.task&&t&&(a.value.workspace_id=t)}),j(()=>a.value.workspace_id,(t,e)=>{if(!(!e||t===e)&&a.value.project_id){const i=v.allProjects.find(s=>s.id===a.value.project_id);i&&i.workspace_id!==t&&(a.value.project_id=null)}}),j(()=>a.value.due_date,t=>{if(!t||a.value.completed_at)return;const e=new Date().toISOString().split("T")[0],i=new Date;i.setDate(i.getDate()+1);const s=i.toISOString().split("T")[0];t===e?a.value.status="today":t===s?a.value.status="tomorrow":["today","tomorrow","completed"].includes(a.value.status)||(a.value.status="scheduled")});const Y=()=>{x.value="",S.value=!0,T("submit",a.value)},l=t=>{g.value&&!t.target.closest(".relative")&&(g.value=!1)},r=t=>{t.key==="Escape"&&m.show&&T("close")};return le(()=>{document.addEventListener("click",l),document.addEventListener("keydown",r)}),re(()=>{document.removeEventListener("click",l),document.removeEventListener("keydown",r)}),(t,e)=>(u(),J(ce,{to:"body"},[ne(ue,{name:"modal"},{default:ie(()=>{var i;return[n.show?(u(),c("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:e[15]||(e[15]=Q(s=>t.$emit("close"),["self"]))},[e[33]||(e[33]=o("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),o("div",xe,[o("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-auto",onClick:e[14]||(e[14]=Q(()=>{},["stop"]))},[o("div",be,[o("h3",he,w((i=n.task)!=null&&i.id?"Редактировать задачу":"Новая задача"),1),o("button",{onClick:e[0]||(e[0]=s=>t.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...e[16]||(e[16]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o("form",{onSubmit:Q(Y,["prevent"]),class:"p-6 space-y-4"},[o("div",Se,[o("label",je,[_(o("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=s=>V.value=s),onChange:R,class:"w-5 h-5 text-primary-600 border-gray-300 dark:border-gray-600 rounded focus:ring-primary-500 dark:bg-gray-700"},null,544),[[de,V.value]]),o("span",Ce,w(V.value?"Задача выполнена":"Отметить как выполненную"),1)])]),o("div",null,[e[17]||(e[17]=o("label",{for:"title",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Название задачи * ",-1)),_(o("input",{id:"title","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.title=s),type:"text",required:"",class:te(["input",{"opacity-60":V.value}]),placeholder:"Введите название задачи"},null,2),[[L,a.value.title]])]),o("div",null,[e[18]||(e[18]=o("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Описание ",-1)),_(o("textarea",{id:"description","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.description=s),rows:"3",class:"input",placeholder:"Добавьте описание"},null,512),[[L,a.value.description]])]),o("div",Me,[o("div",null,[e[20]||(e[20]=o("label",{for:"status",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Статус ",-1)),o("div",Ve,[o("button",{type:"button",onClick:e[4]||(e[4]=s=>g.value=!g.value),class:"input w-full flex items-center justify-between"},[o("span",$e,[(u(),J(oe(O[a.value.status].icon),{class:"w-5 h-5 text-gray-500 dark:text-gray-400"})),o("span",null,w(O[a.value.status].label),1)]),e[19]||(e[19]=o("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),g.value?(u(),c("div",Ie,[(u(),c(U,null,E(O,(s,d)=>o("button",{key:d,type:"button",onClick:b=>N(d),class:te(["w-full flex items-center space-x-2 px-3 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-600 first:rounded-t-lg last:rounded-b-lg transition-colors",a.value.status===d?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300"])},[(u(),J(oe(s.icon),{class:"w-5 h-5"})),o("span",null,w(s.label),1)],10,Te)),64))])):G("",!0)])]),o("div",null,[e[22]||(e[22]=o("label",{for:"priority",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Приоритет ",-1)),_(o("select",{id:"priority","onUpdate:modelValue":e[5]||(e[5]=s=>a.value.priority=s),class:"input"},[...e[21]||(e[21]=[o("option",{value:"low"},"Низкий",-1),o("option",{value:"medium"},"Средний",-1),o("option",{value:"high"},"Высокий",-1),o("option",{value:"urgent"},"Срочный",-1)])],512),[[F,a.value.priority]])])]),o("div",Ae,[o("div",null,[e[23]||(e[23]=o("label",{for:"due_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Срок выполнения ",-1)),_(o("input",{id:"due_date","onUpdate:modelValue":e[6]||(e[6]=s=>a.value.due_date=s),type:"date",class:"input"},null,512),[[L,a.value.due_date]])]),o("div",null,[e[24]||(e[24]=o("label",{for:"estimated_time",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Время начала ",-1)),_(o("input",{id:"estimated_time","onUpdate:modelValue":e[7]||(e[7]=s=>a.value.estimated_time=s),type:"time",class:"input",placeholder:"12:30"},null,512),[[L,a.value.estimated_time]])])]),o("div",null,[e[25]||(e[25]=o("label",{for:"end_time",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Время окончания ",-1)),_(o("input",{id:"end_time","onUpdate:modelValue":e[8]||(e[8]=s=>a.value.end_time=s),type:"time",class:"input",placeholder:"13:30"},null,512),[[L,a.value.end_time]])]),Z.value.length>1?(u(),c("div",Ze,[e[26]||(e[26]=o("label",{for:"workspace_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Рабочее пространство ",-1)),_(o("select",{id:"workspace_id","onUpdate:modelValue":e[9]||(e[9]=s=>a.value.workspace_id=s),class:"input"},[(u(!0),c(U,null,E(Z.value,s=>(u(),c("option",{key:s.id,value:s.id},w(s.name),9,De))),128))],512),[[F,a.value.workspace_id]])])):G("",!0),o("div",null,[e[28]||(e[28]=o("label",{for:"project_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Поток ",-1)),_(o("select",{id:"project_id","onUpdate:modelValue":e[10]||(e[10]=s=>a.value.project_id=s),class:"input"},[e[27]||(e[27]=o("option",{value:null},"Без потока",-1)),(u(!0),c(U,null,E(W.value,s=>(u(),c("option",{key:s.id,value:s.id},w(s.name),9,Be))),128))],512),[[F,a.value.project_id]])]),o("div",He,[o("div",null,[e[30]||(e[30]=o("label",{for:"life_sphere_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Сфера жизни ",-1)),_(o("select",{id:"life_sphere_id","onUpdate:modelValue":e[11]||(e[11]=s=>a.value.life_sphere_id=s),class:"input"},[e[29]||(e[29]=o("option",{value:null},"Без сферы",-1)),(u(!0),c(U,null,E(P.value,s=>(u(),c("option",{key:s.id,value:s.id},w(s.emoji||"")+" "+w(s.name),9,Oe))),128))],512),[[F,a.value.life_sphere_id]])]),o("div",null,[e[32]||(e[32]=o("label",{for:"goal_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Цель ",-1)),_(o("select",{id:"goal_id","onUpdate:modelValue":e[12]||(e[12]=s=>a.value.goal_id=s),class:"input"},[e[31]||(e[31]=o("option",{value:null},"Без цели",-1)),(u(!0),c(U,null,E(z.value,s=>(u(),c("option",{key:s.id,value:s.id},w(s.name),9,Le))),128))],512),[[F,a.value.goal_id]])])]),x.value?(u(),c("div",Ue,w(x.value),1)):G("",!0),o("div",Ee,[o("button",{type:"button",onClick:e[13]||(e[13]=s=>t.$emit("close")),class:"btn btn-secondary"}," Отмена "),o("button",{type:"submit",disabled:S.value,class:"btn btn-primary"},w(S.value?"Сохранение...":"Сохранить"),9,Fe)])],32)])])])):G("",!0)]}),_:1})]))}},Qe=ke(We,[["__scopeId","data-v-cda87ceb"]]);export{Qe as T,Je as a,_e as b,X as c,we as d,ye as e,ge as r,qe as u};
