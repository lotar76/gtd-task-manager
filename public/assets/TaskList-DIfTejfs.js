import{k as H,l as P,o as s,f as A,g as I,c as a,b as g,w as F,a as r,p as v,t as d,T as Q,A as R,r as C,F as L,C as G,E as U,e as M,D as E}from"./index-foeisxHv.js";import{g as W,c as X,d as _}from"./TaskView-BO5_1HtG.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";var J={exports:{}};(function(c,w){(function(m,h){c.exports=h()})(X,function(){return function(m,h,x){m=m||{};var i=h.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function b(l,y,k,j){return i.fromToBase(l,y,k,j)}x.en.relativeTime=n,i.fromToBase=function(l,y,k,j,V){for(var $,f,B,D=k.$locale().relativeTime||n,z=m.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],o=z.length,t=0;t<o;t+=1){var e=z[t];e.d&&($=j?x(l).diff(k,e.d,!0):k.diff(l,e.d,!0));var p=(m.rounding||Math.round)(Math.abs($));if(B=$>0,p<=e.r||!e.r){p<=1&&t>0&&(e=z[t-1]);var u=D[e.l];V&&(p=V(""+p)),f=typeof u=="string"?u.replace("%d",p):u(p,y,e.l,B);break}}if(y)return f;var S=B?D.future:D.past;return typeof S=="function"?S(f):S.replace("%s",f)},i.to=function(l,y){return b(l,y,this,!0)},i.from=function(l,y){return b(l,y,this)};var T=function(l){return l.$u?x.utc():x()};i.toNow=function(l){return this.to(T(this),l)},i.fromNow=function(l){return this.from(T(this),l)}}})})(J);var Y=J.exports;const Z=W(Y),ee={class:"flex min-h-screen items-center justify-center p-4"},te={class:"p-6 pb-4"},re={class:"flex items-center space-x-3"},oe={class:"text-lg font-semibold text-gray-900 dark:text-white"},ne={class:"px-6 pb-4"},se={class:"text-sm text-gray-600 dark:text-gray-400"},ae={class:"flex items-center justify-end gap-3 px-6 py-4 bg-gray-50 dark:bg-gray-900/50 rounded-b-lg"},ie={__name:"ConfirmDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Подтверждение"},message:{type:String,required:!0},confirmText:{type:String,default:"Подтвердить"},cancelText:{type:String,default:"Отмена"},variant:{type:String,default:"success",validator:c=>["success","danger","warning","info"].includes(c)}},emits:["confirm","cancel"],setup(c){const w=c,m=H(()=>({success:"bg-green-100 dark:bg-green-900/30",danger:"bg-red-100 dark:bg-red-900/30",warning:"bg-yellow-100 dark:bg-yellow-900/30",info:"bg-blue-100 dark:bg-blue-900/30"})[w.variant]),h=H(()=>({success:"text-green-600 dark:text-green-400",danger:"text-red-600 dark:text-red-400",warning:"text-yellow-600 dark:text-yellow-400",info:"text-blue-600 dark:text-blue-400"})[w.variant]),x=H(()=>({success:"bg-green-600 hover:bg-green-700",danger:"bg-red-600 hover:bg-red-700",warning:"bg-yellow-600 hover:bg-yellow-700",info:"bg-blue-600 hover:bg-blue-700"})[w.variant]);return(i,n)=>(s(),P(R,{to:"body"},[A(Q,{name:"modal"},{default:I(()=>[c.show?(s(),a("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:n[3]||(n[3]=F(b=>i.$emit("cancel"),["self"]))},[n[5]||(n[5]=r("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),r("div",ee,[r("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:n[2]||(n[2]=F(()=>{},["stop"]))},[r("div",te,[r("div",re,[r("div",{class:v(["flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",m.value])},[(s(),a("svg",{class:v(["w-6 h-6",h.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...n[4]||(n[4]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])],2))],2),r("h3",oe,d(c.title),1)])]),r("div",ne,[r("p",se,d(c.message),1)]),r("div",ae,[r("button",{onClick:n[0]||(n[0]=b=>i.$emit("cancel")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},d(c.cancelText),1),r("button",{onClick:n[1]||(n[1]=b=>i.$emit("confirm")),class:v(["px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors",x.value])},d(c.confirmText),3)])])])])):g("",!0)]),_:1})]))}},le=q(ie,[["__scopeId","data-v-eb7c560a"]]),de=["onDragstart","onClick"],ue={class:"flex items-start space-x-3"},ce=["onClick"],me={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ge={class:"flex-1 min-w-0"},fe={key:0,class:"text-sm text-gray-500 mt-1 truncate"},pe={class:"flex flex-wrap items-center gap-2 mt-2"},xe={key:0,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"},ye={key:3,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"},he={key:0},ve={key:1},be={key:2},ke={key:4,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"},we={key:0,class:"text-center py-12"},Ce={__name:"TaskList",props:{tasks:{type:Array,default:()=>[]}},emits:["task-click","toggle-complete","task-drag-start","task-drag-end"],setup(c,{emit:w}){_.extend(Z),_.locale("ru");const m=w,h=C(!1),x=C(null),i=C(!1),n=C(null),b=C("Завершить задачу?"),T=C(""),l=(o,t)=>{h.value=!0,x.value=t,o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("application/json",JSON.stringify(t)),m("task-drag-start",t)},y=()=>{h.value=!1,x.value=null,m("task-drag-end")},k=o=>{if(o.status==="completed"){m("toggle-complete",o);return}n.value=o,T.value=`Вы уверены, что хотите завершить задачу "${o.title}"?`,i.value=!0},j=()=>{n.value&&m("toggle-complete",n.value),i.value=!1,n.value=null},V=()=>{i.value=!1,n.value=null},$=o=>{const t=_(o),e=_();return t.isSame(e,"day")?"Сегодня":t.isSame(e.add(1,"day"),"day")?"Завтра":t.isBefore(e)?t.fromNow():t.format("D MMM")},f=o=>o?/^\d{2}:\d{2}$/.test(o)?o:o.substring(0,5):"",B=o=>{if(o.status==="completed")return"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400";const t=_(o.due_date),e=_();return t.isBefore(e,"day")?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":t.isSame(e,"day")?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"},D=o=>{if(!o.estimated_time||!o.end_time)return 0;const t=f(o.estimated_time),e=f(o.end_time);if(!t||!e)return 0;const[p,u]=t.split(":").map(Number),[S,O]=e.split(":").map(Number),K=p*60+u;let N=S*60+O-K;return N<0&&(N+=24*60),N/60},z=o=>{if(o.status==="completed")return"bg-white dark:bg-gray-800";const t=D(o);return t===0||t<1?"bg-gradient-to-l from-white via-green-50 to-green-100 dark:from-gray-800 dark:via-green-900/20 dark:to-green-900/40":t>=1&&t<2?"bg-gradient-to-l from-white via-orange-50 to-orange-100 dark:from-gray-800 dark:via-orange-900/20 dark:to-orange-900/40":t>=2?"bg-gradient-to-l from-white via-red-50 to-red-100 dark:from-gray-800 dark:via-red-900/20 dark:to-red-900/40":"bg-white dark:bg-gray-800"};return(o,t)=>(s(),a(L,null,[A(U,{name:"task",tag:"div",class:"space-y-2"},{default:I(()=>[(s(!0),a(L,null,G(c.tasks,e=>{var p;return s(),a("div",{key:e.id,draggable:"true",onDragstart:u=>l(u,e),onDragend:y,class:v(["border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-sm transition-all cursor-move relative overflow-hidden",[{"opacity-50":h.value&&((p=x.value)==null?void 0:p.id)===e.id},z(e)]]),onClick:u=>o.$emit("task-click",e)},[r("div",ue,[r("button",{onClick:F(u=>k(e),["stop"]),class:v(["mt-1 flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors duration-200",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(s(),a("svg",me,[...t[0]||(t[0]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):g("",!0)],10,ce),r("div",ge,[r("h3",{class:v(["text-sm font-medium transition-all duration-200",e.status==="completed"?"text-gray-400 line-through":"text-gray-900 dark:text-white"])},d(e.title),3),e.description?(s(),a("p",fe,d(e.description),1)):g("",!0),r("div",pe,[e.workspace?(s(),a("span",xe,[t[1]||(t[1]=r("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),M(" "+d(e.workspace.name),1)])):g("",!0),e.project?(s(),a("span",{key:1,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium",style:E({backgroundColor:e.project.color+"20",color:e.project.color})},[t[2]||(t[2]=r("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),M(" "+d(e.project.name),1)],4)):g("",!0),e.due_date?(s(),a("span",{key:2,class:v(["inline-flex items-center px-2 py-1 rounded text-xs font-medium",B(e)])},[t[3]||(t[3]=r("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),M(" "+d($(e.due_date)),1)],2)):g("",!0),e.estimated_time||e.end_time?(s(),a("span",ye,[t[4]||(t[4]=r("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e.estimated_time&&e.end_time?(s(),a("span",he,d(f(e.estimated_time))+" - "+d(f(e.end_time)),1)):e.estimated_time?(s(),a("span",ve,d(f(e.estimated_time)),1)):e.end_time?(s(),a("span",be," до "+d(f(e.end_time)),1)):g("",!0)])):g("",!0),e.assignee?(s(),a("span",ke,[t[5]||(t[5]=r("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),M(" "+d(e.assignee.name),1)])):g("",!0),e.context?(s(),a("span",{key:5,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium",style:E({backgroundColor:e.context.color+"20",color:e.context.color})},[t[6]||(t[6]=r("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),M(" "+d(e.context.name),1)],4)):g("",!0),(s(!0),a(L,null,G(e.tags,u=>(s(),a("span",{key:u.id,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium",style:E({backgroundColor:u.color+"20",color:u.color})},[t[7]||(t[7]=r("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),M(" "+d(u.name),1)],4))),128))])]),e.priority!=="medium"?(s(),a("div",{key:0,class:v(["flex-shrink-0 w-2 h-2 rounded-full mt-2",{"bg-red-500":e.priority==="urgent","bg-orange-500":e.priority==="high","bg-blue-500":e.priority==="low"}])},null,2)):g("",!0)])],42,de)}),128))]),_:1}),c.tasks.length?g("",!0):(s(),a("div",we,[...t[8]||(t[8]=[r("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),r("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Нет задач",-1),r("p",{class:"mt-1 text-sm text-gray-500"},"Создайте первую задачу чтобы начать",-1)])])),A(le,{show:i.value,title:b.value,message:T.value,"confirm-text":"Завершить","cancel-text":"Отмена",variant:"success",onConfirm:j,onCancel:V},null,8,["show","title","message"])],64))}},$e=q(Ce,[["__scopeId","data-v-92ed2f47"]]);export{$e as T};
