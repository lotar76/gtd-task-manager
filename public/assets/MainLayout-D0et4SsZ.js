import{c as i,o as r,a as e,j as fe,k as _,h as ie,l as Z,g as j,b as L,m as je,n as Se,p as Q,t as S,r as m,f as y,w as O,q as _e,s as te,x as oe,T as N,y as ke,d as Y,z as ee,v as de,A as ce,e as q,B as ct,u as De,F as ne,C as le,i as ut,D as Me}from"./index-BM-3aGKM.js";import{u as ue}from"./workspace-CoKcgfuB.js";import{r as me,a as Ee,b as Te,c as Le,d as Ae,e as Be,u as vt,T as pt}from"./TaskModal-Cpq72MKn.js";import{u as gt}from"./projects-DIMWl5aI.js";import{r as kt}from"./RectangleStackIcon-CYdvO_zh.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as mt}from"./ProjectModal-DYKykoGV.js";function ft(f,M){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function yt(f,M){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function X(f,M){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const xt={class:"flex items-center space-x-3"},ae={__name:"NavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null}},emits:["close-sidebar"],setup(f,{emit:M}){const v=f,D=M,x=fe(),d=ue(),c=()=>{window.innerWidth<1024&&D("close-sidebar")},k={inbox:Be,lightning:Ae,calendar:Le,clock:Te,archive:me,folder:X,"calendar-days":Ee,target:X,"rectangle-stack":kt,cog:yt,"chart-bar":ft,"archive-box":me},A=_(()=>k[v.icon]||X),a=_(()=>{var g;const w=(g=d.currentWorkspace)==null?void 0:g.id;return v.to.replace(":id",w||"1")}),o=_(()=>x.path===a.value);return(w,g)=>{const z=ie("router-link");return r(),Z(z,{to:a.value,onClick:c,class:Q(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",o.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:j(()=>[e("div",xt,[(r(),Z(je(A.value),{class:"w-5 h-5"})),e("span",null,[Se(w.$slots,"default")])]),f.count!==null&&f.count>0?(r(),i("span",{key:0,class:Q(["px-2 py-0.5 text-xs font-semibold rounded-full",o.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},S(f.count),3)):L("",!0)]),_:3},8,["to","class"])}}},bt={class:"flex items-center space-x-3"},J={__name:"DroppableNavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null},dropStatus:{type:String,default:null}},emits:["task-dropped","close-sidebar"],setup(f,{emit:M}){const v=f,D=M,x=fe(),d=ue(),c=m(!1),k=()=>{window.innerWidth<1024&&D("close-sidebar")},A={inbox:Be,lightning:Ae,calendar:Le,clock:Te,archive:me,folder:X,"calendar-days":Ee,target:X},a=_(()=>A[v.icon]||X),o=_(()=>{var B;const E=(B=d.currentWorkspace)==null?void 0:B.id;return v.to.replace(":id",E||"1")}),w=_(()=>x.path===o.value),g=E=>{E.preventDefault(),c.value=!0,E.dataTransfer.dropEffect="move"},z=()=>{c.value=!1},R=E=>{E.preventDefault(),c.value=!1;try{const B=JSON.parse(E.dataTransfer.getData("application/json"));v.dropStatus&&B&&D("task-dropped",{taskId:B.id,newStatus:v.dropStatus})}catch(B){console.error("Error handling drop:",B)}};return(E,B)=>{const p=ie("router-link");return r(),i("div",{onDrop:R,onDragover:O(g,["prevent"]),onDragleave:z,class:Q(["rounded-lg transition-all",c.value?"bg-primary-100 dark:bg-primary-900/40 ring-2 ring-primary-500":""])},[y(p,{to:o.value,onClick:k,class:Q(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",w.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:j(()=>[e("div",bt,[(r(),Z(je(a.value),{class:"w-5 h-5"})),e("span",null,[Se(E.$slots,"default")])]),f.count!==null&&f.count>0?(r(),i("span",{key:0,class:Q(["px-2 py-0.5 text-xs font-semibold rounded-full",w.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},S(f.count),3)):L("",!0)]),_:3},8,["to","class"])],34)}}},We="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%20width='300'%20height='300'%3e%3ccircle%20cx='150'%20cy='150'%20r='150'%20fill='%23E84848'/%3e%3ccircle%20cx='150'%20cy='150'%20r='115'%20fill='%23FFFFFF'/%3e%3ccircle%20cx='150'%20cy='150'%20r='90'%20fill='%23E84848'/%3e%3ccircle%20cx='150'%20cy='150'%20r='60'%20fill='%23FFFFFF'/%3e%3ccircle%20cx='150'%20cy='150'%20r='30'%20fill='%23E84848'/%3e%3c/svg%3e",Fe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%20width='300'%20height='300'%3e%3ccircle%20cx='150'%20cy='150'%20r='150'%20fill='%23E84848'/%3e%3ccircle%20cx='150'%20cy='150'%20r='115'%20fill='%23FFFFFF'/%3e%3ccircle%20cx='150'%20cy='150'%20r='90'%20fill='%23E84848'/%3e%3ccircle%20cx='150'%20cy='150'%20r='60'%20fill='%23FFFFFF'/%3e%3ccircle%20cx='150'%20cy='150'%20r='30'%20fill='%23E84848'/%3e%3c/svg%3e",wt={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20"},ht={class:"flex items-center justify-between px-4 lg:px-8 py-3"},Ct={class:"lg:hidden flex items-center mr-3"},$t=["src"],Mt={class:"lg:hidden text-sm font-medium text-gray-700 dark:text-gray-300"},jt={class:"flex items-center space-x-2 lg:space-x-4 ml-4"},St={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 z-50"},_t=["title"],Dt={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Et={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Tt={class:"relative"},Lt={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},At={class:"hidden lg:block text-left"},Bt={class:"text-sm font-medium text-gray-900 dark:text-white"},Wt={class:"text-xs text-gray-500 dark:text-gray-400"},Ft={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2"},Ot={__name:"Toolbar",props:{user:{type:Object,default:null}},emits:["quick-add","quick-add-task","quick-add-project","quick-add-goal","search","logout","profile","settings"],setup(f,{emit:M}){const v=_e(),D=_(()=>v.isDark?Fe:We),x=f,d=M;m("");const c=m(!1),k=m(!1),A=m(null),a=_(()=>{var n;return(((n=x.user)==null?void 0:n.name)||"").split(" ").map(h=>h[0]).join("").toUpperCase().slice(0,2)}),o=_(()=>{const b=new Date,n=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],h=["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],V=n[b.getDay()],I=b.getDate(),G=h[b.getMonth()];return`${V}, ${I} ${G}`}),w=()=>{k.value=!k.value},g=()=>{k.value=!1,d("quick-add-task")},z=()=>{k.value=!1,d("quick-add-project")},R=()=>{k.value=!1,d("quick-add-goal")},E=b=>{A.value&&!A.value.contains(b.target)&&(k.value=!1)},B=b=>{b.key==="Escape"&&(k.value=!1,c.value=!1)};te(()=>{document.addEventListener("click",E),document.addEventListener("keydown",B)}),oe(()=>{document.removeEventListener("click",E),document.removeEventListener("keydown",B)});const p=()=>{c.value=!1,d("logout")},u=()=>{c.value=!1,d("profile")},$=()=>{c.value=!1,d("settings")},P={mounted(b,n){b.clickOutsideEvent=h=>{b===h.target||b.contains(h.target)||n.value()},document.addEventListener("click",b.clickOutsideEvent)},unmounted(b){document.removeEventListener("click",b.clickOutsideEvent)}};return(b,n)=>{var h,V;return r(),i("header",wt,[e("div",ht,[e("div",Ct,[e("img",{src:D.value,alt:"GTD TODO",class:"h-8 w-8 object-contain"},null,8,$t)]),e("div",Mt,S(o.value),1),n[13]||(n[13]=e("div",{class:"flex-1"},null,-1)),e("div",jt,[e("div",{class:"relative hidden lg:block",ref_key:"quickAddMenuContainer",ref:A},[e("button",{onClick:O(w,["stop"]),class:"inline-flex items-center px-3 lg:px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary-500 transition-colors"},[...n[2]||(n[2]=[e("svg",{class:"w-5 h-5 lg:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden lg:inline"},"Создать",-1)])]),y(N,{name:"dropdown"},{default:j(()=>[k.value?(r(),i("div",St,[e("button",{onClick:g,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[3]||(n[3]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",null,"Задачу")],-1)])]),e("button",{onClick:z,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[4]||(n[4]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),e("span",null,"Проект")],-1)])]),e("button",{onClick:R,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[5]||(n[5]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),e("span",null,"Цель")],-1)])])])):L("",!0)]),_:1})],512),e("button",{onClick:n[0]||(n[0]=I=>ke(v).toggleTheme()),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:ke(v).isDark?"Светлая тема":"Тёмная тема"},[ke(v).isDark?(r(),i("svg",Dt,[...n[6]||(n[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(r(),i("svg",Et,[...n[7]||(n[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))],8,_t),e("div",Tt,[e("button",{onClick:n[1]||(n[1]=O(I=>c.value=!c.value,["stop"])),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[e("div",Lt,S(a.value),1),e("div",At,[e("div",Bt,S((h=f.user)==null?void 0:h.name),1),e("div",Wt,S((V=f.user)==null?void 0:V.email),1)]),n[8]||(n[8]=e("svg",{class:"hidden lg:block w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),c.value?Y((r(),i("div",Ft,[e("button",{onClick:u,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[9]||(n[9]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),e("span",null,"Профиль")],-1)])]),e("button",{onClick:$,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...n[10]||(n[10]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),e("span",null,"Настройки")],-1)])]),n[12]||(n[12]=e("div",{class:"border-t border-gray-200 dark:border-gray-600 my-2"},null,-1)),e("button",{onClick:p,class:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},[...n[11]||(n[11]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})]),e("span",null,"Выйти")],-1)])])])),[[P,()=>c.value=!1]]):L("",!0)])])])])}}},Pt=se(Ot,[["__scopeId","data-v-6875b8f1"]]),zt="/assets/logo-D4KoLT79.jpg",Vt="/assets/logo-bg-CxxxX31b.png",It={class:"flex min-h-screen items-center justify-center p-4"},qt={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Rt={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Ht={class:"flex justify-end space-x-3 pt-4"},Qt=["disabled"],Ut={__name:"WorkspaceModal",props:{show:{type:Boolean,default:!1}},emits:["close","submit"],setup(f,{emit:M}){const v=f,D=M,x=a=>{a.key==="Escape"&&v.show&&D("close")};te(()=>document.addEventListener("keydown",x)),oe(()=>document.removeEventListener("keydown",x));const d=m({name:"",description:""}),c=m(!1),k=m("");ee(()=>v.show,a=>{a||(d.value={name:"",description:""},c.value=!1,k.value="")});const A=()=>{k.value="",c.value=!0,D("submit",d.value)};return(a,o)=>(r(),Z(ce,{to:"body"},[y(N,{name:"modal"},{default:j(()=>[f.show?(r(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:o[5]||(o[5]=O(w=>a.$emit("close"),["self"]))},[o[10]||(o[10]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",It,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:o[4]||(o[4]=O(()=>{},["stop"]))},[e("div",qt,[o[7]||(o[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Новое рабочее пространство ",-1)),e("button",{onClick:o[0]||(o[0]=w=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...o[6]||(o[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:O(A,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[o[8]||(o[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Название * ",-1)),Y(e("input",{id:"name","onUpdate:modelValue":o[1]||(o[1]=w=>d.value.name=w),type:"text",required:"",class:"input",placeholder:"Например: Команда разработки"},null,512),[[de,d.value.name]])]),e("div",null,[o[9]||(o[9]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Описание ",-1)),Y(e("textarea",{id:"description","onUpdate:modelValue":o[2]||(o[2]=w=>d.value.description=w),rows:"3",class:"input",placeholder:"Краткое описание рабочего пространства"},null,512),[[de,d.value.description]])]),k.value?(r(),i("div",Rt,S(k.value),1)):L("",!0),e("div",Ht,[e("button",{type:"button",onClick:o[3]||(o[3]=w=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:c.value,class:"btn btn-primary"},S(c.value?"Создание...":"Создать"),9,Qt)])],32)])])])):L("",!0)]),_:1})]))}},Nt=se(Ut,[["__scopeId","data-v-68182ad4"]]),Gt={class:"flex min-h-screen items-center justify-center p-4"},Zt={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Kt={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},Jt={class:"font-medium"},Xt={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Yt={class:"flex justify-end space-x-3 pt-4"},eo=["disabled"],to={__name:"AddMemberModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(f,{emit:M}){const v=f,D=M,x=a=>{a.key==="Escape"&&v.show&&D("close")};te(()=>document.addEventListener("keydown",x)),oe(()=>document.removeEventListener("keydown",x));const d=m({email:"",role:"member"}),c=m(!1),k=m("");ee(()=>v.show,a=>{a||(d.value={email:"",role:"member"},c.value=!1,k.value="")});const A=()=>{var a;k.value="",c.value=!0,D("submit",{...d.value,workspace_id:(a=v.workspace)==null?void 0:a.id})};return(a,o)=>(r(),Z(ce,{to:"body"},[y(N,{name:"modal"},{default:j(()=>{var w;return[f.show?(r(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:o[5]||(o[5]=O(g=>a.$emit("close"),["self"]))},[o[12]||(o[12]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Gt,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:o[4]||(o[4]=O(()=>{},["stop"]))},[e("div",Zt,[o[7]||(o[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Добавить пользователя ",-1)),e("button",{onClick:o[0]||(o[0]=g=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...o[6]||(o[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:O(A,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[e("p",Kt,[o[8]||(o[8]=q(" Workspace: ",-1)),e("span",Jt,S((w=f.workspace)==null?void 0:w.name),1)])]),e("div",null,[o[9]||(o[9]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Email пользователя * ",-1)),Y(e("input",{id:"email","onUpdate:modelValue":o[1]||(o[1]=g=>d.value.email=g),type:"email",required:"",class:"input",placeholder:"user@example.com"},null,512),[[de,d.value.email]])]),e("div",null,[o[11]||(o[11]=e("label",{for:"role",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Роль ",-1)),Y(e("select",{id:"role","onUpdate:modelValue":o[2]||(o[2]=g=>d.value.role=g),class:"input"},[...o[10]||(o[10]=[e("option",{value:"viewer"},"Просмотр",-1),e("option",{value:"member"},"Участник",-1),e("option",{value:"admin"},"Администратор",-1)])],512),[[ct,d.value.role]])]),k.value?(r(),i("div",Xt,S(k.value),1)):L("",!0),e("div",Yt,[e("button",{type:"button",onClick:o[3]||(o[3]=g=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:c.value,class:"btn btn-primary"},S(c.value?"Добавление...":"Добавить"),9,eo)])],32)])])])):L("",!0)]}),_:1})]))}},oo=se(to,[["__scopeId","data-v-72cbffa0"]]),so={class:"flex min-h-screen items-center justify-center p-4"},ro={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},ao={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},no={class:"flex justify-end space-x-3 pt-4"},lo=["disabled"],io={__name:"RenameWorkspaceModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(f,{emit:M}){const v=f,D=M,x=a=>{a.key==="Escape"&&v.show&&D("close")};te(()=>document.addEventListener("keydown",x)),oe(()=>document.removeEventListener("keydown",x));const d=m({name:""}),c=m(!1),k=m("");ee(()=>v.workspace,a=>{a&&(d.value.name=a.name)},{immediate:!0}),ee(()=>v.show,a=>{a||(c.value=!1,k.value="")});const A=()=>{k.value="",c.value=!0,D("submit",d.value.name)};return(a,o)=>(r(),Z(ce,{to:"body"},[y(N,{name:"modal"},{default:j(()=>[f.show?(r(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:o[4]||(o[4]=O(w=>a.$emit("close"),["self"]))},[o[8]||(o[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",so,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:o[3]||(o[3]=O(()=>{},["stop"]))},[e("div",ro,[o[6]||(o[6]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Переименовать workspace ",-1)),e("button",{onClick:o[0]||(o[0]=w=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...o[5]||(o[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:O(A,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[o[7]||(o[7]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Новое название * ",-1)),Y(e("input",{id:"name","onUpdate:modelValue":o[1]||(o[1]=w=>d.value.name=w),type:"text",required:"",class:"input",placeholder:"Название workspace"},null,512),[[de,d.value.name]])]),k.value?(r(),i("div",ao,S(k.value),1)):L("",!0),e("div",no,[e("button",{type:"button",onClick:o[2]||(o[2]=w=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:c.value,class:"btn btn-primary"},S(c.value?"Сохранение...":"Сохранить"),9,lo)])],32)])])])):L("",!0)]),_:1})]))}},co=se(io,[["__scopeId","data-v-9efc4d3d"]]),uo={class:"flex min-h-screen items-center justify-center p-4"},vo={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},po={class:"p-6"},go={key:0,class:"text-center py-8"},ko={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},mo={key:2,class:"space-y-3"},fo={class:"flex items-center space-x-3"},yo={class:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},xo={class:"font-medium text-gray-900 dark:text-white"},bo={class:"text-sm text-gray-500 dark:text-gray-400"},wo={class:"flex items-center space-x-3"},ho=["onClick","disabled"],Co={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$o={key:1,class:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-red-600"},Mo={key:0,class:"px-6 pb-4"},jo={class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},So={class:"flex justify-end p-6 border-t border-gray-200 dark:border-gray-700"},_o={__name:"MembersModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","member-removed"],setup(f,{emit:M}){const v=f,D=M,x=p=>{p.key==="Escape"&&v.show&&D("close")};te(()=>document.addEventListener("keydown",x)),oe(()=>document.removeEventListener("keydown",x));const d=ue(),c=De(),k=m([]),A=m(!1),a=m(""),o=m(null),w=p=>p?p.split(" ").map(u=>u[0]).join("").toUpperCase().substring(0,2):"?",g=p=>({owner:"Владелец",admin:"Администратор",member:"Участник",viewer:"Наблюдатель"})[p]||p,z=p=>({owner:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",admin:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",member:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",viewer:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"})[p]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400",R=p=>{var b,n,h,V,I,G,re;const u=(b=c.user)==null?void 0:b.id,$=((n=v.workspace)==null?void 0:n.owner_id)===u,P=((G=(I=(V=(h=v.workspace)==null?void 0:h.members)==null?void 0:V.find(H=>H.id===u))==null?void 0:I.pivot)==null?void 0:G.role)==="admin";return((re=v.workspace)==null?void 0:re.owner_id)===p.id||p.id===u?!1:$||P},E=async()=>{var p;if((p=v.workspace)!=null&&p.id){A.value=!0,a.value="";try{const u=await d.fetchMembers(v.workspace.id);k.value=u.members||u||[]}catch(u){console.error("Error loading members:",u),a.value="Ошибка при загрузке участников"}finally{A.value=!1}}},B=async p=>{var u,$;if(confirm(`Вы уверены, что хотите удалить ${p.name} из workspace?`)){o.value=p.id,a.value="";try{await d.removeMember(v.workspace.id,p.id),await E(),D("member-removed",p)}catch(P){console.error("Error removing member:",P),a.value=(($=(u=P.response)==null?void 0:u.data)==null?void 0:$.message)||"Ошибка при удалении участника"}finally{o.value=null}}};return ee(()=>v.show,p=>{p?E():(k.value=[],a.value="",o.value=null)}),ee(()=>{var p;return(p=v.workspace)==null?void 0:p.id},()=>{v.show&&E()}),(p,u)=>(r(),Z(ce,{to:"body"},[y(N,{name:"modal"},{default:j(()=>[f.show?(r(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:u[3]||(u[3]=O($=>p.$emit("close"),["self"]))},[u[8]||(u[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",uo,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-auto",onClick:u[2]||(u[2]=O(()=>{},["stop"]))},[e("div",vo,[u[5]||(u[5]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Участники workspace ",-1)),e("button",{onClick:u[0]||(u[0]=$=>p.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...u[4]||(u[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",po,[A.value?(r(),i("div",go,[...u[6]||(u[6]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):k.value.length===0?(r(),i("div",ko," Нет участников ")):(r(),i("div",mo,[(r(!0),i(ne,null,le(k.value,$=>{var P,b,n,h;return r(),i("div",{key:$.id,class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[e("div",fo,[e("div",yo,S(w($.name)),1),e("div",null,[e("div",xo,S($.name),1),e("div",bo,S($.email),1)])]),e("div",wo,[e("span",{class:Q(["px-3 py-1 text-xs font-medium rounded-full",z(((P=$.pivot)==null?void 0:P.role)||(((b=f.workspace)==null?void 0:b.owner_id)===$.id?"owner":"member"))])},S(g(((n=$.pivot)==null?void 0:n.role)||(((h=f.workspace)==null?void 0:h.owner_id)===$.id?"owner":"member"))),3),R($)?(r(),i("button",{key:0,onClick:V=>B($),class:"text-red-600 hover:text-red-700 p-2 rounded transition-colors",disabled:o.value===$.id,title:"Удалить из workspace"},[o.value!==$.id?(r(),i("svg",Co,[...u[7]||(u[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])])):(r(),i("div",$o))],8,ho)):L("",!0)])])}),128))]))]),a.value?(r(),i("div",Mo,[e("div",jo,S(a.value),1)])):L("",!0),e("div",So,[e("button",{onClick:u[1]||(u[1]=$=>p.$emit("close")),class:"btn btn-secondary"}," Закрыть ")])])])])):L("",!0)]),_:1})]))}},Do=se(_o,[["__scopeId","data-v-e1a886d2"]]),Eo={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},To={key:0,class:"fixed inset-0 z-[100] bg-white dark:bg-gray-900 flex items-center justify-center"},Lo={class:"text-center"},Ao={class:"mb-6 flex justify-center"},Bo=["src"],Wo={class:"text-sm text-gray-500 dark:text-gray-400 flex justify-center"},Fo={class:"flex h-screen"},Oo={class:"flex flex-col h-full"},Po={class:"hidden lg:flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},zo={class:"flex items-center space-x-3"},Vo=["src"],Io={class:"p-4 border-b border-gray-200 dark:border-gray-700"},qo={class:"flex items-center justify-between mb-3"},Ro={class:"space-y-1"},Ho=["onClick"],Qo={class:"flex-1 overflow-y-auto p-4"},Uo={class:"space-y-1 mb-6 pb-6 border-b border-gray-200 dark:border-gray-700"},No={class:"space-y-1"},Go={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 space-y-1"},Zo={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Ko={class:"space-y-1 max-h-64 overflow-y-auto"},Jo={class:"flex-1 min-w-0"},Xo={class:"flex items-center space-x-1"},Yo={key:0,class:"text-xs text-gray-500 flex-shrink-0"},es={class:"text-xs text-gray-400 dark:text-gray-500 truncate"},ts={key:0,class:"px-3 py-2 text-sm text-gray-500 text-center"},os={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},ss={class:"space-y-1"},rs={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},as={class:"space-y-1"},ns={key:1,class:"fixed bottom-5 right-5 z-30 lg:hidden flex flex-col gap-3 items-center"},ls={class:"relative"},is={class:"flex-1 flex flex-col overflow-hidden"},ds={class:"flex-1 overflow-auto"},cs={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4"},us={class:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-sm w-full p-6"},vs={class:"text-sm text-gray-500 dark:text-gray-400 mb-6"},ps={__name:"MainLayout",setup(f){const M=ut(),v=fe(),D=De(),x=ue(),d=vt(),c=gt(),k=_e(),A=_(()=>k.isDark?Vt:zt),a=_(()=>k.isDark?Fe:We),o=m(!0),w=m("Загрузка...".split("")),g=m(!1);m(!1);const z=m(!1),R=m(!1),E=m(""),B=m(null),p=m(!1),u=m(!1),$=m(!1),P=m(!1),b=m(null),n=m(""),h=m(null),V=m(!1),I=m(null),G=_(()=>D.user),re=_(()=>x.workspaces),H=_(()=>d.counts),Oe=_(()=>x.currentWorkspace),ye=_(()=>c.activeProjects),ve=_(()=>x.selectedWorkspaces.map(l=>l.id)),Pe=_(()=>d.filteredTasks.length),ze=_(()=>d.archivedTasks.length),Ve=_(()=>{if(ve.value.length===0)return 0;const l=H.value.scheduled||0,t=H.value.today||0,C=H.value.tomorrow||0;return l+t+C});_(()=>{var t;return(((t=G.value)==null?void 0:t.name)||"").split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2)});const pe=_(()=>v.path.includes("/calendar")),xe=l=>{var U;x.toggleSelectedWorkspace(l);const C=M.currentRoute.value.path.split("/"),T=C[C.length-1],W=["inbox","next-actions","today","waiting","someday","calendar","projects","goals"].includes(T)?T:"inbox",F=((U=x.currentWorkspace)==null?void 0:U.id)||l.id;M.push(`/workspaces/${F}/${W}`)},ge=l=>{M.push({query:{view:l}})},Ie=()=>{var l;pe.value?ge("month"):M.push(`/workspaces/${((l=Oe.value)==null?void 0:l.id)||1}/calendar`)},qe=async l=>{try{const t=await x.createWorkspace(l);z.value=!1,await xe(t)}catch(t){console.error("Ошибка создания workspace:",t)}},Re=async()=>{await D.logout(),M.push("/login")},He=()=>{R.value=!0},be=()=>{b.value=null,P.value=!0},Qe=async l=>{var t,C;n.value="";try{b.value?await c.updateProject(b.value.id,l):await c.createProject(l),P.value=!1,b.value=null,await c.fetchAllProjects({force:!0})}catch(T){console.error("Error saving project:",T),n.value=((C=(t=T.response)==null?void 0:t.data)==null?void 0:C.message)||T.message||"Ошибка при сохранении проекта"}},Ue=()=>{P.value=!1,b.value=null,n.value=""},Ne=()=>{console.log("Quick add goal")},Ge=async l=>{var t,C;E.value="";try{await d.createTask(l),R.value=!1}catch(T){console.error("Error creating task:",T),E.value=((C=(t=T.response)==null?void 0:t.data)==null?void 0:C.message)||T.message||"Ошибка при создании задачи"}},Ze=()=>{R.value=!1,E.value=""},K=async({taskId:l,newStatus:t})=>{var C,T;try{const s={status:t};if(t==="today")s.due_date=new Date().toISOString().split("T")[0];else if(t==="tomorrow"){const W=new Date;W.setDate(W.getDate()+1),s.due_date=W.toISOString().split("T")[0]}await d.updateTask(l,s)}catch(s){console.error("Error updating task status:",s),alert(((T=(C=s.response)==null?void 0:C.data)==null?void 0:T.message)||"Ошибка при обновлении задачи")}},Ke=()=>{window.innerWidth<1024&&(g.value=!1)},Je=l=>{console.log("Search:",l)},Xe=()=>{M.push("/settings")},Ye=()=>{M.push("/settings")},et=l=>{l.target.style.display="none"},tt=async()=>{if(I.value){try{await x.deleteWorkspace(I.value.id)}catch(l){console.error("Error deleting workspace:",l)}V.value=!1,I.value=null}},we=()=>{V.value=!1,I.value=null},ot=()=>{p.value=!1,h.value=null},st=()=>{$.value=!1,h.value=null},rt=async()=>{await x.fetchWorkspaces()},at=()=>{u.value=!1,h.value=null},nt=async l=>{var t,C,T,s,W;try{console.log("Sending member data:",l),await x.addMember(l.workspace_id,{email:l.email,role:l.role}),p.value=!1,h.value=null,alert("Пользователь успешно добавлен в workspace")}catch(F){console.error("Error adding member:",F),console.error("Error response:",(t=F.response)==null?void 0:t.data);let U="Ошибка при добавлении пользователя";(T=(C=F.response)==null?void 0:C.data)!=null&&T.errors?U=Object.values(F.response.data.errors).flat().join(", "):(W=(s=F.response)==null?void 0:s.data)!=null&&W.message&&(U=F.response.data.message),alert(U)}},lt=async l=>{var t,C,T,s,W;try{console.log("Renaming workspace:",h.value.id,"to:",l),await x.updateWorkspace(h.value.id,{name:l}),await x.fetchWorkspaces(),u.value=!1,h.value=null,alert("Workspace успешно переименован")}catch(F){console.error("Error renaming workspace:",F),console.error("Error response:",(t=F.response)==null?void 0:t.data);let U="Ошибка при переименовании";(T=(C=F.response)==null?void 0:C.data)!=null&&T.errors?U=Object.values(F.response.data.errors).flat().join(", "):(W=(s=F.response)==null?void 0:s.data)!=null&&W.message&&(U=F.response.data.message),alert(U)}},he=l=>{l.key==="Escape"&&(B.value=null)};te(async()=>{try{await x.fetchWorkspaces(),await Promise.all([d.fetchAllTasks(),c.fetchAllProjects()])}finally{o.value=!1}d.startSync(),c.startSync(),document.addEventListener("click",Ce),document.addEventListener("keydown",he)}),oe(()=>{d.stopSync(),c.stopSync(),document.removeEventListener("click",Ce),document.removeEventListener("keydown",he)});const Ce=()=>{B.value=null},it=l=>{const t=re.value.find(C=>C.id===l);return(t==null?void 0:t.name)||""},$e=l=>v.path.includes(`/projects/${l}`);return(l,t)=>{const C=ie("router-link"),T=ie("router-view");return r(),i("div",Eo,[y(N,{name:"fade"},{default:j(()=>[o.value?(r(),i("div",To,[e("div",Lo,[e("div",Ao,[e("img",{src:A.value,alt:"GTD TODO",class:"w-48 h-48 object-contain",onError:et},null,40,Bo)]),t[20]||(t[20]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"GTD TODO",-1)),e("p",Wo,[(r(!0),i(ne,null,le(w.value,(s,W)=>(r(),i("span",{key:W,style:Me({animationDelay:`${W*.1}s`}),class:"loading-letter"},S(s),5))),128))])])])):L("",!0)]),_:1}),e("div",Fo,[e("aside",{class:Q(["fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",g.value?"translate-x-0":"-translate-x-full lg:translate-x-0"])},[e("div",Oo,[e("div",Po,[e("div",zo,[e("img",{src:a.value,alt:"GTD TODO",class:"h-10 w-10 object-contain"},null,8,Vo),t[21]||(t[21]=e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"},"GTD TODO",-1))])]),e("div",Io,[e("div",qo,[t[23]||(t[23]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Ваши пространства ",-1)),e("button",{onClick:t[0]||(t[0]=s=>z.value=!0),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Создать workspace"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",Ro,[(r(!0),i(ne,null,le(re.value,s=>(r(),i("div",{key:s.id,class:Q(["group flex items-center rounded-lg transition-colors overflow-hidden",ve.value.includes(s.id)?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[e("button",{class:"flex-1 flex items-center px-3 py-2 text-sm cursor-pointer text-left",onClick:W=>xe(s)},[e("span",{class:Q(["truncate",ve.value.includes(s.id)?"text-primary-700 dark:text-primary-400 font-medium":"text-gray-500 dark:text-gray-400"])},S(s.name),3)],8,Ho),y(C,{to:`/workspaces/${s.id}/settings`,class:"flex-shrink-0 p-1.5 mr-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors opacity-0 group-hover:opacity-100",title:"Настройки",onClick:t[1]||(t[1]=O(()=>{},["stop"]))},{default:j(()=>[...t[24]||(t[24]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})],-1)])]),_:1},8,["to"])],2))),128))])]),e("nav",Qo,[e("div",Uo,[y(ae,{to:"/",icon:"chart-bar",onCloseSidebar:t[2]||(t[2]=s=>g.value=!1)},{default:j(()=>[...t[25]||(t[25]=[q(" Дашборд ",-1)])]),_:1})]),e("div",No,[y(J,{to:"/workspaces/:id/inbox",icon:"inbox",count:H.value.inbox,"drop-status":"inbox",onTaskDropped:K,onCloseSidebar:t[3]||(t[3]=s=>g.value=!1)},{default:j(()=>[...t[26]||(t[26]=[q(" Входящие ",-1)])]),_:1},8,["count"])]),e("div",Go,[y(J,{to:"/workspaces/:id/today",icon:"calendar",count:H.value.today,"drop-status":"today",onTaskDropped:K,onCloseSidebar:t[4]||(t[4]=s=>g.value=!1)},{default:j(()=>[...t[27]||(t[27]=[q(" Сегодня ",-1)])]),_:1},8,["count"]),y(J,{to:"/workspaces/:id/next-actions",icon:"lightning",count:H.value.next_actions,"drop-status":"next_action",onTaskDropped:K,onCloseSidebar:t[5]||(t[5]=s=>g.value=!1)},{default:j(()=>[...t[28]||(t[28]=[q(" Следующие ",-1)])]),_:1},8,["count"]),y(J,{to:"/workspaces/:id/tomorrow",icon:"calendar-days",count:H.value.tomorrow,"drop-status":"tomorrow",onTaskDropped:K,onCloseSidebar:t[6]||(t[6]=s=>g.value=!1)},{default:j(()=>[...t[29]||(t[29]=[q(" Завтра ",-1)])]),_:1},8,["count"]),y(ae,{to:"/workspaces/:id/calendar",icon:"calendar-days",count:Ve.value,onCloseSidebar:t[7]||(t[7]=s=>g.value=!1)},{default:j(()=>[...t[30]||(t[30]=[q(" Календарь ",-1)])]),_:1},8,["count"]),y(J,{to:"/workspaces/:id/someday",icon:"archive",count:H.value.someday,"drop-status":"someday",onTaskDropped:K,onCloseSidebar:t[8]||(t[8]=s=>g.value=!1)},{default:j(()=>[...t[31]||(t[31]=[q(" Когда-нибудь ",-1)])]),_:1},8,["count"]),y(J,{to:"/workspaces/:id/waiting",icon:"clock",count:H.value.waiting,"drop-status":"waiting",onTaskDropped:K,onCloseSidebar:t[9]||(t[9]=s=>g.value=!1)},{default:j(()=>[...t[32]||(t[32]=[q(" Ожидание ",-1)])]),_:1},8,["count"]),y(ae,{to:"/workspaces/:id/all",icon:"rectangle-stack",count:Pe.value,onCloseSidebar:t[10]||(t[10]=s=>g.value=!1)},{default:j(()=>[...t[33]||(t[33]=[q(" Все задачи ",-1)])]),_:1},8,["count"])]),e("div",Zo,[e("div",{class:"flex items-center justify-between px-3 mb-3"},[t[35]||(t[35]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Проекты ",-1)),e("button",{onClick:be,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Создать проект"},[...t[34]||(t[34]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",Ko,[(r(!0),i(ne,null,le(ye.value,s=>(r(),i("div",{key:s.id,class:Q(["flex items-center justify-between group px-3 py-2 rounded-lg transition-colors",$e(s.id)?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[y(C,{to:`/workspaces/${s.workspace_id}/projects/${s.id}`,onClick:Ke,class:"flex items-center space-x-2 flex-1 min-w-0"},{default:j(()=>[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:Me({backgroundColor:s.color||"#3B82F6"})},null,4),e("div",Jo,[e("div",Xo,[e("span",{class:Q(["text-sm truncate",$e(s.id)?"text-primary-700 dark:text-primary-400 font-medium":"text-gray-700 dark:text-gray-300"])},S(s.name),3),s.tasks_count>0?(r(),i("span",Yo," ("+S(s.tasks_count)+") ",1)):L("",!0)]),e("div",es,S(it(s.workspace_id)),1)])]),_:2},1032,["to"])],2))),128)),ye.value.length===0?(r(),i("div",ts," Нет проектов ")):L("",!0)])]),e("div",os,[t[37]||(t[37]=e("h3",{class:"px-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3"}," Организация ",-1)),e("div",ss,[y(ae,{to:"/workspaces/:id/goals",icon:"target",onCloseSidebar:t[11]||(t[11]=s=>g.value=!1)},{default:j(()=>[...t[36]||(t[36]=[q(" Цели ",-1)])]),_:1})])]),e("div",rs,[e("div",as,[y(ae,{to:"/workspaces/:id/archive",icon:"archive-box",count:ze.value,onCloseSidebar:t[12]||(t[12]=s=>g.value=!1)},{default:j(()=>[...t[38]||(t[38]=[q(" Архив ",-1)])]),_:1},8,["count"])])])])])],2),g.value?(r(),i("div",{key:0,onClick:t[13]||(t[13]=s=>g.value=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})):L("",!0),g.value?L("",!0):(r(),i("div",ns,[e("button",{onClick:t[14]||(t[14]=s=>R.value=!0),class:"w-10 h-10 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg inline-flex items-center justify-center active:scale-95 transition-transform"},[...t[39]||(t[39]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1)])]),e("div",ls,[y(N,{name:"slide-fade-day"},{default:j(()=>[pe.value?(r(),i("button",{key:0,onClick:t[15]||(t[15]=s=>ge("day")),class:"absolute right-full mr-2 top-0 w-10 h-10 bg-purple-500 hover:bg-purple-600 text-white rounded-full shadow-lg inline-flex items-center justify-center active:scale-95 transition-all",title:"Сегодня"},[...t[40]||(t[40]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})],-1)])])):L("",!0)]),_:1}),y(N,{name:"slide-fade-week"},{default:j(()=>[pe.value?(r(),i("button",{key:0,onClick:t[16]||(t[16]=s=>ge("week")),class:"absolute right-full mr-14 top-0 w-10 h-10 bg-purple-500 hover:bg-purple-600 text-white rounded-full shadow-lg inline-flex items-center justify-center active:scale-95 transition-all",title:"Неделя"},[...t[41]||(t[41]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])):L("",!0)]),_:1}),e("button",{onClick:Ie,class:"w-10 h-10 bg-purple-600 hover:bg-purple-700 text-white rounded-full shadow-lg inline-flex items-center justify-center active:scale-95 transition-transform"},[...t[42]||(t[42]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])]),e("button",{onClick:t[17]||(t[17]=s=>g.value=!0),class:"w-12 h-12 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-lg inline-flex items-center justify-center active:scale-95 transition-transform"},[...t[43]||(t[43]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])])),e("main",is,[y(Pt,{user:G.value,onQuickAddTask:He,onQuickAddProject:be,onQuickAddGoal:Ne,onSearch:Je,onLogout:Re,onProfile:Xe,onSettings:Ye,onToggleSidebar:t[18]||(t[18]=s=>g.value=!g.value)},null,8,["user"]),e("div",ds,[y(T)])])]),y(Nt,{show:z.value,onClose:t[19]||(t[19]=s=>z.value=!1),onSubmit:qe},null,8,["show"]),y(pt,{show:R.value,"server-error":E.value,onClose:Ze,onSubmit:Ge},null,8,["show","server-error"]),y(oo,{show:p.value,workspace:h.value,onClose:ot,onSubmit:nt},null,8,["show","workspace"]),y(co,{show:u.value,workspace:h.value,onClose:at,onSubmit:lt},null,8,["show","workspace"]),y(Do,{show:$.value,workspace:h.value,onClose:st,onMemberRemoved:rt},null,8,["show","workspace"]),y(mt,{show:P.value,project:b.value,"server-error":n.value,onClose:Ue,onSubmit:Qe},null,8,["show","project","server-error"]),y(N,{name:"modal"},{default:j(()=>{var s;return[V.value?(r(),i("div",cs,[e("div",{class:"fixed inset-0 bg-black/50",onClick:we}),e("div",us,[t[44]||(t[44]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Удалить пространство?",-1)),e("p",vs," Пространство «"+S((s=I.value)==null?void 0:s.name)+"» будет удалено навсегда. Это действие нельзя отменить. ",1),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:we,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"}," Отмена "),e("button",{onClick:tt,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors"}," Удалить ")])])])):L("",!0)]}),_:1})])}}},ws=se(ps,[["__scopeId","data-v-93425c37"]]);export{ws as default};
