import{E as se,G as re,r as j,z as U,H as F,k as P,c as r,o as s,a as e,t as d,F as $,C as M,p as Y,b as w,D as C,e as N,s as Z,x as oe,f as V,l as W,m as le,y as O}from"./index-CWGUrFDm.js";import{u as J}from"./workspace-DlnjBXBM.js";import{d as H}from"./ru-B7JyRvIu.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const de=se("dashboard",()=>{const a=re({}),h=j(localStorage.getItem("dashboardPeriod")||"day"),n=J(),g=t=>{a[t]||(a[t]={lifeMirror:null,aiMessage:null,loading:!1,aiLoading:!1})},i=async t=>{if(t){g(t),a[t].loading=!0;try{const y=await F.get("/v1/dashboard/life-mirror",{params:{workspace_id:t,period:h.value}});a[t].lifeMirror=y.data}catch(y){console.error(`Failed to fetch life mirror for ws ${t}:`,y),a[t].lifeMirror=null}finally{a[t].loading=!1}}},x=async t=>{if(t){g(t),a[t].aiLoading=!0;try{const y=await F.get("/v1/dashboard/ai-message",{params:{workspace_id:t,period:h.value}});a[t].aiMessage=y.data}catch(y){console.error(`Failed to fetch AI message for ws ${t}:`,y),a[t].aiMessage=null}finally{a[t].aiLoading=!1}}},m=async t=>{await Promise.all([i(t),x(t)])},v=async()=>{const t=n.selectedWorkspaces;t.length&&await Promise.all(t.map(y=>m(y.id)))},l=t=>{h.value=t,localStorage.setItem("dashboardPeriod",t),v()};return U(()=>n.selectedWorkspaces.map(t=>t.id).join(","),()=>{v()}),{dataByWorkspace:a,selectedPeriod:h,fetchLifeMirror:i,fetchAiMessage:x,fetchForWorkspace:m,fetchAllWorkspaces:v,setPeriod:l}}),ne={class:"mb-6"},ie={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},ce={class:"text-sm text-gray-500 dark:text-gray-400 mt-0.5"},ue={class:"inline-flex rounded-xl bg-gray-100 dark:bg-gray-800 p-1",role:"group"},ge=["onClick"],xe={__name:"DashboardHeader",props:{period:{type:String,required:!0}},emits:["change-period"],setup(a){H.locale("ru");const h=a,n=[{value:"day",label:"День"},{value:"week",label:"Неделя"},{value:"month",label:"Месяц"},{value:"year",label:"Год"}],g=P(()=>{const i=H();switch(h.period){case"day":return i.format("D MMMM YYYY, dddd");case"week":{const x=i.startOf("week"),m=i.endOf("week");return`${x.format("D MMM")} — ${m.format("D MMM YYYY")}`}case"month":return i.format("MMMM YYYY");case"year":return i.format("YYYY год");default:return i.format("D MMMM YYYY")}});return(i,x)=>(s(),r("div",ne,[e("div",ie,[e("div",null,[x[0]||(x[0]=e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white"}," Зеркало жизни ",-1)),e("p",ce,d(g.value),1)]),e("div",ue,[(s(),r($,null,M(n,m=>e("button",{key:m.value,onClick:v=>i.$emit("change-period",m.value),type:"button",class:Y(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200",[a.period===m.value?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"]])},d(m.label),11,ge)),64))])])]))}},ye={key:0,class:"h-1 mb-2 relative overflow-hidden rounded-full"},he=["viewBox"],me=["d","stroke"],be={class:"relative overflow-hidden rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"},ke={class:"p-4 sm:p-6"},ve={class:"max-h-[40vh] overflow-y-auto sm:max-h-none sm:overflow-visible scrollbar-thin"},fe={key:0,class:"animate-pulse space-y-3"},pe={key:1},_e={class:"text-sm sm:text-base text-gray-900 dark:text-gray-100 leading-relaxed"},$e={key:0,class:"mt-2 sm:mt-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3 sm:p-4"},we={class:"text-gray-700 dark:text-gray-300 text-xs sm:text-sm leading-relaxed"},Me={key:1,class:"mt-3 sm:mt-4 flex flex-wrap gap-1.5 sm:gap-2"},Ce={key:2,class:"mt-3 sm:mt-4 pt-3 border-t border-gray-200 dark:border-gray-700"},Pe={class:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm italic"},Le={class:"text-gray-400 dark:text-gray-500 not-italic ml-1"},Ye={key:2},E=200,Be={__name:"AiHeroBanner",props:{message:{type:Object,default:null},loading:{type:Boolean,default:!1}},setup(a){const h=a,n={positive:"#10b981",concerned:"#6366f1",warning:"#f59e0b",serious:"#ef4444",reflective:"#8b5cf6"},g=P(()=>{var v;const m=((v=h.message)==null?void 0:v.mood)||"concerned";return n[m]||n.concerned}),i={positive:2,reflective:2.5,concerned:3,warning:3.5,serious:4.5},x=P(()=>{var _;const m=((_=h.message)==null?void 0:_.mood)||"concerned",v=i[m]||3,l=E,t=5,y=Math.floor(l/40);let u=`M 0 ${t}`;for(let f=0;f<y;f++){const o=f*40;u+=` L ${o+12} ${t}`,u+=` L ${o+16} ${t+v*.4}`,u+=` L ${o+20} ${t-v}`,u+=` L ${o+24} ${t+v*.7}`,u+=` L ${o+28} ${t}`,u+=` L ${o+40} ${t}`}return u});return(m,v)=>{var l;return s(),r("div",null,[a.message?(s(),r("div",ye,[(s(),r("svg",{class:"absolute inset-0 w-full h-full",preserveAspectRatio:"none",viewBox:`0 0 ${E} 10`},[e("path",{d:x.value,fill:"none",stroke:g.value,"stroke-width":"2","stroke-linecap":"round",class:"pulse-line",style:C({"--pulse-color":g.value})},null,12,me)],8,he))])):w("",!0),e("div",be,[e("div",ke,[e("div",ve,[a.loading?(s(),r("div",fe,[...v[0]||(v[0]=[e("div",{class:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-2/3"},null,-1),e("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"},null,-1),e("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-4/5"},null,-1)])])):a.message?(s(),r("div",pe,[e("p",_e,d(a.message.main_message),1),a.message.followup_message?(s(),r("div",$e,[e("p",we,d(a.message.followup_message),1)])):w("",!0),(l=a.message.recommendations)!=null&&l.length?(s(),r("div",Me,[(s(!0),r($,null,M(a.message.recommendations,(t,y)=>(s(),r("div",{key:y,class:"bg-gray-100 dark:bg-gray-700 rounded-lg px-2.5 py-1.5 sm:px-3 sm:py-2 text-xs sm:text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1.5 sm:gap-2"},[e("div",{class:"w-2 h-2 rounded-full flex-shrink-0",style:C({backgroundColor:t.sphere_color||"#9ca3af"})},null,4),e("span",null,d(t.action),1)]))),128))])):w("",!0),a.message.bible_verse?(s(),r("div",Ce,[e("p",Pe,[N(" «"+d(a.message.bible_verse.text)+"» ",1),e("span",Le,"— "+d(a.message.bible_verse.ref),1)])])):w("",!0)])):(s(),r("div",Ye,[...v[1]||(v[1]=[e("p",{class:"text-base font-medium text-gray-900 dark:text-white"},"Зеркало жизни",-1),e("p",{class:"text-gray-500 dark:text-gray-400 text-sm mt-1"},"Обзор баланса твоих жизненных сфер",-1)])]))])])])])}}},ze=K(Be,[["__scopeId","data-v-033a7b32"]]),Ae={class:"flex flex-col items-center"},Se=["width","height","viewBox"],De=["cx","cy","r"],We=["cx","cy","r"],je=["x1","y1","x2","y2"],Oe=["d"],Ve=["d","fill"],He=["d","stroke"],Ne=["d","stroke"],Re=["x","y","fill","text-anchor"],qe=["cx","cy","r"],Fe=["x","y"],Ee=["x","y"],D=40,T=.03,Te={__name:"BalanceWheel",props:{spheres:{type:Array,default:()=>[]},balanceIndex:{type:Number,default:0},size:{type:Number,default:280}},setup(a){const h=a,n=P(()=>h.size/2),g=P(()=>h.size/2-40),i=P(()=>g.value*.35),x=P(()=>h.spheres.length),m=P(()=>x.value>0?2*Math.PI/x.value:0),v=[25,50,75],l=k=>m.value*k-Math.PI/2+T/2,t=k=>m.value*(k+1)-Math.PI/2-T/2,y=k=>(l(k)+t(k))/2,u=(k,b)=>n.value+b*Math.cos(k),_=(k,b)=>n.value+b*Math.sin(k),f=P(()=>h.spheres.length?Math.max(...h.spheres.map(k=>k.total||0),1):1),o=(k,b,c)=>{if(x.value===0||c<=b)return"";const p=l(k),B=t(k),q=B-p>Math.PI?1:0;return[`M ${u(p,b)} ${_(p,b)}`,`L ${u(p,c)} ${_(p,c)}`,`A ${c} ${c} 0 ${q} 1 ${u(B,c)} ${_(B,c)}`,`L ${u(B,b)} ${_(B,b)}`,`A ${b} ${b} 0 ${q} 0 ${u(p,b)} ${_(p,b)}`,"Z"].join(" ")},L=(k,b)=>{if(x.value===0)return"";const c=l(k),p=t(k),B=p-c>Math.PI?1:0;return`M ${u(c,b)} ${_(c,b)} A ${b} ${b} 0 ${B} 1 ${u(p,b)} ${_(p,b)}`},A=k=>{if(!k.total||k.total===0)return i.value;const b=k.total/f.value;return i.value+(g.value-i.value)*Math.max(b,.1)},z=k=>{if(!k.done||k.done===0)return i.value;const b=k.done/f.value;return i.value+(g.value-i.value)*Math.max(b,.08)},S=k=>L(k,g.value),Q=(k,b)=>{const c=A(b);return c<=i.value?"":o(k,i.value,c)},X=(k,b)=>{const c=z(b);return c<=i.value?"":o(k,i.value,c)},ee=(k,b)=>{const c=z(b);return c<=i.value?"":L(k,c)},te=P(()=>x.value<=1?[]:h.spheres.map((k,b)=>{const c=m.value*b-Math.PI/2;return{x1:u(c,i.value),y1:_(c,i.value),x2:u(c,g.value),y2:_(c,g.value)}})),R=P(()=>h.spheres.map((k,b)=>{const c=g.value+18;return{x:u(y(b),c),y:_(y(b),c)}})),ae=k=>{const b=y(k)*180/Math.PI;return b>-60&&b<60?"start":b>120||b<-120?"end":"middle"};return(k,b)=>(s(),r("div",Ae,[(s(),r("svg",{width:a.size,height:a.size,viewBox:`${-D} ${-D} ${a.size+D*2} ${a.size+D*2}`},[(s(),r($,null,M(v,c=>e("circle",{key:"grid-"+c,cx:n.value,cy:n.value,r:i.value+(g.value-i.value)*c/100,fill:"none",stroke:"currentColor",class:"text-gray-200 dark:text-gray-700","stroke-width":"0.5","stroke-dasharray":"3 3"},null,8,De)),64)),e("circle",{cx:n.value,cy:n.value,r:g.value,fill:"none",stroke:"currentColor",class:"text-gray-300 dark:text-gray-600","stroke-width":"1.5"},null,8,We),(s(!0),r($,null,M(te.value,(c,p)=>(s(),r("line",{key:"div-"+p,x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,stroke:"currentColor",class:"text-gray-300 dark:text-gray-600","stroke-width":"1"},null,8,je))),128)),(s(!0),r($,null,M(a.spheres,(c,p)=>(s(),r("path",{key:"total-"+p,d:Q(p,c),fill:"currentColor",class:"text-gray-400 dark:text-gray-500","fill-opacity":"0.25"},null,8,Oe))),128)),(s(!0),r($,null,M(a.spheres,(c,p)=>(s(),r("path",{key:"done-"+p,d:X(p,c),fill:c.color||"#888","fill-opacity":"0.45",class:"transition-all duration-700 ease-out"},null,8,Ve))),128)),(s(!0),r($,null,M(a.spheres,(c,p)=>(s(),r("path",{key:"edge-"+p,d:ee(p,c),fill:"none",stroke:c.color||"#888","stroke-width":"2.5","stroke-linecap":"round",class:"transition-all duration-700 ease-out"},null,8,He))),128)),(s(!0),r($,null,M(a.spheres,(c,p)=>(s(),r("path",{key:"arc-"+p,d:S(p),fill:"none",stroke:c.color||"#888","stroke-width":"3","stroke-opacity":"0.25","stroke-linecap":"round"},null,8,Ne))),128)),(s(!0),r($,null,M(a.spheres,(c,p)=>(s(),r("text",{key:"label-"+p,x:R.value[p].x,y:R.value[p].y,fill:c.color||"#888","font-size":"11","font-weight":"600","text-anchor":ae(p),"dominant-baseline":"central"},d(c.name||""),9,Re))),128)),e("circle",{cx:n.value,cy:n.value,r:i.value,class:"fill-white dark:fill-gray-900 stroke-gray-300 dark:stroke-gray-600","stroke-width":"1"},null,8,qe),e("text",{x:n.value,y:n.value-8,"text-anchor":"middle","dominant-baseline":"central","font-size":"28","font-weight":"bold",class:"fill-gray-900 dark:fill-white"},d(a.balanceIndex),9,Fe),e("text",{x:n.value,y:n.value+14,"text-anchor":"middle","dominant-baseline":"central","font-size":"10",class:"fill-gray-400 dark:fill-gray-500"}," баланс ",8,Ee)],8,Se))]))}},Ge={class:"flex items-center justify-between mb-2"},Ie={class:"flex items-center gap-2"},Ue={class:"text-sm font-semibold text-gray-900 dark:text-white"},Ze={key:0,class:"text-xs px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"},Je={class:"flex items-center gap-3"},Ke={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden"},Qe={class:"text-xs font-medium text-gray-600 dark:text-gray-400 tabular-nums whitespace-nowrap"},Xe={__name:"SphereCard",props:{sphere:{type:Object,required:!0}},setup(a){const h=a,n=j(!1),g=P(()=>h.sphere.tasks_total?Math.round(h.sphere.tasks_done/h.sphere.tasks_total*100):0);return(i,x)=>(s(),r("div",{class:"rounded-xl border bg-white/80 dark:bg-gray-800/80 border-gray-200 dark:border-gray-700 p-4 transition-all duration-200 cursor-pointer group border-l-4",style:C({borderLeftColor:a.sphere.color,boxShadow:n.value?`0 0 20px ${a.sphere.color}30`:"none"}),onMouseenter:x[0]||(x[0]=m=>n.value=!0),onMouseleave:x[1]||(x[1]=m=>n.value=!1)},[e("div",Ge,[e("div",Ie,[e("div",{class:"w-3 h-3 rounded-full",style:C({backgroundColor:a.sphere.color})},null,4),e("span",Ue,d(a.sphere.name),1)]),a.sphere.days_without_attention!==null&&a.sphere.days_without_attention>0?(s(),r("span",Ze,d(a.sphere.days_without_attention)+" дн. ",1)):w("",!0)]),e("div",Je,[e("div",Ke,[e("div",{class:"h-full rounded-full transition-all duration-500",style:C({width:g.value+"%",backgroundColor:a.sphere.color})},null,4)]),e("span",Qe,d(a.sphere.tasks_done)+"/"+d(a.sphere.tasks_total),1)])],36))}},et={class:"bg-white/80 dark:bg-gray-800/80 rounded-xl border border-dashed border-gray-300 dark:border-gray-600 p-4"},tt={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2"},at={class:"min-w-0 flex-1"},st={class:"text-xs font-medium text-gray-700 dark:text-gray-300 truncate"},rt={class:"text-[10px] text-gray-400 dark:text-gray-500"},ot={__name:"MissingSpheres",props:{spheres:{type:Array,default:()=>[]}},setup(a){return(h,n)=>(s(),r("div",et,[n[0]||(n[0]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"}," Сферы без внимания ",-1)),e("div",tt,[(s(!0),r($,null,M(a.spheres,g=>(s(),r("div",{key:g.id,class:"flex items-center gap-2 rounded-lg border border-dashed p-3 transition-colors hover:bg-gray-50 dark:hover:bg-gray-700/50",style:C({borderColor:g.color+"40",backgroundColor:g.color+"08"})},[e("div",{class:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:C({backgroundColor:g.color})},null,4),e("div",at,[e("p",st,d(g.name),1),e("p",rt,d(g.days_without_attention!==null?`${g.days_without_attention} дн.`:"Нет задач"),1)])],4))),128))])]))}},lt={key:0,class:"space-y-6"},dt={class:"grid grid-cols-2 sm:grid-cols-4 gap-3"},nt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},it={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},ct={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},ut={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400 mt-1"},gt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},xt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},yt={class:"text-sm text-gray-400"},ht={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},mt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},bt={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},kt={class:"space-y-3"},vt={class:"flex items-center justify-between mb-2"},ft={class:"text-sm font-medium text-gray-900 dark:text-white"},pt={class:"text-xs text-gray-500 dark:text-gray-400"},_t={key:0,class:"space-y-1"},$t={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},G={__name:"PeriodDayView",props:{data:{type:Object,default:null}},setup(a){return(h,n)=>{var g,i,x,m,v,l;return a.data?(s(),r("div",lt,[e("div",dt,[e("div",nt,[n[0]||(n[0]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Всего задач",-1)),e("p",it,d(((g=a.data.summary)==null?void 0:g.total_tasks)||0),1)]),e("div",ct,[n[1]||(n[1]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Выполнено",-1)),e("p",ut,d(((i=a.data.summary)==null?void 0:i.completed)||0),1)]),e("div",gt,[n[2]||(n[2]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Активных сфер",-1)),e("p",xt,[N(d(((x=a.data.summary)==null?void 0:x.spheres_active)||0),1),e("span",yt,"/"+d(((m=a.data.summary)==null?void 0:m.spheres_total)||0),1)])]),e("div",ht,[n[3]||(n[3]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Выполнение",-1)),e("p",mt,d(((v=a.data.summary)==null?void 0:v.completion_rate)||0)+"%",1)])]),(l=a.data.spheres)!=null&&l.length?(s(),r("div",bt,[n[5]||(n[5]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Задачи по сферам",-1)),e("div",kt,[(s(!0),r($,null,M(a.data.spheres,t=>{var y;return s(),r("div",{key:t.id,class:"border-l-3 rounded-lg p-3 bg-gray-50 dark:bg-gray-700/30",style:C({borderLeftColor:t.color,borderLeftWidth:"3px"})},[e("div",vt,[e("span",ft,d(t.name),1),e("span",pt,d(t.tasks_done)+"/"+d(t.tasks_total),1)]),(y=t.tasks)!=null&&y.length?(s(),r("div",_t,[(s(!0),r($,null,M(t.tasks,u=>(s(),r("div",{key:u.id,class:"flex items-center gap-2 text-sm"},[e("div",{class:Y(["w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0",u.completed_at?"bg-emerald-500 border-emerald-500":"border-gray-300 dark:border-gray-600"])},[u.completed_at?(s(),r("svg",$t,[...n[4]||(n[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):w("",!0)],2),e("span",{class:Y(u.completed_at?"line-through text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300")},d(u.title),3)]))),128))])):w("",!0)],4)}),128))])])):w("",!0)])):w("",!0)}}},wt={key:0,class:"space-y-6"},Mt={class:"grid grid-cols-2 sm:grid-cols-3 gap-3"},Ct={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Pt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},Lt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Yt={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400 mt-1"},Bt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},zt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},At={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},St={class:"flex items-end gap-1 h-32"},Dt={class:"w-full flex flex-col-reverse gap-px",style:{height:"100px"}},Wt=["title"],jt={key:0,class:"w-full h-full flex items-center justify-center"},Ot={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Vt={class:"space-y-2"},Ht={class:"w-20 text-xs text-gray-600 dark:text-gray-400 truncate"},Nt={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden"},Rt={class:"text-xs font-medium text-gray-500 dark:text-gray-400 tabular-nums w-12 text-right"},qt={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Ft={class:"space-y-2"},Et={class:"flex-1 min-w-0"},Tt={class:"flex items-center gap-2"},Gt={class:"text-sm text-gray-900 dark:text-white truncate"},It={key:0,class:"text-[10px] text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 px-1.5 py-0.5 rounded"},Ut={class:"flex items-center gap-2"},Zt={class:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"},Jt={class:"text-xs text-gray-500 dark:text-gray-400 tabular-nums"},Kt={__name:"PeriodWeekView",props:{data:{type:Object,default:null}},setup(a){const h=a,n=P(()=>{var t;if(!((t=h.data)!=null&&t.daily_breakdown))return 1;let l=0;for(const y of h.data.daily_breakdown){const u=Object.values(y.by_sphere).reduce((_,f)=>_+f,0);u>l&&(l=u)}return Math.max(l,1)}),g=l=>Math.max(l/n.value*80,4),i=P(()=>{var t;const l={};if((t=h.data)!=null&&t.attention_distribution)for(const y of h.data.attention_distribution)l[y.sphere_id]=y;return l}),x=l=>{var t;return((t=i.value[l])==null?void 0:t.color)||"#888"},m=l=>{var t;return((t=i.value[l])==null?void 0:t.name)||""},v=l=>H().format("YYYY-MM-DD")===l;return(l,t)=>{var y,u,_,f;return a.data?(s(),r("div",wt,[e("div",Mt,[e("div",Ct,[t[0]||(t[0]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Всего задач",-1)),e("p",Pt,d(((y=a.data.summary)==null?void 0:y.total_tasks)||0),1)]),e("div",Lt,[t[1]||(t[1]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Выполнено",-1)),e("p",Yt,d(((u=a.data.summary)==null?void 0:u.completed)||0),1)]),e("div",Bt,[t[2]||(t[2]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Выполнение",-1)),e("p",zt,d(((_=a.data.summary)==null?void 0:_.completion_rate)||0)+"%",1)])]),e("div",At,[t[4]||(t[4]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Рентген недели",-1)),e("div",St,[(s(!0),r($,null,M(a.data.daily_breakdown,o=>(s(),r("div",{key:o.date,class:"flex-1 flex flex-col items-center gap-1"},[e("div",Dt,[(s(!0),r($,null,M(Object.keys(o.by_sphere),L=>(s(),r("div",{key:L,class:"w-full rounded-sm transition-all duration-300",style:C({height:g(o.by_sphere[L])+"px",backgroundColor:x(parseInt(L)),opacity:.8}),title:`${m(parseInt(L))}: ${o.by_sphere[L]}`},null,12,Wt))),128)),Object.keys(o.by_sphere).length?w("",!0):(s(),r("div",jt,[...t[3]||(t[3]=[e("span",{class:"text-gray-300 dark:text-gray-600 text-xs"},"—",-1)])]))]),e("span",{class:Y(["text-xs mt-1",v(o.date)?"font-bold text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400"])},d(o.day),3)]))),128))])]),e("div",Ot,[t[5]||(t[5]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Распределение внимания",-1)),e("div",Vt,[(s(!0),r($,null,M(a.data.attention_distribution,o=>(s(),r("div",{key:o.sphere_id,class:"flex items-center gap-3"},[e("div",Ht,d(o.name),1),e("div",Nt,[e("div",{class:"h-full rounded-full transition-all duration-500",style:C({width:o.percentage+"%",backgroundColor:o.color,opacity:o.percentage>0?1:.3})},null,4)]),e("span",Rt,d(o.percentage)+"% ",1)]))),128))])]),(f=a.data.projects)!=null&&f.length?(s(),r("div",qt,[t[6]||(t[6]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Потоки",-1)),e("div",Ft,[(s(!0),r($,null,M(a.data.projects,o=>(s(),r("div",{key:o.id,class:Y(["flex items-center gap-3 p-2 rounded-lg",o.is_stalled?"opacity-50":""])},[e("div",{class:"w-2 h-2 rounded-full flex-shrink-0",style:C({backgroundColor:o.sphere_color||o.color})},null,4),e("div",Et,[e("div",Tt,[e("span",Gt,d(o.name),1),o.is_stalled?(s(),r("span",It,"стоит")):w("",!0)])]),e("div",Ut,[e("div",Zt,[e("div",{class:"h-full rounded-full",style:C({width:(o.total>0?o.done/o.total*100:0)+"%",backgroundColor:o.sphere_color||o.color})},null,4)]),e("span",Jt,d(o.done)+"/"+d(o.total),1)])],2))),128))])])):w("",!0)])):w("",!0)}}},Qt={key:0,class:"space-y-6"},Xt={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},ea={class:"flex items-center gap-4 mb-2"},ta={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden"},aa={class:"text-sm font-bold text-gray-900 dark:text-white tabular-nums"},sa={class:"text-xs text-gray-500 dark:text-gray-400"},ra={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},oa={class:"space-y-2"},la={class:"w-20 text-xs text-gray-600 dark:text-gray-400 truncate"},da={class:"text-xs text-gray-400 dark:text-gray-500 tabular-nums w-8 text-right"},na={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden relative"},ia={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-amber-200 dark:border-amber-900/50 p-4"},ca={class:"space-y-2"},ua={class:"text-sm text-gray-700 dark:text-gray-300 flex-1"},ga={class:"text-xs text-amber-600 dark:text-amber-400"},xa={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-rose-200 dark:border-rose-900/50 p-4"},ya={class:"space-y-3"},ha={class:"flex items-center justify-between mb-2"},ma={class:"flex items-center gap-2"},ba={class:"text-sm font-medium text-gray-900 dark:text-white"},ka={class:"text-xs text-gray-500 dark:text-gray-400"},va={class:"flex items-center gap-3"},fa={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden relative"},pa=["title"],_a={class:"text-xs text-rose-600 dark:text-rose-400 tabular-nums"},$a={class:"text-gray-400"},wa={__name:"PeriodMonthView",props:{data:{type:Object,default:null}},setup(a){const h=a,n=P(()=>{var i;return((i=h.data)==null?void 0:i.planned_vs_done)||{planned:0,done:0,days_passed:0,days_remaining:0,required_daily_pace:0,completion_rate:0}}),g=i=>i>2?"text-emerald-600 dark:text-emerald-400":i<-2?"text-rose-600 dark:text-rose-400":"text-gray-400 dark:text-gray-500";return(i,x)=>{var m,v;return a.data?(s(),r("div",Qt,[e("div",Xt,[x[0]||(x[0]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Нагрузка",-1)),e("div",ea,[e("div",ta,[e("div",{class:"h-full rounded-full bg-primary-500 transition-all duration-500",style:C({width:(n.value.completion_rate||0)+"%"})},null,4)]),e("span",aa,d(n.value.done)+"/"+d(n.value.planned),1)]),e("p",sa," Осталось "+d(n.value.planned-n.value.done)+" задач, ~"+d(n.value.required_daily_pace)+"/день чтобы успеть. Прошло "+d(n.value.days_passed)+" дн., осталось "+d(n.value.days_remaining)+" дн. ",1)]),e("div",ra,[x[1]||(x[1]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Было → Стало",-1)),e("div",oa,[(s(!0),r($,null,M(a.data.sphere_trends,l=>(s(),r("div",{key:l.sphere_id,class:"flex items-center gap-3"},[e("div",la,d(l.name),1),e("span",da,d(l.prev_pct)+"%",1),e("div",na,[e("div",{class:"absolute top-0 h-full w-0.5 bg-gray-400 dark:bg-gray-500 z-10",style:C({left:l.prev_pct+"%"})},null,4),e("div",{class:"h-full rounded-full transition-all duration-500",style:C({width:l.current_pct+"%",backgroundColor:l.color})},null,4)]),e("span",{class:"text-xs font-medium tabular-nums w-8 text-right",style:C({color:l.color})},d(l.current_pct)+"% ",5),e("span",{class:Y(["text-xs tabular-nums w-10 text-right",g(l.change)])},d(l.change>0?"+":"")+d(l.change)+"% ",3)]))),128))])]),(m=a.data.stalled_projects)!=null&&m.length?(s(),r("div",ia,[x[2]||(x[2]=e("h3",{class:"text-sm font-semibold text-amber-600 dark:text-amber-400 mb-3"},"Застрявшие потоки",-1)),e("div",ca,[(s(!0),r($,null,M(a.data.stalled_projects,l=>(s(),r("div",{key:l.id,class:"flex items-center gap-3 p-2 rounded-lg bg-amber-50/50 dark:bg-amber-900/10"},[e("div",{class:"w-2 h-2 rounded-full",style:C({backgroundColor:l.sphere_color||"#F59E0B"})},null,4),e("span",ua,d(l.name),1),e("span",ga,d(l.days_since_activity)+" дн. без движения ",1)]))),128))])])):w("",!0),(v=a.data.goals_at_risk)!=null&&v.length?(s(),r("div",xa,[x[3]||(x[3]=e("h3",{class:"text-sm font-semibold text-rose-600 dark:text-rose-400 mb-3"},"Цели под угрозой",-1)),e("div",ya,[(s(!0),r($,null,M(a.data.goals_at_risk,l=>(s(),r("div",{key:l.id,class:"p-3 rounded-lg bg-rose-50/50 dark:bg-rose-900/10"},[e("div",ha,[e("div",ma,[e("div",{class:"w-2 h-2 rounded-full",style:C({backgroundColor:l.sphere_color})},null,4),e("span",ba,d(l.name),1)]),e("span",ka,d(l.days_left)+" дн. до дедлайна",1)]),e("div",va,[e("div",fa,[e("div",{class:"absolute top-0 h-full w-0.5 bg-rose-400 z-10",style:C({left:l.expected_progress+"%"}),title:"Ожидаемый: "+l.expected_progress+"%"},null,12,pa),e("div",{class:"h-full rounded-full bg-rose-500",style:C({width:l.progress+"%"})},null,4)]),e("span",_a,[N(d(l.progress)+"% ",1),e("span",$a,"из "+d(l.expected_progress)+"%",1)])])]))),128))])])):w("",!0)])):w("",!0)}}},Ma={key:0,class:"space-y-6"},Ca={class:"grid grid-cols-2 sm:grid-cols-5 gap-3"},Pa={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},La={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},Ya={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-emerald-200 dark:border-emerald-900/50"},Ba={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400 mt-1"},za={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-blue-200 dark:border-blue-900/50"},Aa={class:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1"},Sa={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-amber-200 dark:border-amber-900/50"},Da={class:"text-2xl font-bold text-amber-600 dark:text-amber-400 mt-1"},Wa={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},ja={class:"text-2xl font-bold text-gray-400 mt-1"},Oa={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Va={class:"flex items-end gap-2 h-32"},Ha={class:"text-xs font-bold text-gray-900 dark:text-white tabular-nums"},Na={class:"text-[10px] text-gray-500 dark:text-gray-400 truncate max-w-full"},Ra={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},qa={class:"space-y-3"},Fa={class:"flex-1 min-w-0"},Ea={class:"flex items-center gap-2 mb-1"},Ta={class:"text-sm text-gray-900 dark:text-white truncate"},Ga={class:"flex items-center gap-2"},Ia={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"},Ua={class:"text-xs text-gray-500 dark:text-gray-400 tabular-nums"},Za={key:0,class:"text-xs text-gray-400 tabular-nums whitespace-nowrap"},Ja={key:2,class:"bg-white dark:bg-gray-800 rounded-xl border border-emerald-200 dark:border-emerald-900/50 p-4"},Ka={class:"space-y-2"},Qa={class:"text-sm text-gray-900 dark:text-white flex-1"},Xa={class:"text-xs text-gray-400"},es={key:3,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},ts={class:"space-y-2"},as={class:"text-xs text-gray-600 dark:text-gray-400 w-20 truncate"},ss={class:"text-[10px] text-gray-400 dark:text-gray-500"},rs={__name:"PeriodYearView",props:{data:{type:Object,default:null}},setup(a){const h=a,n=P(()=>{var l;return((l=h.data)==null?void 0:l.goals_summary)||{total:0,achieved:0,on_track:0,behind:0,at_risk:0,stalled:0}}),g={ahead:"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400",on_track:"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400",behind:"bg-amber-100 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400",at_risk:"bg-rose-100 dark:bg-rose-900/20 text-rose-700 dark:text-rose-400",stalled:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"},i={ahead:"опережает",on_track:"по графику",behind:"отстаёт",at_risk:"под угрозой",stalled:"стоит"},x={growing:"↑",falling:"↓",stable:"→",stalled:"·"},m={growing:"растёт",falling:"падает",stable:"стабильно",stalled:"стоит"},v=l=>l==="growing"?"text-emerald-600 dark:text-emerald-400":l==="falling"?"text-rose-600 dark:text-rose-400":"text-gray-400 dark:text-gray-500";return(l,t)=>{var y,u,_,f;return a.data?(s(),r("div",Ma,[e("div",Ca,[e("div",Pa,[t[0]||(t[0]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Всего целей",-1)),e("p",La,d(n.value.total),1)]),e("div",Ya,[t[1]||(t[1]=e("p",{class:"text-xs text-emerald-600 dark:text-emerald-400"},"Достигнуто",-1)),e("p",Ba,d(n.value.achieved),1)]),e("div",za,[t[2]||(t[2]=e("p",{class:"text-xs text-blue-600 dark:text-blue-400"},"По графику",-1)),e("p",Aa,d(n.value.on_track),1)]),e("div",Sa,[t[3]||(t[3]=e("p",{class:"text-xs text-amber-600 dark:text-amber-400"},"Отстают",-1)),e("p",Da,d(n.value.behind+n.value.at_risk),1)]),e("div",Wa,[t[4]||(t[4]=e("p",{class:"text-xs text-gray-400"},"Стоят",-1)),e("p",ja,d(n.value.stalled),1)])]),(y=a.data.monthly_balance_trend)!=null&&y.length?(s(),r("div",Oa,[t[5]||(t[5]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Индекс баланса — тренд",-1)),e("div",Va,[(s(!0),r($,null,M(a.data.monthly_balance_trend,o=>(s(),r("div",{key:o.month_key,class:"flex-1 flex flex-col items-center gap-1"},[e("span",Ha,d(o.balance_index),1),e("div",{class:Y(["w-full rounded-t transition-all duration-300",o.is_current?"bg-primary-500 shadow-lg shadow-primary-500/30":"bg-gray-300 dark:bg-gray-600"]),style:C({height:Math.max(o.balance_index,5)+"%"})},null,6),e("span",Na,d(o.month.split(" ")[0]),1)]))),128))])])):w("",!0),(u=a.data.active_goals)!=null&&u.length?(s(),r("div",Ra,[t[6]||(t[6]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Цели года",-1)),e("div",qa,[(s(!0),r($,null,M(a.data.active_goals,o=>(s(),r("div",{key:o.id,class:Y(["flex items-center gap-3 p-2 rounded-lg",o.status==="stalled"?"opacity-50":""])},[e("div",{class:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:C({backgroundColor:o.sphere_color})},null,4),e("div",Fa,[e("div",Ea,[e("span",Ta,d(o.name),1),e("span",{class:Y(["text-[10px] px-1.5 py-0.5 rounded-full",g[o.status]||g.on_track])},d(i[o.status]||o.status),3)]),e("div",Ga,[e("div",Ia,[e("div",{class:"h-full rounded-full transition-all duration-500",style:C({width:o.progress+"%",backgroundColor:o.sphere_color})},null,4)]),e("span",Ua,d(o.progress)+"%",1)])]),o.days_left?(s(),r("span",Za,d(o.days_left)+" дн. ",1)):w("",!0)],2))),128))])])):w("",!0),(_=a.data.achieved_goals)!=null&&_.length?(s(),r("div",Ja,[t[8]||(t[8]=e("h3",{class:"text-sm font-semibold text-emerald-600 dark:text-emerald-400 mb-3"},"Достигнутые цели",-1)),e("div",Ka,[(s(!0),r($,null,M(a.data.achieved_goals,o=>(s(),r("div",{key:o.id,class:"flex items-center gap-3 p-2"},[t[7]||(t[7]=e("svg",{class:"w-5 h-5 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Qa,d(o.name),1),e("span",Xa,d(o.completed_at),1)]))),128))])])):w("",!0),(f=a.data.sphere_yearly_trends)!=null&&f.length?(s(),r("div",es,[t[9]||(t[9]=e("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Тренды по сферам",-1)),e("div",ts,[(s(!0),r($,null,M(a.data.sphere_yearly_trends,o=>(s(),r("div",{key:o.sphere_id,class:"flex items-center gap-3"},[e("div",{class:"w-2 h-2 rounded-full",style:C({backgroundColor:o.color})},null,4),e("span",as,d(o.name),1),e("span",{class:Y(["text-xs tabular-nums w-12",v(o.trend)])},d(x[o.trend]||"—")+" "+d(o.avg_attention)+"% ",3),e("span",ss,d(m[o.trend]||""),1)]))),128))])])):w("",!0)])):w("",!0)}}},os={key:0,class:"flex flex-col items-center justify-center py-24"},ls={class:"w-full max-w-md space-y-8"},ds={class:"h-3 relative overflow-hidden"},ns=["viewBox"],is=["d","stroke"],cs={key:1,class:"text-center py-16"},us={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},gs={class:"lg:col-span-1 flex items-center justify-center"},xs={class:"lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3"},I=200,ys={__name:"WorkspaceDashboard",props:{workspaceId:{type:Number,required:!0},period:{type:String,required:!0},data:{type:Object,default:null}},setup(a){const h=a,n=P(()=>({day:G,week:Kt,month:wa,year:rs})[h.period]||G),g=P(()=>{var _;const t=(_=h.data)==null?void 0:_.lifeMirror;if(!t)return[];const y=(t.spheres||[]).map(f=>({name:f.name,total:f.tasks_total||0,done:f.tasks_done||0,color:f.color})),u=(t.missing_spheres||[]).map(f=>({name:f.name,total:0,done:0,color:f.color}));return[...y,...u]}),i=P(()=>{const t=g.value.map(y=>y.color).filter(Boolean);return t.length>0?t:["#6366f1","#8b5cf6","#ec4899","#10b981"]}),x=j(0);let m=null;const v=P(()=>i.value[x.value]||"#6366f1");Z(()=>{m=setInterval(()=>{x.value=(x.value+1)%i.value.length},2e3)}),oe(()=>{m&&clearInterval(m)});const l=P(()=>{const y=I,u=5,_=Math.floor(y/40);let f=`M 0 ${u}`;for(let o=0;o<_;o++){const L=o*40;f+=` L ${L+12} ${u}`,f+=` L ${L+16} ${u+4.5*.4}`,f+=` L ${L+20} ${u-4.5}`,f+=` L ${L+24} ${u+4.5*.7}`,f+=` L ${L+28} ${u}`,f+=` L ${L+40} ${u}`}return f});return(t,y)=>{var u,_,f,o,L,A,z;return(u=a.data)!=null&&u.loading?(s(),r("div",os,[e("div",ls,[e("div",ds,[(s(),r("svg",{class:"absolute inset-0 w-full h-full",preserveAspectRatio:"none",viewBox:`0 0 ${I} 10`},[e("path",{d:l.value,fill:"none",stroke:v.value,"stroke-width":"2","stroke-linecap":"round",class:"loading-pulse-line"},null,8,is)],8,ns))]),y[0]||(y[0]=e("div",{class:"text-center space-y-2"},[e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Анализирую твою жизнь... "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Подожди немного, собираю данные по всем сферам жизни и считаю баланс ")],-1))])])):(_=a.data)!=null&&_.lifeMirror?(s(),r($,{key:2},[V(ze,{message:a.data.aiMessage,loading:a.data.aiLoading,class:"mb-6"},null,8,["message","loading"]),e("div",us,[e("div",gs,[V(Te,{spheres:g.value,"balance-index":((f=a.data.lifeMirror)==null?void 0:f.balance_index)||0,size:280},null,8,["spheres","balance-index"])]),e("div",xs,[(s(!0),r($,null,M((o=a.data.lifeMirror)==null?void 0:o.spheres,S=>(s(),W(Xe,{key:S.id,sphere:S},null,8,["sphere"]))),128))])]),(A=(L=a.data.lifeMirror)==null?void 0:L.missing_spheres)!=null&&A.length?(s(),W(ot,{key:0,spheres:a.data.lifeMirror.missing_spheres,class:"mb-6"},null,8,["spheres"])):w("",!0),(s(),W(le(n.value),{data:(z=a.data.lifeMirror)==null?void 0:z.period_data},null,8,["data"]))],64)):(s(),r("div",cs,[...y[1]||(y[1]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},"Нет данных",-1),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Создайте сферы жизни и задачи для аналитики",-1)])]))}}},hs=K(ys,[["__scopeId","data-v-ab56cbb9"]]),ms={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},bs={class:"max-w-4xl mx-auto px-4 sm:px-6 py-6"},ks={key:0,class:"text-center py-16"},vs={key:0,class:"mb-6"},fs={class:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide"},ps=["onClick"],_s={key:0,class:"text-base"},Ps={__name:"Dashboard",setup(a){const h=de(),n=J(),g=P(()=>n.selectedWorkspaces),i=j(null),x=P(()=>i.value&&h.dataByWorkspace[i.value]||null);return U(()=>g.value.map(m=>m.id),m=>{if(!m.length){i.value=null;return}(!i.value||!m.includes(i.value))&&(i.value=m[0])},{immediate:!0}),Z(()=>{h.fetchAllWorkspaces()}),(m,v)=>(s(),r("div",ms,[e("div",bs,[V(xe,{period:O(h).selectedPeriod,onChangePeriod:O(h).setPeriod},null,8,["period","onChangePeriod"]),g.value.length?(s(),r($,{key:1},[g.value.length>1?(s(),r("div",vs,[e("div",fs,[(s(!0),r($,null,M(g.value,l=>(s(),r("button",{key:l.id,onClick:t=>i.value=l.id,class:Y(["flex items-center gap-1.5 px-4 py-2 text-sm font-medium rounded-xl whitespace-nowrap transition-all duration-200",[i.value===l.id?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm ring-1 ring-gray-200 dark:ring-gray-700":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800/50"]])},[l.emoji?(s(),r("span",_s,d(l.emoji),1)):w("",!0),e("span",null,d(l.name),1)],10,ps))),128))])])):w("",!0),i.value?(s(),W(hs,{key:i.value,"workspace-id":i.value,period:O(h).selectedPeriod,data:x.value},null,8,["workspace-id","period","data"])):w("",!0)],64)):(s(),r("div",ks,[...v[0]||(v[0]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},"Нет данных",-1),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Выберите workspace для просмотра аналитики",-1)])]))])]))}};export{Ps as default};
