import{i as W,r as b,s as I,c as s,o as a,a as e,w as F,b as x,d as S,v as U,t as p,u as z,k as B,D as N,e as R,F as G,z as H,p as E,J as L,G as j,j as J,B as K,l as D}from"./index-ZxFSRklB.js";import{u as A}from"./workspace-B9rqsI10.js";const P={class:"space-y-6"},Q={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},X={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Y={key:1,class:"text-green-600 dark:text-green-400 text-sm bg-green-50 dark:bg-green-900/20 p-3 rounded-lg"},Z=["disabled"],ee={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-red-200 dark:border-red-900/50 p-6"},te=["disabled"],re={__name:"GeneralTab",props:{workspace:{type:Object,required:!0}},setup($){const k=$,T=W(),C=A(),m=b({name:"",description:""}),g=b(!1),v=b(!1),u=b(""),w=b("");I(()=>{k.workspace&&(m.value.name=k.workspace.name||"",m.value.description=k.workspace.description||"")});const i=async()=>{var l,r;u.value="",w.value="",g.value=!0;try{await C.updateWorkspace(k.workspace.id,m.value),w.value="Настройки сохранены"}catch(_){u.value=((r=(l=_.response)==null?void 0:l.data)==null?void 0:r.message)||"Ошибка сохранения"}finally{g.value=!1}},f=async()=>{var l,r,_;if(confirm(`Удалить пространство "${(l=k.workspace)==null?void 0:l.name}"? Это действие необратимо.`)){v.value=!0;try{await C.deleteWorkspace(k.workspace.id),T.push("/")}catch(h){u.value=((_=(r=h.response)==null?void 0:r.data)==null?void 0:_.message)||"Ошибка удаления"}finally{v.value=!1}}};return(l,r)=>(a(),s("div",P,[e("div",Q,[r[4]||(r[4]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Основные",-1)),e("form",{onSubmit:F(i,["prevent"]),class:"space-y-4"},[e("div",null,[r[2]||(r[2]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Название ",-1)),S(e("input",{"onUpdate:modelValue":r[0]||(r[0]=_=>m.value.name=_),type:"text",class:"input",required:""},null,512),[[U,m.value.name]])]),e("div",null,[r[3]||(r[3]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Описание ",-1)),S(e("textarea",{"onUpdate:modelValue":r[1]||(r[1]=_=>m.value.description=_),class:"input",rows:"3",placeholder:"Описание пространства (необязательно)"},null,512),[[U,m.value.description]])]),u.value?(a(),s("div",X,p(u.value),1)):x("",!0),w.value?(a(),s("div",Y,p(w.value),1)):x("",!0),e("button",{type:"submit",disabled:g.value,class:"btn btn-primary"},p(g.value?"Сохранение...":"Сохранить"),9,Z)],32)]),e("div",ee,[r[5]||(r[5]=e("h2",{class:"text-lg font-semibold text-red-600 dark:text-red-400 mb-2"},"Опасная зона",-1)),r[6]||(r[6]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Удаление пространства приведёт к удалению всех задач, проектов и данных. ",-1)),e("button",{onClick:f,disabled:v.value,class:"px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-800 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors"},p(v.value?"Удаление...":"Удалить пространство"),9,te)])]))}},ae={class:"space-y-6"},se={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},oe=["disabled"],le={key:0,class:"mt-3 text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},ne={key:1,class:"mt-3 text-green-600 dark:text-green-400 text-sm bg-green-50 dark:bg-green-900/20 p-3 rounded-lg"},de={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},ie={class:"p-4 border-b border-gray-200 dark:border-gray-700"},ue={class:"text-lg font-semibold text-gray-900 dark:text-white"},me={key:0,class:"text-sm font-normal text-gray-500 dark:text-gray-400"},ce={key:0,class:"p-8 text-center"},be={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},ge={class:"flex items-center space-x-3"},ve={class:"w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-sm font-medium text-primary-700 dark:text-primary-400"},pe={class:"text-sm font-medium text-gray-900 dark:text-white"},ye={class:"text-xs text-gray-500 dark:text-gray-400"},xe={class:"flex items-center space-x-3"},ke=["onClick"],fe={__name:"MembersTab",props:{workspace:{type:Object,required:!0},canManage:{type:Boolean,default:!1}},setup($){const k=$,T=A(),C=z(),m=b([]),g=b(!0),v=b(!1),u=b(""),w=b(""),i=b({email:"",role:"member"}),f=B(()=>{var c;return(c=C.user)==null?void 0:c.id}),l=async()=>{var c;if((c=k.workspace)!=null&&c.id){g.value=!0;try{const o=await T.fetchMembers(k.workspace.id);m.value=o||[]}catch(o){console.error("Error loading members:",o)}finally{g.value=!1}}},r=async()=>{var c,o;u.value="",w.value="",v.value=!0;try{await T.addMember(k.workspace.id,i.value),w.value=`${i.value.email} добавлен`,i.value.email="",await l()}catch(y){u.value=((o=(c=y.response)==null?void 0:c.data)==null?void 0:o.message)||"Ошибка добавления"}finally{v.value=!1}},_=async c=>{if(confirm(`Удалить ${c.name} из пространства?`))try{await T.removeMember(k.workspace.id,c.id),await l()}catch(o){console.error("Error removing member:",o)}},h=c=>c?c.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2):"?",M=c=>{const o={owner:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",admin:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",member:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",viewer:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"};return o[c]||o.member},V=c=>({owner:"Владелец",admin:"Админ",member:"Участник",viewer:"Просмотр"})[c]||c;return I(l),(c,o)=>(a(),s("div",ae,[$.canManage?(a(),s("div",se,[o[3]||(o[3]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Добавить участника",-1)),e("form",{onSubmit:F(r,["prevent"]),class:"flex flex-col sm:flex-row gap-3"},[S(e("input",{"onUpdate:modelValue":o[0]||(o[0]=y=>i.value.email=y),type:"email",class:"input flex-1",placeholder:"Email пользователя",required:""},null,512),[[U,i.value.email]]),S(e("select",{"onUpdate:modelValue":o[1]||(o[1]=y=>i.value.role=y),class:"input w-full sm:w-36"},[...o[2]||(o[2]=[e("option",{value:"viewer"},"Просмотр",-1),e("option",{value:"member"},"Участник",-1),e("option",{value:"admin"},"Админ",-1)])],512),[[N,i.value.role]]),e("button",{type:"submit",disabled:v.value,class:"btn btn-primary whitespace-nowrap"},p(v.value?"...":"Добавить"),9,oe)],32),u.value?(a(),s("div",le,p(u.value),1)):x("",!0),w.value?(a(),s("div",ne,p(w.value),1)):x("",!0)])):x("",!0),e("div",de,[e("div",ie,[e("h2",ue,[o[4]||(o[4]=R(" Участники ",-1)),m.value.length>0?(a(),s("span",me," ("+p(m.value.length)+") ",1)):x("",!0)])]),g.value?(a(),s("div",ce,[...o[5]||(o[5]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(a(),s("div",be,[(a(!0),s(G,null,H(m.value,y=>{var q,d,t,n,O;return a(),s("div",{key:y.id,class:"flex items-center justify-between p-4"},[e("div",ge,[e("div",ve,p(h(y.name)),1),e("div",null,[e("p",pe,p(y.name),1),e("p",ye,p(y.email),1)])]),e("div",xe,[e("span",{class:E(["px-2 py-1 text-xs font-medium rounded-full",M(((q=y.pivot)==null?void 0:q.role)||(y.id===((d=$.workspace)==null?void 0:d.owner_id)?"owner":"member"))])},p(V(((t=y.pivot)==null?void 0:t.role)||(y.id===((n=$.workspace)==null?void 0:n.owner_id)?"owner":"member"))),3),$.canManage&&y.id!==((O=$.workspace)==null?void 0:O.owner_id)&&y.id!==f.value?(a(),s("button",{key:0,onClick:rt=>_(y),class:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors",title:"Удалить"},[...o[6]||(o[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ke)):x("",!0)])])}),128))]))])]))}},we={key:0,class:"text-center py-12"},_e={key:1,class:"space-y-6"},he={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},$e={key:0},Ce={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Me=["disabled"],Se={key:1},Te={class:"flex items-center justify-between mb-4"},je={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},Be={class:"text-right"},Ue={class:"text-sm text-gray-500 dark:text-gray-400"},Ve=["disabled"],qe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Ee={key:0,class:"text-center py-6"},Fe={key:0,class:"text-sm text-gray-400 dark:text-gray-500 mt-1"},Le={key:1,class:"text-center py-6"},De=["disabled"],Re={key:2},Ie={class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4"},ze=["href"],Ae={key:3},Oe={class:"flex items-center justify-between"},We={key:0,class:"ml-4"},Ne={class:"flex items-center justify-between"},Ge={key:1,class:"ml-4"},He={class:"flex items-center justify-between"},Je={key:2,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Ke={key:3,class:"text-green-600 dark:text-green-400 text-sm bg-green-50 dark:bg-green-900/20 p-3 rounded-lg"},Pe={class:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700"},Qe=["disabled"],Xe={__name:"TelegramTab",props:{workspace:{type:Object,required:!0}},setup($){const k=$,T=z(),C=b(!0),m=b(!1),g=b(!1),v=b(""),u=b(""),w=b(""),i=b(""),f=b({is_configured:!1,bot_username:null,is_active:!1,subscribers_count:0}),l=b({bot_configured:!1,bot_username:null,subscribed:!1,is_active:!1,connect_url:null}),r=b({morning_digest_time:"08:00",reminder_minutes_before:30,notify_overdue:!0,notify_morning_digest:!0,notify_reminders:!0}),_=B(()=>{var d,t;return((d=k.workspace)==null?void 0:d.owner_id)===((t=T.user)==null?void 0:t.id)}),h=B(()=>{var d;return(d=k.workspace)==null?void 0:d.id}),M=async()=>{if(!h.value){C.value=!1;return}C.value=!0;try{const t=(await j.get(`/v1/workspaces/${h.value}/telegram-subscription`)).data;if(l.value={bot_configured:t.bot_configured,bot_username:t.bot_username||null,subscribed:t.subscribed||!1,is_active:t.is_active||!1,connect_url:t.connect_url||null},t.subscribed&&t.is_active&&(r.value={morning_digest_time:t.morning_digest_time||"08:00",reminder_minutes_before:t.reminder_minutes_before||30,notify_overdue:t.notify_overdue??!0,notify_morning_digest:t.notify_morning_digest??!0,notify_reminders:t.notify_reminders??!0}),_.value)try{const n=await j.get(`/v1/workspaces/${h.value}/telegram-settings`);f.value=n.data}catch{}}catch(d){console.error("Error loading telegram data:",d)}finally{C.value=!1}},V=async()=>{var d,t;v.value="",m.value=!0;try{await j.post(`/v1/workspaces/${h.value}/telegram-settings`,{bot_token:i.value}),i.value="",await M()}catch(n){v.value=((t=(d=n.response)==null?void 0:d.data)==null?void 0:t.message)||"Ошибка подключения бота"}finally{m.value=!1}},c=async()=>{var d,t;if(confirm("Отключить Telegram бота? Все подписки будут удалены.")){m.value=!0;try{await j.delete(`/v1/workspaces/${h.value}/telegram-settings`),await M()}catch(n){v.value=((t=(d=n.response)==null?void 0:d.data)==null?void 0:t.message)||"Ошибка отключения"}finally{m.value=!1}}},o=async()=>{var d,t;u.value="",g.value=!0;try{await j.post(`/v1/workspaces/${h.value}/telegram-subscription`),await M()}catch(n){u.value=((t=(d=n.response)==null?void 0:d.data)==null?void 0:t.message)||"Ошибка подписки"}finally{g.value=!1}},y=async()=>{var d,t;u.value="",w.value="",g.value=!0;try{await j.put(`/v1/workspaces/${h.value}/telegram-subscription`,r.value),w.value="Настройки сохранены",setTimeout(()=>{w.value=""},3e3)}catch(n){u.value=((t=(d=n.response)==null?void 0:d.data)==null?void 0:t.message)||"Ошибка сохранения"}finally{g.value=!1}},q=async()=>{var d,t;if(confirm("Отключить Telegram уведомления?")){g.value=!0;try{await j.delete(`/v1/workspaces/${h.value}/telegram-subscription`),await M()}catch(n){u.value=((t=(d=n.response)==null?void 0:d.data)==null?void 0:t.message)||"Ошибка отключения"}finally{g.value=!1}}};return I(M),(d,t)=>(a(),s("div",null,[C.value?(a(),s("div",we,[...t[7]||(t[7]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(a(),s("div",_e,[_.value?(a(),s("div",he,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Настройка бота",-1)),f.value.is_configured?(a(),s("div",Se,[e("div",Te,[e("div",null,[t[10]||(t[10]=e("div",{class:"flex items-center space-x-2"},[e("span",{class:"w-2 h-2 bg-green-500 rounded-full"}),e("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Бот подключен")],-1)),f.value.bot_username?(a(),s("p",je," @"+p(f.value.bot_username),1)):x("",!0)]),e("div",Be,[e("p",Ue," Подписчиков: "+p(f.value.subscribers_count||0),1)])]),e("button",{onClick:c,disabled:m.value,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300"}," Отключить бота ",8,Ve)])):(a(),s("div",$e,[t[9]||(t[9]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},[R(" Создайте бота через "),e("a",{href:"https://t.me/BotFather",target:"_blank",class:"text-primary-600 dark:text-primary-400 hover:underline"},"@BotFather"),R(" и вставьте токен. ")],-1)),e("form",{onSubmit:F(V,["prevent"]),autocomplete:"off",class:"space-y-4"},[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Токен бота ",-1)),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>i.value=n),type:"text",name:"bot_token_nofill",autocomplete:"new-password",readonly:"",onFocus:t[1]||(t[1]=n=>n.target.removeAttribute("readonly")),class:"input",placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",required:""},null,544),[[U,i.value]])]),v.value?(a(),s("div",Ce,p(v.value),1)):x("",!0),e("button",{type:"submit",disabled:m.value,class:"btn btn-primary"},p(m.value?"Подключение...":"Подключить бота"),9,Me)],32)]))])):x("",!0),e("div",qe,[t[24]||(t[24]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Моя подписка",-1)),l.value.bot_configured?l.value.subscribed?l.value.is_active?(a(),s("div",Ae,[t[23]||(t[23]=e("div",{class:"flex items-center space-x-2 mb-6"},[e("span",{class:"w-2 h-2 bg-green-500 rounded-full"}),e("span",{class:"text-sm text-green-700 dark:text-green-400 font-medium"},"Telegram подключен")],-1)),e("form",{onSubmit:F(y,["prevent"]),class:"space-y-4"},[e("div",Oe,[t[18]||(t[18]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Утренний дайджест"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Список задач на сегодня")],-1)),S(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>r.value.notify_morning_digest=n),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"},null,512),[[L,r.value.notify_morning_digest]])]),r.value.notify_morning_digest?(a(),s("div",We,[t[19]||(t[19]=e("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-1"},"Время отправки",-1)),S(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>r.value.morning_digest_time=n),type:"time",class:"input w-32"},null,512),[[U,r.value.morning_digest_time]])])):x("",!0),e("div",Ne,[t[20]||(t[20]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Напоминания"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Перед началом задачи")],-1)),S(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>r.value.notify_reminders=n),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"},null,512),[[L,r.value.notify_reminders]])]),r.value.notify_reminders?(a(),s("div",Ge,[t[21]||(t[21]=e("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-1"},"За сколько минут",-1)),S(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>r.value.reminder_minutes_before=n),type:"number",min:"5",max:"120",class:"input w-32"},null,512),[[U,r.value.reminder_minutes_before,void 0,{number:!0}]])])):x("",!0),e("div",He,[t[22]||(t[22]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Просроченные задачи"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Ежедневно в 09:00")],-1)),S(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>r.value.notify_overdue=n),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"},null,512),[[L,r.value.notify_overdue]])]),u.value?(a(),s("div",Je,p(u.value),1)):x("",!0),w.value?(a(),s("div",Ke,p(w.value),1)):x("",!0),e("div",Pe,[e("button",{type:"submit",disabled:g.value,class:"btn btn-primary"},p(g.value?"Сохранение...":"Сохранить"),9,Qe),e("button",{type:"button",onClick:q,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300"}," Отключить Telegram ")])],32)])):(a(),s("div",Re,[e("div",Ie,[t[16]||(t[16]=e("p",{class:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2"}," Перейдите по ссылке и нажмите Start: ",-1)),e("a",{href:l.value.connect_url,target:"_blank",class:"inline-flex items-center space-x-2 text-primary-600 dark:text-primary-400 hover:underline font-medium"},[...t[15]||(t[15]=[e("span",null,"Открыть в Telegram",-1),e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,ze)]),t[17]||(t[17]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," После нажатия Start в Telegram, обновите эту страницу. ",-1)),e("div",{class:"mt-4 flex space-x-3"},[e("button",{onClick:M,class:"btn btn-secondary text-sm"}," Обновить статус "),e("button",{onClick:q,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300"}," Отменить ")])])):(a(),s("div",Le,[t[14]||(t[14]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," Подключите Telegram для получения уведомлений и управления задачами. ",-1)),e("button",{onClick:o,disabled:g.value,class:"btn btn-primary"},p(g.value?"Подключение...":"Подключить Telegram"),9,De)])):(a(),s("div",Ee,[t[12]||(t[12]=e("svg",{class:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),t[13]||(t[13]=e("p",{class:"text-gray-500 dark:text-gray-400"}," Telegram бот ещё не настроен для этого пространства. ",-1)),_.value?x("",!0):(a(),s("p",Fe," Обратитесь к владельцу пространства. "))]))])]))]))}},Ye={class:"p-4 lg:p-8"},Ze={class:"max-w-3xl mx-auto"},et={class:"border-b border-gray-200 dark:border-gray-700 mb-6"},tt={class:"flex space-x-6"},ot={__name:"Settings",setup($){const k=J(),T=W(),C=A(),m=z(),g=B(()=>parseInt(k.params.id)),v=B(()=>C.workspaces.find(f=>f.id===g.value)),u=B(()=>{var _,h,M;const f=v.value,l=(_=m.user)==null?void 0:_.id;if(!f||!l)return!1;if(f.owner_id===l)return!0;const r=(h=f.members)==null?void 0:h.find(V=>V.id===l);return((M=r==null?void 0:r.pivot)==null?void 0:M.role)==="admin"}),w=B(()=>u.value?"general":"members"),i=b(k.query.tab||w.value);return K(i,f=>{T.replace({query:{...k.query,tab:f}})}),(f,l)=>(a(),s("div",Ye,[e("div",Ze,[l[3]||(l[3]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-6"}," Настройки пространства ",-1)),e("div",et,[e("nav",tt,[u.value?(a(),s("button",{key:0,onClick:l[0]||(l[0]=r=>i.value="general"),class:E(["pb-3 text-sm font-medium border-b-2 transition-colors",i.value==="general"?"border-primary-600 text-primary-600 dark:text-primary-400 dark:border-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"])}," Общие ",2)):x("",!0),e("button",{onClick:l[1]||(l[1]=r=>i.value="members"),class:E(["pb-3 text-sm font-medium border-b-2 transition-colors",i.value==="members"?"border-primary-600 text-primary-600 dark:text-primary-400 dark:border-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"])}," Участники ",2),e("button",{onClick:l[2]||(l[2]=r=>i.value="telegram"),class:E(["pb-3 text-sm font-medium border-b-2 transition-colors",i.value==="telegram"?"border-primary-600 text-primary-600 dark:text-primary-400 dark:border-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"])}," Telegram ",2)])]),i.value==="general"&&u.value?(a(),D(re,{key:0,workspace:v.value},null,8,["workspace"])):x("",!0),i.value==="members"?(a(),D(fe,{key:1,workspace:v.value,"can-manage":u.value},null,8,["workspace","can-manage"])):x("",!0),i.value==="telegram"?(a(),D(Xe,{key:2,workspace:v.value},null,8,["workspace"])):x("",!0)])]))}};export{ot as default};
