import{c as a,a as r,o as n,r as Y,k as v,z as je,s as Oe,x as He,b as c,f as $,p as g,y as B,t as d,F as b,C as h,D as W,j as Be,w as k,e as Ee}from"./index-owk3ccbe.js";import{u as Ne,T as Ae,b as ne}from"./TaskModal-DtNVda3W.js";import{g as ie,c as de,d as x,T as ze}from"./TaskView-CCaMVbTi.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Pe}from"./PlusIcon-BmINO4mE.js";import"./workspace-cG7lXp_O.js";import"./projects-K0AL-J0G.js";function Fe(S,E){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function Ie(S,E){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}var le={exports:{}};(function(S,E){(function(f,u){S.exports=u()})(de,function(){return function(f,u){u.prototype.isSameOrAfter=function(m,_){return this.isSame(m,_)||this.isAfter(m,_)}}})})(le);var Ve=le.exports;const We=ie(Ve);var ue={exports:{}};(function(S,E){(function(f,u){S.exports=u()})(de,function(){return function(f,u){u.prototype.isSameOrBefore=function(m,_){return this.isSame(m,_)||this.isBefore(m,_)}}})})(ue);var Ge=ue.exports;const Ue=ie(Ge),qe={class:"p-2 sm:p-4 lg:p-8"},Je={class:"max-w-7xl mx-auto"},Ke={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4 lg:mb-6"},Qe={class:"flex items-center space-x-1 sm:space-x-2 mt-3 lg:mt-0 overflow-x-auto pb-2 lg:pb-0"},Xe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-3 sm:p-4 mb-4 lg:mb-6"},Ze={class:"flex items-center justify-between"},Re={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white text-center px-2"},et={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},tt={class:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700"},rt={class:"grid grid-cols-7"},ot=["onClick"],st={class:"flex flex-col h-full"},at={class:"flex justify-between items-start mb-1"},nt={key:0,class:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-semibold bg-primary-600 text-white rounded-full"},it={key:0,class:"flex-1 flex items-center justify-center"},dt=["onClick"],lt={key:0,class:"hidden lg:block absolute left-1/2 -translate-x-1/2 bottom-full mb-2 z-50 pointer-events-none opacity-0 group-hover/day:opacity-100 transition-opacity duration-150"},ut={class:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg shadow-lg px-3 py-2 whitespace-nowrap max-w-[250px]"},ct={key:0,class:"text-gray-400 text-[10px] pt-1"},mt={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},gt={class:"hidden lg:block overflow-x-auto"},yt={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},pt={class:"font-semibold"},bt={class:"text-xs mt-1"},ht={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},xt={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},vt={class:"text-xs text-gray-500 dark:text-gray-400"},ft={class:"relative"},_t={class:"absolute inset-0"},kt=["onClick"],wt={class:"flex items-start gap-1"},Mt=["onClick"],Tt={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Yt={class:"flex-1 min-w-0"},Ct={class:"font-medium truncate"},Dt={key:0,class:"text-[10px] opacity-75 mt-0.5"},$t={key:0},St={key:1},jt={key:2},Ot={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},Ht={class:"space-y-1 min-w-0"},Bt=["onClick"],Et={class:"flex items-center gap-1"},Nt=["onClick"],At={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},zt={class:"font-medium truncate block"},Lt={class:"lg:hidden overflow-x-auto"},Pt={class:"flex min-w-max"},Ft={class:"mb-3 sticky top-0 bg-inherit pb-2 border-b border-gray-200 dark:border-gray-700"},It={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},Vt={class:"space-y-2"},Wt=["onClick"],Gt={class:"flex items-start gap-2"},Ut=["onClick"],qt={key:0,class:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Jt={class:"flex-1 min-w-0"},Kt={class:"font-medium text-sm mb-1"},Qt={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-1 ml-6"},Xt={key:0},Zt={key:1},Rt={key:2},er={key:0,class:"text-xs text-gray-400 dark:text-gray-500 text-center py-4"},tr={key:2,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},rr={class:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700"},or={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white"},sr={class:"hidden lg:block overflow-x-auto"},ar={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},nr={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},ir={class:"text-xs text-gray-500 dark:text-gray-400"},dr={class:"relative"},lr={class:"relative"},ur={class:"absolute inset-0"},cr=["onClick"],mr={class:"flex items-start gap-2"},gr=["onClick"],yr={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pr={class:"flex-1 min-w-0"},br={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},hr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},xr={class:"flex flex-wrap items-center gap-2 mt-2"},vr={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},fr={key:0},_r={key:1},kr={key:2},wr={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},Mr={class:"p-3"},Tr={class:"space-y-2"},Yr=["onClick"],Cr={class:"flex items-start gap-2"},Dr=["onClick"],$r={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Sr={class:"flex-1 min-w-0"},jr={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},Or={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},Hr={class:"flex flex-wrap items-center gap-2 mt-2"},Br={class:"lg:hidden p-3 sm:p-4"},Er={class:"space-y-2 sm:space-y-3"},Nr=["onClick"],Ar={class:"flex items-start gap-3"},zr=["onClick"],Lr={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pr={class:"flex-1 min-w-0"},Fr={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},Ir={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},Vr={class:"flex flex-wrap items-center gap-2 mt-2"},Wr={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},Gr={key:0},Ur={key:1},qr={key:2},Jr={key:0,class:"text-center py-8 sm:py-12 text-gray-500 dark:text-gray-400 text-sm sm:text-base"},Kr={__name:"Calendar",setup(S){x.extend(We),x.extend(Ue),x.locale("ru");const E=Be(),f=Ne(),u=Y(x());v(()=>f.loading);const m=Y("month");je(()=>E.query.view,o=>{o&&["day","week","month"].includes(o)&&(m.value=o)},{immediate:!0});const _=Y(!1),L=Y(!1),T=Y(null),P=Y(""),F=Y(""),G=Y(x()),Z=v(()=>{if(m.value==="month")return{start:u.value.startOf("month").subtract(7,"days").format("YYYY-MM-DD"),end:u.value.endOf("month").add(7,"days").format("YYYY-MM-DD")};if(m.value==="week"){const o=u.value.startOf("week");return{start:o.format("YYYY-MM-DD"),end:o.add(6,"day").format("YYYY-MM-DD")}}else{const o=u.value.format("YYYY-MM-DD");return{start:o,end:o}}}),C=v(()=>f.calendarTasks(Z.value.start,Z.value.end)),U=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],ce=v(()=>u.value.format("MMMM")),me=v(()=>u.value.format("YYYY"));v(()=>{if(m.value!=="month"||C.value.length===0)return 0;const o=u.value.startOf("month"),t=u.value.endOf("month");return C.value.filter(i=>{if(!i.due_date||i.status==="completed")return!1;const s=x(i.due_date);return s.isValid()?s.isSameOrAfter(o,"day")&&s.isSameOrBefore(t,"day"):!1}).length});const ge=v(()=>{if(m.value==="month")return`${ce.value} ${me.value}`;if(m.value==="week"){const o=u.value.startOf("week"),t=o.add(6,"day");return o.month()===t.month()?`${o.format("D")} - ${t.format("D MMMM YYYY")}`:`${o.format("D MMM")} - ${t.format("D MMM YYYY")}`}else return u.value.format("D MMMM YYYY")}),N=v(()=>{const o=u.value.startOf("week"),t=[];for(let e=0;e<7;e++){const i=o.add(e,"day"),s=i.format("YYYY-MM-DD"),l=C.value.filter(p=>p.due_date&&x(p.due_date).format("YYYY-MM-DD")===s&&p.status!=="completed");t.push({day:i.date(),monthName:i.format("MMM"),date:s,isToday:i.isSame(x(),"day"),tasks:l})}return t}),I=v(()=>{const o=u.value.format("YYYY-MM-DD");return C.value.filter(t=>t.due_date&&x(t.due_date).format("YYYY-MM-DD")===o&&t.status!=="completed")}),R=v(()=>I.value.filter(o=>o.estimated_time||o.end_time)),ye=v(()=>I.value.filter(o=>!o.estimated_time&&!o.end_time)),ee=o=>{if(!o||o.length===0)return Array.from({length:24},(s,l)=>l);let t=23,e=0;o.forEach(s=>{const l=s.estimated_time||s.end_time,p=s.end_time||s.estimated_time;if(l){const w=y(l),[M]=w.split(":").map(Number);t=Math.min(t,M),e=Math.max(e,M)}if(p){const w=y(p),[M]=w.split(":").map(Number);t=Math.min(t,M),e=Math.max(e,M)}}),t=Math.max(0,Math.floor(t)-1),e=Math.min(23,Math.ceil(e)+1);const i=[];for(let s=t;s<=e;s++)i.push(s);return i.length>0?i:Array.from({length:24},(s,l)=>l)},A=v(()=>ee(R.value)),z=v(()=>{const o=N.value.flatMap(t=>re(t.date));return ee(o)}),pe=v(()=>{const o=[],t=u.value.startOf("month"),e=u.value.endOf("month"),i=t.day()===0?6:t.day()-1;for(let l=i-1;l>=0;l--){const p=t.subtract(l+1,"day");o.push(q(p,!1))}for(let l=0;l<e.date();l++){const p=t.add(l,"day");o.push(q(p,!0))}const s=42-o.length;for(let l=0;l<s;l++){const p=e.add(l+1,"day");o.push(q(p,!1))}return o}),q=(o,t)=>{const e=o.format("YYYY-MM-DD"),i=C.value.filter(s=>s.due_date&&x(s.due_date).format("YYYY-MM-DD")===e&&s.status!=="completed");return{day:o.date(),date:e,currentMonth:t,isToday:o.isSame(x(),"day"),taskCount:i.length,tasks:i}},be=()=>{m.value==="month"?u.value=u.value.subtract(1,"month"):m.value==="week"?u.value=u.value.subtract(1,"week"):u.value=u.value.subtract(1,"day")},he=()=>{m.value==="month"?u.value=u.value.add(1,"month"):m.value==="week"?u.value=u.value.add(1,"week"):u.value=u.value.add(1,"day")},y=o=>o?/^\d{2}:\d{2}$/.test(o)?o:o.substring(0,5):"",te=o=>`${o.toString().padStart(2,"0")}:00`,re=o=>C.value.filter(t=>t.due_date&&x(t.due_date).format("YYYY-MM-DD")===o&&t.status!=="completed"&&(t.estimated_time||t.end_time)),xe=o=>C.value.filter(t=>t.due_date&&x(t.due_date).format("YYYY-MM-DD")===o&&t.status!=="completed"&&!t.estimated_time&&!t.end_time),V=(o=null)=>{if(!o||o.length===0)return null;const t=G.value,e=t.hour(),i=t.minute(),s=o[0],l=o[o.length-1];if(e<s||e>l)return null;const p=64,w=e*60+i,M=s*60,D=(w-M)/60*p;return Math.max(0,D)},oe=(o,t=null)=>{if(!o.estimated_time&&!o.end_time)return{display:"none"};const e=o.estimated_time||o.end_time,i=o.end_time||o.estimated_time;if(!e||!i)return{display:"none"};const s=y(e),l=y(i),[p,w]=s.split(":").map(Number),[M,D]=l.split(":").map(Number),Ye=t&&t.length>0?t[0]:0,ae=64,Q=p*60+w,Ce=Ye*60,De=(Q-Ce)/60*ae;let X=M*60+D;X<Q&&(X+=24*60);const $e=(X-Q)/60*ae,Se=Math.max($e,40);return{top:`${Math.max(0,De)}px`,height:`${Se}px`}},se=o=>{if(!o.estimated_time||!o.end_time)return 0;const t=y(o.estimated_time),e=y(o.end_time);if(!t||!e)return 0;const[i,s]=t.split(":").map(Number),[l,p]=e.split(":").map(Number),w=i*60+s;let D=l*60+p-w;return D<0&&(D+=24*60),D/60},j=o=>{if(o.status==="completed")return"bg-gray-100 dark:bg-gray-700";const t=se(o);return t===0||t<1?"bg-gradient-to-l from-white via-green-50 to-green-100 dark:from-gray-800 dark:via-green-900/20 dark:to-green-900/40":t>=1&&t<2?"bg-gradient-to-l from-white via-orange-50 to-orange-100 dark:from-gray-800 dark:via-orange-900/20 dark:to-orange-900/40":t>=2?"bg-gradient-to-l from-white via-red-50 to-red-100 dark:from-gray-800 dark:via-red-900/20 dark:to-red-900/40":"bg-white dark:bg-gray-800"},ve=o=>{const t=[];if(o.isToday&&t.push("ring-2 ring-inset ring-primary-500"),!o.currentMonth)return t.push("bg-gray-50/50 dark:bg-gray-900/30"),t.join(" ");if(o.taskCount===0)return t.push("hover:bg-gray-50 dark:hover:bg-gray-700/50"),t.join(" ");let e=0;return o.tasks.forEach(i=>{const s=se(i);s>e&&(e=s)}),e>=2?t.push("bg-red-50/70 dark:bg-red-900/15 hover:bg-red-100/80 dark:hover:bg-red-900/25"):e>=1?t.push("bg-orange-50/70 dark:bg-orange-900/15 hover:bg-orange-100/80 dark:hover:bg-orange-900/25"):t.push("bg-green-50/70 dark:bg-green-900/15 hover:bg-green-100/80 dark:hover:bg-green-900/25"),t.join(" ")},J=o=>({high:"Высокий",medium:"Средний",low:"Низкий",urgent:"Срочный"})[o]||o,O=o=>{T.value=o,F.value="",L.value=!0},fe=()=>{L.value=!1,_.value=!0},_e=async o=>{try{await f.completeTask(o.id)}catch(t){console.error("Error completing task:",t)}},ke=o=>{T.value=null,F.value=o,_.value=!0},we=o=>{u.value=x(o),m.value="day"},Me=async o=>{var t,e,i,s;P.value="";try{T.value?await f.updateTask(T.value.id,o):await f.createTask(o),_.value=!1,T.value=null}catch(l){console.error("Error saving task:",l);let p="Ошибка при сохранении задачи";(e=(t=l.response)==null?void 0:t.data)!=null&&e.errors?p=Object.values(l.response.data.errors).flat().join(", "):(s=(i=l.response)==null?void 0:i.data)!=null&&s.message&&(p=l.response.data.message),P.value=p}},Te=()=>{_.value=!1,T.value=null,F.value="",P.value=""},H=async o=>{try{o.status==="completed"?await f.updateTask(o.id,{status:"next_action"}):await f.completeTask(o.id)}catch(t){console.error("Error toggling task:",t)}};let K=null;return Oe(()=>{G.value=x(),K=setInterval(()=>{G.value=x()},6e4)}),He(()=>{K&&clearInterval(K)}),(o,t)=>(n(),a("div",qe,[r("div",Je,[r("div",Ke,[t[4]||(t[4]=r("div",null,[r("h1",{class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Календарь")],-1)),r("div",Qe,[r("button",{onClick:t[0]||(t[0]=e=>m.value="day"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="day"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," День ",2),r("button",{onClick:t[1]||(t[1]=e=>m.value="week"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="week"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Неделя ",2),r("button",{onClick:t[2]||(t[2]=e=>m.value="month"),class:g(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="month"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Месяц ",2)])]),r("div",Xe,[r("div",Ze,[r("button",{onClick:be,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[$(B(Fe),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})]),r("h2",Re,d(ge.value),1),r("button",{onClick:he,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[$(B(Ie),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})])])]),m.value==="month"?(n(),a("div",et,[r("div",tt,[(n(),a(b,null,h(U,e=>r("div",{key:e,class:"text-center py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0"},d(e),1)),64))]),r("div",rt,[(n(!0),a(b,null,h(pe.value,(e,i)=>(n(),a("div",{key:i,onClick:s=>we(e.date),class:g(["group/day relative min-h-[60px] sm:min-h-[80px] lg:min-h-[100px] border-b border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-1 sm:p-2 cursor-pointer touch-manipulation transition-colors",ve(e)])},[r("div",st,[r("div",at,[r("span",{class:g(["text-xs sm:text-sm font-medium",{"text-gray-400 dark:text-gray-600":!e.currentMonth,"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-gray-100":e.currentMonth&&!e.isToday}])},d(e.day),3),e.taskCount>0?(n(),a("span",nt,d(e.taskCount),1)):c("",!0)]),e.taskCount===0&&e.currentMonth?(n(),a("div",it,[r("button",{onClick:k(s=>ke(e.date),["stop"]),class:"w-6 h-6 flex items-center justify-center rounded-full text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[$(B(Pe),{class:"w-4 h-4"})],8,dt)])):c("",!0)]),e.taskCount>0?(n(),a("div",lt,[r("div",ut,[(n(!0),a(b,null,h(e.tasks.slice(0,8),s=>(n(),a("div",{key:s.id,class:"truncate py-0.5"},d(s.title),1))),128)),e.tasks.length>8?(n(),a("div",ct," +"+d(e.tasks.length-8)+" ещё ",1)):c("",!0),t[5]||(t[5]=r("div",{class:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900 dark:border-t-gray-700"},null,-1))])])):c("",!0)],10,ot))),128))])])):c("",!0),m.value==="week"?(n(),a("div",mt,[r("div",gt,[r("div",yt,[t[6]||(t[6]=r("div",{class:"border-r border-gray-200 dark:border-gray-700"},null,-1)),(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["text-center py-3 text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[r("div",pt,d(U[i]),1),r("div",bt,d(e.day)+" "+d(e.monthName),1)],2))),128))]),r("div",ht,[r("div",xt,[(n(!0),a(b,null,h(z.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[r("span",vt,d(te(e)),1)]))),128))]),(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 relative",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[r("div",ft,[(n(!0),a(b,null,h(z.value,s=>(n(),a("div",{key:s,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),e.isToday&&V(z.value)?(n(),a("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:W({top:V(z.value)+"px"})},[...t[7]||(t[7]=[r("div",{class:"flex items-center"},[r("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),r("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):c("",!0),r("div",_t,[(n(!0),a(b,null,h(re(e.date),s=>(n(),a("div",{key:s.id,onClick:k(l=>O(s),["stop"]),class:g(["absolute left-1 right-1 rounded cursor-pointer p-1.5 text-xs touch-manipulation border-l-2 shadow-sm z-10",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":j(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]]),style:W(oe(s,z.value))},[r("div",wt,[r("button",{onClick:k(l=>H(s),["stop"]),class:g(["flex-shrink-0 w-3.5 h-3.5 mt-0.5 rounded border flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",Tt,[...t[8]||(t[8]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,Mt),r("div",Yt,[r("div",Ct,d(s.title),1),s.estimated_time||s.end_time?(n(),a("div",Dt,[s.estimated_time&&s.end_time?(n(),a("span",$t,d(y(s.estimated_time))+" - "+d(y(s.end_time)),1)):s.end_time?(n(),a("span",St," до "+d(y(s.end_time)),1)):s.estimated_time?(n(),a("span",jt,d(y(s.estimated_time)),1)):c("",!0)])):c("",!0)])])],14,kt))),128))])])],2))),128))]),r("div",Ot,[t[10]||(t[10]=r("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-2"},[r("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Без времени")],-1)),(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-2",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[r("div",Ht,[(n(!0),a(b,null,h(xe(e.date),s=>(n(),a("div",{key:s.id,onClick:k(l=>O(s),["stop"]),class:g(["p-1.5 rounded cursor-pointer text-xs touch-manipulation border-l-2 w-full max-w-full overflow-hidden",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":j(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[r("div",Et,[r("button",{onClick:k(l=>H(s),["stop"]),class:g(["flex-shrink-0 w-3.5 h-3.5 rounded border flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",At,[...t[9]||(t[9]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,Nt),r("div",zt,d(s.title),1)])],10,Bt))),128))])],2))),128))])]),r("div",Lt,[r("div",Pt,[(n(!0),a(b,null,h(N.value,(e,i)=>(n(),a("div",{key:i,class:g(["w-[280px] min-w-[280px] border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-3",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[r("div",Ft,[r("div",It,d(U[i]),1),r("span",{class:g(["text-base font-semibold",{"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-white":!e.isToday}])},d(e.day)+" "+d(e.monthName),3)]),r("div",Vt,[(n(!0),a(b,null,h(e.tasks,s=>(n(),a("div",{key:s.id,onClick:l=>O(s),class:g(["p-3 rounded-lg cursor-pointer touch-manipulation border-l-4",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":j(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[r("div",Gt,[r("button",{onClick:k(l=>H(s),["stop"]),class:g(["flex-shrink-0 w-4 h-4 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",s.status==="completed"?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[s.status==="completed"?(n(),a("svg",qt,[...t[11]||(t[11]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,Ut),r("div",Jt,[r("div",Kt,d(s.title),1)])]),s.estimated_time||s.end_time?(n(),a("div",Qt,[t[12]||(t[12]=Ee(" ⏱ ",-1)),s.estimated_time&&s.end_time?(n(),a("span",Xt,d(y(s.estimated_time))+" - "+d(y(s.end_time)),1)):s.estimated_time?(n(),a("span",Zt,d(y(s.estimated_time)),1)):s.end_time?(n(),a("span",Rt," до "+d(y(s.end_time)),1)):c("",!0)])):c("",!0)],10,Wt))),128)),e.tasks.length===0?(n(),a("div",er," Нет задач ")):c("",!0)])],2))),128))])])])):c("",!0),m.value==="day"?(n(),a("div",tr,[r("div",rr,[r("h3",or,d(u.value.format("D MMMM YYYY")),1)]),r("div",sr,[r("div",ar,[r("div",nr,[(n(!0),a(b,null,h(A.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[r("span",ir,d(te(e)),1)]))),128))]),r("div",dr,[r("div",lr,[(n(!0),a(b,null,h(A.value,e=>(n(),a("div",{key:e,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),u.value.isSame(B(x)(),"day")&&V(A.value)?(n(),a("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:W({top:V(A.value)+"px"})},[...t[13]||(t[13]=[r("div",{class:"flex items-center"},[r("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),r("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):c("",!0),r("div",ur,[(n(!0),a(b,null,h(R.value,e=>(n(),a("div",{key:e.id,onClick:k(i=>O(e),["stop"]),class:g(["absolute left-2 right-2 rounded-lg cursor-pointer p-2 sm:p-3 border-l-4 shadow-sm z-10 touch-manipulation",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":j(e)+" border-primary-500"]]),style:W(oe(e,A.value))},[r("div",mr,[r("button",{onClick:k(i=>H(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",yr,[...t[14]||(t[14]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,gr),r("div",pr,[r("div",br,d(e.title),1),e.description?(n(),a("div",hr,d(e.description),1)):c("",!0),r("div",xr,[e.estimated_time||e.end_time?(n(),a("span",vr,[$(B(ne),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(n(),a("span",fr,d(y(e.estimated_time))+" - "+d(y(e.end_time)),1)):e.estimated_time?(n(),a("span",_r,d(y(e.estimated_time)),1)):e.end_time?(n(),a("span",kr," до "+d(y(e.end_time)),1)):c("",!0)])):c("",!0),r("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(J(e.priority)),3)])])])],14,cr))),128))])])])]),r("div",wr,[t[16]||(t[16]=r("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-3"},[r("span",{class:"text-xs text-gray-500 dark:text-gray-400 font-medium"},"Без времени")],-1)),r("div",Mr,[r("div",Tr,[(n(!0),a(b,null,h(ye.value,e=>(n(),a("div",{key:e.id,onClick:k(i=>O(e),["stop"]),class:g(["p-3 rounded-lg cursor-pointer border-l-4 touch-manipulation",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":j(e)+" border-primary-500"]])},[r("div",Cr,[r("button",{onClick:k(i=>H(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",$r,[...t[15]||(t[15]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,Dr),r("div",Sr,[r("div",jr,d(e.title),1),e.description?(n(),a("div",Or,d(e.description),1)):c("",!0),r("div",Hr,[r("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(J(e.priority)),3)])])])],10,Yr))),128))])])])]),r("div",Br,[r("div",Er,[(n(!0),a(b,null,h(I.value,e=>(n(),a("div",{key:e.id,onClick:i=>O(e),class:g(["p-3 sm:p-4 rounded-lg cursor-pointer border-l-4 touch-manipulation active:scale-[0.98] transition-transform",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":j(e)+" border-primary-500"]])},[r("div",Ar,[r("button",{onClick:k(i=>H(e),["stop"]),class:g(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),a("svg",Lr,[...t[17]||(t[17]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],10,zr),r("div",Pr,[r("div",Fr,d(e.title),1),e.description?(n(),a("div",Ir,d(e.description),1)):c("",!0),r("div",Vr,[e.estimated_time||e.end_time?(n(),a("span",Wr,[$(B(ne),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(n(),a("span",Gr,d(y(e.estimated_time))+" - "+d(y(e.end_time)),1)):e.estimated_time?(n(),a("span",Ur,d(y(e.estimated_time)),1)):e.end_time?(n(),a("span",qr," до "+d(y(e.end_time)),1)):c("",!0)])):c("",!0),r("span",{class:g(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},d(J(e.priority)),3)])])])],10,Nr))),128)),I.value.length===0?(n(),a("div",Jr," Нет задач на этот день ")):c("",!0)])])])):c("",!0),$(ze,{show:L.value,task:T.value,onClose:t[3]||(t[3]=e=>{L.value=!1,T.value=null}),onEnterEdit:fe,onCompleteTask:_e},null,8,["show","task"]),$(Ae,{show:_.value,task:T.value,"server-error":P.value,"default-date":F.value,onClose:Te,onSubmit:Me},null,8,["show","task","server-error","default-date"])])]))}},ao=Le(Kr,[["__scopeId","data-v-036ceb63"]]);export{ao as default};
