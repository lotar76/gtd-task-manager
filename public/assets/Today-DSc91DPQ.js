import{u as _}from"./CalendarDaysIcon-k95rGS8T.js";import{T as V}from"./TaskList-BZY3URFI.js";import{b as B,T as S}from"./TaskModal-BzRPWaSn.js";import{T as M}from"./TaskView-8lvKIHKK.js";import{r as N}from"./PlusIcon-B6A68N3R.js";import{k as v,r as d,c as m,a,f as c,F,l as U,y as x,e as $,o as l}from"./index-BQRmz4GQ.js";import"./workspace-DTkHaZL8.js";import"./ru-B7JyRvIu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./projects-BB9qncDe.js";import"./lifeSpheres-DDVy7cpI.js";import"./goals-D1Fsmasl.js";const j={class:"p-4 lg:p-8"},A={class:"max-w-4xl mx-auto"},L={key:0,class:"text-center py-12"},q={key:1,class:"text-center py-12"},z={class:"max-w-md mx-auto"},G={class:"w-16 h-16 mx-auto mb-4 rounded-full bg-amber-50 dark:bg-amber-900/30 flex items-center justify-center"},ee={__name:"Today",setup(H){const o=_(),p=v(()=>o.todayTasks),g=v(()=>o.loading),r=d(!1),n=d(!1),s=d(null),i=d(""),T=t=>{s.value=t,n.value=!0},f=()=>{s.value=null,r.value=!0},y=()=>{n.value=!1,r.value=!0},h=async t=>{try{await o.completeTask(t.id)}catch(e){console.error("Error completing task:",e)}},w=async t=>{try{await o.uncompleteTask(t.id)}catch(e){console.error("Error uncompleting task:",e)}},b=async t=>{try{t.completed_at?await o.uncompleteTask(t.id):await o.completeTask(t.id)}catch(e){console.error("Error toggling task:",e)}},C=async t=>{var e,u;i.value="";try{s.value?await o.updateTask(s.value.id,t):await o.createTask(t),r.value=!1,s.value=null}catch(k){console.error("Error saving task:",k),i.value=((u=(e=k.response)==null?void 0:e.data)==null?void 0:u.message)||k.message||"Ошибка при сохранении задачи"}},E=()=>{r.value=!1,s.value=null,i.value=""};return(t,e)=>(l(),m("div",j,[a("div",A,[e[5]||(e[5]=a("div",{class:"mb-6"},[a("h1",{class:"text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Сегодня")],-1)),g.value?(l(),m("div",L,[...e[1]||(e[1]=[a("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(l(),m(F,{key:1},[p.value.length>0?(l(),U(V,{key:0,tasks:p.value,onTaskClick:T,onToggleComplete:b},null,8,["tasks"])):(l(),m("div",q,[a("div",z,[a("div",G,[c(x(B),{class:"w-8 h-8 text-amber-500"})]),e[3]||(e[3]=a("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"На сегодня задач нет",-1)),e[4]||(e[4]=a("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-6 leading-relaxed"}," Здесь находятся задачи, которые вы решили выполнить именно сегодня. Выбирайте реалистичное количество — лучше сделать 3 задачи полностью, чем начать 10 и не закончить ни одной. ",-1)),a("button",{onClick:f,class:"inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors"},[c(x(N),{class:"w-5 h-5 mr-1.5"}),e[2]||(e[2]=$(" Запланировать на сегодня ",-1))])])]))],64)),c(M,{show:n.value,task:s.value,onClose:e[0]||(e[0]=u=>{n.value=!1,s.value=null}),onEnterEdit:y,onCompleteTask:h,onUncompleteTask:w},null,8,["show","task"]),c(S,{show:r.value,task:s.value,"server-error":i.value,onClose:E,onSubmit:C},null,8,["show","task","server-error"])])]))}};export{ee as default};
