import{c as d,o as a,a as e,j as ve,k as L,h as se,l as Z,g as T,b as _,m as ke,n as me,p as H,t as C,r as g,f as $,w as z,q as Ke,s as ye,x as xe,d as G,v as oe,y as Je,T as K,F as ae,z as ne,A as de,B as J,C as le,e as q,D as Xe,u as fe,i as Ye,E as et}from"./index-BF6qW96N.js";import{u as ie}from"./workspace-D-3WlEyB.js";import{r as be,a as he,b as we,c as $e,d as Ce,u as tt,e as rt,T as ot}from"./TaskModal-DCBI8AgL.js";import{r as st}from"./RectangleStackIcon-CUpFIBwG.js";import{r as Me}from"./CalendarDaysIcon-BaEzruuY.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as at}from"./ProjectModal-CJsV5NHa.js";function nt(k,M){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function te(k,M){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const lt={class:"flex items-center space-x-3"},ue={__name:"NavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null}},setup(k){const M=k,m=ve(),h=ie(),u={inbox:Ce,lightning:$e,calendar:we,clock:he,archive:be,folder:te,"calendar-days":Me,target:te,"rectangle-stack":st,cog:nt},v=L(()=>u[M.icon]||te),c=L(()=>{var t;const s=(t=h.currentWorkspace)==null?void 0:t.id;return M.to.replace(":id",s||"1")}),w=L(()=>m.path===c.value);return(s,t)=>{const y=se("router-link");return a(),Z(y,{to:c.value,class:H(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",w.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:T(()=>[e("div",lt,[(a(),Z(ke(v.value),{class:"w-5 h-5"})),e("span",null,[me(s.$slots,"default")])]),k.count!==null&&k.count>0?(a(),d("span",{key:0,class:H(["px-2 py-0.5 text-xs font-semibold rounded-full",w.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},C(k.count),3)):_("",!0)]),_:3},8,["to","class"])}}},it={class:"flex items-center space-x-3"},ee={__name:"DroppableNavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null},dropStatus:{type:String,default:null}},emits:["task-dropped"],setup(k,{emit:M}){const m=k,h=M,u=ve(),v=ie(),c=g(!1),w={inbox:Ce,lightning:$e,calendar:we,clock:he,archive:be,folder:te,"calendar-days":Me,target:te},s=L(()=>w[m.icon]||te),t=L(()=>{var W;const S=(W=v.currentWorkspace)==null?void 0:W.id;return m.to.replace(":id",S||"1")}),y=L(()=>u.path===t.value),B=S=>{S.preventDefault(),c.value=!0,S.dataTransfer.dropEffect="move"},Q=()=>{c.value=!1},N=S=>{S.preventDefault(),c.value=!1;try{const W=JSON.parse(S.dataTransfer.getData("application/json"));m.dropStatus&&W&&h("task-dropped",{taskId:W.id,newStatus:m.dropStatus})}catch(W){console.error("Error handling drop:",W)}};return(S,W)=>{const p=se("router-link");return a(),d("div",{onDrop:N,onDragover:z(B,["prevent"]),onDragleave:Q,class:H(["rounded-lg transition-all",c.value?"bg-primary-100 dark:bg-primary-900/40 ring-2 ring-primary-500":""])},[$(p,{to:t.value,class:H(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",y.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:T(()=>[e("div",it,[(a(),Z(ke(s.value),{class:"w-5 h-5"})),e("span",null,[me(S.$slots,"default")])]),k.count!==null&&k.count>0?(a(),d("span",{key:0,class:H(["px-2 py-0.5 text-xs font-semibold rounded-full",y.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},C(k.count),3)):_("",!0)]),_:3},8,["to","class"])],34)}}},dt={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20"},ut={class:"flex items-center justify-between px-4 lg:px-8 py-3"},ct={class:"flex-1 max-w-2xl"},pt={class:"relative"},gt={class:"flex items-center space-x-2 lg:space-x-4 ml-4"},vt={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 z-50"},kt={class:"relative"},mt={key:0,class:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"},yt={key:0,class:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 max-h-96 overflow-y-auto"},xt={key:0,class:"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400"},ft={key:1},bt={class:"text-sm text-gray-900 dark:text-gray-100"},ht={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},wt=["title"],$t={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ct={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Mt={class:"hidden lg:block relative"},jt={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},_t={class:"hidden lg:block text-left"},St={class:"text-sm font-medium text-gray-900 dark:text-white"},Tt={class:"text-xs text-gray-500 dark:text-gray-400"},Wt={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2"},Bt={__name:"Toolbar",props:{user:{type:Object,default:null}},emits:["quick-add","quick-add-task","quick-add-project","quick-add-goal","search","logout","profile","settings","toggle-sidebar"],setup(k,{emit:M}){const m=Ke(),h=k,u=M,v=g(""),c=g(!1),w=g(!1),s=g(!1),t=g(0),y=g([]),B=g(null),Q=L(()=>{var o;return(((o=h.user)==null?void 0:o.name)||"").split(" ").map(O=>O[0]).join("").toUpperCase().slice(0,2)}),N=()=>{s.value=!s.value},S=()=>{s.value=!1,u("quick-add-task")},W=()=>{s.value=!1,u("quick-add-project")},p=()=>{s.value=!1,u("quick-add-goal")},n=E=>{B.value&&!B.value.contains(E.target)&&(s.value=!1)};ye(()=>{document.addEventListener("click",n)}),xe(()=>{document.removeEventListener("click",n)});const f=()=>{v.value.trim()&&u("search",v.value)},P=()=>{f()},V=()=>{w.value=!1,u("logout")},U=()=>{w.value=!1,u("profile")},D=()=>{w.value=!1,u("settings")},F={mounted(E,o){E.clickOutsideEvent=O=>{E===O.target||E.contains(O.target)||o.value()},document.addEventListener("click",E.clickOutsideEvent)},unmounted(E){document.removeEventListener("click",E.clickOutsideEvent)}};return(E,o)=>{var O,X;return a(),d("header",dt,[e("div",ut,[e("button",{onClick:o[0]||(o[0]=I=>E.$emit("toggle-sidebar")),class:"lg:hidden p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors mr-2"},[...o[5]||(o[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e("div",ct,[e("div",pt,[o[6]||(o[6]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),G(e("input",{"onUpdate:modelValue":o[1]||(o[1]=I=>v.value=I),type:"text",placeholder:"Поиск задач...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onInput:f,onKeydown:Je(P,["enter"])},null,544),[[oe,v.value]])])]),e("div",gt,[e("div",{class:"relative",ref_key:"quickAddMenuContainer",ref:B},[e("button",{onClick:z(N,["stop"]),class:"inline-flex items-center px-3 lg:px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary-500 transition-colors"},[...o[7]||(o[7]=[e("svg",{class:"w-5 h-5 lg:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden lg:inline"},"Создать",-1)])]),$(K,{name:"dropdown"},{default:T(()=>[s.value?(a(),d("div",vt,[e("button",{onClick:S,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...o[8]||(o[8]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",null,"Задачу")],-1)])]),e("button",{onClick:W,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...o[9]||(o[9]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),e("span",null,"Проект")],-1)])]),e("button",{onClick:p,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...o[10]||(o[10]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),e("span",null,"Цель")],-1)])])])):_("",!0)]),_:1})],512),e("div",kt,[e("button",{onClick:o[2]||(o[2]=z(I=>c.value=!c.value,["stop"])),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors relative"},[o[11]||(o[11]=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),t.value>0?(a(),d("span",mt)):_("",!0)]),c.value?G((a(),d("div",yt,[o[12]||(o[12]=e("div",{class:"px-4 py-2 border-b border-gray-200 dark:border-gray-600"},[e("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Уведомления")],-1)),y.value.length===0?(a(),d("div",xt," Нет новых уведомлений ")):(a(),d("div",ft,[(a(!0),d(ae,null,ne(y.value,I=>(a(),d("button",{key:I.id,class:"w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-left"},[e("p",bt,C(I.message),1),e("p",ht,C(I.time),1)]))),128))]))])),[[F,()=>c.value=!1]]):_("",!0)]),e("button",{onClick:o[3]||(o[3]=I=>de(m).toggleTheme()),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:de(m).isDark?"Светлая тема":"Тёмная тема"},[de(m).isDark?(a(),d("svg",$t,[...o[13]||(o[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(a(),d("svg",Ct,[...o[14]||(o[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))],8,wt),e("div",Mt,[e("button",{onClick:o[4]||(o[4]=z(I=>w.value=!w.value,["stop"])),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[e("div",jt,C(Q.value),1),e("div",_t,[e("div",St,C((O=k.user)==null?void 0:O.name),1),e("div",Tt,C((X=k.user)==null?void 0:X.email),1)]),o[15]||(o[15]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),w.value?G((a(),d("div",Wt,[e("button",{onClick:U,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...o[16]||(o[16]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),e("span",null,"Профиль")],-1)])]),e("button",{onClick:D,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...o[17]||(o[17]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),e("span",null,"Настройки")],-1)])]),o[19]||(o[19]=e("div",{class:"border-t border-gray-200 dark:border-gray-600 my-2"},null,-1)),e("button",{onClick:V,class:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},[...o[18]||(o[18]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})]),e("span",null,"Выйти")],-1)])])])),[[F,()=>w.value=!1]]):_("",!0)])])])])}}},At=re(Bt,[["__scopeId","data-v-8c1d50ec"]]),Dt={class:"flex min-h-screen items-center justify-center p-4"},Et={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},zt={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Pt={class:"flex justify-end space-x-3 pt-4"},Lt=["disabled"],Ot={__name:"WorkspaceModal",props:{show:{type:Boolean,default:!1}},emits:["close","submit"],setup(k,{emit:M}){const m=k,h=M,u=g({name:"",description:""}),v=g(!1),c=g("");J(()=>m.show,s=>{s||(u.value={name:"",description:""},v.value=!1,c.value="")});const w=()=>{c.value="",v.value=!0,h("submit",u.value)};return(s,t)=>(a(),Z(le,{to:"body"},[$(K,{name:"modal"},{default:T(()=>[k.show?(a(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=z(y=>s.$emit("close"),["self"]))},[t[10]||(t[10]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Dt,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=z(()=>{},["stop"]))},[e("div",Et,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Новое рабочее пространство ",-1)),e("button",{onClick:t[0]||(t[0]=y=>s.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:z(w,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Название * ",-1)),G(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=y=>u.value.name=y),type:"text",required:"",class:"input",placeholder:"Например: Команда разработки"},null,512),[[oe,u.value.name]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Описание ",-1)),G(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=y=>u.value.description=y),rows:"3",class:"input",placeholder:"Краткое описание рабочего пространства"},null,512),[[oe,u.value.description]])]),c.value?(a(),d("div",zt,C(c.value),1)):_("",!0),e("div",Pt,[e("button",{type:"button",onClick:t[3]||(t[3]=y=>s.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:v.value,class:"btn btn-primary"},C(v.value?"Создание...":"Создать"),9,Lt)])],32)])])])):_("",!0)]),_:1})]))}},It=re(Ot,[["__scopeId","data-v-76f4e349"]]),Vt={class:"flex min-h-screen items-center justify-center p-4"},qt={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Rt={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},Qt={class:"font-medium"},Ut={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Ht={class:"flex justify-end space-x-3 pt-4"},Nt=["disabled"],Ft={__name:"AddMemberModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(k,{emit:M}){const m=k,h=M,u=g({email:"",role:"member"}),v=g(!1),c=g("");J(()=>m.show,s=>{s||(u.value={email:"",role:"member"},v.value=!1,c.value="")});const w=()=>{var s;c.value="",v.value=!0,h("submit",{...u.value,workspace_id:(s=m.workspace)==null?void 0:s.id})};return(s,t)=>(a(),Z(le,{to:"body"},[$(K,{name:"modal"},{default:T(()=>{var y;return[k.show?(a(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=z(B=>s.$emit("close"),["self"]))},[t[12]||(t[12]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Vt,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=z(()=>{},["stop"]))},[e("div",qt,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Добавить пользователя ",-1)),e("button",{onClick:t[0]||(t[0]=B=>s.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:z(w,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[e("p",Rt,[t[8]||(t[8]=q(" Workspace: ",-1)),e("span",Qt,C((y=k.workspace)==null?void 0:y.name),1)])]),e("div",null,[t[9]||(t[9]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Email пользователя * ",-1)),G(e("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=B=>u.value.email=B),type:"email",required:"",class:"input",placeholder:"user@example.com"},null,512),[[oe,u.value.email]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"role",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Роль ",-1)),G(e("select",{id:"role","onUpdate:modelValue":t[2]||(t[2]=B=>u.value.role=B),class:"input"},[...t[10]||(t[10]=[e("option",{value:"viewer"},"Просмотр",-1),e("option",{value:"member"},"Участник",-1),e("option",{value:"admin"},"Администратор",-1)])],512),[[Xe,u.value.role]])]),c.value?(a(),d("div",Ut,C(c.value),1)):_("",!0),e("div",Ht,[e("button",{type:"button",onClick:t[3]||(t[3]=B=>s.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:v.value,class:"btn btn-primary"},C(v.value?"Добавление...":"Добавить"),9,Nt)])],32)])])])):_("",!0)]}),_:1})]))}},Gt=re(Ft,[["__scopeId","data-v-0743e11a"]]),Zt={class:"flex min-h-screen items-center justify-center p-4"},Kt={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Jt={key:0,class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},Xt={class:"flex justify-end space-x-3 pt-4"},Yt=["disabled"],er={__name:"RenameWorkspaceModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(k,{emit:M}){const m=k,h=M,u=g({name:""}),v=g(!1),c=g("");J(()=>m.workspace,s=>{s&&(u.value.name=s.name)},{immediate:!0}),J(()=>m.show,s=>{s||(v.value=!1,c.value="")});const w=()=>{c.value="",v.value=!0,h("submit",u.value.name)};return(s,t)=>(a(),Z(le,{to:"body"},[$(K,{name:"modal"},{default:T(()=>[k.show?(a(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[4]||(t[4]=z(y=>s.$emit("close"),["self"]))},[t[8]||(t[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Zt,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[3]||(t[3]=z(()=>{},["stop"]))},[e("div",Kt,[t[6]||(t[6]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Переименовать workspace ",-1)),e("button",{onClick:t[0]||(t[0]=y=>s.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[5]||(t[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:z(w,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[7]||(t[7]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Новое название * ",-1)),G(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=y=>u.value.name=y),type:"text",required:"",class:"input",placeholder:"Название workspace"},null,512),[[oe,u.value.name]])]),c.value?(a(),d("div",Jt,C(c.value),1)):_("",!0),e("div",Xt,[e("button",{type:"button",onClick:t[2]||(t[2]=y=>s.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:v.value,class:"btn btn-primary"},C(v.value?"Сохранение...":"Сохранить"),9,Yt)])],32)])])])):_("",!0)]),_:1})]))}},tr=re(er,[["__scopeId","data-v-a4ef0901"]]),rr={class:"flex min-h-screen items-center justify-center p-4"},or={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},sr={class:"p-6"},ar={key:0,class:"text-center py-8"},nr={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},lr={key:2,class:"space-y-3"},ir={class:"flex items-center space-x-3"},dr={class:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},ur={class:"font-medium text-gray-900 dark:text-white"},cr={class:"text-sm text-gray-500 dark:text-gray-400"},pr={class:"flex items-center space-x-3"},gr=["onClick","disabled"],vr={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},kr={key:1,class:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-red-600"},mr={key:0,class:"px-6 pb-4"},yr={class:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},xr={class:"flex justify-end p-6 border-t border-gray-200 dark:border-gray-700"},fr={__name:"MembersModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","member-removed"],setup(k,{emit:M}){const m=k,h=M,u=ie(),v=fe(),c=g([]),w=g(!1),s=g(""),t=g(null),y=p=>p?p.split(" ").map(n=>n[0]).join("").toUpperCase().substring(0,2):"?",B=p=>({owner:"Владелец",admin:"Администратор",member:"Участник",viewer:"Наблюдатель"})[p]||p,Q=p=>({owner:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",admin:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",member:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",viewer:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"})[p]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400",N=p=>{var V,U,D,F,E,o,O;const n=(V=v.user)==null?void 0:V.id,f=((U=m.workspace)==null?void 0:U.owner_id)===n,P=((o=(E=(F=(D=m.workspace)==null?void 0:D.members)==null?void 0:F.find(X=>X.id===n))==null?void 0:E.pivot)==null?void 0:o.role)==="admin";return((O=m.workspace)==null?void 0:O.owner_id)===p.id||p.id===n?!1:f||P},S=async()=>{var p;if((p=m.workspace)!=null&&p.id){w.value=!0,s.value="";try{const n=await u.fetchMembers(m.workspace.id);c.value=n.members||n||[]}catch(n){console.error("Error loading members:",n),s.value="Ошибка при загрузке участников"}finally{w.value=!1}}},W=async p=>{var n,f;if(confirm(`Вы уверены, что хотите удалить ${p.name} из workspace?`)){t.value=p.id,s.value="";try{await u.removeMember(m.workspace.id,p.id),await S(),h("member-removed",p)}catch(P){console.error("Error removing member:",P),s.value=((f=(n=P.response)==null?void 0:n.data)==null?void 0:f.message)||"Ошибка при удалении участника"}finally{t.value=null}}};return J(()=>m.show,p=>{p?S():(c.value=[],s.value="",t.value=null)}),J(()=>{var p;return(p=m.workspace)==null?void 0:p.id},()=>{m.show&&S()}),(p,n)=>(a(),Z(le,{to:"body"},[$(K,{name:"modal"},{default:T(()=>[k.show?(a(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:n[3]||(n[3]=z(f=>p.$emit("close"),["self"]))},[n[8]||(n[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",rr,[e("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-auto",onClick:n[2]||(n[2]=z(()=>{},["stop"]))},[e("div",or,[n[5]||(n[5]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Участники workspace ",-1)),e("button",{onClick:n[0]||(n[0]=f=>p.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...n[4]||(n[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",sr,[w.value?(a(),d("div",ar,[...n[6]||(n[6]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):c.value.length===0?(a(),d("div",nr," Нет участников ")):(a(),d("div",lr,[(a(!0),d(ae,null,ne(c.value,f=>{var P,V,U,D;return a(),d("div",{key:f.id,class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[e("div",ir,[e("div",dr,C(y(f.name)),1),e("div",null,[e("div",ur,C(f.name),1),e("div",cr,C(f.email),1)])]),e("div",pr,[e("span",{class:H(["px-3 py-1 text-xs font-medium rounded-full",Q(((P=f.pivot)==null?void 0:P.role)||(((V=k.workspace)==null?void 0:V.owner_id)===f.id?"owner":"member"))])},C(B(((U=f.pivot)==null?void 0:U.role)||(((D=k.workspace)==null?void 0:D.owner_id)===f.id?"owner":"member"))),3),N(f)?(a(),d("button",{key:0,onClick:F=>W(f),class:"text-red-600 hover:text-red-700 p-2 rounded transition-colors",disabled:t.value===f.id,title:"Удалить из workspace"},[t.value!==f.id?(a(),d("svg",vr,[...n[7]||(n[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])])):(a(),d("div",kr))],8,gr)):_("",!0)])])}),128))]))]),s.value?(a(),d("div",mr,[e("div",yr,C(s.value),1)])):_("",!0),e("div",xr,[e("button",{onClick:n[1]||(n[1]=f=>p.$emit("close")),class:"btn btn-secondary"}," Закрыть ")])])])])):_("",!0)]),_:1})]))}},br=re(fr,[["__scopeId","data-v-17806651"]]),hr={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},wr={class:"flex h-screen"},$r={class:"flex flex-col h-full"},Cr={class:"p-4 border-b border-gray-200 dark:border-gray-700"},Mr={class:"flex items-center justify-between mb-3"},jr={class:"space-y-1"},_r={class:"flex-1 flex items-center px-3 py-2 text-sm cursor-pointer"},Sr=["checked","onChange"],Tr=["onClick"],Wr={key:0,class:"absolute right-0 mt-1 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-1 z-50"},Br=["onClick"],Ar={class:"flex-1 overflow-y-auto p-4"},Dr={class:"space-y-1"},Er={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 space-y-1"},zr={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Pr={class:"space-y-1 max-h-64 overflow-y-auto"},Lr={class:"text-sm text-gray-700 dark:text-gray-300 truncate"},Or={key:0,class:"text-xs text-gray-500"},Ir=["onClick"],Vr={key:0,class:"px-3 py-2 text-sm text-gray-500 text-center"},qr={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Rr={class:"space-y-1"},Qr={class:"flex-1 flex flex-col overflow-hidden"},Ur={class:"flex-1 overflow-auto"},Hr={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4"},Nr={class:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-sm w-full p-6"},Fr={class:"text-sm text-gray-500 dark:text-gray-400 mb-6"},Gr={__name:"MainLayout",setup(k){const M=Ye(),m=fe(),h=ie(),u=tt(),v=rt(),c=g(!1);g(!1);const w=g(!1),s=g(!1),t=g(""),y=g(null),B=g(!1),Q=g(!1),N=g(!1),S=g(!1),W=g(null),p=g(""),n=g(null),f=g(!1),P=g(null),V=L(()=>m.user),U=L(()=>h.workspaces),D=L(()=>u.counts),F=L(()=>h.currentWorkspace),E=L(()=>v.activeProjects),o=L(()=>h.selectedWorkspaces.map(l=>l.id)),O=L(()=>u.filteredTasks.length),X=L(()=>{if(o.value.length===0)return 0;const l=D.value.scheduled||0,r=D.value.today||0,x=D.value.tomorrow||0;return l+r+x});L(()=>{var r;return(((r=V.value)==null?void 0:r.name)||"").split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2)});const I=l=>{var R;h.toggleSelectedWorkspace(l);const x=M.currentRoute.value.path.split("/"),b=x[x.length-1],j=["inbox","next-actions","today","waiting","someday","calendar","projects","goals"].includes(b)?b:"inbox",A=((R=h.currentWorkspace)==null?void 0:R.id)||l.id;M.push(`/workspaces/${A}/${j}`)},je=async l=>{try{const r=await h.createWorkspace(l);w.value=!1,await I(r)}catch(r){console.error("Ошибка создания workspace:",r)}},_e=async()=>{await m.logout(),M.push("/login")},Se=()=>{s.value=!0},ce=()=>{W.value=null,S.value=!0},Te=async l=>{var r,x;p.value="";try{W.value?await v.updateProject(W.value.id,l):await v.createProject(l),S.value=!1,W.value=null,await v.fetchProjects()}catch(b){console.error("Error saving project:",b),p.value=((x=(r=b.response)==null?void 0:r.data)==null?void 0:x.message)||b.message||"Ошибка при сохранении проекта"}},We=()=>{S.value=!1,W.value=null,p.value=""},Be=async l=>{var r,x;if(confirm(`Архивировать проект "${l.name}"?`))try{await v.archiveProject(l.id),await v.fetchProjects()}catch(b){console.error("Error archiving project:",b),alert("Ошибка при архивировании проекта: "+(((x=(r=b.response)==null?void 0:r.data)==null?void 0:x.message)||b.message))}},Ae=()=>{console.log("Quick add goal")},De=async l=>{var r,x;t.value="";try{await u.createTask(l),s.value=!1}catch(b){console.error("Error creating task:",b),t.value=((x=(r=b.response)==null?void 0:r.data)==null?void 0:x.message)||b.message||"Ошибка при создании задачи"}},Ee=()=>{s.value=!1,t.value=""},Y=async({taskId:l,newStatus:r})=>{var x,b;try{const i={status:r};if(r==="today")i.due_date=new Date().toISOString().split("T")[0];else if(r==="tomorrow"){const j=new Date;j.setDate(j.getDate()+1),i.due_date=j.toISOString().split("T")[0]}await u.updateTask(l,i)}catch(i){console.error("Error updating task status:",i),alert(((b=(x=i.response)==null?void 0:x.data)==null?void 0:b.message)||"Ошибка при обновлении задачи")}},ze=l=>{console.log("Search:",l)},Pe=()=>{M.push("/settings")},Le=()=>{M.push("/settings")},Oe=l=>{var b,i,j;const r=(b=V.value)==null?void 0:b.id;if(!r)return!1;if(l.owner_id===r)return!0;const x=(i=l.members)==null?void 0:i.find(A=>A.id===r);return((j=x==null?void 0:x.pivot)==null?void 0:j.role)==="admin"},Ie=l=>{y.value=y.value===l?null:l},Ve=l=>u.allTasks.filter(r=>r.workspace_id===l).length,qe=l=>{P.value=l,f.value=!0,y.value=null},Re=async()=>{if(P.value){try{await h.deleteWorkspace(P.value.id)}catch(l){console.error("Error deleting workspace:",l)}f.value=!1,P.value=null}},pe=()=>{f.value=!1,P.value=null},Qe=()=>{B.value=!1,n.value=null},Ue=()=>{N.value=!1,n.value=null},He=async()=>{await h.fetchWorkspaces()},Ne=()=>{Q.value=!1,n.value=null},Fe=async l=>{var r,x,b,i,j;try{console.log("Sending member data:",l),await h.addMember(l.workspace_id,{email:l.email,role:l.role}),B.value=!1,n.value=null,alert("Пользователь успешно добавлен в workspace")}catch(A){console.error("Error adding member:",A),console.error("Error response:",(r=A.response)==null?void 0:r.data);let R="Ошибка при добавлении пользователя";(b=(x=A.response)==null?void 0:x.data)!=null&&b.errors?R=Object.values(A.response.data.errors).flat().join(", "):(j=(i=A.response)==null?void 0:i.data)!=null&&j.message&&(R=A.response.data.message),alert(R)}},Ge=async l=>{var r,x,b,i,j;try{console.log("Renaming workspace:",n.value.id,"to:",l),await h.updateWorkspace(n.value.id,{name:l}),await h.fetchWorkspaces(),Q.value=!1,n.value=null,alert("Workspace успешно переименован")}catch(A){console.error("Error renaming workspace:",A),console.error("Error response:",(r=A.response)==null?void 0:r.data);let R="Ошибка при переименовании";(b=(x=A.response)==null?void 0:x.data)!=null&&b.errors?R=Object.values(A.response.data.errors).flat().join(", "):(j=(i=A.response)==null?void 0:i.data)!=null&&j.message&&(R=A.response.data.message),alert(R)}};ye(async()=>{await h.fetchWorkspaces(),await u.fetchAllTasks(),await v.fetchProjects(),u.startSync(),document.addEventListener("click",ge)}),J(()=>{var l;return(l=h.currentWorkspace)==null?void 0:l.id},l=>{l&&v.fetchProjects()}),xe(()=>{u.stopSync(),document.removeEventListener("click",ge)});const ge=()=>{y.value=null};return(l,r)=>{const x=se("router-link"),b=se("router-view");return a(),d("div",hr,[e("div",wr,[e("aside",{class:H(["fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",c.value?"translate-x-0":"-translate-x-full lg:translate-x-0"])},[e("div",$r,[r[23]||(r[23]=e("div",{class:"hidden lg:flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},[e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"},"GTD TODO")],-1)),e("div",Cr,[e("div",Mr,[r[7]||(r[7]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Рабочие пространства ",-1)),e("button",{onClick:r[0]||(r[0]=i=>w.value=!0),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Создать workspace"},[...r[6]||(r[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",jr,[(a(!0),d(ae,null,ne(U.value,i=>(a(),d("div",{key:i.id,class:H(["flex items-center rounded-lg transition-colors",o.value.includes(i.id)?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[e("label",_r,[e("input",{type:"checkbox",checked:o.value.includes(i.id),onChange:j=>I(i),class:"mr-3 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"},null,40,Sr),e("span",{class:H(["truncate",o.value.includes(i.id)?"text-primary-700 dark:text-primary-400 font-medium":"text-gray-700 dark:text-gray-300"])},C(i.name),3)]),e("div",{class:"relative",onClick:r[2]||(r[2]=z(()=>{},["stop"]))},[e("button",{onClick:j=>Ie(i.id),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors"},[...r[8]||(r[8]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})],-1)])],8,Tr),$(K,{name:"dropdown"},{default:T(()=>[y.value===i.id?(a(),d("div",Wr,[$(x,{to:`/workspaces/${i.id}/settings`,onClick:r[1]||(r[1]=j=>y.value=null),class:"block w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},{default:T(()=>[...r[9]||(r[9]=[q(" Настройки ",-1)])]),_:1},8,["to"]),Oe(i)&&Ve(i.id)===0?(a(),d("button",{key:0,onClick:j=>qe(i),class:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"}," Удалить пространство ",8,Br)):_("",!0)])):_("",!0)]),_:2},1024)])],2))),128))])]),e("nav",Ar,[e("div",Dr,[$(ee,{to:"/workspaces/:id/inbox",icon:"inbox",count:D.value.inbox,"drop-status":"inbox",onTaskDropped:Y},{default:T(()=>[...r[10]||(r[10]=[q(" Входящие ",-1)])]),_:1},8,["count"])]),e("div",Er,[$(ee,{to:"/workspaces/:id/today",icon:"calendar",count:D.value.today,"drop-status":"today",onTaskDropped:Y},{default:T(()=>[...r[11]||(r[11]=[q(" Сегодня ",-1)])]),_:1},8,["count"]),$(ee,{to:"/workspaces/:id/next-actions",icon:"lightning",count:D.value.next_actions,"drop-status":"next_action",onTaskDropped:Y},{default:T(()=>[...r[12]||(r[12]=[q(" Следующие ",-1)])]),_:1},8,["count"]),$(ee,{to:"/workspaces/:id/tomorrow",icon:"calendar-days",count:D.value.tomorrow,"drop-status":"tomorrow",onTaskDropped:Y},{default:T(()=>[...r[13]||(r[13]=[q(" Завтра ",-1)])]),_:1},8,["count"]),$(ue,{to:"/workspaces/:id/calendar",icon:"calendar-days",count:X.value},{default:T(()=>[...r[14]||(r[14]=[q(" Календарь ",-1)])]),_:1},8,["count"]),$(ee,{to:"/workspaces/:id/someday",icon:"archive",count:D.value.someday,"drop-status":"someday",onTaskDropped:Y},{default:T(()=>[...r[15]||(r[15]=[q(" Когда-нибудь ",-1)])]),_:1},8,["count"]),$(ee,{to:"/workspaces/:id/waiting",icon:"clock",count:D.value.waiting,"drop-status":"waiting",onTaskDropped:Y},{default:T(()=>[...r[16]||(r[16]=[q(" Ожидание ",-1)])]),_:1},8,["count"]),$(ue,{to:"/workspaces/:id/all",icon:"rectangle-stack",count:O.value},{default:T(()=>[...r[17]||(r[17]=[q(" Все задачи ",-1)])]),_:1},8,["count"])]),e("div",zr,[e("div",{class:"flex items-center justify-between px-3 mb-3"},[r[19]||(r[19]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Проекты ",-1)),e("button",{onClick:ce,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Создать проект"},[...r[18]||(r[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",Pr,[(a(!0),d(ae,null,ne(E.value,i=>{var j;return a(),d("div",{key:i.id,class:"flex items-center justify-between group px-3 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[$(x,{to:`/workspaces/${(j=F.value)==null?void 0:j.id}/projects/${i.id}`,class:"flex items-center space-x-2 flex-1 min-w-0"},{default:T(()=>[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:et({backgroundColor:i.color||"#3B82F6"})},null,4),e("span",Lr,C(i.name),1),i.tasks_count>0?(a(),d("span",Or," ("+C(i.tasks_count)+") ",1)):_("",!0)]),_:2},1032,["to"]),e("button",{onClick:z(A=>Be(i),["stop"]),class:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 transition-opacity",title:"Архивировать"},[...r[20]||(r[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)])],8,Ir)])}),128)),E.value.length===0?(a(),d("div",Vr," Нет проектов ")):_("",!0)])]),e("div",qr,[r[22]||(r[22]=e("h3",{class:"px-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3"}," Организация ",-1)),e("div",Rr,[$(ue,{to:"/workspaces/:id/goals",icon:"target"},{default:T(()=>[...r[21]||(r[21]=[q(" Цели ",-1)])]),_:1})])])])])],2),c.value?(a(),d("div",{key:0,onClick:r[3]||(r[3]=i=>c.value=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})):_("",!0),e("main",Qr,[$(At,{user:V.value,onQuickAddTask:Se,onQuickAddProject:ce,onQuickAddGoal:Ae,onSearch:ze,onLogout:_e,onProfile:Pe,onSettings:Le,onToggleSidebar:r[4]||(r[4]=i=>c.value=!c.value)},null,8,["user"]),e("div",Ur,[$(b)])])]),$(It,{show:w.value,onClose:r[5]||(r[5]=i=>w.value=!1),onSubmit:je},null,8,["show"]),$(ot,{show:s.value,"server-error":t.value,onClose:Ee,onSubmit:De},null,8,["show","server-error"]),$(Gt,{show:B.value,workspace:n.value,onClose:Qe,onSubmit:Fe},null,8,["show","workspace"]),$(tr,{show:Q.value,workspace:n.value,onClose:Ne,onSubmit:Ge},null,8,["show","workspace"]),$(br,{show:N.value,workspace:n.value,onClose:Ue,onMemberRemoved:He},null,8,["show","workspace"]),$(at,{show:S.value,project:W.value,"server-error":p.value,onClose:We,onSubmit:Te},null,8,["show","project","server-error"]),$(K,{name:"modal"},{default:T(()=>{var i;return[f.value?(a(),d("div",Hr,[e("div",{class:"fixed inset-0 bg-black/50",onClick:pe}),e("div",Nr,[r[24]||(r[24]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Удалить пространство?",-1)),e("p",Fr," Пространство «"+C((i=P.value)==null?void 0:i.name)+"» будет удалено навсегда. Это действие нельзя отменить. ",1),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:pe,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"}," Отмена "),e("button",{onClick:Re,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors"}," Удалить ")])])])):_("",!0)]}),_:1})])}}},ro=re(Gr,[["__scopeId","data-v-4d2f1f32"]]);export{ro as default};
