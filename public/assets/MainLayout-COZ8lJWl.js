import{c as d,o as r,a as e,j as me,k as O,h as oe,l as K,g as W,b as j,m as fe,n as ge,p as Z,t as $,r as p,f as C,w as D,q as ke,s as xe,d as F,v as se,x as Ze,T as ee,F as re,y as ne,z as G,A as ae,e as Q,B as Ne,u as ye,i as Fe,C as Ge}from"./app-CggqkjMs.js";import{u as le}from"./workspace-DxROCKju.js";import{r as be,a as he,b as we,c as $e,d as Ce,u as Ke,e as Je,T as Xe}from"./TaskModal-B7votAW0.js";import{u as Ye}from"./useTaskEvents-CbHPJt0o.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as et}from"./ProjectModal-RNB4qWMm.js";function Me(g,_){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})])}function Y(g,_){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const tt={class:"flex items-center space-x-3"},pe={__name:"NavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null}},setup(g){const _=g,k=me(),f=le(),u={inbox:Ce,lightning:$e,calendar:we,clock:he,archive:be,folder:Y,"calendar-days":Me,target:Y},m=O(()=>u[_.icon]||Y),c=O(()=>{var t;const a=(t=f.currentWorkspace)==null?void 0:t.id;return _.to.replace(":id",a||"1")}),y=O(()=>k.path===c.value);return(a,t)=>{const x=oe("router-link");return r(),K(x,{to:c.value,class:Z(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",y.value?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"])},{default:W(()=>[e("div",tt,[(r(),K(fe(m.value),{class:"w-5 h-5"})),e("span",null,[ge(a.$slots,"default")])]),g.count!==null&&g.count>0?(r(),d("span",{key:0,class:Z(["px-2 py-0.5 text-xs font-semibold rounded-full",y.value?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"])},$(g.count),3)):j("",!0)]),_:3},8,["to","class"])}}},st={class:"flex items-center space-x-3"},X={__name:"DroppableNavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null},dropStatus:{type:String,default:null}},emits:["task-dropped"],setup(g,{emit:_}){const k=g,f=_,u=me(),m=le(),c=p(!1),y={inbox:Ce,lightning:$e,calendar:we,clock:he,archive:be,folder:Y,"calendar-days":Me,target:Y},a=O(()=>y[k.icon]||Y),t=O(()=>{var E;const S=(E=m.currentWorkspace)==null?void 0:E.id;return k.to.replace(":id",S||"1")}),x=O(()=>u.path===t.value),T=S=>{S.preventDefault(),c.value=!0,S.dataTransfer.dropEffect="move"},L=()=>{c.value=!1},q=S=>{S.preventDefault(),c.value=!1;try{const E=JSON.parse(S.dataTransfer.getData("application/json"));k.dropStatus&&E&&f("task-dropped",{taskId:E.id,newStatus:k.dropStatus})}catch(E){console.error("Error handling drop:",E)}};return(S,E)=>{const v=oe("router-link");return r(),d("div",{onDrop:q,onDragover:D(T,["prevent"]),onDragleave:L,class:Z(["rounded-lg transition-all",c.value?"bg-primary-100 ring-2 ring-primary-500":""])},[C(v,{to:t.value,class:Z(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",x.value?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"])},{default:W(()=>[e("div",st,[(r(),K(fe(a.value),{class:"w-5 h-5"})),e("span",null,[ge(S.$slots,"default")])]),g.count!==null&&g.count>0?(r(),d("span",{key:0,class:Z(["px-2 py-0.5 text-xs font-semibold rounded-full",x.value?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"])},$(g.count),3)):j("",!0)]),_:3},8,["to","class"])],34)}}},ot={class:"bg-white border-b border-gray-200 sticky top-0 z-20"},rt={class:"flex items-center justify-between px-4 lg:px-8 py-3"},nt={class:"flex-1 max-w-2xl"},at={class:"relative"},lt={class:"flex items-center space-x-2 lg:space-x-4 ml-4"},it={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50"},dt={class:"relative"},ut={key:0,class:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"},ct={key:0,class:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 py-2 max-h-96 overflow-y-auto"},vt={key:0,class:"px-4 py-6 text-center text-sm text-gray-500"},pt={key:1},mt={class:"text-sm text-gray-900"},ft={class:"text-xs text-gray-500 mt-1"},gt={class:"hidden lg:block relative"},kt={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},xt={class:"hidden lg:block text-left"},yt={class:"text-sm font-medium text-gray-900"},bt={class:"text-xs text-gray-500"},ht={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2"},wt={__name:"Toolbar",props:{user:{type:Object,default:null}},emits:["quick-add","quick-add-task","quick-add-project","quick-add-goal","search","logout","profile","settings","toggle-sidebar"],setup(g,{emit:_}){const k=g,f=_,u=p(""),m=p(!1),c=p(!1),y=p(!1),a=p(0),t=p([]),x=p(null),T=O(()=>{var l;return(((l=k.user)==null?void 0:l.name)||"").split(" ").map(I=>I[0]).join("").toUpperCase().slice(0,2)}),L=()=>{y.value=!y.value},q=()=>{y.value=!1,f("quick-add-task")},S=()=>{y.value=!1,f("quick-add-project")},E=()=>{y.value=!1,f("quick-add-goal")},v=B=>{x.value&&!x.value.contains(B.target)&&(y.value=!1)};ke(()=>{document.addEventListener("click",v)}),xe(()=>{document.removeEventListener("click",v)});const i=()=>{u.value.trim()&&f("search",u.value)},w=()=>{i()},M=()=>{c.value=!1,f("logout")},H=()=>{c.value=!1,f("profile")},U=()=>{c.value=!1,f("settings")},P={mounted(B,l){B.clickOutsideEvent=I=>{B===I.target||B.contains(I.target)||l.value()},document.addEventListener("click",B.clickOutsideEvent)},unmounted(B){document.removeEventListener("click",B.clickOutsideEvent)}};return(B,l)=>{var I,N;return r(),d("header",ot,[e("div",rt,[e("button",{onClick:l[0]||(l[0]=R=>B.$emit("toggle-sidebar")),class:"lg:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors mr-2"},[...l[4]||(l[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e("div",nt,[e("div",at,[l[5]||(l[5]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),F(e("input",{"onUpdate:modelValue":l[1]||(l[1]=R=>u.value=R),type:"text",placeholder:"Поиск задач...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onInput:i,onKeydown:Ze(w,["enter"])},null,544),[[se,u.value]])])]),e("div",lt,[e("div",{class:"relative",ref_key:"quickAddMenuContainer",ref:x},[e("button",{onClick:D(L,["stop"]),class:"inline-flex items-center px-3 lg:px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors"},[...l[6]||(l[6]=[e("svg",{class:"w-5 h-5 lg:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden lg:inline"},"Создать",-1)])]),C(ee,{name:"dropdown"},{default:W(()=>[y.value?(r(),d("div",it,[e("button",{onClick:q,class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 transition-colors"},[...l[7]||(l[7]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",null,"Задачу")],-1)])]),e("button",{onClick:S,class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 transition-colors"},[...l[8]||(l[8]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),e("span",null,"Проект")],-1)])]),e("button",{onClick:E,class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 transition-colors"},[...l[9]||(l[9]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),e("span",null,"Цель")],-1)])])])):j("",!0)]),_:1})],512),e("div",dt,[e("button",{onClick:l[2]||(l[2]=R=>m.value=!m.value),class:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors relative"},[l[10]||(l[10]=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),a.value>0?(r(),d("span",ut)):j("",!0)]),m.value?F((r(),d("div",ct,[l[11]||(l[11]=e("div",{class:"px-4 py-2 border-b border-gray-200"},[e("h3",{class:"text-sm font-semibold text-gray-900"},"Уведомления")],-1)),t.value.length===0?(r(),d("div",vt," Нет новых уведомлений ")):(r(),d("div",pt,[(r(!0),d(re,null,ne(t.value,R=>(r(),d("button",{key:R.id,class:"w-full px-4 py-3 hover:bg-gray-50 transition-colors text-left"},[e("p",mt,$(R.message),1),e("p",ft,$(R.time),1)]))),128))]))])),[[P,()=>m.value=!1]]):j("",!0)]),e("div",gt,[e("button",{onClick:l[3]||(l[3]=R=>c.value=!c.value),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",kt,$(T.value),1),e("div",xt,[e("div",yt,$((I=g.user)==null?void 0:I.name),1),e("div",bt,$((N=g.user)==null?void 0:N.email),1)]),l[12]||(l[12]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),c.value?F((r(),d("div",ht,[e("button",{onClick:H,class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 transition-colors"},[...l[13]||(l[13]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),e("span",null,"Профиль")],-1)])]),e("button",{onClick:U,class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 transition-colors"},[...l[14]||(l[14]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),e("span",null,"Настройки")],-1)])]),l[16]||(l[16]=e("div",{class:"border-t border-gray-200 my-2"},null,-1)),e("button",{onClick:M,class:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 transition-colors"},[...l[15]||(l[15]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})]),e("span",null,"Выйти")],-1)])])])),[[P,()=>c.value=!1]]):j("",!0)])])])])}}},$t=te(wt,[["__scopeId","data-v-55c7a1d1"]]),Ct={class:"flex min-h-screen items-center justify-center p-4"},Mt={class:"flex items-center justify-between p-6 border-b border-gray-200"},jt={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},_t={class:"flex justify-end space-x-3 pt-4"},St=["disabled"],At={__name:"WorkspaceModal",props:{show:{type:Boolean,default:!1}},emits:["close","submit"],setup(g,{emit:_}){const k=g,f=_,u=p({name:"",description:""}),m=p(!1),c=p("");G(()=>k.show,a=>{a||(u.value={name:"",description:""},m.value=!1,c.value="")});const y=()=>{c.value="",m.value=!0,f("submit",u.value)};return(a,t)=>(r(),K(ae,{to:"body"},[C(ee,{name:"modal"},{default:W(()=>[g.show?(r(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=D(x=>a.$emit("close"),["self"]))},[t[10]||(t[10]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Ct,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=D(()=>{},["stop"]))},[e("div",Mt,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Новое рабочее пространство ",-1)),e("button",{onClick:t[0]||(t[0]=x=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:D(y,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Название * ",-1)),F(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=x=>u.value.name=x),type:"text",required:"",class:"input",placeholder:"Например: Команда разработки"},null,512),[[se,u.value.name]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Описание ",-1)),F(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=x=>u.value.description=x),rows:"3",class:"input",placeholder:"Краткое описание рабочего пространства"},null,512),[[se,u.value.description]])]),c.value?(r(),d("div",jt,$(c.value),1)):j("",!0),e("div",_t,[e("button",{type:"button",onClick:t[3]||(t[3]=x=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:m.value,class:"btn btn-primary"},$(m.value?"Создание...":"Создать"),9,St)])],32)])])])):j("",!0)]),_:1})]))}},Tt=te(At,[["__scopeId","data-v-d4f5ba25"]]),Bt={class:"flex min-h-screen items-center justify-center p-4"},Wt={class:"flex items-center justify-between p-6 border-b border-gray-200"},Et={class:"text-sm text-gray-600 mb-4"},Vt={class:"font-medium"},Pt={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},zt={class:"flex justify-end space-x-3 pt-4"},Dt=["disabled"],Lt={__name:"AddMemberModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(g,{emit:_}){const k=g,f=_,u=p({email:"",role:"member"}),m=p(!1),c=p("");G(()=>k.show,a=>{a||(u.value={email:"",role:"member"},m.value=!1,c.value="")});const y=()=>{var a;c.value="",m.value=!0,f("submit",{...u.value,workspace_id:(a=k.workspace)==null?void 0:a.id})};return(a,t)=>(r(),K(ae,{to:"body"},[C(ee,{name:"modal"},{default:W(()=>{var x;return[g.show?(r(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=D(T=>a.$emit("close"),["self"]))},[t[12]||(t[12]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Bt,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=D(()=>{},["stop"]))},[e("div",Wt,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Добавить пользователя ",-1)),e("button",{onClick:t[0]||(t[0]=T=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:D(y,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[e("p",Et,[t[8]||(t[8]=Q(" Workspace: ",-1)),e("span",Vt,$((x=g.workspace)==null?void 0:x.name),1)])]),e("div",null,[t[9]||(t[9]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email пользователя * ",-1)),F(e("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=T=>u.value.email=T),type:"email",required:"",class:"input",placeholder:"user@example.com"},null,512),[[se,u.value.email]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"role",class:"block text-sm font-medium text-gray-700 mb-2"}," Роль ",-1)),F(e("select",{id:"role","onUpdate:modelValue":t[2]||(t[2]=T=>u.value.role=T),class:"input"},[...t[10]||(t[10]=[e("option",{value:"viewer"},"Просмотр",-1),e("option",{value:"member"},"Участник",-1),e("option",{value:"admin"},"Администратор",-1)])],512),[[Ne,u.value.role]])]),c.value?(r(),d("div",Pt,$(c.value),1)):j("",!0),e("div",zt,[e("button",{type:"button",onClick:t[3]||(t[3]=T=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:m.value,class:"btn btn-primary"},$(m.value?"Добавление...":"Добавить"),9,Dt)])],32)])])])):j("",!0)]}),_:1})]))}},Ht=te(Lt,[["__scopeId","data-v-4f9b8513"]]),Ot={class:"flex min-h-screen items-center justify-center p-4"},It={class:"flex items-center justify-between p-6 border-b border-gray-200"},Rt={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},qt={class:"flex justify-end space-x-3 pt-4"},Ut=["disabled"],Qt={__name:"RenameWorkspaceModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(g,{emit:_}){const k=g,f=_,u=p({name:""}),m=p(!1),c=p("");G(()=>k.workspace,a=>{a&&(u.value.name=a.name)},{immediate:!0}),G(()=>k.show,a=>{a||(m.value=!1,c.value="")});const y=()=>{c.value="",m.value=!0,f("submit",u.value.name)};return(a,t)=>(r(),K(ae,{to:"body"},[C(ee,{name:"modal"},{default:W(()=>[g.show?(r(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[4]||(t[4]=D(x=>a.$emit("close"),["self"]))},[t[8]||(t[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Ot,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[3]||(t[3]=D(()=>{},["stop"]))},[e("div",It,[t[6]||(t[6]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Переименовать workspace ",-1)),e("button",{onClick:t[0]||(t[0]=x=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...t[5]||(t[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:D(y,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[7]||(t[7]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Новое название * ",-1)),F(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=x=>u.value.name=x),type:"text",required:"",class:"input",placeholder:"Название workspace"},null,512),[[se,u.value.name]])]),c.value?(r(),d("div",Rt,$(c.value),1)):j("",!0),e("div",qt,[e("button",{type:"button",onClick:t[2]||(t[2]=x=>a.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:m.value,class:"btn btn-primary"},$(m.value?"Сохранение...":"Сохранить"),9,Ut)])],32)])])])):j("",!0)]),_:1})]))}},Zt=te(Qt,[["__scopeId","data-v-27a57082"]]),Nt={class:"flex min-h-screen items-center justify-center p-4"},Ft={class:"flex items-center justify-between p-6 border-b border-gray-200"},Gt={class:"p-6"},Kt={key:0,class:"text-center py-8"},Jt={key:1,class:"text-center py-8 text-gray-500"},Xt={key:2,class:"space-y-3"},Yt={class:"flex items-center space-x-3"},es={class:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},ts={class:"font-medium text-gray-900"},ss={class:"text-sm text-gray-500"},os={class:"flex items-center space-x-3"},rs=["onClick","disabled"],ns={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},as={key:1,class:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-red-600"},ls={key:0,class:"px-6 pb-4"},is={class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},ds={class:"flex justify-end p-6 border-t border-gray-200"},us={__name:"MembersModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","member-removed"],setup(g,{emit:_}){const k=g,f=_,u=le(),m=ye(),c=p([]),y=p(!1),a=p(""),t=p(null),x=v=>v?v.split(" ").map(i=>i[0]).join("").toUpperCase().substring(0,2):"?",T=v=>({owner:"Владелец",admin:"Администратор",member:"Участник",viewer:"Наблюдатель"})[v]||v,L=v=>({owner:"bg-purple-100 text-purple-700",admin:"bg-blue-100 text-blue-700",member:"bg-green-100 text-green-700",viewer:"bg-gray-100 text-gray-700"})[v]||"bg-gray-100 text-gray-700",q=v=>{var H,U,P,B,l,I,N;const i=(H=m.user)==null?void 0:H.id,w=((U=k.workspace)==null?void 0:U.owner_id)===i,M=((I=(l=(B=(P=k.workspace)==null?void 0:P.members)==null?void 0:B.find(R=>R.id===i))==null?void 0:l.pivot)==null?void 0:I.role)==="admin";return((N=k.workspace)==null?void 0:N.owner_id)===v.id||v.id===i?!1:w||M},S=async()=>{var v;if((v=k.workspace)!=null&&v.id){y.value=!0,a.value="";try{const i=await u.fetchMembers(k.workspace.id);c.value=i.members||i||[]}catch(i){console.error("Error loading members:",i),a.value="Ошибка при загрузке участников"}finally{y.value=!1}}},E=async v=>{var i,w;if(confirm(`Вы уверены, что хотите удалить ${v.name} из workspace?`)){t.value=v.id,a.value="";try{await u.removeMember(k.workspace.id,v.id),await S(),f("member-removed",v)}catch(M){console.error("Error removing member:",M),a.value=((w=(i=M.response)==null?void 0:i.data)==null?void 0:w.message)||"Ошибка при удалении участника"}finally{t.value=null}}};return G(()=>k.show,v=>{v?S():(c.value=[],a.value="",t.value=null)}),G(()=>{var v;return(v=k.workspace)==null?void 0:v.id},()=>{k.show&&S()}),(v,i)=>(r(),K(ae,{to:"body"},[C(ee,{name:"modal"},{default:W(()=>[g.show?(r(),d("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:i[3]||(i[3]=D(w=>v.$emit("close"),["self"]))},[i[8]||(i[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Nt,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-auto",onClick:i[2]||(i[2]=D(()=>{},["stop"]))},[e("div",Ft,[i[5]||(i[5]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Участники workspace ",-1)),e("button",{onClick:i[0]||(i[0]=w=>v.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...i[4]||(i[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Gt,[y.value?(r(),d("div",Kt,[...i[6]||(i[6]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):c.value.length===0?(r(),d("div",Jt," Нет участников ")):(r(),d("div",Xt,[(r(!0),d(re,null,ne(c.value,w=>{var M,H,U,P;return r(),d("div",{key:w.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[e("div",Yt,[e("div",es,$(x(w.name)),1),e("div",null,[e("div",ts,$(w.name),1),e("div",ss,$(w.email),1)])]),e("div",os,[e("span",{class:Z(["px-3 py-1 text-xs font-medium rounded-full",L(((M=w.pivot)==null?void 0:M.role)||(((H=g.workspace)==null?void 0:H.owner_id)===w.id?"owner":"member"))])},$(T(((U=w.pivot)==null?void 0:U.role)||(((P=g.workspace)==null?void 0:P.owner_id)===w.id?"owner":"member"))),3),q(w)?(r(),d("button",{key:0,onClick:B=>E(w),class:"text-red-600 hover:text-red-700 p-2 rounded transition-colors",disabled:t.value===w.id,title:"Удалить из workspace"},[t.value!==w.id?(r(),d("svg",ns,[...i[7]||(i[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])])):(r(),d("div",as))],8,rs)):j("",!0)])])}),128))]))]),a.value?(r(),d("div",ls,[e("div",is,$(a.value),1)])):j("",!0),e("div",ds,[e("button",{onClick:i[1]||(i[1]=w=>v.$emit("close")),class:"btn btn-secondary"}," Закрыть ")])])])])):j("",!0)]),_:1})]))}},cs=te(us,[["__scopeId","data-v-7d4c4aab"]]),vs={class:"min-h-screen bg-gray-50"},ps={class:"flex h-screen"},ms={class:"flex flex-col h-full"},fs={class:"p-4 border-b border-gray-200"},gs={class:"flex items-center justify-between mb-3"},ks={class:"space-y-1"},xs=["onClick"],ys={class:"truncate"},bs=["onClick"],hs={key:0,class:"absolute right-0 mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50"},ws=["onClick"],$s=["onClick"],Cs=["onClick"],Ms={class:"flex-1 overflow-y-auto p-4"},js={class:"space-y-1"},_s={class:"mt-6 pt-6 border-t border-gray-200 space-y-1"},Ss={class:"mt-6 pt-6 border-t border-gray-200"},As={class:"space-y-1 max-h-64 overflow-y-auto"},Ts={class:"text-sm text-gray-700 truncate"},Bs={key:0,class:"text-xs text-gray-500"},Ws=["onClick"],Es={key:0,class:"px-3 py-2 text-sm text-gray-500 text-center"},Vs={class:"mt-6 pt-6 border-t border-gray-200"},Ps={class:"space-y-1"},zs={class:"hidden lg:block p-4 border-t border-gray-200"},Ds={class:"flex items-center justify-between"},Ls={class:"flex items-center space-x-3"},Hs={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},Os={class:"text-sm"},Is={class:"font-medium text-gray-900"},Rs={class:"text-xs text-gray-500"},qs={class:"flex-1 flex flex-col overflow-hidden"},Us={class:"flex-1 overflow-auto"},Qs={__name:"MainLayout",setup(g){const _=Fe(),k=ye(),f=le(),u=Ke(),m=Je(),{triggerTaskUpdate:c}=Ye(),y=p(!1);p(!1);const a=p(null),t=p(!1),x=p(!1),T=p(""),L=p(null),q=p(!1),S=p(!1),E=p(!1),v=p(!1),i=p(null),w=p(""),M=p(null),H=O(()=>(console.log("User from store:",k.user),k.user)),U=O(()=>f.workspaces),P=O(()=>u.counts),B=O(()=>f.currentWorkspace),l=O(()=>m.activeProjects),I=O(()=>{var s;return(((s=H.value)==null?void 0:s.name)||"").split(" ").map(b=>b[0]).join("").toUpperCase().slice(0,2)}),N=async o=>{a.value=o.id,f.setCurrentWorkspace(o),await u.fetchCounts();const b=_.currentRoute.value.path.split("/"),h=b[b.length-1],V=["inbox","next-actions","today","waiting","someday","calendar","projects","goals"].includes(h)?h:"inbox";_.push(`/workspaces/${o.id}/${V}`)},R=async o=>{try{const s=await f.createWorkspace(o);t.value=!1,await N(s)}catch(s){console.error("Ошибка создания workspace:",s)}},de=async()=>{await k.logout(),_.push("/login")},je=()=>{x.value=!0},ue=()=>{i.value=null,v.value=!0},_e=async o=>{var s,b;w.value="";try{i.value?await m.updateProject(i.value.id,o):await m.createProject(o),v.value=!1,i.value=null,await m.fetchProjects()}catch(h){console.error("Error saving project:",h),w.value=((b=(s=h.response)==null?void 0:s.data)==null?void 0:b.message)||h.message||"Ошибка при сохранении проекта"}},Se=()=>{v.value=!1,i.value=null,w.value=""},Ae=async o=>{var s,b;if(confirm(`Архивировать проект "${o.name}"?`))try{await m.archiveProject(o.id),await m.fetchProjects()}catch(h){console.error("Error archiving project:",h),alert("Ошибка при архивировании проекта: "+(((b=(s=h.response)==null?void 0:s.data)==null?void 0:b.message)||h.message))}},Te=()=>{console.log("Quick add goal")},Be=async o=>{var s,b;T.value="";try{await u.createTask(o),x.value=!1,await u.fetchCounts()}catch(h){console.error("Error creating task:",h),T.value=((b=(s=h.response)==null?void 0:s.data)==null?void 0:b.message)||h.message||"Ошибка при создании задачи"}},We=()=>{x.value=!1,T.value=""},J=async({taskId:o,newStatus:s})=>{var b,h,z,V;try{if(console.log("Dropping task:",o,"to status:",s),s==="today"){const n=new Date().toISOString().split("T")[0];await u.updateTask(o,{status:"today",due_date:n})}else await u.updateTask(o,{status:s});await u.fetchCounts(),c()}catch(n){console.error("Error updating task status:",n),console.error("Error response:",(b=n.response)==null?void 0:b.data),console.error("Error status:",(h=n.response)==null?void 0:h.status);const A=((V=(z=n.response)==null?void 0:z.data)==null?void 0:V.message)||"Ошибка при обновлении задачи";alert(A)}},Ee=o=>{console.log("Search:",o)},Ve=()=>{console.log("Profile clicked")},Pe=()=>{console.log("Settings clicked")},ie=o=>{var h,z,V;const s=(h=H.value)==null?void 0:h.id;if(!s)return!1;if(o.owner_id===s)return!0;const b=(z=o.members)==null?void 0:z.find(n=>n.id===s);return((V=b==null?void 0:b.pivot)==null?void 0:V.role)==="admin"},ze=o=>{L.value=L.value===o?null:o},De=o=>{M.value=o,S.value=!0,L.value=null},Le=o=>{M.value=o,E.value=!0,L.value=null},He=o=>{M.value=o,q.value=!0,L.value=null},Oe=()=>{q.value=!1,M.value=null},Ie=()=>{E.value=!1,M.value=null},Re=async()=>{await f.fetchWorkspaces()},qe=()=>{S.value=!1,M.value=null},Ue=async o=>{var s,b,h,z,V;try{console.log("Sending member data:",o),await f.addMember(o.workspace_id,{email:o.email,role:o.role}),q.value=!1,M.value=null,alert("Пользователь успешно добавлен в workspace")}catch(n){console.error("Error adding member:",n),console.error("Error response:",(s=n.response)==null?void 0:s.data);let A="Ошибка при добавлении пользователя";(h=(b=n.response)==null?void 0:b.data)!=null&&h.errors?A=Object.values(n.response.data.errors).flat().join(", "):(V=(z=n.response)==null?void 0:z.data)!=null&&V.message&&(A=n.response.data.message),alert(A)}},Qe=async o=>{var s,b,h,z,V;try{console.log("Renaming workspace:",M.value.id,"to:",o),await f.updateWorkspace(M.value.id,{name:o}),await f.fetchWorkspaces(),S.value=!1,M.value=null,alert("Workspace успешно переименован")}catch(n){console.error("Error renaming workspace:",n),console.error("Error response:",(s=n.response)==null?void 0:s.data);let A="Ошибка при переименовании";(h=(b=n.response)==null?void 0:b.data)!=null&&h.errors?A=Object.values(n.response.data.errors).flat().join(", "):(V=(z=n.response)==null?void 0:z.data)!=null&&V.message&&(A=n.response.data.message),alert(A)}};ke(async()=>{await f.fetchWorkspaces(),f.currentWorkspace&&(a.value=f.currentWorkspace.id,await u.fetchCounts(),await m.fetchProjects()),document.addEventListener("click",ce)}),G(()=>{var o;return(o=f.currentWorkspace)==null?void 0:o.id},o=>{o&&m.fetchProjects()}),xe(()=>{document.removeEventListener("click",ce)});const ce=()=>{L.value=null};return G(()=>f.currentWorkspace,async o=>{o&&(a.value=o.id,await u.fetchCounts())}),(o,s)=>{var z,V;const b=oe("router-link"),h=oe("router-view");return r(),d("div",vs,[e("div",ps,[e("aside",{class:Z(["fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out",y.value?"translate-x-0":"-translate-x-full lg:translate-x-0"])},[e("div",ms,[s[22]||(s[22]=e("div",{class:"hidden lg:flex items-center justify-between p-6 border-b border-gray-200"},[e("h1",{class:"text-xl font-bold text-gray-900"},"GTD TODO")],-1)),e("div",fs,[e("div",gs,[s[7]||(s[7]=e("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Рабочие пространства ",-1)),e("button",{onClick:s[0]||(s[0]=n=>t.value=!0),class:"text-gray-400 hover:text-gray-600 transition-colors",title:"Создать workspace"},[...s[6]||(s[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",ks,[(r(!0),d(re,null,ne(U.value,n=>(r(),d("div",{key:n.id,class:Z(["flex items-center rounded-lg transition-colors",a.value===n.id?"bg-primary-50":"hover:bg-gray-50"])},[e("button",{onClick:A=>N(n),class:Z(["flex-1 flex items-center px-3 py-2 text-sm text-left",a.value===n.id?"text-primary-700 font-medium":"text-gray-700"])},[e("span",ys,$(n.name),1)],10,xs),e("div",{class:"relative",onClick:s[2]||(s[2]=D(()=>{},["stop"]))},[e("button",{onClick:A=>ze(n.id),class:"p-2 text-gray-400 hover:text-gray-600 rounded transition-colors"},[...s[8]||(s[8]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})],-1)])],8,bs),C(ee,{name:"dropdown"},{default:W(()=>[L.value===n.id?(r(),d("div",hs,[e("button",{onClick:A=>Le(n),class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 transition-colors"}," Участники ",8,ws),ie(n)?(r(),d("button",{key:0,onClick:A=>De(n),class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 transition-colors"}," Переименовать ",8,$s)):j("",!0),ie(n)?(r(),d("button",{key:1,onClick:A=>He(n),class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 transition-colors"}," Добавить пользователя ",8,Cs)):j("",!0),ie(n)?j("",!0):(r(),d("button",{key:2,onClick:s[1]||(s[1]=A=>L.value=null),class:"w-full px-4 py-2 text-left text-sm text-gray-500 italic",disabled:""}," Нет доступных действий "))])):j("",!0)]),_:2},1024)])],2))),128))])]),e("nav",Ms,[e("div",js,[C(X,{to:"/workspaces/:id/inbox",icon:"inbox",count:P.value.inbox,"drop-status":"inbox",onTaskDropped:J},{default:W(()=>[...s[9]||(s[9]=[Q(" Входящие ",-1)])]),_:1},8,["count"])]),e("div",_s,[C(X,{to:"/workspaces/:id/today",icon:"calendar",count:P.value.today,"drop-status":"today",onTaskDropped:J},{default:W(()=>[...s[10]||(s[10]=[Q(" Сегодня ",-1)])]),_:1},8,["count"]),C(X,{to:"/workspaces/:id/next-actions",icon:"lightning",count:P.value.next_actions,"drop-status":"next_action",onTaskDropped:J},{default:W(()=>[...s[11]||(s[11]=[Q(" Следующие ",-1)])]),_:1},8,["count"]),C(X,{to:"/workspaces/:id/tomorrow",icon:"calendar-days",count:P.value.tomorrow,"drop-status":"tomorrow",onTaskDropped:J},{default:W(()=>[...s[12]||(s[12]=[Q(" Завтра ",-1)])]),_:1},8,["count"]),C(pe,{to:"/workspaces/:id/calendar",icon:"calendar-days"},{default:W(()=>[...s[13]||(s[13]=[Q(" Календарь ",-1)])]),_:1}),C(X,{to:"/workspaces/:id/someday",icon:"archive",count:P.value.someday,"drop-status":"someday",onTaskDropped:J},{default:W(()=>[...s[14]||(s[14]=[Q(" Когда-нибудь ",-1)])]),_:1},8,["count"]),C(X,{to:"/workspaces/:id/waiting",icon:"clock",count:P.value.waiting,"drop-status":"waiting",onTaskDropped:J},{default:W(()=>[...s[15]||(s[15]=[Q(" Ожидание ",-1)])]),_:1},8,["count"])]),e("div",Ss,[e("div",{class:"flex items-center justify-between px-3 mb-3"},[s[17]||(s[17]=e("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Проекты ",-1)),e("button",{onClick:ue,class:"text-gray-400 hover:text-gray-600",title:"Создать проект"},[...s[16]||(s[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",As,[(r(!0),d(re,null,ne(l.value,n=>{var A;return r(),d("div",{key:n.id,class:"flex items-center justify-between group px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors"},[C(b,{to:`/workspaces/${(A=B.value)==null?void 0:A.id}/projects/${n.id}`,class:"flex items-center space-x-2 flex-1 min-w-0"},{default:W(()=>[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:Ge({backgroundColor:n.color||"#3B82F6"})},null,4),e("span",Ts,$(n.name),1),n.tasks_count>0?(r(),d("span",Bs," ("+$(n.tasks_count)+") ",1)):j("",!0)]),_:2},1032,["to"]),e("button",{onClick:D(ve=>Ae(n),["stop"]),class:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-gray-600 p-1 transition-opacity",title:"Архивировать"},[...s[18]||(s[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)])],8,Ws)])}),128)),l.value.length===0?(r(),d("div",Es," Нет проектов ")):j("",!0)])]),e("div",Vs,[s[20]||(s[20]=e("h3",{class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3"}," Организация ",-1)),e("div",Ps,[C(pe,{to:"/workspaces/:id/goals",icon:"target"},{default:W(()=>[...s[19]||(s[19]=[Q(" Цели ",-1)])]),_:1})])])]),e("div",zs,[e("div",Ds,[e("div",Ls,[e("div",Hs,$(I.value),1),e("div",Os,[e("div",Is,$((z=H.value)==null?void 0:z.name),1),e("div",Rs,$((V=H.value)==null?void 0:V.email),1)])]),e("button",{onClick:de,class:"text-gray-400 hover:text-gray-600"},[...s[21]||(s[21]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1)])])])])])],2),y.value?(r(),d("div",{key:0,onClick:s[3]||(s[3]=n=>y.value=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})):j("",!0),e("main",qs,[C($t,{user:H.value,onQuickAddTask:je,onQuickAddProject:ue,onQuickAddGoal:Te,onSearch:Ee,onLogout:de,onProfile:Ve,onSettings:Pe,onToggleSidebar:s[4]||(s[4]=n=>y.value=!y.value)},null,8,["user"]),e("div",Us,[C(h)])])]),C(Tt,{show:t.value,onClose:s[5]||(s[5]=n=>t.value=!1),onSubmit:R},null,8,["show"]),C(Xe,{show:x.value,"server-error":T.value,onClose:We,onSubmit:Be},null,8,["show","server-error"]),C(Ht,{show:q.value,workspace:M.value,onClose:Oe,onSubmit:Ue},null,8,["show","workspace"]),C(Zt,{show:S.value,workspace:M.value,onClose:qe,onSubmit:Qe},null,8,["show","workspace"]),C(cs,{show:E.value,workspace:M.value,onClose:Ie,onMemberRemoved:Re},null,8,["show","workspace"]),C(et,{show:v.value,project:i.value,"server-error":w.value,onClose:Se,onSubmit:_e},null,8,["show","project","server-error"])])}}},Xs=te(Qs,[["__scopeId","data-v-d80a9f8a"]]);export{Xs as default};
