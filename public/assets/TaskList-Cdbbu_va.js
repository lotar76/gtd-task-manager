import{r as S,c as o,o as n,f as F,b as u,g as G,F as V,z,H as A,a as i,p as M,w as I,t as l,e as E,E as $}from"./index-Bnn-J_Yz.js";import{g as J,c as O,d as b}from"./ru-B7JyRvIu.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";var L={exports:{}};(function(T,H){(function(f,x){T.exports=x()})(O,function(){return function(f,x,p){f=f||{};var h=x.prototype,C={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function D(s,m,y,r){return h.fromToBase(s,m,y,r)}p.en.relativeTime=C,h.fromToBase=function(s,m,y,r,t){for(var e,g,a,w=y.$locale().relativeTime||C,k=f.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],j=k.length,v=0;v<j;v+=1){var d=k[v];d.d&&(e=r?p(s).diff(y,d.d,!0):y.diff(s,d.d,!0));var _=(f.rounding||Math.round)(Math.abs(e));if(a=e>0,_<=d.r||!d.r){_<=1&&v>0&&(d=k[v-1]);var B=w[d.l];t&&(_=t(""+_)),g=typeof B=="string"?B.replace("%d",_):B(_,m,d.l,a);break}}if(m)return g;var N=a?w.future:w.past;return typeof N=="function"?N(g):N.replace("%s",g)},h.to=function(s,m){return D(s,m,this,!0)},h.from=function(s,m){return D(s,m,this)};var c=function(s){return s.$u?p.utc():p()};h.toNow=function(s){return this.to(c(this),s)},h.fromNow=function(s){return this.from(c(this),s)}}})})(L);var K=L.exports;const P=J(K),Q=["onDragstart","onClick"],R={class:"flex items-start space-x-3"},U=["onClick"],W={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},X={class:"flex-1 min-w-0"},Y={key:0,class:"text-sm text-gray-500 mt-1 truncate"},Z={class:"flex flex-wrap items-center gap-2 mt-2"},ee={key:0,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"},te={key:3,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700"},re={key:0},oe={key:1},ne={key:2},se={key:4,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700"},ie={key:0,class:"text-center py-12"},ae={__name:"TaskList",props:{tasks:{type:Array,default:()=>[]}},emits:["task-click","toggle-complete","task-drag-start","task-drag-end"],setup(T,{emit:H}){b.extend(P),b.locale("ru");const f=H,x=S(!1),p=S(null),h=(r,t)=>{x.value=!0,p.value=t,r.dataTransfer.effectAllowed="move",r.dataTransfer.setData("application/json",JSON.stringify(t)),f("task-drag-start",t)},C=()=>{x.value=!1,p.value=null,f("task-drag-end")},D=r=>{const t=b(r),e=b();return t.isSame(e,"day")?"Сегодня":t.isSame(e.add(1,"day"),"day")?"Завтра":t.isBefore(e)?t.fromNow():t.format("D MMM")},c=r=>r?/^\d{2}:\d{2}$/.test(r)?r:r.substring(0,5):"",s=r=>{if(r.status==="completed")return"bg-gray-100 text-gray-600";const t=b(r.due_date),e=b();return t.isBefore(e,"day")?"bg-red-100 text-red-700":t.isSame(e,"day")?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600"},m=r=>{if(!r.estimated_time||!r.end_time)return 0;const t=c(r.estimated_time),e=c(r.end_time);if(!t||!e)return 0;const[g,a]=t.split(":").map(Number),[w,k]=e.split(":").map(Number),j=g*60+a;let d=w*60+k-j;return d<0&&(d+=24*60),d/60},y=r=>{if(r.status==="completed")return"bg-white dark:bg-gray-800";const t=m(r);return t===0||t<1?"bg-gradient-to-l from-white via-green-50 to-green-100 dark:from-gray-800 dark:via-green-900/20 dark:to-green-900/40":t>=1&&t<2?"bg-gradient-to-l from-white via-orange-50 to-orange-100 dark:from-gray-800 dark:via-orange-900/20 dark:to-orange-900/40":t>=2?"bg-gradient-to-l from-white via-red-50 to-red-100 dark:from-gray-800 dark:via-red-900/20 dark:to-red-900/40":"bg-white dark:bg-gray-800"};return(r,t)=>(n(),o(V,null,[F(A,{name:"task",tag:"div",class:"space-y-2"},{default:G(()=>[(n(!0),o(V,null,z(T.tasks,e=>{var g;return n(),o("div",{key:e.id,draggable:"true",onDragstart:a=>h(a,e),onDragend:C,class:M(["border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-sm transition-all cursor-move relative overflow-hidden",[{"opacity-50":x.value&&((g=p.value)==null?void 0:g.id)===e.id},y(e)]]),onClick:a=>r.$emit("task-click",e)},[i("div",R,[i("button",{onClick:I(a=>r.$emit("toggle-complete",e),["stop"]),class:M(["mt-1 flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors duration-200",e.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.status==="completed"?(n(),o("svg",W,[...t[0]||(t[0]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):u("",!0)],10,U),i("div",X,[i("h3",{class:M(["text-sm font-medium transition-all duration-200",e.status==="completed"?"text-gray-400 line-through":"text-gray-900 dark:text-white"])},l(e.title),3),e.description?(n(),o("p",Y,l(e.description),1)):u("",!0),i("div",Z,[e.workspace?(n(),o("span",ee,[t[1]||(t[1]=i("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),E(" "+l(e.workspace.name),1)])):u("",!0),e.project?(n(),o("span",{key:1,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium",style:$({backgroundColor:e.project.color+"20",color:e.project.color})},l(e.project.name),5)):u("",!0),e.due_date?(n(),o("span",{key:2,class:M(["inline-flex items-center px-2 py-1 rounded text-xs font-medium",s(e)])},[t[2]||(t[2]=i("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),E(" "+l(D(e.due_date)),1)],2)):u("",!0),e.estimated_time||e.end_time?(n(),o("span",te,[t[3]||(t[3]=i("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e.estimated_time&&e.end_time?(n(),o("span",re,l(c(e.estimated_time))+" - "+l(c(e.end_time)),1)):e.estimated_time?(n(),o("span",oe,l(c(e.estimated_time)),1)):e.end_time?(n(),o("span",ne," до "+l(c(e.end_time)),1)):u("",!0)])):u("",!0),e.assignee?(n(),o("span",se,l(e.assignee.name),1)):u("",!0),e.context?(n(),o("span",{key:5,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium",style:$({backgroundColor:e.context.color+"20",color:e.context.color})},l(e.context.name),5)):u("",!0),(n(!0),o(V,null,z(e.tags,a=>(n(),o("span",{key:a.id,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium",style:$({backgroundColor:a.color+"20",color:a.color})},l(a.name),5))),128))])]),e.priority!=="medium"?(n(),o("div",{key:0,class:M(["flex-shrink-0 w-2 h-2 rounded-full mt-2",{"bg-red-500":e.priority==="urgent","bg-orange-500":e.priority==="high","bg-blue-500":e.priority==="low"}])},null,2)):u("",!0)])],42,Q)}),128))]),_:1}),T.tasks.length?u("",!0):(n(),o("div",ie,[...t[4]||(t[4]=[i("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),i("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Нет задач",-1),i("p",{class:"mt-1 text-sm text-gray-500"},"Создайте первую задачу чтобы начать",-1)])]))],64))}},me=q(ae,[["__scopeId","data-v-686d4294"]]);export{me as T};
