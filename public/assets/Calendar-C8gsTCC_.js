import{c as i,a as s,o as n,r as T,k as w,z as F,q as Ce,s as Se,b as g,f as W,p as y,E,t as l,F as v,y as _,C as V,w as G,e as $e}from"./index-C8nfUhJg.js";import{u as Oe,T as ke,a as oe}from"./TaskModal-l9DQNKoh.js";import{u as He}from"./workspace-B-XDxAs_.js";import{g as ie,c as ne,d as h}from"./ru-B7JyRvIu.js";import{_ as je}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Ne($,D){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function Be($,D){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}var ae={exports:{}};(function($,D){(function(M,d){$.exports=d()})(ne,function(){return function(M,d){d.prototype.isSameOrAfter=function(f,C){return this.isSame(f,C)||this.isAfter(f,C)}}})})(ae);var We=ae.exports;const Ee=ie(We);var le={exports:{}};(function($,D){(function(M,d){$.exports=d()})(ne,function(){return function(M,d){d.prototype.isSameOrBefore=function(f,C){return this.isSame(f,C)||this.isBefore(f,C)}}})})(le);var Ae=le.exports;const ze=ie(Ae),Pe={class:"p-2 sm:p-4 lg:p-8"},Ie={class:"max-w-7xl mx-auto"},Fe={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4 lg:mb-6"},Ve={class:"flex items-center space-x-1 sm:space-x-2 mt-3 lg:mt-0 overflow-x-auto pb-2 lg:pb-0"},Ge={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4 mb-4 lg:mb-6"},Le={class:"flex items-center justify-between"},Ue={class:"text-base sm:text-lg font-semibold text-gray-900 text-center px-2"},qe={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Je={class:"grid grid-cols-7 border-b border-gray-200"},Ke={class:"grid grid-cols-7"},Qe=["onClick"],Xe={class:"flex flex-col h-full"},Ze={class:"flex justify-between items-start mb-1"},Re={key:0,class:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-semibold bg-primary-600 text-white rounded-full"},et={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},tt={class:"hidden lg:block overflow-x-auto"},rt={class:"grid border-b border-gray-200",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},st={class:"font-semibold"},ot={class:"text-xs mt-1"},it={class:"grid border-b border-gray-200",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},nt={class:"border-r border-gray-200 bg-gray-50"},at={class:"text-xs text-gray-500"},lt={class:"relative"},dt={class:"absolute inset-0"},ut=["onClick"],ct={class:"font-medium truncate"},mt={key:0,class:"text-[10px] opacity-75 mt-0.5"},pt={key:0},gt={key:1},yt={key:2},ht={class:"grid border-t border-gray-200",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},vt={class:"space-y-1 min-w-0"},_t=["onClick"],ft={class:"font-medium truncate block"},xt={class:"lg:hidden overflow-x-auto"},bt={class:"flex min-w-max"},wt={class:"mb-3 sticky top-0 bg-inherit pb-2 border-b border-gray-200"},Mt={class:"text-xs text-gray-500 mb-1"},Yt={class:"space-y-2"},Tt=["onClick"],Dt={class:"font-medium text-sm mb-1"},Ct={key:0,class:"text-xs text-gray-600 mt-1"},St={key:0},$t={key:1},Ot={key:2},kt={key:0,class:"text-xs text-gray-400 text-center py-4"},Ht={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},jt={class:"p-3 sm:p-4 border-b border-gray-200"},Nt={class:"text-base sm:text-lg font-semibold text-gray-900"},Bt={class:"hidden lg:block overflow-x-auto"},Wt={class:"grid border-b border-gray-200",style:{gridTemplateColumns:"60px 1fr"}},Et={class:"border-r border-gray-200 bg-gray-50"},At={class:"text-xs text-gray-500"},zt={class:"relative"},Pt={class:"relative"},It={class:"absolute inset-0"},Ft=["onClick"],Vt={class:"font-medium text-sm sm:text-base text-gray-900 mb-1"},Gt={key:0,class:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2"},Lt={class:"flex flex-wrap items-center gap-2 mt-2"},Ut={key:0,class:"text-xs text-gray-600 flex items-center"},qt={key:0},Jt={key:1},Kt={key:2},Qt={class:"grid border-t border-gray-200",style:{gridTemplateColumns:"60px 1fr"}},Xt={class:"p-3"},Zt={class:"space-y-2"},Rt=["onClick"],er={class:"font-medium text-sm sm:text-base text-gray-900 mb-1"},tr={key:0,class:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2"},rr={class:"flex flex-wrap items-center gap-2 mt-2"},sr={class:"lg:hidden p-3 sm:p-4"},or={class:"space-y-2 sm:space-y-3"},ir=["onClick"],nr={class:"flex items-start justify-between"},ar={class:"flex-1 min-w-0"},lr={class:"font-medium text-sm sm:text-base text-gray-900 mb-1"},dr={key:0,class:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2"},ur={class:"flex flex-wrap items-center gap-2 mt-2"},cr={key:0,class:"text-xs text-gray-600 flex items-center"},mr={key:0},pr={key:1},gr={key:2},yr={key:0,class:"text-center py-8 sm:py-12 text-gray-500 text-sm sm:text-base"},hr={__name:"Calendar",setup($){h.extend(Ee),h.extend(ze),h.locale("ru");const D=Oe(),M=He(),d=T(h()),f=T([]),C=T(!1),de=T(!1),p=T("month"),A=T(!1),O=T(null),z=T(""),L=T(h()),U=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],ue=w(()=>d.value.format("MMMM")),ce=w(()=>d.value.format("YYYY"));w(()=>{if(p.value!=="month"||f.value.length===0)return 0;const r=d.value.startOf("month"),t=d.value.endOf("month");return f.value.filter(a=>{if(!a.due_date||a.status==="completed")return!1;const o=h(a.due_date);return o.isValid()?o.isSameOrAfter(r,"day")&&o.isSameOrBefore(t,"day"):!1}).length});const me=w(()=>{if(p.value==="month")return`${ue.value} ${ce.value}`;if(p.value==="week"){const r=d.value.startOf("week"),t=r.add(6,"day");return r.month()===t.month()?`${r.format("D")} - ${t.format("D MMMM YYYY")}`:`${r.format("D MMM")} - ${t.format("D MMM YYYY")}`}else return d.value.format("D MMMM YYYY")}),j=w(()=>{const r=d.value.startOf("week"),t=[];for(let e=0;e<7;e++){const a=r.add(e,"day"),o=a.format("YYYY-MM-DD"),u=f.value.filter(c=>c.due_date&&h(c.due_date).format("YYYY-MM-DD")===o&&c.status!=="completed");t.push({day:a.date(),monthName:a.format("MMM"),date:o,isToday:a.isSame(h(),"day"),tasks:u})}return t}),P=w(()=>{const r=d.value.format("YYYY-MM-DD");return f.value.filter(t=>t.due_date&&h(t.due_date).format("YYYY-MM-DD")===r&&t.status!=="completed")}),Z=w(()=>P.value.filter(r=>r.estimated_time||r.end_time)),pe=w(()=>P.value.filter(r=>!r.estimated_time&&!r.end_time)),R=r=>{if(!r||r.length===0)return Array.from({length:24},(o,u)=>u);let t=23,e=0;r.forEach(o=>{const u=o.estimated_time||o.end_time,c=o.end_time||o.estimated_time;if(u){const x=m(u),[b]=x.split(":").map(Number);t=Math.min(t,b),e=Math.max(e,b)}if(c){const x=m(c),[b]=x.split(":").map(Number);t=Math.min(t,b),e=Math.max(e,b)}}),t=Math.max(0,Math.floor(t)-1),e=Math.min(23,Math.ceil(e)+1);const a=[];for(let o=t;o<=e;o++)a.push(o);return a.length>0?a:Array.from({length:24},(o,u)=>u)},N=w(()=>R(Z.value)),B=w(()=>{const r=j.value.flatMap(t=>te(t.date));return R(r)}),ge=w(()=>{const r=[],t=d.value.startOf("month"),e=d.value.endOf("month"),a=t.day()===0?6:t.day()-1;for(let u=a-1;u>=0;u--){const c=t.subtract(u+1,"day");r.push(q(c,!1))}for(let u=0;u<e.date();u++){const c=t.add(u,"day");r.push(q(c,!0))}const o=42-r.length;for(let u=0;u<o;u++){const c=e.add(u+1,"day");r.push(q(c,!1))}return r}),q=(r,t)=>{const e=r.format("YYYY-MM-DD"),a=f.value.filter(o=>o.due_date&&h(o.due_date).format("YYYY-MM-DD")===e&&o.status!=="completed");return{day:r.date(),date:e,currentMonth:t,isToday:r.isSame(h(),"day"),taskCount:a.length,tasks:a}},Y=async()=>{C.value=!0;try{let r,t;if(p.value==="month")r=d.value.startOf("month").subtract(7,"days").format("YYYY-MM-DD"),t=d.value.endOf("month").add(7,"days").format("YYYY-MM-DD");else if(p.value==="week"){const e=d.value.startOf("week");r=e.format("YYYY-MM-DD"),t=e.add(6,"day").format("YYYY-MM-DD")}else r=d.value.format("YYYY-MM-DD"),t=d.value.format("YYYY-MM-DD");await D.fetchCalendar(r,t,de.value),f.value=D.tasks}finally{C.value=!1}};F(()=>p.value,()=>{Y()});const ye=()=>{p.value==="month"?d.value=d.value.subtract(1,"month"):p.value==="week"?d.value=d.value.subtract(1,"week"):d.value=d.value.subtract(1,"day"),Y()},he=()=>{p.value==="month"?d.value=d.value.add(1,"month"):p.value==="week"?d.value=d.value.add(1,"week"):d.value=d.value.add(1,"day"),Y()},m=r=>r?/^\d{2}:\d{2}$/.test(r)?r:r.substring(0,5):"",ee=r=>`${r.toString().padStart(2,"0")}:00`,te=r=>f.value.filter(t=>t.due_date&&h(t.due_date).format("YYYY-MM-DD")===r&&t.status!=="completed"&&(t.estimated_time||t.end_time)),ve=r=>f.value.filter(t=>t.due_date&&h(t.due_date).format("YYYY-MM-DD")===r&&t.status!=="completed"&&!t.estimated_time&&!t.end_time),I=(r=null)=>{if(!r||r.length===0)return null;const t=L.value,e=t.hour(),a=t.minute(),o=r[0],u=r[r.length-1];if(e<o||e>u)return null;const c=64,x=e*60+a,b=o*60,S=(x-b)/60*c;return Math.max(0,S)},re=(r,t=null)=>{if(!r.estimated_time&&!r.end_time)return{display:"none"};const e=r.estimated_time||r.end_time,a=r.end_time||r.estimated_time;if(!e||!a)return{display:"none"};const o=m(e),u=m(a),[c,x]=o.split(":").map(Number),[b,S]=u.split(":").map(Number),we=t&&t.length>0?t[0]:0,se=64,Q=c*60+x,Me=we*60,Ye=(Q-Me)/60*se;let X=b*60+S;X<Q&&(X+=24*60);const Te=(X-Q)/60*se,De=Math.max(Te,40);return{top:`${Math.max(0,Ye)}px`,height:`${De}px`}},_e=r=>{if(!r.estimated_time||!r.end_time)return 0;const t=m(r.estimated_time),e=m(r.end_time);if(!t||!e)return 0;const[a,o]=t.split(":").map(Number),[u,c]=e.split(":").map(Number),x=a*60+o;let S=u*60+c-x;return S<0&&(S+=24*60),S/60},k=r=>{if(r.status==="completed")return"bg-gray-100";const t=_e(r);return t===0||t<1?"bg-gradient-to-l from-white via-green-50 to-green-100":t>=1&&t<2?"bg-gradient-to-l from-white via-orange-50 to-orange-100":t>=2?"bg-gradient-to-l from-white via-red-50 to-red-100":"bg-white"},J=r=>({high:"Высокий",medium:"Средний",low:"Низкий",urgent:"Срочный"})[r]||r,H=r=>{O.value=r,A.value=!0},fe=r=>{d.value=h(r),p.value="day",Y()},xe=async r=>{var t,e,a,o,u;z.value="";try{O.value?await D.updateTask(O.value.id,r):await D.createTask(r),A.value=!1,O.value=null,await Y()}catch(c){console.error("Error saving task:",c),console.error("Error details:",(t=c.response)==null?void 0:t.data);let x="Ошибка при сохранении задачи";(a=(e=c.response)==null?void 0:e.data)!=null&&a.errors?x=Object.values(c.response.data.errors).flat().join(", "):(u=(o=c.response)==null?void 0:o.data)!=null&&u.message&&(x=c.response.data.message),z.value=x}},be=()=>{A.value=!1,O.value=null,z.value=""};F(()=>{var r;return(r=M.currentWorkspace)==null?void 0:r.id},r=>{r&&Y()},{immediate:!0}),F(()=>M.selectedWorkspaces,()=>{M.selectedWorkspaces.length>0&&Y()},{deep:!0}),F(()=>d.value.format("YYYY-MM"),()=>{M.selectedWorkspaces.length>0&&Y()});let K=null;return Ce(()=>{M.selectedWorkspaces.length>0&&Y(),L.value=h(),K=setInterval(()=>{L.value=h()},6e4)}),Se(()=>{K&&clearInterval(K)}),(r,t)=>(n(),i("div",Pe,[s("div",Ie,[s("div",Fe,[t[3]||(t[3]=s("div",null,[s("h1",{class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900"},"Календарь")],-1)),s("div",Ve,[s("button",{onClick:t[0]||(t[0]=e=>p.value="day"),class:y(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",p.value==="day"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 active:bg-gray-200"])}," День ",2),s("button",{onClick:t[1]||(t[1]=e=>p.value="week"),class:y(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",p.value==="week"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 active:bg-gray-200"])}," Неделя ",2),s("button",{onClick:t[2]||(t[2]=e=>p.value="month"),class:y(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",p.value==="month"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 active:bg-gray-200"])}," Месяц ",2)])]),s("div",Ge,[s("div",Le,[s("button",{onClick:ye,class:"p-2 sm:p-3 rounded-lg bg-gray-100 hover:bg-gray-200 active:bg-gray-300 transition-colors touch-manipulation"},[W(E(Ne),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700"})]),s("h2",Ue,l(me.value),1),s("button",{onClick:he,class:"p-2 sm:p-3 rounded-lg bg-gray-100 hover:bg-gray-200 active:bg-gray-300 transition-colors touch-manipulation"},[W(E(Be),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700"})])])]),p.value==="month"?(n(),i("div",qe,[s("div",Je,[(n(),i(v,null,_(U,e=>s("div",{key:e,class:"text-center py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-700 border-r border-gray-200 last:border-r-0"},l(e),1)),64))]),s("div",Ke,[(n(!0),i(v,null,_(ge.value,(e,a)=>(n(),i("div",{key:a,onClick:o=>fe(e.date),class:y(["min-h-[60px] sm:min-h-[80px] lg:min-h-[100px] border-b border-r border-gray-200 last:border-r-0 p-1 sm:p-2 cursor-pointer touch-manipulation hover:bg-gray-50 active:bg-gray-100 transition-colors",{"bg-gray-50":!e.currentMonth,"bg-primary-50 hover:bg-primary-100":e.isToday}])},[s("div",Xe,[s("div",Ze,[s("span",{class:y(["text-xs sm:text-sm font-medium",{"text-gray-400":!e.currentMonth,"text-primary-700":e.isToday,"text-gray-900":e.currentMonth&&!e.isToday}])},l(e.day),3),e.taskCount>0?(n(),i("span",Re,l(e.taskCount),1)):g("",!0)])])],10,Qe))),128))])])):g("",!0),p.value==="week"?(n(),i("div",et,[s("div",tt,[s("div",rt,[t[4]||(t[4]=s("div",{class:"border-r border-gray-200"},null,-1)),(n(!0),i(v,null,_(j.value,(e,a)=>(n(),i("div",{key:a,class:y(["text-center py-3 text-sm font-medium text-gray-700 border-r border-gray-200 last:border-r-0",{"bg-primary-50":e.isToday}])},[s("div",st,l(U[a]),1),s("div",ot,l(e.day)+" "+l(e.monthName),1)],2))),128))]),s("div",it,[s("div",nt,[(n(!0),i(v,null,_(B.value,e=>(n(),i("div",{key:e,class:"h-16 border-b border-gray-200 flex items-start justify-end pr-2 pt-1"},[s("span",at,l(ee(e)),1)]))),128))]),(n(!0),i(v,null,_(j.value,(e,a)=>(n(),i("div",{key:a,class:y(["border-r border-gray-200 last:border-r-0 relative",{"bg-primary-50/30":e.isToday}])},[s("div",lt,[(n(!0),i(v,null,_(B.value,o=>(n(),i("div",{key:o,class:"h-16 border-b border-gray-100"}))),128)),e.isToday&&I(B.value)?(n(),i("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:V({top:I(B.value)+"px"})},[...t[5]||(t[5]=[s("div",{class:"flex items-center"},[s("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),s("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):g("",!0),s("div",dt,[(n(!0),i(v,null,_(te(e.date),o=>(n(),i("div",{key:o.id,onClick:G(u=>H(o),["stop"]),class:y(["absolute left-1 right-1 rounded cursor-pointer p-1.5 text-xs touch-manipulation border-l-2 shadow-sm z-10",[o.status==="completed"?"bg-gray-100 text-gray-500 line-through border-gray-300":k(o)+" text-primary-700 border-primary-500"]]),style:V(re(o,B.value))},[s("div",ct,l(o.title),1),o.estimated_time||o.end_time?(n(),i("div",mt,[o.estimated_time&&o.end_time?(n(),i("span",pt,l(m(o.estimated_time))+" - "+l(m(o.end_time)),1)):o.end_time?(n(),i("span",gt," до "+l(m(o.end_time)),1)):o.estimated_time?(n(),i("span",yt,l(m(o.estimated_time)),1)):g("",!0)])):g("",!0)],14,ut))),128))])])],2))),128))]),s("div",ht,[t[6]||(t[6]=s("div",{class:"border-r border-gray-200 bg-gray-50 p-2"},[s("span",{class:"text-xs text-gray-500"},"Без времени")],-1)),(n(!0),i(v,null,_(j.value,(e,a)=>(n(),i("div",{key:a,class:y(["border-r border-gray-200 last:border-r-0 p-2",{"bg-primary-50/30":e.isToday}])},[s("div",vt,[(n(!0),i(v,null,_(ve(e.date),o=>(n(),i("div",{key:o.id,onClick:G(u=>H(o),["stop"]),class:y(["p-1.5 rounded cursor-pointer text-xs touch-manipulation border-l-2 w-full max-w-full overflow-hidden",[o.status==="completed"?"bg-gray-100 text-gray-500 line-through border-gray-300":k(o)+" text-primary-700 border-primary-500"]])},[s("div",ft,l(o.title),1)],10,_t))),128))])],2))),128))])]),s("div",xt,[s("div",bt,[(n(!0),i(v,null,_(j.value,(e,a)=>(n(),i("div",{key:a,class:y(["w-[280px] min-w-[280px] border-r border-gray-200 last:border-r-0 p-3",{"bg-primary-50":e.isToday}])},[s("div",wt,[s("div",Mt,l(U[a]),1),s("span",{class:y(["text-base font-semibold",{"text-primary-700":e.isToday,"text-gray-900":!e.isToday}])},l(e.day)+" "+l(e.monthName),3)]),s("div",Yt,[(n(!0),i(v,null,_(e.tasks,o=>(n(),i("div",{key:o.id,onClick:u=>H(o),class:y(["p-3 rounded-lg cursor-pointer touch-manipulation border-l-4",[o.status==="completed"?"bg-gray-100 text-gray-500 line-through border-gray-300":k(o)+" text-primary-700 border-primary-500"]])},[s("div",Dt,l(o.title),1),o.estimated_time||o.end_time?(n(),i("div",Ct,[t[7]||(t[7]=$e(" ⏱ ",-1)),o.estimated_time&&o.end_time?(n(),i("span",St,l(m(o.estimated_time))+" - "+l(m(o.end_time)),1)):o.estimated_time?(n(),i("span",$t,l(m(o.estimated_time)),1)):o.end_time?(n(),i("span",Ot," до "+l(m(o.end_time)),1)):g("",!0)])):g("",!0)],10,Tt))),128)),e.tasks.length===0?(n(),i("div",kt," Нет задач ")):g("",!0)])],2))),128))])])])):g("",!0),p.value==="day"?(n(),i("div",Ht,[s("div",jt,[s("h3",Nt,l(d.value.format("D MMMM YYYY")),1)]),s("div",Bt,[s("div",Wt,[s("div",Et,[(n(!0),i(v,null,_(N.value,e=>(n(),i("div",{key:e,class:"h-16 border-b border-gray-200 flex items-start justify-end pr-2 pt-1"},[s("span",At,l(ee(e)),1)]))),128))]),s("div",zt,[s("div",Pt,[(n(!0),i(v,null,_(N.value,e=>(n(),i("div",{key:e,class:"h-16 border-b border-gray-100"}))),128)),d.value.isSame(E(h)(),"day")&&I(N.value)?(n(),i("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:V({top:I(N.value)+"px"})},[...t[8]||(t[8]=[s("div",{class:"flex items-center"},[s("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),s("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):g("",!0),s("div",It,[(n(!0),i(v,null,_(Z.value,e=>(n(),i("div",{key:e.id,onClick:G(a=>H(e),["stop"]),class:y(["absolute left-2 right-2 rounded-lg cursor-pointer p-2 sm:p-3 border-l-4 shadow-sm z-10 touch-manipulation",[e.status==="completed"?"bg-gray-50 border-gray-300 line-through":k(e)+" border-primary-500"]]),style:V(re(e,N.value))},[s("div",Vt,l(e.title),1),e.description?(n(),i("div",Gt,l(e.description),1)):g("",!0),s("div",Lt,[e.estimated_time||e.end_time?(n(),i("span",Ut,[W(E(oe),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(n(),i("span",qt,l(m(e.estimated_time))+" - "+l(m(e.end_time)),1)):e.estimated_time?(n(),i("span",Jt,l(m(e.estimated_time)),1)):e.end_time?(n(),i("span",Kt," до "+l(m(e.end_time)),1)):g("",!0)])):g("",!0),s("span",{class:y(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 text-red-700":e.priority==="urgent","bg-primary-100 text-primary-700":e.priority==="high","bg-yellow-100 text-yellow-700":e.priority==="medium","bg-gray-100 text-gray-700":e.priority==="low"}])},l(J(e.priority)),3)])],14,Ft))),128))])])])]),s("div",Qt,[t[9]||(t[9]=s("div",{class:"border-r border-gray-200 bg-gray-50 p-3"},[s("span",{class:"text-xs text-gray-500 font-medium"},"Без времени")],-1)),s("div",Xt,[s("div",Zt,[(n(!0),i(v,null,_(pe.value,e=>(n(),i("div",{key:e.id,onClick:G(a=>H(e),["stop"]),class:y(["p-3 rounded-lg cursor-pointer border-l-4 touch-manipulation",[e.status==="completed"?"bg-gray-50 border-gray-300 line-through":k(e)+" border-primary-500"]])},[s("div",er,l(e.title),1),e.description?(n(),i("div",tr,l(e.description),1)):g("",!0),s("div",rr,[s("span",{class:y(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 text-red-700":e.priority==="urgent","bg-primary-100 text-primary-700":e.priority==="high","bg-yellow-100 text-yellow-700":e.priority==="medium","bg-gray-100 text-gray-700":e.priority==="low"}])},l(J(e.priority)),3)])],10,Rt))),128))])])])]),s("div",sr,[s("div",or,[(n(!0),i(v,null,_(P.value,e=>(n(),i("div",{key:e.id,onClick:a=>H(e),class:y(["p-3 sm:p-4 rounded-lg cursor-pointer border-l-4 touch-manipulation active:scale-[0.98] transition-transform",[e.status==="completed"?"bg-gray-50 border-gray-300 line-through":k(e)+" border-primary-500"]])},[s("div",nr,[s("div",ar,[s("div",lr,l(e.title),1),e.description?(n(),i("div",dr,l(e.description),1)):g("",!0),s("div",ur,[e.estimated_time||e.end_time?(n(),i("span",cr,[W(E(oe),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(n(),i("span",mr,l(m(e.estimated_time))+" - "+l(m(e.end_time)),1)):e.estimated_time?(n(),i("span",pr,l(m(e.estimated_time)),1)):e.end_time?(n(),i("span",gr," до "+l(m(e.end_time)),1)):g("",!0)])):g("",!0),s("span",{class:y(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 text-red-700":e.priority==="urgent","bg-primary-100 text-primary-700":e.priority==="high","bg-yellow-100 text-yellow-700":e.priority==="medium","bg-gray-100 text-gray-700":e.priority==="low"}])},l(J(e.priority)),3)])])])],10,ir))),128)),P.value.length===0?(n(),i("div",yr," Нет задач на этот день ")):g("",!0)])])])):g("",!0),W(ke,{show:A.value,task:O.value,"server-error":z.value,onClose:be,onSubmit:xe},null,8,["show","task","server-error"])])]))}},Yr=je(hr,[["__scopeId","data-v-4206e496"]]);export{Yr as default};
