import{u as _,b as V,T as B}from"./TaskModal-Cpq72MKn.js";import{T as S}from"./TaskList-DUvJ4Yzu.js";import{T as M}from"./TaskView-9FQW8AeN.js";import{r as N}from"./PlusIcon-DVD_RmjR.js";import{k as v,r as d,c,a as t,f as u,F,l as U,y as g,e as $,o as r}from"./index-BM-3aGKM.js";import"./workspace-CoKcgfuB.js";import"./projects-DIMWl5aI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"p-4 lg:p-8"},A={class:"max-w-4xl mx-auto"},L={key:0,class:"text-center py-12"},W={key:1,class:"text-center py-12"},q={class:"max-w-md mx-auto"},z={class:"w-16 h-16 mx-auto mb-4 rounded-full bg-orange-50 dark:bg-orange-900/30 flex items-center justify-center"},X={__name:"Waiting",setup(G){const o=_(),p=v(()=>o.waitingTasks),x=v(()=>o.loading),l=d(!1),n=d(!1),a=d(null),i=d(""),T=s=>{a.value=s,n.value=!0},f=()=>{a.value=null,l.value=!0},h=()=>{n.value=!1,l.value=!0},w=async s=>{try{await o.completeTask(s.id)}catch(e){console.error("Error completing task:",e)}},y=async s=>{try{await o.uncompleteTask(s.id)}catch(e){console.error("Error uncompleting task:",e)}},b=async s=>{try{s.completed_at?await o.uncompleteTask(s.id):await o.completeTask(s.id)}catch(e){console.error("Error toggling task:",e)}},C=async s=>{var e,m;i.value="";try{a.value?await o.updateTask(a.value.id,s):await o.createTask(s),l.value=!1,a.value=null}catch(k){console.error("Error saving task:",k),i.value=((m=(e=k.response)==null?void 0:e.data)==null?void 0:m.message)||k.message||"Ошибка при сохранении задачи"}},E=()=>{l.value=!1,a.value=null,i.value=""};return(s,e)=>(r(),c("div",j,[t("div",A,[e[5]||(e[5]=t("div",{class:"mb-6"},[t("h1",{class:"text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Ожидание")],-1)),x.value?(r(),c("div",L,[...e[1]||(e[1]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(r(),c(F,{key:1},[p.value.length>0?(r(),U(S,{key:0,tasks:p.value,onTaskClick:T,onToggleComplete:b},null,8,["tasks"])):(r(),c("div",W,[t("div",q,[t("div",z,[u(g(V),{class:"w-8 h-8 text-orange-500"})]),e[3]||(e[3]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Нет задач в ожидании",-1)),e[4]||(e[4]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-6 leading-relaxed"}," Список ожидания — это задачи, делегированные другим людям, или те, что зависят от внешних событий. Записывайте, от кого и чего вы ждёте. Регулярно проверяйте этот список, чтобы ничего не потерялось. ",-1)),t("button",{onClick:f,class:"inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors"},[u(g(N),{class:"w-5 h-5 mr-1.5"}),e[2]||(e[2]=$(" Добавить в ожидание ",-1))])])]))],64)),u(M,{show:n.value,task:a.value,onClose:e[0]||(e[0]=m=>{n.value=!1,a.value=null}),onEnterEdit:h,onCompleteTask:w,onUncompleteTask:y},null,8,["show","task"]),u(B,{show:l.value,task:a.value,"server-error":i.value,onClose:E,onSubmit:C},null,8,["show","task","server-error"])])]))}};export{X as default};
