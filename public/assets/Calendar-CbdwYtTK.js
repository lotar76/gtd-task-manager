import{c as o,a,o as d,r as D,k as v,s as Ye,x as Te,b as y,f as O,p,A as H,t as n,F as x,z as h,E as I,w as A,e as De}from"./index-BF6qW96N.js";import{u as Ce,T as Se,a as re}from"./TaskModal-DCBI8AgL.js";import{g as ae,c as se,d as b}from"./ru-B7JyRvIu.js";import{_ as $e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Oe}from"./PlusIcon-DSvLHBc1.js";import"./workspace-D-3WlEyB.js";function He(C,M){return d(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function je(C,M){return d(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}var oe={exports:{}};(function(C,M){(function(u,m){C.exports=m()})(se,function(){return function(u,m){m.prototype.isSameOrAfter=function(f,_){return this.isSame(f,_)||this.isAfter(f,_)}}})})(oe);var Ne=oe.exports;const Be=ae(Ne);var de={exports:{}};(function(C,M){(function(u,m){C.exports=m()})(se,function(){return function(u,m){m.prototype.isSameOrBefore=function(f,_){return this.isSame(f,_)||this.isBefore(f,_)}}})})(de);var Ae=de.exports;const Ee=ae(Ae),ze={class:"p-2 sm:p-4 lg:p-8"},Pe={class:"max-w-7xl mx-auto"},Fe={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4 lg:mb-6"},Ie={class:"flex items-center space-x-1 sm:space-x-2 mt-3 lg:mt-0 overflow-x-auto pb-2 lg:pb-0"},Ve={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-3 sm:p-4 mb-4 lg:mb-6"},We={class:"flex items-center justify-between"},Ge={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white text-center px-2"},Le={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Ue={class:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700"},qe={class:"grid grid-cols-7"},Je=["onClick"],Ke={class:"flex flex-col h-full"},Qe={class:"flex justify-between items-start mb-1"},Xe={key:0,class:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-semibold bg-primary-600 text-white rounded-full"},Ze={key:0,class:"flex-1 flex items-center justify-center"},Re=["onClick"],et={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},tt={class:"hidden lg:block overflow-x-auto"},rt={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},at={class:"font-semibold"},st={class:"text-xs mt-1"},ot={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},dt={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},it={class:"text-xs text-gray-500 dark:text-gray-400"},nt={class:"relative"},lt={class:"absolute inset-0"},ut=["onClick"],mt={class:"font-medium truncate"},ct={key:0,class:"text-[10px] opacity-75 mt-0.5"},gt={key:0},yt={key:1},pt={key:2},bt={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},xt={class:"space-y-1 min-w-0"},ht=["onClick"],vt={class:"font-medium truncate block"},_t={class:"lg:hidden overflow-x-auto"},ft={class:"flex min-w-max"},kt={class:"mb-3 sticky top-0 bg-inherit pb-2 border-b border-gray-200 dark:border-gray-700"},wt={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},Mt={class:"space-y-2"},Yt=["onClick"],Tt={class:"font-medium text-sm mb-1"},Dt={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},Ct={key:0},St={key:1},$t={key:2},Ot={key:0,class:"text-xs text-gray-400 dark:text-gray-500 text-center py-4"},Ht={key:2,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},jt={class:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700"},Nt={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white"},Bt={class:"hidden lg:block overflow-x-auto"},At={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},Et={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},zt={class:"text-xs text-gray-500 dark:text-gray-400"},Pt={class:"relative"},Ft={class:"relative"},It={class:"absolute inset-0"},Vt=["onClick"],Wt={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},Gt={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},Lt={class:"flex flex-wrap items-center gap-2 mt-2"},Ut={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},qt={key:0},Jt={key:1},Kt={key:2},Qt={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},Xt={class:"p-3"},Zt={class:"space-y-2"},Rt=["onClick"],er={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},tr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},rr={class:"flex flex-wrap items-center gap-2 mt-2"},ar={class:"lg:hidden p-3 sm:p-4"},sr={class:"space-y-2 sm:space-y-3"},or=["onClick"],dr={class:"flex items-start justify-between"},ir={class:"flex-1 min-w-0"},nr={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},lr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},ur={class:"flex flex-wrap items-center gap-2 mt-2"},mr={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},cr={key:0},gr={key:1},yr={key:2},pr={key:0,class:"text-center py-8 sm:py-12 text-gray-500 dark:text-gray-400 text-sm sm:text-base"},br={__name:"Calendar",setup(C){b.extend(Be),b.extend(Ee),b.locale("ru");const M=Ce(),u=D(b());v(()=>M.loading);const m=D("month"),f=D(!1),_=D(null),E=D(""),z=D(""),V=D(b()),K=v(()=>{if(m.value==="month")return{start:u.value.startOf("month").subtract(7,"days").format("YYYY-MM-DD"),end:u.value.endOf("month").add(7,"days").format("YYYY-MM-DD")};if(m.value==="week"){const t=u.value.startOf("week");return{start:t.format("YYYY-MM-DD"),end:t.add(6,"day").format("YYYY-MM-DD")}}else{const t=u.value.format("YYYY-MM-DD");return{start:t,end:t}}}),Y=v(()=>M.calendarTasks(K.value.start,K.value.end)),W=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],ie=v(()=>u.value.format("MMMM")),ne=v(()=>u.value.format("YYYY"));v(()=>{if(m.value!=="month"||Y.value.length===0)return 0;const t=u.value.startOf("month"),r=u.value.endOf("month");return Y.value.filter(i=>{if(!i.due_date||i.status==="completed")return!1;const s=b(i.due_date);return s.isValid()?s.isSameOrAfter(t,"day")&&s.isSameOrBefore(r,"day"):!1}).length});const le=v(()=>{if(m.value==="month")return`${ie.value} ${ne.value}`;if(m.value==="week"){const t=u.value.startOf("week"),r=t.add(6,"day");return t.month()===r.month()?`${t.format("D")} - ${r.format("D MMMM YYYY")}`:`${t.format("D MMM")} - ${r.format("D MMM YYYY")}`}else return u.value.format("D MMMM YYYY")}),j=v(()=>{const t=u.value.startOf("week"),r=[];for(let e=0;e<7;e++){const i=t.add(e,"day"),s=i.format("YYYY-MM-DD"),l=Y.value.filter(g=>g.due_date&&b(g.due_date).format("YYYY-MM-DD")===s&&g.status!=="completed");r.push({day:i.date(),monthName:i.format("MMM"),date:s,isToday:i.isSame(b(),"day"),tasks:l})}return r}),P=v(()=>{const t=u.value.format("YYYY-MM-DD");return Y.value.filter(r=>r.due_date&&b(r.due_date).format("YYYY-MM-DD")===t&&r.status!=="completed")}),Q=v(()=>P.value.filter(t=>t.estimated_time||t.end_time)),ue=v(()=>P.value.filter(t=>!t.estimated_time&&!t.end_time)),X=t=>{if(!t||t.length===0)return Array.from({length:24},(s,l)=>l);let r=23,e=0;t.forEach(s=>{const l=s.estimated_time||s.end_time,g=s.end_time||s.estimated_time;if(l){const k=c(l),[w]=k.split(":").map(Number);r=Math.min(r,w),e=Math.max(e,w)}if(g){const k=c(g),[w]=k.split(":").map(Number);r=Math.min(r,w),e=Math.max(e,w)}}),r=Math.max(0,Math.floor(r)-1),e=Math.min(23,Math.ceil(e)+1);const i=[];for(let s=r;s<=e;s++)i.push(s);return i.length>0?i:Array.from({length:24},(s,l)=>l)},N=v(()=>X(Q.value)),B=v(()=>{const t=j.value.flatMap(r=>R(r.date));return X(t)}),me=v(()=>{const t=[],r=u.value.startOf("month"),e=u.value.endOf("month"),i=r.day()===0?6:r.day()-1;for(let l=i-1;l>=0;l--){const g=r.subtract(l+1,"day");t.push(G(g,!1))}for(let l=0;l<e.date();l++){const g=r.add(l,"day");t.push(G(g,!0))}const s=42-t.length;for(let l=0;l<s;l++){const g=e.add(l+1,"day");t.push(G(g,!1))}return t}),G=(t,r)=>{const e=t.format("YYYY-MM-DD"),i=Y.value.filter(s=>s.due_date&&b(s.due_date).format("YYYY-MM-DD")===e&&s.status!=="completed");return{day:t.date(),date:e,currentMonth:r,isToday:t.isSame(b(),"day"),taskCount:i.length,tasks:i}},ce=()=>{m.value==="month"?u.value=u.value.subtract(1,"month"):m.value==="week"?u.value=u.value.subtract(1,"week"):u.value=u.value.subtract(1,"day")},ge=()=>{m.value==="month"?u.value=u.value.add(1,"month"):m.value==="week"?u.value=u.value.add(1,"week"):u.value=u.value.add(1,"day")},c=t=>t?/^\d{2}:\d{2}$/.test(t)?t:t.substring(0,5):"",Z=t=>`${t.toString().padStart(2,"0")}:00`,R=t=>Y.value.filter(r=>r.due_date&&b(r.due_date).format("YYYY-MM-DD")===t&&r.status!=="completed"&&(r.estimated_time||r.end_time)),ye=t=>Y.value.filter(r=>r.due_date&&b(r.due_date).format("YYYY-MM-DD")===t&&r.status!=="completed"&&!r.estimated_time&&!r.end_time),F=(t=null)=>{if(!t||t.length===0)return null;const r=V.value,e=r.hour(),i=r.minute(),s=t[0],l=t[t.length-1];if(e<s||e>l)return null;const g=64,k=e*60+i,w=s*60,T=(k-w)/60*g;return Math.max(0,T)},ee=(t,r=null)=>{if(!t.estimated_time&&!t.end_time)return{display:"none"};const e=t.estimated_time||t.end_time,i=t.end_time||t.estimated_time;if(!e||!i)return{display:"none"};const s=c(e),l=c(i),[g,k]=s.split(":").map(Number),[w,T]=l.split(":").map(Number),_e=r&&r.length>0?r[0]:0,te=64,q=g*60+k,fe=_e*60,ke=(q-fe)/60*te;let J=w*60+T;J<q&&(J+=24*60);const we=(J-q)/60*te,Me=Math.max(we,40);return{top:`${Math.max(0,ke)}px`,height:`${Me}px`}},pe=t=>{if(!t.estimated_time||!t.end_time)return 0;const r=c(t.estimated_time),e=c(t.end_time);if(!r||!e)return 0;const[i,s]=r.split(":").map(Number),[l,g]=e.split(":").map(Number),k=i*60+s;let T=l*60+g-k;return T<0&&(T+=24*60),T/60},S=t=>{if(t.status==="completed")return"bg-gray-100 dark:bg-gray-700";const r=pe(t);return r===0||r<1?"bg-gradient-to-l from-white via-green-50 to-green-100 dark:from-gray-800 dark:via-green-900/20 dark:to-green-900/40":r>=1&&r<2?"bg-gradient-to-l from-white via-orange-50 to-orange-100 dark:from-gray-800 dark:via-orange-900/20 dark:to-orange-900/40":r>=2?"bg-gradient-to-l from-white via-red-50 to-red-100 dark:from-gray-800 dark:via-red-900/20 dark:to-red-900/40":"bg-white dark:bg-gray-800"},L=t=>({high:"Высокий",medium:"Средний",low:"Низкий",urgent:"Срочный"})[t]||t,$=t=>{_.value=t,z.value="",f.value=!0},be=t=>{_.value=null,z.value=t,f.value=!0},xe=t=>{u.value=b(t),m.value="day"},he=async t=>{var r,e,i,s;E.value="";try{_.value?await M.updateTask(_.value.id,t):await M.createTask(t),f.value=!1,_.value=null}catch(l){console.error("Error saving task:",l);let g="Ошибка при сохранении задачи";(e=(r=l.response)==null?void 0:r.data)!=null&&e.errors?g=Object.values(l.response.data.errors).flat().join(", "):(s=(i=l.response)==null?void 0:i.data)!=null&&s.message&&(g=l.response.data.message),E.value=g}},ve=()=>{f.value=!1,_.value=null,z.value="",E.value=""};let U=null;return Ye(()=>{V.value=b(),U=setInterval(()=>{V.value=b()},6e4)}),Te(()=>{U&&clearInterval(U)}),(t,r)=>(d(),o("div",ze,[a("div",Pe,[a("div",Fe,[r[3]||(r[3]=a("div",null,[a("h1",{class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Календарь")],-1)),a("div",Ie,[a("button",{onClick:r[0]||(r[0]=e=>m.value="day"),class:p(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="day"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," День ",2),a("button",{onClick:r[1]||(r[1]=e=>m.value="week"),class:p(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="week"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Неделя ",2),a("button",{onClick:r[2]||(r[2]=e=>m.value="month"),class:p(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",m.value==="month"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Месяц ",2)])]),a("div",Ve,[a("div",We,[a("button",{onClick:ce,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[O(H(He),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})]),a("h2",Ge,n(le.value),1),a("button",{onClick:ge,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[O(H(je),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})])])]),m.value==="month"?(d(),o("div",Le,[a("div",Ue,[(d(),o(x,null,h(W,e=>a("div",{key:e,class:"text-center py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0"},n(e),1)),64))]),a("div",qe,[(d(!0),o(x,null,h(me.value,(e,i)=>(d(),o("div",{key:i,onClick:s=>xe(e.date),class:p(["min-h-[60px] sm:min-h-[80px] lg:min-h-[100px] border-b border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-1 sm:p-2 cursor-pointer touch-manipulation hover:bg-gray-50 dark:hover:bg-gray-700 active:bg-gray-100 dark:active:bg-gray-600 transition-colors",{"bg-gray-50 dark:bg-gray-900":!e.currentMonth,"bg-primary-50 dark:bg-primary-900/30 hover:bg-primary-100 dark:hover:bg-primary-900/40":e.isToday}])},[a("div",Ke,[a("div",Qe,[a("span",{class:p(["text-xs sm:text-sm font-medium",{"text-gray-400 dark:text-gray-600":!e.currentMonth,"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-gray-100":e.currentMonth&&!e.isToday}])},n(e.day),3),e.taskCount>0?(d(),o("span",Xe,n(e.taskCount),1)):y("",!0)]),e.taskCount===0&&e.currentMonth?(d(),o("div",Ze,[a("button",{onClick:A(s=>be(e.date),["stop"]),class:"w-6 h-6 flex items-center justify-center rounded-full text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[O(H(Oe),{class:"w-4 h-4"})],8,Re)])):y("",!0)])],10,Je))),128))])])):y("",!0),m.value==="week"?(d(),o("div",et,[a("div",tt,[a("div",rt,[r[4]||(r[4]=a("div",{class:"border-r border-gray-200 dark:border-gray-700"},null,-1)),(d(!0),o(x,null,h(j.value,(e,i)=>(d(),o("div",{key:i,class:p(["text-center py-3 text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[a("div",at,n(W[i]),1),a("div",st,n(e.day)+" "+n(e.monthName),1)],2))),128))]),a("div",ot,[a("div",dt,[(d(!0),o(x,null,h(B.value,e=>(d(),o("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[a("span",it,n(Z(e)),1)]))),128))]),(d(!0),o(x,null,h(j.value,(e,i)=>(d(),o("div",{key:i,class:p(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 relative",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[a("div",nt,[(d(!0),o(x,null,h(B.value,s=>(d(),o("div",{key:s,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),e.isToday&&F(B.value)?(d(),o("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:I({top:F(B.value)+"px"})},[...r[5]||(r[5]=[a("div",{class:"flex items-center"},[a("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),a("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):y("",!0),a("div",lt,[(d(!0),o(x,null,h(R(e.date),s=>(d(),o("div",{key:s.id,onClick:A(l=>$(s),["stop"]),class:p(["absolute left-1 right-1 rounded cursor-pointer p-1.5 text-xs touch-manipulation border-l-2 shadow-sm z-10",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":S(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]]),style:I(ee(s,B.value))},[a("div",mt,n(s.title),1),s.estimated_time||s.end_time?(d(),o("div",ct,[s.estimated_time&&s.end_time?(d(),o("span",gt,n(c(s.estimated_time))+" - "+n(c(s.end_time)),1)):s.end_time?(d(),o("span",yt," до "+n(c(s.end_time)),1)):s.estimated_time?(d(),o("span",pt,n(c(s.estimated_time)),1)):y("",!0)])):y("",!0)],14,ut))),128))])])],2))),128))]),a("div",bt,[r[6]||(r[6]=a("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-2"},[a("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Без времени")],-1)),(d(!0),o(x,null,h(j.value,(e,i)=>(d(),o("div",{key:i,class:p(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-2",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[a("div",xt,[(d(!0),o(x,null,h(ye(e.date),s=>(d(),o("div",{key:s.id,onClick:A(l=>$(s),["stop"]),class:p(["p-1.5 rounded cursor-pointer text-xs touch-manipulation border-l-2 w-full max-w-full overflow-hidden",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":S(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[a("div",vt,n(s.title),1)],10,ht))),128))])],2))),128))])]),a("div",_t,[a("div",ft,[(d(!0),o(x,null,h(j.value,(e,i)=>(d(),o("div",{key:i,class:p(["w-[280px] min-w-[280px] border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-3",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[a("div",kt,[a("div",wt,n(W[i]),1),a("span",{class:p(["text-base font-semibold",{"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-white":!e.isToday}])},n(e.day)+" "+n(e.monthName),3)]),a("div",Mt,[(d(!0),o(x,null,h(e.tasks,s=>(d(),o("div",{key:s.id,onClick:l=>$(s),class:p(["p-3 rounded-lg cursor-pointer touch-manipulation border-l-4",[s.status==="completed"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":S(s)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[a("div",Tt,n(s.title),1),s.estimated_time||s.end_time?(d(),o("div",Dt,[r[7]||(r[7]=De(" ⏱ ",-1)),s.estimated_time&&s.end_time?(d(),o("span",Ct,n(c(s.estimated_time))+" - "+n(c(s.end_time)),1)):s.estimated_time?(d(),o("span",St,n(c(s.estimated_time)),1)):s.end_time?(d(),o("span",$t," до "+n(c(s.end_time)),1)):y("",!0)])):y("",!0)],10,Yt))),128)),e.tasks.length===0?(d(),o("div",Ot," Нет задач ")):y("",!0)])],2))),128))])])])):y("",!0),m.value==="day"?(d(),o("div",Ht,[a("div",jt,[a("h3",Nt,n(u.value.format("D MMMM YYYY")),1)]),a("div",Bt,[a("div",At,[a("div",Et,[(d(!0),o(x,null,h(N.value,e=>(d(),o("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[a("span",zt,n(Z(e)),1)]))),128))]),a("div",Pt,[a("div",Ft,[(d(!0),o(x,null,h(N.value,e=>(d(),o("div",{key:e,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),u.value.isSame(H(b)(),"day")&&F(N.value)?(d(),o("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:I({top:F(N.value)+"px"})},[...r[8]||(r[8]=[a("div",{class:"flex items-center"},[a("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),a("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):y("",!0),a("div",It,[(d(!0),o(x,null,h(Q.value,e=>(d(),o("div",{key:e.id,onClick:A(i=>$(e),["stop"]),class:p(["absolute left-2 right-2 rounded-lg cursor-pointer p-2 sm:p-3 border-l-4 shadow-sm z-10 touch-manipulation",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":S(e)+" border-primary-500"]]),style:I(ee(e,N.value))},[a("div",Wt,n(e.title),1),e.description?(d(),o("div",Gt,n(e.description),1)):y("",!0),a("div",Lt,[e.estimated_time||e.end_time?(d(),o("span",Ut,[O(H(re),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(d(),o("span",qt,n(c(e.estimated_time))+" - "+n(c(e.end_time)),1)):e.estimated_time?(d(),o("span",Jt,n(c(e.estimated_time)),1)):e.end_time?(d(),o("span",Kt," до "+n(c(e.end_time)),1)):y("",!0)])):y("",!0),a("span",{class:p(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},n(L(e.priority)),3)])],14,Vt))),128))])])])]),a("div",Qt,[r[9]||(r[9]=a("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-3"},[a("span",{class:"text-xs text-gray-500 dark:text-gray-400 font-medium"},"Без времени")],-1)),a("div",Xt,[a("div",Zt,[(d(!0),o(x,null,h(ue.value,e=>(d(),o("div",{key:e.id,onClick:A(i=>$(e),["stop"]),class:p(["p-3 rounded-lg cursor-pointer border-l-4 touch-manipulation",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":S(e)+" border-primary-500"]])},[a("div",er,n(e.title),1),e.description?(d(),o("div",tr,n(e.description),1)):y("",!0),a("div",rr,[a("span",{class:p(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},n(L(e.priority)),3)])],10,Rt))),128))])])])]),a("div",ar,[a("div",sr,[(d(!0),o(x,null,h(P.value,e=>(d(),o("div",{key:e.id,onClick:i=>$(e),class:p(["p-3 sm:p-4 rounded-lg cursor-pointer border-l-4 touch-manipulation active:scale-[0.98] transition-transform",[e.status==="completed"?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":S(e)+" border-primary-500"]])},[a("div",dr,[a("div",ir,[a("div",nr,n(e.title),1),e.description?(d(),o("div",lr,n(e.description),1)):y("",!0),a("div",ur,[e.estimated_time||e.end_time?(d(),o("span",mr,[O(H(re),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(d(),o("span",cr,n(c(e.estimated_time))+" - "+n(c(e.end_time)),1)):e.estimated_time?(d(),o("span",gr,n(c(e.estimated_time)),1)):e.end_time?(d(),o("span",yr," до "+n(c(e.end_time)),1)):y("",!0)])):y("",!0),a("span",{class:p(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},n(L(e.priority)),3)])])])],10,or))),128)),P.value.length===0?(d(),o("div",pr," Нет задач на этот день ")):y("",!0)])])])):y("",!0),O(Se,{show:f.value,task:_.value,"server-error":E.value,"default-date":z.value,onClose:ve,onSubmit:he},null,8,["show","task","server-error","default-date"])])]))}},Yr=$e(br,[["__scopeId","data-v-1ed31ce4"]]);export{Yr as default};
