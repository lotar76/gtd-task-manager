import{u as D,q as T,r as l,s as E,c as u,a as t,w as _,d as w,v as k,y as m,b as h,t as n,p as S,o as p}from"./index-BolgmRw1.js";const P={class:"max-w-2xl mx-auto p-6 space-y-6"},U={class:"card"},B=["value"],C={class:"flex items-center space-x-3"},M=["disabled"],F={key:0,class:"text-sm text-green-600 dark:text-green-400"},L={key:1,class:"text-sm text-red-600 dark:text-red-400"},N={class:"card"},j={class:"flex items-center space-x-3"},z=["disabled"],A={key:0,class:"text-sm text-green-600 dark:text-green-400"},I={key:1,class:"text-sm text-red-600 dark:text-red-400"},$={class:"card"},G={class:"flex items-center justify-between"},H=["aria-checked"],O={__name:"Index",setup(J){const v=D(),x=T(),c=l({name:""}),f=l(!1),i=l(""),b=l(""),a=l({current_password:"",password:"",password_confirmation:""}),y=l(!1),d=l(""),g=l("");E(()=>{var s;c.value.name=((s=v.user)==null?void 0:s.name)||""});const V=async()=>{var s,e;i.value="",b.value="",f.value=!0;try{await v.updateProfile(c.value.name),i.value="Профиль обновлён",setTimeout(()=>{i.value=""},3e3)}catch(o){b.value=((e=(s=o.response)==null?void 0:s.data)==null?void 0:e.message)||"Ошибка обновления профиля"}finally{f.value=!1}},q=async()=>{var s,e;d.value="",g.value="",y.value=!0;try{await v.updatePassword(a.value),d.value="Пароль изменён",a.value={current_password:"",password:"",password_confirmation:""},setTimeout(()=>{d.value=""},3e3)}catch(o){g.value=((e=(s=o.response)==null?void 0:s.data)==null?void 0:e.message)||"Ошибка изменения пароля"}finally{y.value=!1}};return(s,e)=>{var o;return p(),u("div",P,[e[14]||(e[14]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Настройки",-1)),t("div",U,[e[7]||(e[7]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Профиль",-1)),t("form",{onSubmit:_(V,["prevent"]),class:"space-y-4"},[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Имя",-1)),w(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>c.value.name=r),type:"text",class:"input",required:""},null,512),[[k,c.value.name]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Email",-1)),t("input",{value:(o=m(v).user)==null?void 0:o.email,type:"email",class:"input opacity-60",disabled:""},null,8,B)]),t("div",C,[t("button",{type:"submit",class:"btn btn-primary",disabled:f.value},n(f.value?"Сохранение...":"Сохранить"),9,M),i.value?(p(),u("span",F,n(i.value),1)):h("",!0),b.value?(p(),u("span",L,n(b.value),1)):h("",!0)])],32)]),t("div",N,[e[11]||(e[11]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Изменить пароль",-1)),t("form",{onSubmit:_(q,["prevent"]),class:"space-y-4"},[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Текущий пароль",-1)),w(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.current_password=r),type:"password",class:"input",required:""},null,512),[[k,a.value.current_password]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Новый пароль",-1)),w(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.password=r),type:"password",class:"input",required:"",minlength:"8"},null,512),[[k,a.value.password]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Подтвердите пароль",-1)),w(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>a.value.password_confirmation=r),type:"password",class:"input",required:"",minlength:"8"},null,512),[[k,a.value.password_confirmation]])]),t("div",j,[t("button",{type:"submit",class:"btn btn-primary",disabled:y.value},n(y.value?"Изменение...":"Изменить пароль"),9,z),d.value?(p(),u("span",A,n(d.value),1)):h("",!0),g.value?(p(),u("span",I,n(g.value),1)):h("",!0)])],32)]),t("div",$,[e[13]||(e[13]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Внешний вид",-1)),t("div",G,[e[12]||(e[12]=t("div",null,[t("div",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Тёмная тема"),t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Переключить цветовую схему интерфейса")],-1)),t("button",{onClick:e[4]||(e[4]=r=>m(x).toggleTheme()),class:S(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800",m(x).isDark?"bg-primary-600":"bg-gray-200"]),role:"switch","aria-checked":m(x).isDark},[t("span",{class:S(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",m(x).isDark?"translate-x-5":"translate-x-0"])},null,2)],10,H)])])])}}};export{O as default};
