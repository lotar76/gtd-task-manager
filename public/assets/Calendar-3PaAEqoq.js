import{c as r,a as s,o,r as v,k as _,z as ze,s as Le,x as Pe,b as l,f as j,p as m,y as S,t as i,F as x,C as b,D as h,j as Fe,w as M}from"./index-BM-3aGKM.js";import{u as Ie,T as Ue,b as ee}from"./TaskModal-Cpq72MKn.js";import{g as le,c as ce,d as f,T as Ve,C as We}from"./TaskView-9FQW8AeN.js";import{_ as Ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as qe}from"./PlusIcon-DVD_RmjR.js";import"./workspace-CoKcgfuB.js";import"./projects-DIMWl5aI.js";function Je(O,N){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function Ke(O,N){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}var ue={exports:{}};(function(O,N){(function(k,u){O.exports=u()})(ce,function(){return function(k,u){u.prototype.isSameOrAfter=function(g,w){return this.isSame(g,w)||this.isAfter(g,w)}}})})(ue);var Qe=ue.exports;const Xe=le(Qe);var me={exports:{}};(function(O,N){(function(k,u){O.exports=u()})(ce,function(){return function(k,u){u.prototype.isSameOrBefore=function(g,w){return this.isSame(g,w)||this.isBefore(g,w)}}})})(me);var Ze=me.exports;const Re=le(Ze),et={class:"p-2 sm:p-4 lg:p-8"},tt={class:"max-w-7xl mx-auto"},rt={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4 lg:mb-6"},ot={class:"flex items-center space-x-1 sm:space-x-2 mt-3 lg:mt-0 overflow-x-auto pb-2 lg:pb-0"},nt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-3 sm:p-4 mb-4 lg:mb-6"},st={class:"flex items-center justify-between"},at={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white text-center px-2"},it={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},dt={class:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700"},lt={class:"grid grid-cols-7"},ct=["onClick"],ut={class:"flex flex-col h-full"},mt={class:"flex justify-between items-start mb-1"},gt={key:0,class:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-semibold bg-primary-600 text-white rounded-full"},yt={key:0,class:"flex-1 flex items-center justify-center"},pt=["onClick"],xt={key:0,class:"hidden lg:block absolute left-1/2 -translate-x-1/2 bottom-full mb-2 z-50 pointer-events-none opacity-0 group-hover/day:opacity-100 transition-opacity duration-150"},bt={class:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg shadow-lg px-3 py-2 whitespace-nowrap max-w-[250px]"},ht={key:0,class:"text-gray-400 text-[10px] pt-1"},ft={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},_t={class:"hidden lg:block overflow-x-auto h-[calc(100vh-16rem)] overflow-y-auto"},vt={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},kt={class:"font-semibold"},wt={class:"text-xs mt-1"},Mt={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},Ct={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},Tt={class:"text-xs text-gray-500 dark:text-gray-400"},Yt={class:"relative"},jt={class:"absolute inset-0"},Dt=["onClick"],$t={class:"flex items-start gap-1"},St=["onClick"],Ot={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ht={class:"flex-1 min-w-0"},Bt={class:"font-medium truncate text-[11px]"},Et={key:0,class:"text-[9px] opacity-75 mt-0.5"},Nt={key:0},At={key:1},zt={key:2},Lt={class:"flex flex-wrap gap-0.5 mt-0.5"},Pt={key:1,class:"inline-block px-0.5 rounded text-[8px] font-medium bg-gray-200 dark:bg-gray-600"},Ft={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px repeat(7, 1fr)"}},It={class:"space-y-1 min-w-0"},Ut=["onClick"],Vt={class:"flex items-start gap-1"},Wt=["onClick"],Gt={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qt={class:"flex-1 min-w-0"},Jt={class:"font-medium truncate block text-[11px]"},Kt={class:"flex flex-wrap gap-0.5 mt-0.5"},Qt={key:1,class:"inline-block px-1 py-0 rounded text-[9px] font-medium bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"},Xt={key:2,class:"inline-block px-1 py-0 rounded text-[9px] font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"},Zt={class:"lg:hidden overflow-x-auto"},Rt={class:"flex min-w-max"},er={class:"mb-3 sticky top-0 bg-inherit pb-2 border-b border-gray-200 dark:border-gray-700"},tr={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},rr={class:"space-y-2"},or=["onClick"],nr={class:"flex items-start gap-2"},sr=["onClick"],ar={key:0,class:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ir={class:"flex-1 min-w-0"},dr={class:"font-medium text-sm mb-1"},lr={class:"flex flex-wrap items-center gap-1.5 mt-1.5"},cr={key:0,class:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"},ur={key:2,class:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"},mr={key:0},gr={key:1},yr={key:2},pr={key:3,class:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"},xr={key:0,class:"text-xs text-gray-400 dark:text-gray-500 text-center py-4"},br={key:2,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},hr={class:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700"},fr={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white"},_r={class:"hidden lg:block overflow-x-auto"},vr={class:"grid border-b border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},kr={class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},wr={class:"text-xs text-gray-500 dark:text-gray-400"},Mr={class:"relative"},Cr={class:"relative"},Tr={class:"absolute inset-0"},Yr=["onClick"],jr={class:"flex items-start gap-2"},Dr=["onClick"],$r={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Sr={class:"flex-1 min-w-0"},Or={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},Hr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},Br={class:"flex flex-wrap items-center gap-2 mt-2"},Er={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},Nr={key:0},Ar={key:1},zr={key:2},Lr={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"},Pr={key:3,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"},Fr={class:"grid border-t border-gray-200 dark:border-gray-700",style:{gridTemplateColumns:"60px 1fr"}},Ir={class:"p-3"},Ur={class:"space-y-2"},Vr=["onClick"],Wr={class:"flex items-start gap-2"},Gr=["onClick"],qr={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Jr={class:"flex-1 min-w-0"},Kr={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},Qr={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},Xr={class:"flex flex-wrap items-center gap-2 mt-2"},Zr={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"},Rr={key:0},eo={key:1},to={key:2},ro={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"},oo={key:3,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"},no={class:"lg:hidden p-3 sm:p-4"},so={class:"space-y-2 sm:space-y-3"},ao=["onClick"],io={class:"flex items-start gap-3"},lo=["onClick"],co={key:0,class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},uo={class:"flex-1 min-w-0"},mo={class:"font-medium text-sm sm:text-base text-gray-900 dark:text-white mb-1"},go={key:0,class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2"},yo={class:"flex flex-wrap items-center gap-2 mt-2"},po={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},xo={key:0},bo={key:1},ho={key:2},fo={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"},_o={key:3,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"},vo={key:0,class:"text-center py-8 sm:py-12 text-gray-500 dark:text-gray-400 text-sm sm:text-base"},ko={__name:"Calendar",setup(O){f.extend(Xe),f.extend(Re),f.locale("ru");const N=Fe(),k=Ie(),u=v(f());_(()=>k.loading);const g=v("month");ze(()=>N.query.view,a=>{a&&["day","week","month"].includes(a)&&(g.value=a)},{immediate:!0});const w=v(!1),P=v(!1),Y=v(null),F=v(""),I=v(""),q=v(f()),U=v(!1),A=v(null),ge=v("Завершить задачу?"),te=v(""),re=_(()=>{if(g.value==="month")return{start:u.value.startOf("month").subtract(7,"days").format("YYYY-MM-DD"),end:u.value.endOf("month").add(7,"days").format("YYYY-MM-DD")};if(g.value==="week"){const a=u.value.startOf("week");return{start:a.format("YYYY-MM-DD"),end:a.add(6,"day").format("YYYY-MM-DD")}}else{const a=u.value.format("YYYY-MM-DD");return{start:a,end:a}}}),D=_(()=>k.calendarTasks(re.value.start,re.value.end)),J=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],ye=_(()=>u.value.format("MMMM")),pe=_(()=>u.value.format("YYYY"));_(()=>{if(g.value!=="month"||D.value.length===0)return 0;const a=u.value.startOf("month"),n=u.value.endOf("month");return D.value.filter(d=>{if(!d.due_date||d.completed_at)return!1;const t=f(d.due_date);return t.isValid()?t.isSameOrAfter(a,"day")&&t.isSameOrBefore(n,"day"):!1}).length});const xe=_(()=>{if(g.value==="month")return`${ye.value} ${pe.value}`;if(g.value==="week"){const a=u.value.startOf("week"),n=a.add(6,"day");return a.month()===n.month()?`${a.format("D")} - ${n.format("D MMMM YYYY")}`:`${a.format("D MMM")} - ${n.format("D MMM YYYY")}`}else return u.value.format("D MMMM YYYY")}),V=_(()=>{const a=u.value.startOf("week"),n=[];for(let e=0;e<7;e++){const d=a.add(e,"day"),t=d.format("YYYY-MM-DD"),c=D.value.filter(p=>p.due_date&&f(p.due_date).format("YYYY-MM-DD")===t&&p.status!=="completed");n.push({day:d.date(),monthName:d.format("MMM"),date:t,isToday:d.isSame(f(),"day"),tasks:c})}return n}),W=_(()=>{const a=u.value.format("YYYY-MM-DD");return D.value.filter(n=>n.due_date&&f(n.due_date).format("YYYY-MM-DD")===a&&n.status!=="completed")}),oe=_(()=>W.value.filter(a=>a.estimated_time||a.end_time)),be=_(()=>W.value.filter(a=>!a.estimated_time&&!a.end_time)),he=a=>{if(!a||a.length===0)return Array.from({length:24},(t,c)=>c);let n=23,e=0;a.forEach(t=>{const c=t.estimated_time||t.end_time,p=t.end_time||t.estimated_time;if(c){const C=y(c),[T]=C.split(":").map(Number);n=Math.min(n,T),e=Math.max(e,T)}if(p){const C=y(p),[T]=C.split(":").map(Number);n=Math.min(n,T),e=Math.max(e,T)}}),n=Math.max(0,Math.floor(n)-1),e=Math.min(23,Math.ceil(e)+1);const d=[];for(let t=n;t<=e;t++)d.push(t);return d.length>0?d:Array.from({length:24},(t,c)=>c)},z=_(()=>he(oe.value)),L=_(()=>Array.from({length:24},(a,n)=>n)),fe=_(()=>{const a=[],n=u.value.startOf("month"),e=u.value.endOf("month"),d=n.day()===0?6:n.day()-1;for(let c=d-1;c>=0;c--){const p=n.subtract(c+1,"day");a.push(K(p,!1))}for(let c=0;c<e.date();c++){const p=n.add(c,"day");a.push(K(p,!0))}const t=42-a.length;for(let c=0;c<t;c++){const p=e.add(c+1,"day");a.push(K(p,!1))}return a}),K=(a,n)=>{const e=a.format("YYYY-MM-DD"),d=D.value.filter(t=>t.due_date&&f(t.due_date).format("YYYY-MM-DD")===e&&t.status!=="completed");return{day:a.date(),date:e,currentMonth:n,isToday:a.isSame(f(),"day"),taskCount:d.length,tasks:d}},_e=()=>{g.value==="month"?u.value=u.value.subtract(1,"month"):g.value==="week"?u.value=u.value.subtract(1,"week"):u.value=u.value.subtract(1,"day")},ve=()=>{g.value==="month"?u.value=u.value.add(1,"month"):g.value==="week"?u.value=u.value.add(1,"week"):u.value=u.value.add(1,"day")},y=a=>a?/^\d{2}:\d{2}$/.test(a)?a:a.substring(0,5):"",ne=a=>`${a.toString().padStart(2,"0")}:00`,ke=a=>D.value.filter(n=>n.due_date&&f(n.due_date).format("YYYY-MM-DD")===a&&n.status!=="completed"&&(n.estimated_time||n.end_time)),we=a=>D.value.filter(n=>n.due_date&&f(n.due_date).format("YYYY-MM-DD")===a&&n.status!=="completed"&&!n.estimated_time&&!n.end_time),G=(a=null)=>{if(!a||a.length===0)return null;const n=q.value,e=n.hour(),d=n.minute(),t=a[0],c=a[a.length-1];if(e<t||e>c)return null;const p=64,C=e*60+d,T=t*60,$=(C-T)/60*p;return Math.max(0,$)},se=(a,n=null)=>{if(!a.estimated_time&&!a.end_time)return{display:"none"};const e=a.estimated_time||a.end_time,d=a.end_time||a.estimated_time;if(!e||!d)return{display:"none"};const t=y(e),c=y(d),[p,C]=t.split(":").map(Number),[T,$]=c.split(":").map(Number),He=n&&n.length>0?n[0]:0,de=64,Z=p*60+C,Be=He*60,Ee=(Z-Be)/60*de;let R=T*60+$;R<Z&&(R+=24*60);const Ne=(R-Z)/60*de,Ae=Math.max(Ne,40);return{top:`${Math.max(0,Ee)}px`,height:`${Ae}px`}},ae=a=>{if(!a.estimated_time||!a.end_time)return 0;const n=y(a.estimated_time),e=y(a.end_time);if(!n||!e)return 0;const[d,t]=n.split(":").map(Number),[c,p]=e.split(":").map(Number),C=d*60+t;let $=c*60+p-C;return $<0&&($+=24*60),$/60},H=a=>{if(a.completed_at)return"bg-gray-100 dark:bg-gray-700";const n=ae(a);return n===0||n<1?"bg-gradient-to-l from-white via-green-50 to-green-100 dark:from-gray-800 dark:via-green-900/20 dark:to-green-900/40":n>=1&&n<2?"bg-gradient-to-l from-white via-orange-50 to-orange-100 dark:from-gray-800 dark:via-orange-900/20 dark:to-orange-900/40":n>=2?"bg-gradient-to-l from-white via-red-50 to-red-100 dark:from-gray-800 dark:via-red-900/20 dark:to-red-900/40":"bg-white dark:bg-gray-800"},Me=a=>{const n=[];if(a.isToday&&n.push("ring-2 ring-inset ring-primary-500"),!a.currentMonth)return n.push("bg-gray-50/50 dark:bg-gray-900/30"),n.join(" ");if(a.taskCount===0)return n.push("hover:bg-gray-50 dark:hover:bg-gray-700/50"),n.join(" ");let e=0;return a.tasks.forEach(d=>{const t=ae(d);t>e&&(e=t)}),e>=2?n.push("bg-red-50/70 dark:bg-red-900/15 hover:bg-red-100/80 dark:hover:bg-red-900/25"):e>=1?n.push("bg-orange-50/70 dark:bg-orange-900/15 hover:bg-orange-100/80 dark:hover:bg-orange-900/25"):n.push("bg-green-50/70 dark:bg-green-900/15 hover:bg-green-100/80 dark:hover:bg-green-900/25"),n.join(" ")},Q=a=>({high:"Высокий",medium:"Средний",low:"Низкий",urgent:"Срочный"})[a]||a,B=a=>{Y.value=a,I.value="",P.value=!0},Ce=()=>{P.value=!1,w.value=!0},Te=async a=>{try{await k.completeTask(a.id)}catch(n){console.error("Error completing task:",n)}},ie=async a=>{try{await k.uncompleteTask(a.id)}catch(n){console.error("Error uncompleting task:",n)}},Ye=a=>{Y.value=null,I.value=a,w.value=!0},je=a=>{u.value=f(a),g.value="day"},De=async a=>{var n,e,d,t;F.value="";try{Y.value?await k.updateTask(Y.value.id,a):await k.createTask(a),w.value=!1,Y.value=null}catch(c){console.error("Error saving task:",c);let p="Ошибка при сохранении задачи";(e=(n=c.response)==null?void 0:n.data)!=null&&e.errors?p=Object.values(c.response.data.errors).flat().join(", "):(t=(d=c.response)==null?void 0:d.data)!=null&&t.message&&(p=c.response.data.message),F.value=p}},$e=()=>{w.value=!1,Y.value=null,I.value="",F.value=""},E=a=>{if(a.completed_at){ie(a);return}A.value=a,te.value=`Вы уверены, что хотите завершить задачу "${a.title}"?`,U.value=!0},Se=async()=>{if(A.value)try{await k.completeTask(A.value.id)}catch(a){console.error("Error completing task:",a)}U.value=!1,A.value=null},Oe=()=>{U.value=!1,A.value=null};let X=null;return Le(()=>{q.value=f(),X=setInterval(()=>{q.value=f()},6e4)}),Pe(()=>{X&&clearInterval(X)}),(a,n)=>(o(),r("div",et,[s("div",tt,[s("div",rt,[n[4]||(n[4]=s("div",null,[s("h1",{class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Календарь")],-1)),s("div",ot,[s("button",{onClick:n[0]||(n[0]=e=>g.value="day"),class:m(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",g.value==="day"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," День ",2),s("button",{onClick:n[1]||(n[1]=e=>g.value="week"),class:m(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",g.value==="week"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Неделя ",2),s("button",{onClick:n[2]||(n[2]=e=>g.value="month"),class:m(["px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors whitespace-nowrap touch-manipulation",g.value==="month"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 active:bg-gray-200 dark:active:bg-gray-600"])}," Месяц ",2)])]),s("div",nt,[s("div",st,[s("button",{onClick:_e,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[j(S(Je),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})]),s("h2",at,i(xe.value),1),s("button",{onClick:ve,class:"p-2 sm:p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 transition-colors touch-manipulation"},[j(S(Ke),{class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700 dark:text-gray-300"})])])]),g.value==="month"?(o(),r("div",it,[s("div",dt,[(o(),r(x,null,b(J,e=>s("div",{key:e,class:"text-center py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0"},i(e),1)),64))]),s("div",lt,[(o(!0),r(x,null,b(fe.value,(e,d)=>(o(),r("div",{key:d,onClick:t=>je(e.date),class:m(["group/day relative min-h-[60px] sm:min-h-[80px] lg:min-h-[100px] border-b border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-1 sm:p-2 cursor-pointer touch-manipulation transition-colors",Me(e)])},[s("div",ut,[s("div",mt,[s("span",{class:m(["text-xs sm:text-sm font-medium",{"text-gray-400 dark:text-gray-600":!e.currentMonth,"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-gray-100":e.currentMonth&&!e.isToday}])},i(e.day),3),e.taskCount>0?(o(),r("span",gt,i(e.taskCount),1)):l("",!0)]),e.taskCount===0&&e.currentMonth?(o(),r("div",yt,[s("button",{onClick:M(t=>Ye(e.date),["stop"]),class:"w-6 h-6 flex items-center justify-center rounded-full text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[j(S(qe),{class:"w-4 h-4"})],8,pt)])):l("",!0)]),e.taskCount>0?(o(),r("div",xt,[s("div",bt,[(o(!0),r(x,null,b(e.tasks.slice(0,8),t=>(o(),r("div",{key:t.id,class:"truncate py-0.5"},i(t.title),1))),128)),e.tasks.length>8?(o(),r("div",ht," +"+i(e.tasks.length-8)+" ещё ",1)):l("",!0),n[5]||(n[5]=s("div",{class:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900 dark:border-t-gray-700"},null,-1))])])):l("",!0)],10,ct))),128))])])):l("",!0),g.value==="week"?(o(),r("div",ft,[s("div",_t,[s("div",vt,[n[6]||(n[6]=s("div",{class:"border-r border-gray-200 dark:border-gray-700"},null,-1)),(o(!0),r(x,null,b(V.value,(e,d)=>(o(),r("div",{key:d,class:m(["text-center py-3 text-sm font-medium text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[s("div",kt,i(J[d]),1),s("div",wt,i(e.day)+" "+i(e.monthName),1)],2))),128))]),s("div",Mt,[s("div",Ct,[(o(!0),r(x,null,b(L.value,e=>(o(),r("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[s("span",Tt,i(ne(e)),1)]))),128))]),(o(!0),r(x,null,b(V.value,(e,d)=>(o(),r("div",{key:d,class:m(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 relative",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[s("div",Yt,[(o(!0),r(x,null,b(L.value,t=>(o(),r("div",{key:t,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),e.isToday&&G(L.value)?(o(),r("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:h({top:G(L.value)+"px"})},[...n[7]||(n[7]=[s("div",{class:"flex items-center"},[s("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),s("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):l("",!0),s("div",jt,[(o(!0),r(x,null,b(ke(e.date),t=>(o(),r("div",{key:t.id,onClick:M(c=>B(t),["stop"]),class:m(["absolute left-1 right-1 rounded cursor-pointer p-1.5 text-xs touch-manipulation border-l-2 shadow-sm z-10",[t.completed_at?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":H(t)+" text-primary-700 dark:text-primary-300 border-primary-500"]]),style:h(se(t,L.value))},[s("div",$t,[s("button",{onClick:M(c=>E(t),["stop"]),class:m(["flex-shrink-0 w-3.5 h-3.5 mt-0.5 rounded border flex items-center justify-center transition-colors",t.completed_at?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[t.completed_at?(o(),r("svg",Ot,[...n[8]||(n[8]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):l("",!0)],10,St),s("div",Ht,[s("div",Bt,i(t.title),1),t.estimated_time||t.end_time?(o(),r("div",Et,[t.estimated_time&&t.end_time?(o(),r("span",Nt,i(y(t.estimated_time))+" - "+i(y(t.end_time)),1)):t.end_time?(o(),r("span",At," до "+i(y(t.end_time)),1)):t.estimated_time?(o(),r("span",zt,i(y(t.estimated_time)),1)):l("",!0)])):l("",!0),s("div",Lt,[t.project?(o(),r("span",{key:0,class:"inline-block px-0.5 rounded text-[8px] font-medium",style:h({backgroundColor:t.project.color+"20",color:t.project.color})},i(t.project.name),5)):l("",!0),t.assignee?(o(),r("span",Pt,i(t.assignee.name),1)):l("",!0)])]),t.priority!=="medium"?(o(),r("div",{key:0,class:m(["flex-shrink-0 w-1.5 h-1.5 rounded-full mt-0.5",{"bg-red-500":t.priority==="urgent","bg-orange-500":t.priority==="high","bg-blue-500":t.priority==="low"}])},null,2)):l("",!0)])],14,Dt))),128))])])],2))),128))]),s("div",Ft,[n[10]||(n[10]=s("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-2"},[s("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Без времени")],-1)),(o(!0),r(x,null,b(V.value,(e,d)=>(o(),r("div",{key:d,class:m(["border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-2",{"bg-primary-50/30 dark:bg-primary-900/20":e.isToday}])},[s("div",It,[(o(!0),r(x,null,b(we(e.date),t=>(o(),r("div",{key:t.id,onClick:M(c=>B(t),["stop"]),class:m(["p-1.5 rounded cursor-pointer text-xs touch-manipulation border-l-2 w-full max-w-full overflow-hidden",[t.completed_at?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":H(t)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[s("div",Vt,[s("button",{onClick:M(c=>E(t),["stop"]),class:m(["flex-shrink-0 w-3.5 h-3.5 mt-0.5 rounded border flex items-center justify-center transition-colors",t.completed_at?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[t.completed_at?(o(),r("svg",Gt,[...n[9]||(n[9]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):l("",!0)],10,Wt),s("div",qt,[s("div",Jt,i(t.title),1),s("div",Kt,[t.project?(o(),r("span",{key:0,class:"inline-block px-1 py-0 rounded text-[9px] font-medium",style:h({backgroundColor:t.project.color+"20",color:t.project.color})},i(t.project.name),5)):l("",!0),t.workspace?(o(),r("span",Qt,i(t.workspace.name),1)):l("",!0),t.assignee?(o(),r("span",Xt,i(t.assignee.name),1)):l("",!0),t.context?(o(),r("span",{key:3,class:"inline-block px-1 py-0 rounded text-[9px] font-medium",style:h({backgroundColor:t.context.color+"20",color:t.context.color})},i(t.context.name),5)):l("",!0),(o(!0),r(x,null,b(t.tags,c=>(o(),r("span",{key:c.id,class:"inline-block px-1 py-0 rounded text-[9px] font-medium",style:h({backgroundColor:c.color+"20",color:c.color})},i(c.name),5))),128))])]),t.priority!=="medium"?(o(),r("div",{key:0,class:m(["flex-shrink-0 w-1.5 h-1.5 rounded-full mt-1",{"bg-red-500":t.priority==="urgent","bg-orange-500":t.priority==="high","bg-blue-500":t.priority==="low"}])},null,2)):l("",!0)])],10,Ut))),128))])],2))),128))])]),s("div",Zt,[s("div",Rt,[(o(!0),r(x,null,b(V.value,(e,d)=>(o(),r("div",{key:d,class:m(["w-[280px] min-w-[280px] border-r border-gray-200 dark:border-gray-700 last:border-r-0 p-3",{"bg-primary-50 dark:bg-primary-900/30":e.isToday}])},[s("div",er,[s("div",tr,i(J[d]),1),s("span",{class:m(["text-base font-semibold",{"text-primary-700 dark:text-primary-400":e.isToday,"text-gray-900 dark:text-white":!e.isToday}])},i(e.day)+" "+i(e.monthName),3)]),s("div",rr,[(o(!0),r(x,null,b(e.tasks,t=>(o(),r("div",{key:t.id,onClick:c=>B(t),class:m(["p-3 rounded-lg cursor-pointer touch-manipulation border-l-4",[t.completed_at?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through border-gray-300 dark:border-gray-500":H(t)+" text-primary-700 dark:text-primary-300 border-primary-500"]])},[s("div",nr,[s("button",{onClick:M(c=>E(t),["stop"]),class:m(["flex-shrink-0 w-4 h-4 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",t.completed_at?"bg-green-500 border-green-500":"border-gray-400 hover:border-primary-500"])},[t.completed_at?(o(),r("svg",ar,[...n[11]||(n[11]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):l("",!0)],10,sr),s("div",ir,[s("div",dr,i(t.title),1),s("div",lr,[t.workspace?(o(),r("span",cr,i(t.workspace.name),1)):l("",!0),t.project?(o(),r("span",{key:1,class:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium",style:h({backgroundColor:t.project.color+"20",color:t.project.color})},i(t.project.name),5)):l("",!0),t.estimated_time||t.end_time?(o(),r("span",ur,[t.estimated_time&&t.end_time?(o(),r("span",mr,i(y(t.estimated_time))+" - "+i(y(t.end_time)),1)):t.estimated_time?(o(),r("span",gr,i(y(t.estimated_time)),1)):t.end_time?(o(),r("span",yr," до "+i(y(t.end_time)),1)):l("",!0)])):l("",!0),t.assignee?(o(),r("span",pr,i(t.assignee.name),1)):l("",!0),t.context?(o(),r("span",{key:4,class:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium",style:h({backgroundColor:t.context.color+"20",color:t.context.color})},i(t.context.name),5)):l("",!0),(o(!0),r(x,null,b(t.tags,c=>(o(),r("span",{key:c.id,class:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium",style:h({backgroundColor:c.color+"20",color:c.color})},i(c.name),5))),128))])]),t.priority!=="medium"?(o(),r("div",{key:0,class:m(["flex-shrink-0 w-2 h-2 rounded-full mt-2",{"bg-red-500":t.priority==="urgent","bg-orange-500":t.priority==="high","bg-blue-500":t.priority==="low"}])},null,2)):l("",!0)])],10,or))),128)),e.tasks.length===0?(o(),r("div",xr," Нет задач ")):l("",!0)])],2))),128))])])])):l("",!0),g.value==="day"?(o(),r("div",br,[s("div",hr,[s("h3",fr,i(u.value.format("D MMMM YYYY")),1)]),s("div",_r,[s("div",vr,[s("div",kr,[(o(!0),r(x,null,b(z.value,e=>(o(),r("div",{key:e,class:"h-16 border-b border-gray-200 dark:border-gray-700 flex items-start justify-end pr-2 pt-1"},[s("span",wr,i(ne(e)),1)]))),128))]),s("div",Mr,[s("div",Cr,[(o(!0),r(x,null,b(z.value,e=>(o(),r("div",{key:e,class:"h-16 border-b border-gray-100 dark:border-gray-700/50"}))),128)),u.value.isSame(S(f)(),"day")&&G(z.value)?(o(),r("div",{key:0,class:"absolute left-0 right-0 z-20 pointer-events-none",style:h({top:G(z.value)+"px"})},[...n[12]||(n[12]=[s("div",{class:"flex items-center"},[s("div",{class:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),s("div",{class:"flex-1 h-0.5 bg-red-500"})],-1)])],4)):l("",!0),s("div",Tr,[(o(!0),r(x,null,b(oe.value,e=>(o(),r("div",{key:e.id,onClick:M(d=>B(e),["stop"]),class:m(["absolute left-2 right-2 rounded-lg cursor-pointer p-2 sm:p-3 border-l-4 shadow-sm z-10 touch-manipulation",[e.completed_at?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":H(e)+" border-primary-500"]]),style:h(se(e,z.value))},[s("div",jr,[s("button",{onClick:M(d=>E(e),["stop"]),class:m(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.completed_at?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.completed_at?(o(),r("svg",$r,[...n[13]||(n[13]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):l("",!0)],10,Dr),s("div",Sr,[s("div",Or,i(e.title),1),e.description?(o(),r("div",Hr,i(e.description),1)):l("",!0),s("div",Br,[e.estimated_time||e.end_time?(o(),r("span",Er,[j(S(ee),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(o(),r("span",Nr,i(y(e.estimated_time))+" - "+i(y(e.end_time)),1)):e.estimated_time?(o(),r("span",Ar,i(y(e.estimated_time)),1)):e.end_time?(o(),r("span",zr," до "+i(y(e.end_time)),1)):l("",!0)])):l("",!0),s("span",{class:m(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},i(Q(e.priority)),3),e.workspace?(o(),r("span",Lr,i(e.workspace.name),1)):l("",!0),e.project?(o(),r("span",{key:2,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:h({backgroundColor:e.project.color+"20",color:e.project.color})},i(e.project.name),5)):l("",!0),e.assignee?(o(),r("span",Pr,i(e.assignee.name),1)):l("",!0),e.context?(o(),r("span",{key:4,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:h({backgroundColor:e.context.color+"20",color:e.context.color})},i(e.context.name),5)):l("",!0),(o(!0),r(x,null,b(e.tags,d=>(o(),r("span",{key:d.id,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:h({backgroundColor:d.color+"20",color:d.color})},i(d.name),5))),128))])])])],14,Yr))),128))])])])]),s("div",Fr,[n[15]||(n[15]=s("div",{class:"border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-3"},[s("span",{class:"text-xs text-gray-500 dark:text-gray-400 font-medium"},"Без времени")],-1)),s("div",Ir,[s("div",Ur,[(o(!0),r(x,null,b(be.value,e=>(o(),r("div",{key:e.id,onClick:M(d=>B(e),["stop"]),class:m(["p-3 rounded-lg cursor-pointer border-l-4 touch-manipulation",[e.completed_at?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":H(e)+" border-primary-500"]])},[s("div",Wr,[s("button",{onClick:M(d=>E(e),["stop"]),class:m(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.completed_at?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.completed_at?(o(),r("svg",qr,[...n[14]||(n[14]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):l("",!0)],10,Gr),s("div",Jr,[s("div",Kr,i(e.title),1),e.description?(o(),r("div",Qr,i(e.description),1)):l("",!0),s("div",Xr,[e.estimated_time||e.end_time?(o(),r("span",Zr,[j(S(ee),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(o(),r("span",Rr,i(y(e.estimated_time))+" - "+i(y(e.end_time)),1)):e.estimated_time?(o(),r("span",eo,i(y(e.estimated_time)),1)):e.end_time?(o(),r("span",to," до "+i(y(e.end_time)),1)):l("",!0)])):l("",!0),s("span",{class:m(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},i(Q(e.priority)),3),e.workspace?(o(),r("span",ro,i(e.workspace.name),1)):l("",!0),e.project?(o(),r("span",{key:2,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:h({backgroundColor:e.project.color+"20",color:e.project.color})},i(e.project.name),5)):l("",!0),e.assignee?(o(),r("span",oo,i(e.assignee.name),1)):l("",!0),e.context?(o(),r("span",{key:4,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:h({backgroundColor:e.context.color+"20",color:e.context.color})},i(e.context.name),5)):l("",!0),(o(!0),r(x,null,b(e.tags,d=>(o(),r("span",{key:d.id,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:h({backgroundColor:d.color+"20",color:d.color})},i(d.name),5))),128))])])])],10,Vr))),128))])])])]),s("div",no,[s("div",so,[(o(!0),r(x,null,b(W.value,e=>(o(),r("div",{key:e.id,onClick:d=>B(e),class:m(["p-3 sm:p-4 rounded-lg cursor-pointer border-l-4 touch-manipulation active:scale-[0.98] transition-transform",[e.completed_at?"bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-500 line-through":H(e)+" border-primary-500"]])},[s("div",io,[s("button",{onClick:M(d=>E(e),["stop"]),class:m(["flex-shrink-0 w-5 h-5 mt-0.5 rounded border-2 flex items-center justify-center transition-colors",e.completed_at?"bg-green-500 border-green-500":"border-gray-300 hover:border-primary-500"])},[e.completed_at?(o(),r("svg",co,[...n[16]||(n[16]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):l("",!0)],10,lo),s("div",uo,[s("div",mo,i(e.title),1),e.description?(o(),r("div",go,i(e.description),1)):l("",!0),s("div",yo,[e.estimated_time||e.end_time?(o(),r("span",po,[j(S(ee),{class:"w-3 h-3 mr-1"}),e.estimated_time&&e.end_time?(o(),r("span",xo,i(y(e.estimated_time))+" - "+i(y(e.end_time)),1)):e.estimated_time?(o(),r("span",bo,i(y(e.estimated_time)),1)):e.end_time?(o(),r("span",ho," до "+i(y(e.end_time)),1)):l("",!0)])):l("",!0),s("span",{class:m(["text-xs px-2 py-0.5 rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.priority==="urgent","bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":e.priority==="high","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.priority==="medium","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":e.priority==="low"}])},i(Q(e.priority)),3),e.workspace?(o(),r("span",fo,i(e.workspace.name),1)):l("",!0),e.project?(o(),r("span",{key:2,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:h({backgroundColor:e.project.color+"20",color:e.project.color})},i(e.project.name),5)):l("",!0),e.assignee?(o(),r("span",_o,i(e.assignee.name),1)):l("",!0),e.context?(o(),r("span",{key:4,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:h({backgroundColor:e.context.color+"20",color:e.context.color})},i(e.context.name),5)):l("",!0),(o(!0),r(x,null,b(e.tags,d=>(o(),r("span",{key:d.id,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:h({backgroundColor:d.color+"20",color:d.color})},i(d.name),5))),128))])])])],10,ao))),128)),W.value.length===0?(o(),r("div",vo," Нет задач на этот день ")):l("",!0)])])])):l("",!0),j(Ve,{show:P.value,task:Y.value,onClose:n[3]||(n[3]=e=>{P.value=!1,Y.value=null}),onEnterEdit:Ce,onCompleteTask:Te,onUncompleteTask:ie},null,8,["show","task"]),j(Ue,{show:w.value,task:Y.value,"server-error":F.value,"default-date":I.value,onClose:$e,onSubmit:De},null,8,["show","task","server-error","default-date"]),j(We,{show:U.value,title:ge.value,message:te.value,"confirm-text":"Завершить","cancel-text":"Отмена",variant:"success",onConfirm:Se,onCancel:Oe},null,8,["show","title","message"])])]))}},Oo=Ge(ko,[["__scopeId","data-v-ca864ecb"]]);export{Oo as default};
