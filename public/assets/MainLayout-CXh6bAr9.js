import{c as u,o as a,a as e,j as ge,k as z,h as se,l as K,g as E,b as _,m as me,n as ke,p as Z,t as $,r as k,f as C,w as L,q as ye,s as fe,d as N,v as oe,x as Ne,T as ee,F as re,y as ae,z as F,A as ne,e as Q,B as Fe,u as xe,i as Ge,C as Ke}from"./index-C8nfUhJg.js";import{u as le}from"./workspace-B-XDxAs_.js";import{r as be,a as he,b as we,c as $e,d as Ce,u as Je,e as Xe,T as Ye}from"./TaskModal-l9DQNKoh.js";import{u as et}from"./useTaskEvents-WvWWla-m.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as tt}from"./ProjectModal-Ce8dKEko.js";function Me(y,M){return a(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})])}function Y(y,M){return a(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const ot={class:"flex items-center space-x-3"},pe={__name:"NavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null}},setup(y){const M=y,f=ge(),g=le(),n={inbox:Ce,lightning:$e,calendar:we,clock:he,archive:be,folder:Y,"calendar-days":Me,target:Y},m=z(()=>n[M.icon]||Y),v=z(()=>{var t;const i=(t=g.currentWorkspace)==null?void 0:t.id;return M.to.replace(":id",i||"1")}),h=z(()=>f.path===v.value);return(i,t)=>{const x=se("router-link");return a(),K(x,{to:v.value,class:Z(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",h.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:E(()=>[e("div",ot,[(a(),K(me(m.value),{class:"w-5 h-5"})),e("span",null,[ke(i.$slots,"default")])]),y.count!==null&&y.count>0?(a(),u("span",{key:0,class:Z(["px-2 py-0.5 text-xs font-semibold rounded-full",h.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},$(y.count),3)):_("",!0)]),_:3},8,["to","class"])}}},st={class:"flex items-center space-x-3"},X={__name:"DroppableNavLink",props:{to:{type:String,required:!0},icon:{type:String,default:"folder"},count:{type:Number,default:null},dropStatus:{type:String,default:null}},emits:["task-dropped"],setup(y,{emit:M}){const f=y,g=M,n=ge(),m=le(),v=k(!1),h={inbox:Ce,lightning:$e,calendar:we,clock:he,archive:be,folder:Y,"calendar-days":Me,target:Y},i=z(()=>h[f.icon]||Y),t=z(()=>{var W;const T=(W=m.currentWorkspace)==null?void 0:W.id;return f.to.replace(":id",T||"1")}),x=z(()=>n.path===t.value),S=T=>{T.preventDefault(),v.value=!0,T.dataTransfer.dropEffect="move"},I=()=>{v.value=!1},R=T=>{T.preventDefault(),v.value=!1;try{const W=JSON.parse(T.dataTransfer.getData("application/json"));f.dropStatus&&W&&g("task-dropped",{taskId:W.id,newStatus:f.dropStatus})}catch(W){console.error("Error handling drop:",W)}};return(T,W)=>{const c=se("router-link");return a(),u("div",{onDrop:R,onDragover:L(S,["prevent"]),onDragleave:I,class:Z(["rounded-lg transition-all",v.value?"bg-primary-100 dark:bg-primary-900/40 ring-2 ring-primary-500":""])},[C(c,{to:t.value,class:Z(["flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors",x.value?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:E(()=>[e("div",st,[(a(),K(me(i.value),{class:"w-5 h-5"})),e("span",null,[ke(T.$slots,"default")])]),y.count!==null&&y.count>0?(a(),u("span",{key:0,class:Z(["px-2 py-0.5 text-xs font-semibold rounded-full",x.value?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"])},$(y.count),3)):_("",!0)]),_:3},8,["to","class"])],34)}}},rt={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20"},at={class:"flex items-center justify-between px-4 lg:px-8 py-3"},nt={class:"flex-1 max-w-2xl"},lt={class:"relative"},it={class:"flex items-center space-x-2 lg:space-x-4 ml-4"},dt={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 z-50"},ut={class:"relative"},ct={key:0,class:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"},vt={key:0,class:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2 max-h-96 overflow-y-auto"},pt={key:0,class:"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400"},gt={key:1},mt={class:"text-sm text-gray-900 dark:text-gray-100"},kt={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},yt={class:"hidden lg:block relative"},ft={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},xt={class:"hidden lg:block text-left"},bt={class:"text-sm font-medium text-gray-900 dark:text-white"},ht={class:"text-xs text-gray-500 dark:text-gray-400"},wt={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-2"},$t={__name:"Toolbar",props:{user:{type:Object,default:null}},emits:["quick-add","quick-add-task","quick-add-project","quick-add-goal","search","logout","profile","settings","toggle-sidebar"],setup(y,{emit:M}){const f=y,g=M,n=k(""),m=k(!1),v=k(!1),h=k(!1),i=k(0),t=k([]),x=k(null),S=z(()=>{var l;return(((l=f.user)==null?void 0:l.name)||"").split(" ").map(O=>O[0]).join("").toUpperCase().slice(0,2)}),I=()=>{h.value=!h.value},R=()=>{h.value=!1,g("quick-add-task")},T=()=>{h.value=!1,g("quick-add-project")},W=()=>{h.value=!1,g("quick-add-goal")},c=A=>{x.value&&!x.value.contains(A.target)&&(h.value=!1)};ye(()=>{document.addEventListener("click",c)}),fe(()=>{document.removeEventListener("click",c)});const d=()=>{n.value.trim()&&g("search",n.value)},p=()=>{d()},P=()=>{v.value=!1,g("logout")},U=()=>{v.value=!1,g("profile")},B=()=>{v.value=!1,g("settings")},q={mounted(A,l){A.clickOutsideEvent=O=>{A===O.target||A.contains(O.target)||l.value()},document.addEventListener("click",A.clickOutsideEvent)},unmounted(A){document.removeEventListener("click",A.clickOutsideEvent)}};return(A,l)=>{var O,G;return a(),u("header",rt,[e("div",at,[e("button",{onClick:l[0]||(l[0]=H=>A.$emit("toggle-sidebar")),class:"lg:hidden p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors mr-2"},[...l[4]||(l[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e("div",nt,[e("div",lt,[l[5]||(l[5]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),N(e("input",{"onUpdate:modelValue":l[1]||(l[1]=H=>n.value=H),type:"text",placeholder:"Поиск задач...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onInput:d,onKeydown:Ne(p,["enter"])},null,544),[[oe,n.value]])])]),e("div",it,[e("div",{class:"relative",ref_key:"quickAddMenuContainer",ref:x},[e("button",{onClick:L(I,["stop"]),class:"inline-flex items-center px-3 lg:px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary-500 transition-colors"},[...l[6]||(l[6]=[e("svg",{class:"w-5 h-5 lg:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden lg:inline"},"Создать",-1)])]),C(ee,{name:"dropdown"},{default:E(()=>[h.value?(a(),u("div",dt,[e("button",{onClick:R,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...l[7]||(l[7]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",null,"Задачу")],-1)])]),e("button",{onClick:T,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...l[8]||(l[8]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),e("span",null,"Проект")],-1)])]),e("button",{onClick:W,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...l[9]||(l[9]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),e("span",null,"Цель")],-1)])])])):_("",!0)]),_:1})],512),e("div",ut,[e("button",{onClick:l[2]||(l[2]=H=>m.value=!m.value),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors relative"},[l[10]||(l[10]=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),i.value>0?(a(),u("span",ct)):_("",!0)]),m.value?N((a(),u("div",vt,[l[11]||(l[11]=e("div",{class:"px-4 py-2 border-b border-gray-200 dark:border-gray-600"},[e("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Уведомления")],-1)),t.value.length===0?(a(),u("div",pt," Нет новых уведомлений ")):(a(),u("div",gt,[(a(!0),u(re,null,ae(t.value,H=>(a(),u("button",{key:H.id,class:"w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-left"},[e("p",mt,$(H.message),1),e("p",kt,$(H.time),1)]))),128))]))])),[[q,()=>m.value=!1]]):_("",!0)]),e("div",yt,[e("button",{onClick:l[3]||(l[3]=H=>v.value=!v.value),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[e("div",ft,$(S.value),1),e("div",xt,[e("div",bt,$((O=y.user)==null?void 0:O.name),1),e("div",ht,$((G=y.user)==null?void 0:G.email),1)]),l[12]||(l[12]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),v.value?N((a(),u("div",wt,[e("button",{onClick:U,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...l[13]||(l[13]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),e("span",null,"Профиль")],-1)])]),e("button",{onClick:B,class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},[...l[14]||(l[14]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),e("span",null,"Настройки")],-1)])]),l[16]||(l[16]=e("div",{class:"border-t border-gray-200 dark:border-gray-600 my-2"},null,-1)),e("button",{onClick:P,class:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},[...l[15]||(l[15]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})]),e("span",null,"Выйти")],-1)])])])),[[q,()=>v.value=!1]]):_("",!0)])])])])}}},Ct=te($t,[["__scopeId","data-v-550b0c48"]]),Mt={class:"flex min-h-screen items-center justify-center p-4"},jt={class:"flex items-center justify-between p-6 border-b border-gray-200"},_t={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},St={class:"flex justify-end space-x-3 pt-4"},Tt=["disabled"],At={__name:"WorkspaceModal",props:{show:{type:Boolean,default:!1}},emits:["close","submit"],setup(y,{emit:M}){const f=y,g=M,n=k({name:"",description:""}),m=k(!1),v=k("");F(()=>f.show,i=>{i||(n.value={name:"",description:""},m.value=!1,v.value="")});const h=()=>{v.value="",m.value=!0,g("submit",n.value)};return(i,t)=>(a(),K(ne,{to:"body"},[C(ee,{name:"modal"},{default:E(()=>[y.show?(a(),u("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=L(x=>i.$emit("close"),["self"]))},[t[10]||(t[10]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Mt,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=L(()=>{},["stop"]))},[e("div",jt,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Новое рабочее пространство ",-1)),e("button",{onClick:t[0]||(t[0]=x=>i.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:L(h,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Название * ",-1)),N(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=x=>n.value.name=x),type:"text",required:"",class:"input",placeholder:"Например: Команда разработки"},null,512),[[oe,n.value.name]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Описание ",-1)),N(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=x=>n.value.description=x),rows:"3",class:"input",placeholder:"Краткое описание рабочего пространства"},null,512),[[oe,n.value.description]])]),v.value?(a(),u("div",_t,$(v.value),1)):_("",!0),e("div",St,[e("button",{type:"button",onClick:t[3]||(t[3]=x=>i.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:m.value,class:"btn btn-primary"},$(m.value?"Создание...":"Создать"),9,Tt)])],32)])])])):_("",!0)]),_:1})]))}},Wt=te(At,[["__scopeId","data-v-d4f5ba25"]]),Bt={class:"flex min-h-screen items-center justify-center p-4"},Et={class:"flex items-center justify-between p-6 border-b border-gray-200"},Vt={class:"text-sm text-gray-600 mb-4"},Pt={class:"font-medium"},Dt={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},zt={class:"flex justify-end space-x-3 pt-4"},Lt=["disabled"],Ht={__name:"AddMemberModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(y,{emit:M}){const f=y,g=M,n=k({email:"",role:"member"}),m=k(!1),v=k("");F(()=>f.show,i=>{i||(n.value={email:"",role:"member"},m.value=!1,v.value="")});const h=()=>{var i;v.value="",m.value=!0,g("submit",{...n.value,workspace_id:(i=f.workspace)==null?void 0:i.id})};return(i,t)=>(a(),K(ne,{to:"body"},[C(ee,{name:"modal"},{default:E(()=>{var x;return[y.show?(a(),u("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[5]||(t[5]=L(S=>i.$emit("close"),["self"]))},[t[12]||(t[12]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Bt,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[4]||(t[4]=L(()=>{},["stop"]))},[e("div",Et,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Добавить пользователя ",-1)),e("button",{onClick:t[0]||(t[0]=S=>i.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:L(h,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[e("p",Vt,[t[8]||(t[8]=Q(" Workspace: ",-1)),e("span",Pt,$((x=y.workspace)==null?void 0:x.name),1)])]),e("div",null,[t[9]||(t[9]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email пользователя * ",-1)),N(e("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=S=>n.value.email=S),type:"email",required:"",class:"input",placeholder:"user@example.com"},null,512),[[oe,n.value.email]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"role",class:"block text-sm font-medium text-gray-700 mb-2"}," Роль ",-1)),N(e("select",{id:"role","onUpdate:modelValue":t[2]||(t[2]=S=>n.value.role=S),class:"input"},[...t[10]||(t[10]=[e("option",{value:"viewer"},"Просмотр",-1),e("option",{value:"member"},"Участник",-1),e("option",{value:"admin"},"Администратор",-1)])],512),[[Fe,n.value.role]])]),v.value?(a(),u("div",Dt,$(v.value),1)):_("",!0),e("div",zt,[e("button",{type:"button",onClick:t[3]||(t[3]=S=>i.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:m.value,class:"btn btn-primary"},$(m.value?"Добавление...":"Добавить"),9,Lt)])],32)])])])):_("",!0)]}),_:1})]))}},Ot=te(Ht,[["__scopeId","data-v-4f9b8513"]]),It={class:"flex min-h-screen items-center justify-center p-4"},Rt={class:"flex items-center justify-between p-6 border-b border-gray-200"},qt={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},Ut={class:"flex justify-end space-x-3 pt-4"},Qt=["disabled"],Zt={__name:"RenameWorkspaceModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","submit"],setup(y,{emit:M}){const f=y,g=M,n=k({name:""}),m=k(!1),v=k("");F(()=>f.workspace,i=>{i&&(n.value.name=i.name)},{immediate:!0}),F(()=>f.show,i=>{i||(m.value=!1,v.value="")});const h=()=>{v.value="",m.value=!0,g("submit",n.value.name)};return(i,t)=>(a(),K(ne,{to:"body"},[C(ee,{name:"modal"},{default:E(()=>[y.show?(a(),u("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[4]||(t[4]=L(x=>i.$emit("close"),["self"]))},[t[8]||(t[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",It,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-auto",onClick:t[3]||(t[3]=L(()=>{},["stop"]))},[e("div",Rt,[t[6]||(t[6]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Переименовать workspace ",-1)),e("button",{onClick:t[0]||(t[0]=x=>i.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...t[5]||(t[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:L(h,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[7]||(t[7]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Новое название * ",-1)),N(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=x=>n.value.name=x),type:"text",required:"",class:"input",placeholder:"Название workspace"},null,512),[[oe,n.value.name]])]),v.value?(a(),u("div",qt,$(v.value),1)):_("",!0),e("div",Ut,[e("button",{type:"button",onClick:t[2]||(t[2]=x=>i.$emit("close")),class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",disabled:m.value,class:"btn btn-primary"},$(m.value?"Сохранение...":"Сохранить"),9,Qt)])],32)])])])):_("",!0)]),_:1})]))}},Nt=te(Zt,[["__scopeId","data-v-27a57082"]]),Ft={class:"flex min-h-screen items-center justify-center p-4"},Gt={class:"flex items-center justify-between p-6 border-b border-gray-200"},Kt={class:"p-6"},Jt={key:0,class:"text-center py-8"},Xt={key:1,class:"text-center py-8 text-gray-500"},Yt={key:2,class:"space-y-3"},eo={class:"flex items-center space-x-3"},to={class:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},oo={class:"font-medium text-gray-900"},so={class:"text-sm text-gray-500"},ro={class:"flex items-center space-x-3"},ao=["onClick","disabled"],no={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},lo={key:1,class:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-red-600"},io={key:0,class:"px-6 pb-4"},uo={class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg"},co={class:"flex justify-end p-6 border-t border-gray-200"},vo={__name:"MembersModal",props:{show:{type:Boolean,default:!1},workspace:{type:Object,default:null}},emits:["close","member-removed"],setup(y,{emit:M}){const f=y,g=M,n=le(),m=xe(),v=k([]),h=k(!1),i=k(""),t=k(null),x=c=>c?c.split(" ").map(d=>d[0]).join("").toUpperCase().substring(0,2):"?",S=c=>({owner:"Владелец",admin:"Администратор",member:"Участник",viewer:"Наблюдатель"})[c]||c,I=c=>({owner:"bg-purple-100 text-purple-700",admin:"bg-blue-100 text-blue-700",member:"bg-green-100 text-green-700",viewer:"bg-gray-100 text-gray-700"})[c]||"bg-gray-100 text-gray-700",R=c=>{var U,B,q,A,l,O,G;const d=(U=m.user)==null?void 0:U.id,p=((B=f.workspace)==null?void 0:B.owner_id)===d,P=((O=(l=(A=(q=f.workspace)==null?void 0:q.members)==null?void 0:A.find(H=>H.id===d))==null?void 0:l.pivot)==null?void 0:O.role)==="admin";return((G=f.workspace)==null?void 0:G.owner_id)===c.id||c.id===d?!1:p||P},T=async()=>{var c;if((c=f.workspace)!=null&&c.id){h.value=!0,i.value="";try{const d=await n.fetchMembers(f.workspace.id);v.value=d.members||d||[]}catch(d){console.error("Error loading members:",d),i.value="Ошибка при загрузке участников"}finally{h.value=!1}}},W=async c=>{var d,p;if(confirm(`Вы уверены, что хотите удалить ${c.name} из workspace?`)){t.value=c.id,i.value="";try{await n.removeMember(f.workspace.id,c.id),await T(),g("member-removed",c)}catch(P){console.error("Error removing member:",P),i.value=((p=(d=P.response)==null?void 0:d.data)==null?void 0:p.message)||"Ошибка при удалении участника"}finally{t.value=null}}};return F(()=>f.show,c=>{c?T():(v.value=[],i.value="",t.value=null)}),F(()=>{var c;return(c=f.workspace)==null?void 0:c.id},()=>{f.show&&T()}),(c,d)=>(a(),K(ne,{to:"body"},[C(ee,{name:"modal"},{default:E(()=>[y.show?(a(),u("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:d[3]||(d[3]=L(p=>c.$emit("close"),["self"]))},[d[8]||(d[8]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",Ft,[e("div",{class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-auto",onClick:d[2]||(d[2]=L(()=>{},["stop"]))},[e("div",Gt,[d[5]||(d[5]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Участники workspace ",-1)),e("button",{onClick:d[0]||(d[0]=p=>c.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...d[4]||(d[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Kt,[h.value?(a(),u("div",Jt,[...d[6]||(d[6]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):v.value.length===0?(a(),u("div",Xt," Нет участников ")):(a(),u("div",Yt,[(a(!0),u(re,null,ae(v.value,p=>{var P,U,B,q;return a(),u("div",{key:p.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[e("div",eo,[e("div",to,$(x(p.name)),1),e("div",null,[e("div",oo,$(p.name),1),e("div",so,$(p.email),1)])]),e("div",ro,[e("span",{class:Z(["px-3 py-1 text-xs font-medium rounded-full",I(((P=p.pivot)==null?void 0:P.role)||(((U=y.workspace)==null?void 0:U.owner_id)===p.id?"owner":"member"))])},$(S(((B=p.pivot)==null?void 0:B.role)||(((q=y.workspace)==null?void 0:q.owner_id)===p.id?"owner":"member"))),3),R(p)?(a(),u("button",{key:0,onClick:A=>W(p),class:"text-red-600 hover:text-red-700 p-2 rounded transition-colors",disabled:t.value===p.id,title:"Удалить из workspace"},[t.value!==p.id?(a(),u("svg",no,[...d[7]||(d[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])])):(a(),u("div",lo))],8,ao)):_("",!0)])])}),128))]))]),i.value?(a(),u("div",io,[e("div",uo,$(i.value),1)])):_("",!0),e("div",co,[e("button",{onClick:d[1]||(d[1]=p=>c.$emit("close")),class:"btn btn-secondary"}," Закрыть ")])])])])):_("",!0)]),_:1})]))}},po=te(vo,[["__scopeId","data-v-7d4c4aab"]]),go={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},mo={class:"flex h-screen"},ko={class:"flex flex-col h-full"},yo={class:"p-4 border-b border-gray-200 dark:border-gray-700"},fo={class:"flex items-center justify-between mb-3"},xo={class:"space-y-1"},bo={class:"flex-1 flex items-center px-3 py-2 text-sm cursor-pointer"},ho=["checked","onChange"],wo=["onClick"],$o={key:0,class:"absolute right-0 mt-1 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-1 z-50"},Co=["onClick"],Mo=["onClick"],jo=["onClick"],_o={class:"flex-1 overflow-y-auto p-4"},So={class:"space-y-1"},To={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 space-y-1"},Ao={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Wo={class:"space-y-1 max-h-64 overflow-y-auto"},Bo={class:"text-sm text-gray-700 dark:text-gray-300 truncate"},Eo={key:0,class:"text-xs text-gray-500"},Vo=["onClick"],Po={key:0,class:"px-3 py-2 text-sm text-gray-500 text-center"},Do={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},zo={class:"space-y-1"},Lo={class:"hidden lg:block p-4 border-t border-gray-200 dark:border-gray-700"},Ho={class:"flex items-center justify-between"},Oo={class:"flex items-center space-x-3"},Io={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},Ro={class:"text-sm"},qo={class:"font-medium text-gray-900 dark:text-white"},Uo={class:"text-xs text-gray-500 dark:text-gray-400"},Qo={class:"flex-1 flex flex-col overflow-hidden"},Zo={class:"flex-1 overflow-auto"},No={__name:"MainLayout",setup(y){const M=Ge(),f=xe(),g=le(),n=Je(),m=Xe(),{triggerTaskUpdate:v}=et(),h=k(!1);k(!1);const i=k(!1),t=k(!1),x=k(""),S=k(null),I=k(!1),R=k(!1),T=k(!1),W=k(!1),c=k(null),d=k(""),p=k(null),P=z(()=>(console.log("User from store:",f.user),f.user)),U=z(()=>g.workspaces),B=z(()=>n.counts),q=z(()=>g.currentWorkspace),A=z(()=>m.activeProjects),l=z(()=>g.selectedWorkspaces.map(s=>s.id)),O=z(()=>{if(l.value.length===0)return 0;const s=B.value.scheduled||0,o=B.value.today||0,b=B.value.tomorrow||0;return s+o+b}),G=z(()=>{var o;return(((o=P.value)==null?void 0:o.name)||"").split(" ").map(b=>b[0]).join("").toUpperCase().slice(0,2)}),H=async s=>{var j;g.toggleSelectedWorkspace(s),await n.fetchCounts();const b=M.currentRoute.value.path.split("/"),w=b[b.length-1],V=["inbox","next-actions","today","waiting","someday","calendar","projects","goals"].includes(w)?w:"inbox",r=((j=g.currentWorkspace)==null?void 0:j.id)||s.id;M.push(`/workspaces/${r}/${V}`)},je=async s=>{try{const o=await g.createWorkspace(s);i.value=!1,await H(o)}catch(o){console.error("Ошибка создания workspace:",o)}},de=async()=>{await f.logout(),M.push("/login")},_e=()=>{t.value=!0},ue=()=>{c.value=null,W.value=!0},Se=async s=>{var o,b;d.value="";try{c.value?await m.updateProject(c.value.id,s):await m.createProject(s),W.value=!1,c.value=null,await m.fetchProjects()}catch(w){console.error("Error saving project:",w),d.value=((b=(o=w.response)==null?void 0:o.data)==null?void 0:b.message)||w.message||"Ошибка при сохранении проекта"}},Te=()=>{W.value=!1,c.value=null,d.value=""},Ae=async s=>{var o,b;if(confirm(`Архивировать проект "${s.name}"?`))try{await m.archiveProject(s.id),await m.fetchProjects()}catch(w){console.error("Error archiving project:",w),alert("Ошибка при архивировании проекта: "+(((b=(o=w.response)==null?void 0:o.data)==null?void 0:b.message)||w.message))}},We=()=>{console.log("Quick add goal")},Be=async s=>{var o,b;x.value="";try{await n.createTask(s),t.value=!1,await n.fetchCounts()}catch(w){console.error("Error creating task:",w),x.value=((b=(o=w.response)==null?void 0:o.data)==null?void 0:b.message)||w.message||"Ошибка при создании задачи"}},Ee=()=>{t.value=!1,x.value=""},J=async({taskId:s,newStatus:o})=>{var b,w,D,V;try{if(console.log("Dropping task:",s,"to status:",o),o==="today"){const r=new Date().toISOString().split("T")[0];await n.updateTask(s,{status:"today",due_date:r})}else if(o==="tomorrow"){const r=new Date;r.setDate(r.getDate()+1);const j=r.toISOString().split("T")[0];await n.updateTask(s,{status:"tomorrow",due_date:j})}else await n.updateTask(s,{status:o});await n.fetchCounts(),v()}catch(r){console.error("Error updating task status:",r),console.error("Error response:",(b=r.response)==null?void 0:b.data),console.error("Error status:",(w=r.response)==null?void 0:w.status);const j=((V=(D=r.response)==null?void 0:D.data)==null?void 0:V.message)||"Ошибка при обновлении задачи";alert(j)}},Ve=s=>{console.log("Search:",s)},Pe=()=>{M.push("/settings")},De=()=>{M.push("/settings")},ie=s=>{var w,D,V;const o=(w=P.value)==null?void 0:w.id;if(!o)return!1;if(s.owner_id===o)return!0;const b=(D=s.members)==null?void 0:D.find(r=>r.id===o);return((V=b==null?void 0:b.pivot)==null?void 0:V.role)==="admin"},ze=s=>{S.value=S.value===s?null:s},Le=s=>{p.value=s,R.value=!0,S.value=null},He=s=>{p.value=s,T.value=!0,S.value=null},Oe=s=>{p.value=s,I.value=!0,S.value=null},Ie=()=>{I.value=!1,p.value=null},Re=()=>{T.value=!1,p.value=null},qe=async()=>{await g.fetchWorkspaces()},Ue=()=>{R.value=!1,p.value=null},Qe=async s=>{var o,b,w,D,V;try{console.log("Sending member data:",s),await g.addMember(s.workspace_id,{email:s.email,role:s.role}),I.value=!1,p.value=null,alert("Пользователь успешно добавлен в workspace")}catch(r){console.error("Error adding member:",r),console.error("Error response:",(o=r.response)==null?void 0:o.data);let j="Ошибка при добавлении пользователя";(w=(b=r.response)==null?void 0:b.data)!=null&&w.errors?j=Object.values(r.response.data.errors).flat().join(", "):(V=(D=r.response)==null?void 0:D.data)!=null&&V.message&&(j=r.response.data.message),alert(j)}},Ze=async s=>{var o,b,w,D,V;try{console.log("Renaming workspace:",p.value.id,"to:",s),await g.updateWorkspace(p.value.id,{name:s}),await g.fetchWorkspaces(),R.value=!1,p.value=null,alert("Workspace успешно переименован")}catch(r){console.error("Error renaming workspace:",r),console.error("Error response:",(o=r.response)==null?void 0:o.data);let j="Ошибка при переименовании";(w=(b=r.response)==null?void 0:b.data)!=null&&w.errors?j=Object.values(r.response.data.errors).flat().join(", "):(V=(D=r.response)==null?void 0:D.data)!=null&&V.message&&(j=r.response.data.message),alert(j)}};ye(async()=>{await g.fetchWorkspaces(),g.currentWorkspace&&(await n.fetchCounts(),await m.fetchProjects()),document.addEventListener("click",ce)}),F(()=>{var s;return(s=g.currentWorkspace)==null?void 0:s.id},s=>{s&&m.fetchProjects()}),fe(()=>{document.removeEventListener("click",ce)});const ce=()=>{S.value=null};return F(()=>g.selectedWorkspaces,async()=>{await n.fetchCounts();const s=M.currentRoute.value.path;s.includes("/inbox")?await n.fetchInbox():s.includes("/next-actions")?await n.fetchNextActions():s.includes("/waiting")?await n.fetchWaiting():s.includes("/someday")?await n.fetchSomeday():s.includes("/today")?await n.fetchToday():s.includes("/tomorrow")&&await n.fetchTomorrow()},{deep:!0}),(s,o)=>{var D,V;const b=se("router-link"),w=se("router-view");return a(),u("div",go,[e("div",mo,[e("aside",{class:Z(["fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",h.value?"translate-x-0":"-translate-x-full lg:translate-x-0"])},[e("div",ko,[o[22]||(o[22]=e("div",{class:"hidden lg:flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},[e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"},"GTD TODO")],-1)),e("div",yo,[e("div",fo,[o[7]||(o[7]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Рабочие пространства ",-1)),e("button",{onClick:o[0]||(o[0]=r=>i.value=!0),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Создать workspace"},[...o[6]||(o[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",xo,[(a(!0),u(re,null,ae(U.value,r=>(a(),u("div",{key:r.id,class:Z(["flex items-center rounded-lg transition-colors",l.value.includes(r.id)?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[e("label",bo,[e("input",{type:"checkbox",checked:l.value.includes(r.id),onChange:j=>H(r),class:"mr-3 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"},null,40,ho),e("span",{class:Z(["truncate",l.value.includes(r.id)?"text-primary-700 dark:text-primary-400 font-medium":"text-gray-700 dark:text-gray-300"])},$(r.name),3)]),e("div",{class:"relative",onClick:o[2]||(o[2]=L(()=>{},["stop"]))},[e("button",{onClick:j=>ze(r.id),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors"},[...o[8]||(o[8]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})],-1)])],8,wo),C(ee,{name:"dropdown"},{default:E(()=>[S.value===r.id?(a(),u("div",$o,[e("button",{onClick:j=>He(r),class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"}," Участники ",8,Co),ie(r)?(a(),u("button",{key:0,onClick:j=>Le(r),class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"}," Переименовать ",8,Mo)):_("",!0),ie(r)?(a(),u("button",{key:1,onClick:j=>Oe(r),class:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"}," Добавить пользователя ",8,jo)):_("",!0),ie(r)?_("",!0):(a(),u("button",{key:2,onClick:o[1]||(o[1]=j=>S.value=null),class:"w-full px-4 py-2 text-left text-sm text-gray-500 italic",disabled:""}," Нет доступных действий "))])):_("",!0)]),_:2},1024)])],2))),128))])]),e("nav",_o,[e("div",So,[C(X,{to:"/workspaces/:id/inbox",icon:"inbox",count:B.value.inbox,"drop-status":"inbox",onTaskDropped:J},{default:E(()=>[...o[9]||(o[9]=[Q(" Входящие ",-1)])]),_:1},8,["count"])]),e("div",To,[C(X,{to:"/workspaces/:id/today",icon:"calendar",count:B.value.today,"drop-status":"today",onTaskDropped:J},{default:E(()=>[...o[10]||(o[10]=[Q(" Сегодня ",-1)])]),_:1},8,["count"]),C(X,{to:"/workspaces/:id/next-actions",icon:"lightning",count:B.value.next_actions,"drop-status":"next_action",onTaskDropped:J},{default:E(()=>[...o[11]||(o[11]=[Q(" Следующие ",-1)])]),_:1},8,["count"]),C(X,{to:"/workspaces/:id/tomorrow",icon:"calendar-days",count:B.value.tomorrow,"drop-status":"tomorrow",onTaskDropped:J},{default:E(()=>[...o[12]||(o[12]=[Q(" Завтра ",-1)])]),_:1},8,["count"]),C(pe,{to:"/workspaces/:id/calendar",icon:"calendar-days",count:O.value},{default:E(()=>[...o[13]||(o[13]=[Q(" Календарь ",-1)])]),_:1},8,["count"]),C(X,{to:"/workspaces/:id/someday",icon:"archive",count:B.value.someday,"drop-status":"someday",onTaskDropped:J},{default:E(()=>[...o[14]||(o[14]=[Q(" Когда-нибудь ",-1)])]),_:1},8,["count"]),C(X,{to:"/workspaces/:id/waiting",icon:"clock",count:B.value.waiting,"drop-status":"waiting",onTaskDropped:J},{default:E(()=>[...o[15]||(o[15]=[Q(" Ожидание ",-1)])]),_:1},8,["count"])]),e("div",Ao,[e("div",{class:"flex items-center justify-between px-3 mb-3"},[o[17]||(o[17]=e("h3",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Проекты ",-1)),e("button",{onClick:ue,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Создать проект"},[...o[16]||(o[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",Wo,[(a(!0),u(re,null,ae(A.value,r=>{var j;return a(),u("div",{key:r.id,class:"flex items-center justify-between group px-3 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[C(b,{to:`/workspaces/${(j=q.value)==null?void 0:j.id}/projects/${r.id}`,class:"flex items-center space-x-2 flex-1 min-w-0"},{default:E(()=>[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:Ke({backgroundColor:r.color||"#3B82F6"})},null,4),e("span",Bo,$(r.name),1),r.tasks_count>0?(a(),u("span",Eo," ("+$(r.tasks_count)+") ",1)):_("",!0)]),_:2},1032,["to"]),e("button",{onClick:L(ve=>Ae(r),["stop"]),class:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 transition-opacity",title:"Архивировать"},[...o[18]||(o[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)])],8,Vo)])}),128)),A.value.length===0?(a(),u("div",Po," Нет проектов ")):_("",!0)])]),e("div",Do,[o[20]||(o[20]=e("h3",{class:"px-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3"}," Организация ",-1)),e("div",zo,[C(pe,{to:"/workspaces/:id/goals",icon:"target"},{default:E(()=>[...o[19]||(o[19]=[Q(" Цели ",-1)])]),_:1})])])]),e("div",Lo,[e("div",Ho,[e("div",Oo,[e("div",Io,$(G.value),1),e("div",Ro,[e("div",qo,$((D=P.value)==null?void 0:D.name),1),e("div",Uo,$((V=P.value)==null?void 0:V.email),1)])]),e("button",{onClick:de,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...o[21]||(o[21]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1)])])])])])],2),h.value?(a(),u("div",{key:0,onClick:o[3]||(o[3]=r=>h.value=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})):_("",!0),e("main",Qo,[C(Ct,{user:P.value,onQuickAddTask:_e,onQuickAddProject:ue,onQuickAddGoal:We,onSearch:Ve,onLogout:de,onProfile:Pe,onSettings:De,onToggleSidebar:o[4]||(o[4]=r=>h.value=!h.value)},null,8,["user"]),e("div",Zo,[C(w)])])]),C(Wt,{show:i.value,onClose:o[5]||(o[5]=r=>i.value=!1),onSubmit:je},null,8,["show"]),C(Ye,{show:t.value,"server-error":x.value,onClose:Ee,onSubmit:Be},null,8,["show","server-error"]),C(Ot,{show:I.value,workspace:p.value,onClose:Ie,onSubmit:Qe},null,8,["show","workspace"]),C(Nt,{show:R.value,workspace:p.value,onClose:Ue,onSubmit:Ze},null,8,["show","workspace"]),C(po,{show:T.value,workspace:p.value,onClose:Re,onMemberRemoved:qe},null,8,["show","workspace"]),C(tt,{show:W.value,project:c.value,"server-error":d.value,onClose:Te,onSubmit:Se},null,8,["show","project","server-error"])])}}},es=te(No,[["__scopeId","data-v-8bd755a8"]]);export{es as default};
